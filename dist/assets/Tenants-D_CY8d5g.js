import{r as g,j as e,F as I,w as R,x as Q,y as X,z as V,A as q,B as J,b as F}from"./index-mmO7rIvK.js";const z=(s=9e3)=>{const n=new AbortController,i=setTimeout(()=>n.abort("timeout"),s);return{signal:n.signal,done:()=>clearTimeout(i)}},k=async(s,n={})=>{let i;for(const r of s){const l=z(n.timeoutMs||9e3);try{const m=await F.get(r,{...n,signal:l.signal});return l.done(),m==null?void 0:m.data}catch(m){l.done(),i=m}}throw i||new Error("All GET endpoints failed")},D=async(s,n,i={})=>{let r;for(const l of s){const m=z(i.timeoutMs||9e3);try{const o=await F.post(l,n,{...i,signal:m.signal});return m.done(),(o==null?void 0:o.data)??!0}catch(o){m.done(),r=o}}throw r||new Error("All POST endpoints failed")},K=async(s,n,i={})=>{var l;let r;for(const m of s){const o=z(i.timeoutMs||9e3);try{const p=await F.patch(m,n,{...i,signal:o.signal});return o.done(),(p==null?void 0:p.data)??!0}catch(p){o.done();const h=(l=p==null?void 0:p.response)==null?void 0:l.status;h!==404&&h!==405&&(r=p)}}throw r||new Error("No PATCH endpoint matched")};function L(s={}){var S,N,C,A,w,E,T,_,$,v,t,a,x,c,b,f,y,P,U;const n=s.id??s.tenantId??s.orgId??s.organizationId??s.uuid??s._id??null,i=s.name??s.tenantName??s.company??s.orgName??s.organization??"—",r=(s.planCode??s.plan_code??((S=s.plan)==null?void 0:S.code)??((N=s.subscription)==null?void 0:N.plan_code)??((C=s.subscription)==null?void 0:C.planCode)??s.plan??"").toString().toLowerCase(),l=((A=s.plan)==null?void 0:A.name)??((w=s.subscription)==null?void 0:w.plan_name)??((T=(E=s.subscription)==null?void 0:E.plan)==null?void 0:T.name)??(r?r.replace(/(^|_)(\w)/g,(ie,G,H)=>(G?" ":"")+H.toUpperCase()):"—"),m=(s.status??((_=s.subscription)==null?void 0:_.status)??(($=s.billing)==null?void 0:$.status)??(s.active===!0?"active":s.active===!1?"inactive":"unknown")).toString().toLowerCase(),o=s.seats??((v=s.subscription)==null?void 0:v.seats)??((t=s.limits)==null?void 0:t.staff)??((a=s.limits)==null?void 0:a.users)??s.maxUsers??null,p=s.staffCount??s.staff_count??s.usersCount??s.users_count??s.employeesCount??s.membersCount??((x=s.staff)==null?void 0:x.length)??((c=s.users)==null?void 0:c.length)??null,h=s.trialEndsAt??s.trial_end??s.trial_ends_at??((b=s.subscription)==null?void 0:b.trial_end)??"",d=s.billingEmail??s.billing_email??((f=s.billing)==null?void 0:f.email)??s.ownerEmail??"",u=s.currency??((y=s.billing)==null?void 0:y.currency)??((P=s.payment)==null?void 0:P.currency)??"USD",j=s.createdAt??s.created_at??s.created??((U=s.meta)==null?void 0:U.createdAt)??"";return{raw:s,id:n,name:i,planCode:r,planLabel:l,status:m,seats:o,staffCount:p,trialEndsAt:h,billingEmail:d,currency:u,createdAt:j}}async function W(){const s=await k(["/admin/tenants/stats","/system/tenants/stats","/tenants/stats","/orgs/stats","/organizations/stats"],{timeoutMs:8e3}).catch(()=>null);if(!s)return{};const n=Array.isArray(s)?s:(s==null?void 0:s.items)||(s==null?void 0:s.data)||(s==null?void 0:s.tenants)||[],i=Array.isArray(n)?n:[],r={};return i.forEach(l=>{var o;const m=l.id??l.tenantId??l.orgId??l.organizationId??l.uuid??l._id??null;m&&(r[m]={staffCount:l.staffCount??l.usersCount??l.membersCount??l.users??l.staff??null,seats:l.seats??l.staffLimit??l.usersLimit??l.maxUsers??((o=l.limits)==null?void 0:o.users)??null})}),r}async function Y(){const s=await k(["/tenants/me","/tenant/me","/account/tenant","/account/organization","/org/tenant","/org/me","/org","/organization"],{timeoutMs:6e3}).catch(()=>null);if(s&&typeof s=="object")return[L(s)];try{const{data:n}=await F.get("/auth/me"),i=(n==null?void 0:n.tenant)||(n==null?void 0:n.organization)||(n==null?void 0:n.org)||null;return i?[L(i)]:[]}catch{return[]}}async function B({q:s=""}={}){const n=["/admin/tenants","/system/tenants","/tenants","/orgs","/organizations"],i=s?[{params:{q:s}},{params:{query:s}},{params:{search:s}}]:[{}];for(const r of i)try{const l=await k(n,{...r,timeoutMs:9e3}),m=Array.isArray(l)?l:(l==null?void 0:l.items)||(l==null?void 0:l.data)||(l==null?void 0:l.results)||[],o=Array.isArray(m)?m:[];if(o.length){const p=o.map(L);if(p.some(h=>h.staffCount==null||h.seats==null)){const h=await W().catch(()=>({}));p.forEach(d=>{if(!d.id)return;const u=h[d.id];u&&(d.staffCount==null&&u.staffCount!=null&&(d.staffCount=u.staffCount),d.seats==null&&u.seats!=null&&(d.seats=u.seats))})}return p}}catch{}return await Y()}async function O(s){const n=await k([`/admin/tenants/${s}/invoices`,`/tenants/${s}/invoices`,`/orgs/${s}/invoices`,`/organizations/${s}/invoices`],{timeoutMs:9e3}).catch(()=>[]);return(Array.isArray(n)?n:Array.isArray(n==null?void 0:n.invoices)?n.invoices:[]).map(r=>({id:r.id??r.number,number:r.number??r.id??"—",currency:r.currency??"USD",amount:r.amount??(r.amount_cents??r.amountCents??r.total_cents??r.total??0)/(r.amount?1:100),date:r.date??r.createdAt??r.created_at??"",status:(r.status??"open").toLowerCase(),pdfUrl:r.pdfUrl??r.url??"",due:r.due_date??r.dueDate??""}))}async function Z(){const s=await k(["/admin/plans","/system/plans","/billing/plans","/plans"],{timeoutMs:7e3}).catch(()=>[]),i=(Array.isArray(s)?s:Array.isArray(s==null?void 0:s.plans)?s.plans:Array.isArray(s==null?void 0:s.items)?s.items:Array.isArray(s==null?void 0:s.data)?s.data:[]).map(r=>({code:(r.code??r.id??r.planCode??"").toString().toLowerCase(),label:r.name??r.label??(r.code??r.planCode??"").toString()}));return i.length?i:[{code:"basic",label:"Basic"},{code:"pro",label:"Pro"},{code:"premium",label:"Premium"}]}async function ee(s,n){const i={planCode:n.planCode,seats:n.seats??null,trialEndsAt:n.trialEndsAt??null,billingEmail:n.billingEmail??void 0,status:n.status??void 0},r=[`/admin/tenants/${s}/subscription`,`/admin/tenants/${s}`,`/tenants/${s}`,`/orgs/${s}`,`/organizations/${s}`];return K(r,i,{timeoutMs:9e3})}async function se(s,n){const i=[`/admin/tenants/${s}/notify`,`/notifications/tenants/${s}`,`/announce/tenants/${s}`];return D(i,n,{timeoutMs:9e3})}async function te(s,n){const i=[`/admin/tenants/${s}/support`,"/support/tickets","/system/support/tickets"],r={...n,tenantId:s};return D(i,r,{timeoutMs:9e3})}async function ae(s){const n=[`/admin/tenants/${s}/invoices/sync`,`/billing/tenants/${s}/invoices/sync`,`/tenants/${s}/invoices/sync`];return D(n,{},{timeoutMs:9e3})}function ne(){const[s,n]=g.useState([]);return{add:(l,m="ok")=>{const o=Math.random().toString(36).slice(2);n(p=>[...p,{id:o,msg:l,type:m}]),setTimeout(()=>n(p=>p.filter(h=>h.id!==o)),2800)},View:()=>e.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:s.map(l=>e.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${l.type==="error"?"bg-rose-600":"bg-emerald-600"}`,children:l.msg},l.id))})}}function oe(){const[s,n]=g.useState(!0),[i,r]=g.useState([]),[l,m]=g.useState([]),[o,p]=g.useState(""),h=g.useRef(null),[d,u]=g.useState({open:!1,t:null,invoices:[],busy:!1,err:""}),{add:j,View:S}=ne(),N=async(t=o)=>{var a,x;n(!0);try{const[c,b]=await Promise.all([B({q:t}),Z()]);r(c),m(b),c.length||console.info("[Admin/Tenants] No list returned. Backend may only expose self org endpoints.")}catch(c){j(((x=(a=c==null?void 0:c.response)==null?void 0:a.data)==null?void 0:x.error)||(c==null?void 0:c.message)||"Failed to load tenants","error")}finally{n(!1)}};g.useEffect(()=>{N("")},[]);const C=()=>N(o),A=async t=>{u(a=>({...a,open:!0,t,invoices:[],busy:!0,err:""}));try{const a=await O(t.id);u(x=>({...x,invoices:a,busy:!1}))}catch(a){u(x=>({...x,busy:!1,err:(a==null?void 0:a.message)||"Failed to load invoices"}))}},w=()=>u({open:!1,t:null,invoices:[],busy:!1,err:""}),E=async()=>{const t=d.t;if(t!=null&&t.id){u(a=>({...a,busy:!0,err:""}));try{await ee(t.id,{planCode:t.planCode,seats:t.seats,trialEndsAt:t.trialEndsAt||null,billingEmail:t.billingEmail,status:t.status}),j("Subscription updated"),await N(o);const a=(await B({q:o})).find(x=>x.id===t.id)||t;u(x=>({...x,t:a,busy:!1}))}catch(a){u(x=>{var c,b;return{...x,busy:!1,err:((b=(c=a==null?void 0:a.response)==null?void 0:c.data)==null?void 0:b.error)||(a==null?void 0:a.message)||"Save failed"}})}}},T=async(t,a)=>{const x=d.t;u(c=>({...c,busy:!0,err:""}));try{await se(x.id,{subject:t,message:a,channels:["in_app","email"]}),j("Announcement sent"),u(c=>({...c,busy:!1}))}catch(c){u(b=>{var f,y;return{...b,busy:!1,err:((y=(f=c==null?void 0:c.response)==null?void 0:f.data)==null?void 0:y.error)||(c==null?void 0:c.message)||"Failed to send"}})}},_=async(t,a)=>{const x=d.t;u(c=>({...c,busy:!0,err:""}));try{await te(x.id,{subject:t,body:a,priority:"normal",source:"admin"}),j("Support ticket created"),u(c=>({...c,busy:!1}))}catch(c){u(b=>{var f,y;return{...b,busy:!1,err:((y=(f=c==null?void 0:c.response)==null?void 0:f.data)==null?void 0:y.error)||(c==null?void 0:c.message)||"Failed to create ticket"}})}},$=async()=>{const t=d.t;if(t!=null&&t.id){u(a=>({...a,busy:!0,err:""}));try{await ae(t.id);const a=await O(t.id);u(x=>({...x,invoices:a,busy:!1})),j("Invoice sync triggered")}catch(a){u(x=>{var c,b;return{...x,busy:!1,err:((b=(c=a==null?void 0:a.response)==null?void 0:c.data)==null?void 0:b.error)||(a==null?void 0:a.message)||"Failed to sync invoices"}})}}},v=g.useMemo(()=>{const t=i.reduce((x,c)=>x+(Number(c.staffCount)||0),0),a=i.reduce((x,c)=>x+(Number(c.seats)||0),0);return{tenants:i.length,staff:t,seats:a}},[i]);return e.jsxs("div",{className:"p-4",children:[e.jsx(S,{}),e.jsx("h1",{className:"text-xl font-semibold mb-3",children:"Admin · Tenants"}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:[e.jsxs("span",{className:"mr-3",children:["Total tenants: ",e.jsx("b",{children:v.tenants})]}),e.jsxs("span",{className:"mr-3",children:["Total staff: ",e.jsx("b",{children:v.staff})]}),e.jsxs("span",{children:["Allocated seats: ",e.jsx("b",{children:v.seats})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-2 top-[10px] text-slate-400"}),e.jsx("input",{ref:h,value:o,onChange:t=>p(t.target.value),placeholder:"Search…",className:"pl-8 pr-3 py-2 border rounded-md w-72 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsx("button",{onClick:C,className:"px-3 py-2 rounded bg-slate-900 text-white hover:bg-slate-800",children:"Search"}),e.jsxs("button",{onClick:()=>N(o),className:"px-3 py-2 rounded border bg-white dark:bg-slate-900 dark:border-slate-700 flex items-center gap-2",title:"Refresh",children:[e.jsx(R,{})," Refresh"]})]})]}),e.jsx("div",{className:"overflow-x-auto bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-2xl",children:s?e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"}):e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"text-slate-600 dark:text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3",children:"Name"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Plan"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Status"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Trial ends"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Staff"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Seats"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Billing"}),e.jsx("th",{className:"text-left py-2 px-3 w-1"})]})}),e.jsxs("tbody",{className:"text-slate-800 dark:text-slate-200",children:[i.map(t=>e.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 px-3",children:t.name}),e.jsx("td",{className:"py-2 px-3",children:t.planLabel}),e.jsx("td",{className:"py-2 px-3 capitalize",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${t.status==="active"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":t.status==="trialing"||t.status==="trial"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":t.status==="past_due"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}`,children:t.status})}),e.jsx("td",{className:"py-2 px-3",children:t.trialEndsAt?String(t.trialEndsAt).slice(0,10):"—"}),e.jsx("td",{className:"py-2 px-3",children:t.staffCount??"—"}),e.jsx("td",{className:"py-2 px-3",children:t.seats??"—"}),e.jsx("td",{className:"py-2 px-3",children:t.billingEmail||"—"}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("button",{onClick:()=>A(t),className:"inline-flex items-center gap-1 px-3 py-1.5 rounded bg-blue-600 text-white hover:bg-blue-700",title:"Manage",children:[e.jsx(Q,{})," Manage"]})})]},t.id||t.name)),!i.length&&e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"py-6 text-center text-slate-500",children:"No tenants found."})})]})]})}),e.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:"This console is visible only to system administrators/owners (plus any roles you allowed in routing)."}),d.open&&e.jsxs("div",{className:"fixed inset-0 z-[70] flex",children:[e.jsx("div",{className:"flex-1 bg-black/40",onClick:w}),e.jsxs("div",{className:"w-[560px] max-w-[90vw] h-full bg-white dark:bg-slate-900 border-l border-slate-200 dark:border-slate-800 shadow-xl overflow-y-auto",children:[e.jsxs("div",{className:"h-14 flex items-center justify-between px-3 border-b border-slate-200 dark:border-slate-800",children:[e.jsx("div",{className:"font-semibold",children:"Manage Tenant"}),e.jsx("button",{className:"p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-800",onClick:w,children:e.jsx(X,{})})]}),d.err&&e.jsxs("div",{className:"m-3 px-3 py-2 rounded bg-rose-50 text-rose-700 dark:bg-rose-900/20 dark:text-rose-300 text-sm flex items-center gap-2",children:[e.jsx(V,{})," ",d.err]}),d.t?e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("section",{className:"border rounded-2xl p-3",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-semibold",children:d.t.name}),e.jsx("div",{className:"text-slate-500 text-xs mt-0.5",children:d.t.id?`ID: ${d.t.id}`:null})]})}),e.jsxs("section",{className:"border rounded-2xl p-3",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Subscription"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("label",{className:"text-sm",children:[e.jsx("div",{className:"mb-1",children:"Plan"}),e.jsxs("select",{value:d.t.planCode||"",onChange:t=>u(a=>({...a,t:{...a.t,planCode:t.target.value,planLabel:t.target.options[t.target.selectedIndex].text}})),className:"w-full border rounded px-2 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:"",children:"— Select —"}),l.map(t=>e.jsx("option",{value:t.code,children:t.label},t.code))]})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("div",{className:"mb-1",children:"Seats (staff limit)"}),e.jsx("input",{type:"number",value:d.t.seats??"",onChange:t=>u(a=>({...a,t:{...a.t,seats:t.target.value===""?null:Number(t.target.value)}})),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("div",{className:"mb-1",children:"Billing email"}),e.jsx("input",{value:d.t.billingEmail||"",onChange:t=>u(a=>({...a,t:{...a.t,billingEmail:t.target.value}})),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("div",{className:"mb-1",children:"Trial ends"}),e.jsx("input",{type:"date",value:d.t.trialEndsAt?String(d.t.trialEndsAt).slice(0,10):"",onChange:t=>u(a=>({...a,t:{...a.t,trialEndsAt:t.target.value}})),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsxs("label",{className:"text-sm",children:[e.jsx("div",{className:"mb-1",children:"Status"}),e.jsxs("select",{value:d.t.status||"active",onChange:t=>u(a=>({...a,t:{...a.t,status:t.target.value}})),className:"w-full border rounded px-2 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"trialing",children:"trialing"}),e.jsx("option",{value:"suspended",children:"suspended"}),e.jsx("option",{value:"cancelled",children:"cancelled"}),e.jsx("option",{value:"past_due",children:"past_due"})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:E,disabled:d.busy,className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",children:[e.jsx(q,{})," ",d.busy?"Saving…":"Save subscription"]}),e.jsxs("button",{onClick:$,disabled:d.busy,className:"inline-flex items-center gap-2 px-3 py-2 rounded border bg-white dark:bg-slate-900 dark:border-slate-700",title:"Trigger invoice sync",children:[e.jsx(R,{})," Sync invoices"]})]})]}),e.jsxs("section",{className:"border rounded-2xl p-3",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Reach out"}),e.jsx(re,{onSend:(t,a)=>T(t,a),busy:d.busy}),e.jsx("div",{className:"h-3"}),e.jsx(le,{onSend:(t,a)=>_(t,a),busy:d.busy})]}),e.jsxs("section",{className:"border rounded-2xl p-3",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Invoices"}),d.busy&&!d.invoices.length?e.jsx("div",{className:"text-sm text-slate-500",children:"Loading invoices…"}):d.invoices.length?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"text-slate-600 dark:text-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 pr-4",children:"Date"}),e.jsx("th",{className:"text-left py-2 pr-4",children:"Number"}),e.jsx("th",{className:"text-left py-2 pr-4",children:"Amount"}),e.jsx("th",{className:"text-left py-2 pr-4",children:"Status"}),e.jsx("th",{className:"text-left py-2",children:"PDF"})]})}),e.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:d.invoices.map(t=>e.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-800",children:[e.jsx("td",{className:"py-2 pr-4",children:String(t.date||"").slice(0,10)}),e.jsx("td",{className:"py-2 pr-4",children:t.number}),e.jsx("td",{className:"py-2 pr-4",children:Number(t.amount||0).toLocaleString(void 0,{style:"currency",currency:t.currency||"USD"})}),e.jsx("td",{className:"py-2 pr-4",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${t.status==="paid"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":t.status==="past_due"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-300":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300"}`,children:t.status})}),e.jsx("td",{className:"py-2",children:t.pdfUrl?e.jsx("a",{href:t.pdfUrl,target:"_blank",rel:"noreferrer",className:"text-blue-600 dark:text-blue-300 underline",children:"Download"}):"—"})]},t.id))})]})}):e.jsx("div",{className:"text-sm text-slate-500",children:"No invoices."})]})]}):e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"})]})]})]})}function M({label:s,children:n}){return e.jsxs("label",{className:"block text-sm",children:[e.jsx("div",{className:"mb-1",children:s}),n]})}function re({onSend:s,busy:n}){const[i,r]=g.useState(""),[l,m]=g.useState("");return e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Send announcement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(M,{label:"Subject",children:e.jsx("input",{value:i,onChange:o=>r(o.target.value),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(M,{label:"Message",children:e.jsx("textarea",{rows:3,value:l,onChange:o=>m(o.target.value),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{onClick:()=>s(i,l),disabled:n||!i||!l,className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-60",children:[e.jsx(J,{})," Send"]})})]})}function le({onSend:s,busy:n}){const[i,r]=g.useState(""),[l,m]=g.useState("");return e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Open support ticket"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx(M,{label:"Subject",children:e.jsx("input",{value:i,onChange:o=>r(o.target.value),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(M,{label:"Details",children:e.jsx("textarea",{rows:3,value:l,onChange:o=>m(o.target.value),className:"w-full border rounded px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})})})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{onClick:()=>s(i,l),disabled:n||!i||!l,className:"inline-flex items-center gap-2 px-3 py-2 rounded bg-slate-900 text-white hover:bg-slate-800 disabled:opacity-60",children:[e.jsx(V,{})," Create ticket"]})})]})}export{oe as default};
