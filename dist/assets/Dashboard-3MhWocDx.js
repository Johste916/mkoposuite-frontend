import{r as c,g as tt,j as r,L as xe}from"./index-BWN1fagU.js";import{D as Nt}from"./download-BQzNOsNI.js";import{C as Se}from"./circle-plus-CRmM0NBS.js";import{c as G}from"./createLucideIcon-D-cDB1eD.js";import{i as Ke,S as At,a as be,r as St,u as at,R as It,b as Pt,c as Ot,d as Ct,g as Bt,e as rt,f as Et,h as Dt,j as Lt,k as ve,l as Rt,G as _t,C as Mt,m as nt,n as Tt,L as ge,o as $t,p as Ft,t as Kt,q as ze,s as st,v as it,w as ot,x as lt,y as zt,z as ct,A as Wt,J as Ut,B as H,D as Vt,E as Gt,F as qt,H as Xt,I as We,K as V,M as Ht,N as Q,O as ee,P as ae,Q as Zt,T as dt,U as ut,V as mt,W as Yt,X as Jt,Y as Ue,Z as Qt,_ as ea,$ as Ve,a0 as ta,a1 as Re,a2 as Ge,a3 as aa,a4 as ra,a5 as Ie,a6 as Pe,a7 as Oe,a8 as Ce,a9 as Be,aa as Ee}from"./CartesianChart-DB_tOyNY.js";import{C as na}from"./chevron-down-4253gXs-.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],qe=G("chart-no-axes-column",sa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],oa=G("clipboard-list",ia);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],De=G("credit-card",la);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Z=G("dollar-sign",ca);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],ua=G("thumbs-down",da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xe=G("triangle-alert",ma);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fa=G("users",ha);var pa="Invariant failed";function xa(t,e){throw new Error(pa)}var va=["x","y"];function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},_e.apply(null,arguments)}function He(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function le(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?He(Object(a),!0).forEach(function(n){ga(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function ga(t,e,a){return(e=ya(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function ya(t){var e=ba(t,"string");return typeof e=="symbol"?e:e+""}function ba(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ja(t,e){if(t==null)return{};var a,n,o=wa(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function wa(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}function ka(t,e){var{x:a,y:n}=t,o=ja(t,va),l="".concat(a),d=parseInt(l,10),u="".concat(n),v=parseInt(u,10),h="".concat(e.height||o.height),f=parseInt(h,10),p="".concat(e.width||o.width),g=parseInt(p,10);return le(le(le(le(le({},e),o),d?{x:d}:{}),v?{y:v}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function ht(t){return c.createElement(At,_e({shapeType:"rectangle",propTransformer:ka,activeClassName:"recharts-active-bar"},t))}var Na=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(Ke(e))return e;var l=Ke(n)||be(n);return l?e(n,o):(l||xa(),a)}},Aa=["onMouseEnter","onMouseLeave","onClick"],Sa=["value","background","tooltipPosition"],Ia=["id"],Pa=["onMouseEnter","onClick","onMouseLeave"];function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},te.apply(null,arguments)}function Ze(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ze(Object(a),!0).forEach(function(n){Oa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Oa(t,e,a){return(e=Ca(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ca(t){var e=Ba(t,"string");return typeof e=="symbol"?e:e+""}function Ba(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ye(t,e){if(t==null)return{};var a,n,o=Ea(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function Ea(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}var Da=t=>{var{dataKey:e,name:a,fill:n,legendType:o,hide:l}=t;return[{inactive:l,dataKey:e,type:o,color:n,value:rt(a,e),payload:t}]};function La(t){var{dataKey:e,stroke:a,strokeWidth:n,fill:o,name:l,hide:d,unit:u}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:rt(l,e),hide:d,type:t.tooltipType,color:t.fill,unit:u}}}function Ra(t){var e=ve(st),{data:a,dataKey:n,background:o,allOtherBarProps:l}=t,{onMouseEnter:d,onMouseLeave:u,onClick:v}=l,h=ye(l,Aa),f=it(d,n),p=ot(u),g=lt(v,n);if(!o||a==null)return null;var x=zt(o,!1);return c.createElement(c.Fragment,null,a.map((N,j)=>{var{value:B,background:b,tooltipPosition:w}=N,m=ye(N,Sa);if(!b)return null;var O=f(N,j),k=p(N,j),E=g(N,j),R=M(M(M(M(M({option:o,isActive:String(j)===e},m),{},{fill:"#eee"},b),x),ct(h,N,j)),{},{onMouseEnter:O,onMouseLeave:k,onClick:E,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return c.createElement(ht,te({key:"background-bar-".concat(j)},R))}))}function ft(t){var{data:e,props:a,showLabels:n}=t,o=Vt(a),{id:l}=o,d=ye(o,Ia),{shape:u,dataKey:v,activeBar:h}=a,f=ve(st),p=ve(Gt),{onMouseEnter:g,onClick:x,onMouseLeave:N}=a,j=ye(a,Pa),B=it(g,v),b=ot(N),w=lt(x,v);return e?c.createElement(c.Fragment,null,e.map((m,O)=>{var k=h&&String(O)===f&&(p==null||v===p),E=k?h:u,R=M(M(M({},d),m),{},{isActive:k,option:E,index:O,dataKey:v});return c.createElement(ge,te({className:"recharts-bar-rectangle"},ct(j,m,O),{onMouseEnter:B(m,O),onMouseLeave:b(m,O),onClick:w(m,O),key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(O)}),c.createElement(ht,R))}),n&&qt.renderCallByParent(a,e)):null}function _a(t){var{props:e,previousRectanglesRef:a}=t,{data:n,layout:o,isAnimationActive:l,animationBegin:d,animationDuration:u,animationEasing:v,onAnimationEnd:h,onAnimationStart:f}=e,p=a.current,g=Wt(e,"recharts-bar-"),[x,N]=c.useState(!1),j=c.useCallback(()=>{typeof h=="function"&&h(),N(!1)},[h]),B=c.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return c.createElement(Ut,{begin:d,duration:u,isActive:l,easing:v,onAnimationEnd:j,onAnimationStart:B,key:g},b=>{var w=b===1?n:n==null?void 0:n.map((m,O)=>{var k=p&&p[O];if(k)return M(M({},m),{},{x:H(k.x,m.x,b),y:H(k.y,m.y,b),width:H(k.width,m.width,b),height:H(k.height,m.height,b)});if(o==="horizontal"){var E=H(0,m.height,b);return M(M({},m),{},{y:m.y+m.height-E,height:E})}var R=H(0,m.width,b);return M(M({},m),{},{width:R})});return b>0&&(a.current=w??null),w==null?null:c.createElement(ge,null,c.createElement(ft,{props:e,data:w,showLabels:!x}))})}function Ma(t){var{data:e,isAnimationActive:a}=t,n=c.useRef(null);return a&&e&&e.length&&(n.current==null||n.current!==e)?c.createElement(_a,{previousRectanglesRef:n,props:t}):c.createElement(ft,{props:t,data:e,showLabels:!0})}var pt=0,Ta=(t,e)=>{var a=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:a,errorVal:nt(t,e)}};class $a extends c.PureComponent{render(){var{hide:e,data:a,dataKey:n,className:o,xAxisId:l,yAxisId:d,needClip:u,background:v,id:h}=this.props;if(e)return null;var f=Tt("recharts-bar",o),p=h;return c.createElement(ge,{className:f,id:h},u&&c.createElement("defs",null,c.createElement($t,{clipPathId:p,xAxisId:l,yAxisId:d})),c.createElement(ge,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},c.createElement(Ra,{data:a,dataKey:n,background:v,allOtherBarProps:this.props}),c.createElement(Ma,this.props)),this.props.children)}}var Fa={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!_t.isSsr,legendType:"rect",minPointSize:pt,xAxisId:0,yAxisId:0};function Ka(t){var{xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:l,activeBar:d,animationBegin:u,animationDuration:v,animationEasing:h,isAnimationActive:f}=t,{needClip:p}=Et(e,a),g=Dt(),x=at(),N=Lt(t.children,Mt),j=ve(w=>fr(w,e,a,x,t.id,N));if(g!=="vertical"&&g!=="horizontal")return null;var B,b=j==null?void 0:j[0];return b==null||b.height==null||b.width==null?B=0:B=g==="vertical"?b.height/2:b.width/2,c.createElement(Rt,{xAxisId:e,yAxisId:a,data:j,dataPointFormatter:Ta,errorBarOffset:B},c.createElement($a,te({},t,{layout:g,needClip:p,data:j,xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:l,activeBar:d,animationBegin:u,animationDuration:v,animationEasing:h,isAnimationActive:f})))}function za(t){var{layout:e,barSettings:{dataKey:a,minPointSize:n},pos:o,bandSize:l,xAxis:d,yAxis:u,xAxisTicks:v,yAxisTicks:h,stackedData:f,displayedData:p,offset:g,cells:x}=t,N=e==="horizontal"?u:d,j=f?N.scale.domain():null,B=Ft({numericAxis:N});return p.map((b,w)=>{var m,O,k,E,R,q;f?m=Kt(f[w],j):(m=nt(b,a),Array.isArray(m)||(m=[B,m]));var D=Na(n,pt)(m[1],w);if(e==="horizontal"){var re,[ne,X]=[u.scale(m[0]),u.scale(m[1])];O=ze({axis:d,ticks:v,bandSize:l,offset:o.offset,entry:b,index:w}),k=(re=X??ne)!==null&&re!==void 0?re:void 0,E=o.size;var se=ne-X;if(R=Xt(se)?0:se,q={x:O,y:g.top,width:E,height:g.height},Math.abs(D)>0&&Math.abs(R)<Math.abs(D)){var ue=We(R||D)*(Math.abs(D)-Math.abs(R));k-=ue,R+=ue}}else{var[ie,je]=[d.scale(m[0]),d.scale(m[1])];if(O=ie,k=ze({axis:u,ticks:h,bandSize:l,offset:o.offset,entry:b,index:w}),E=je-ie,R=o.size,q={x:g.left,y:k,width:g.width,height:R},Math.abs(D)>0&&Math.abs(E)<Math.abs(D)){var me=We(E||D)*(Math.abs(D)-Math.abs(E));E+=me}}if(O==null||k==null||E==null||R==null)return null;var we=M(M({},b),{},{x:O,y:k,width:E,height:R,value:f?m:m[1],payload:b,background:q,tooltipPosition:{x:O+E/2,y:k+R/2}},x&&x[w]&&x[w].props);return we}).filter(Boolean)}function J(t){var e=St(t,Fa),a=at();return c.createElement(It,{id:e.id,type:"bar"},n=>c.createElement(c.Fragment,null,c.createElement(Pt,{legendPayload:Da(e)}),c.createElement(Ot,{fn:La,args:e}),c.createElement(Ct,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Bt(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:a}),c.createElement(Ka,te({},e,{id:n}))))}J.displayName="Bar";function Ye(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function fe(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ye(Object(a),!0).forEach(function(n){Wa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Wa(t,e,a){return(e=Ua(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ua(t){var e=Va(t,"string");return typeof e=="symbol"?e:e+""}function Va(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ga=(t,e)=>e,qa=(t,e,a)=>a,Xa=(t,e,a,n)=>n,Ha=(t,e,a,n,o)=>o,de=V([ut,Ha],(t,e)=>t.filter(a=>a.type==="bar").find(a=>a.id===e)),Za=V([de],t=>t==null?void 0:t.maxBarSize),Ya=(t,e,a,n,o,l)=>l,Je=(t,e,a)=>{var n=a??t;if(!be(n))return Re(n,e,0)},Ja=V([ae,ut,Ga,qa,Xa],(t,e,a,n,o)=>e.filter(l=>t==="horizontal"?l.xAxisId===a:l.yAxisId===n).filter(l=>l.isPanorama===o).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),Qa=(t,e,a,n)=>{var o=ae(t);return o==="horizontal"?Ue(t,"yAxis",a,n):Ue(t,"xAxis",e,n)},er=(t,e,a)=>{var n=ae(t);return n==="horizontal"?Ve(t,"xAxis",e):Ve(t,"yAxis",a)},tr=(t,e,a)=>{var n={},o=t.filter(ta),l=t.filter(h=>h.stackId==null),d=o.reduce((h,f)=>(h[f.stackId]||(h[f.stackId]=[]),h[f.stackId].push(f),h),n),u=Object.entries(d).map(h=>{var[f,p]=h,g=p.map(N=>N.dataKey),x=Je(e,a,p[0].barSize);return{stackId:f,dataKeys:g,barSize:x}}),v=l.map(h=>{var f=[h.dataKey].filter(g=>g!=null),p=Je(e,a,h.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...v]},ar=V([Ja,ea,er],tr),rr=(t,e,a,n,o)=>{var l,d,u=de(t,e,a,n,o);if(u!=null){var v=ae(t),h=mt(t),{maxBarSize:f}=u,p=be(f)?h:f,g,x;return v==="horizontal"?(g=Q(t,"xAxis",e,n),x=ee(t,"xAxis",e,n)):(g=Q(t,"yAxis",a,n),x=ee(t,"yAxis",a,n)),(l=(d=dt(g,x,!0))!==null&&d!==void 0?d:p)!==null&&l!==void 0?l:0}},xt=(t,e,a,n)=>{var o=ae(t),l,d;return o==="horizontal"?(l=Q(t,"xAxis",e,n),d=ee(t,"xAxis",e,n)):(l=Q(t,"yAxis",a,n),d=ee(t,"yAxis",a,n)),dt(l,d)};function nr(t,e,a,n,o){var l=n.length;if(!(l<1)){var d=Re(t,a,0,!0),u,v=[];if(Ge(n[0].barSize)){var h=!1,f=a/l,p=n.reduce((b,w)=>b+(w.barSize||0),0);p+=(l-1)*d,p>=a&&(p-=(l-1)*d,d=0),p>=a&&f>0&&(h=!0,f*=.9,p=l*f);var g=(a-p)/2>>0,x={offset:g-d,size:0};u=n.reduce((b,w)=>{var m,O={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+d,size:h?f:(m=w.barSize)!==null&&m!==void 0?m:0}},k=[...b,O];return x=k[k.length-1].position,k},v)}else{var N=Re(e,a,0,!0);a-2*N-(l-1)*d<=0&&(d=0);var j=(a-2*N-(l-1)*d)/l;j>1&&(j>>=0);var B=Ge(o)?Math.min(j,o):j;u=n.reduce((b,w,m)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:N+(j+d)*m+(j-B)/2,size:B}}],v)}return u}}var sr=(t,e,a,n,o,l,d)=>{var u=be(d)?e:d,v=nr(a,n,o!==l?o:l,t,u);return o!==l&&v!=null&&(v=v.map(h=>fe(fe({},h),{},{position:fe(fe({},h.position),{},{offset:h.position.offset-o/2})}))),v},ir=V([ar,mt,Yt,Jt,rr,xt,Za],sr),or=(t,e,a,n)=>Q(t,"xAxis",e,n),lr=(t,e,a,n)=>Q(t,"yAxis",a,n),cr=(t,e,a,n)=>ee(t,"xAxis",e,n),dr=(t,e,a,n)=>ee(t,"yAxis",a,n),ur=V([ir,de],(t,e)=>{if(!(t==null||e==null)){var a=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(a!=null)return a.position}}),mr=(t,e)=>{var a=Qt(e);if(!(!t||a==null||e==null)){var{stackId:n}=e;if(n!=null){var o=t[n];if(o){var{stackedData:l}=o;if(l)return l.find(d=>d.key===a)}}}},hr=V([Qa,de],mr),fr=V([Ht,or,lr,cr,dr,ur,ae,Zt,xt,hr,de,Ya],(t,e,a,n,o,l,d,u,v,h,f,p)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:N}=u;if(!(f==null||l==null||d!=="horizontal"&&d!=="vertical"||e==null||a==null||n==null||o==null||v==null)){var{data:j}=f,B;if(j!=null&&j.length>0?B=j:B=g==null?void 0:g.slice(x,N+1),B!=null)return za({layout:d,barSettings:f,pos:l,bandSize:v,xAxis:e,yAxis:a,xAxisTicks:n,yAxisTicks:o,stackedData:h,displayedData:B,offset:t,cells:p})}}),pr=["axis","item"],Le=c.forwardRef((t,e)=>c.createElement(aa,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pr,tooltipPayloadSearcher:ra,categoricalChartProps:t,ref:e}));const F={borrowers:"/borrowers",loans:"/loans",repayments:"/repayments",expectedRepayments:"/repayments",deposits:"/deposits",withdrawals:"/withdrawals",savings:"/savings",defaultedLoans:"/loans",defaultedInterest:"/loans",outstandingLoan:"/loans",outstandingInterest:"/loans",writtenOff:"/loans",par:"/loans"},Qe="ms_dash_filters_v1",et="ms_dash_auto_refresh_v1";function W(t){const a=(t.startsWith("/")?t:`/${t}`).replace(/^\/api\//,"/"),n=a.startsWith("/api/")?a:`/api${a}`;return Array.from(new Set([a,n]))}function Y(t){return(t==null?void 0:t.name)==="CanceledError"||(t==null?void 0:t.code)==="ERR_CANCELED"||/abort|cancell?ed/i.test((t==null?void 0:t.message)||"")}async function ce(t=[],e={}){let a;for(const n of t)try{const o=await tt.get(n,e);return o==null?void 0:o.data}catch(o){a=o}throw a||new Error("No endpoint succeeded")}function xr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.branchId??a.code??String(a.name||"branch"),name:a.name??a.title??a.label??String(a.code||"—")}))}function vr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.userId??String(a.email||a.phone||"user"),name:a.name||[a.firstName,a.lastName].filter(Boolean).join(" ").trim()||a.username||a.email||a.phone||"—",roles:(a.roles||a.Roles||[]).map(n=>(n.name||n.code||"").toString().toLowerCase()),title:(a.title||a.jobTitle||"").toString().toLowerCase()}))}function gr(t){const e=[...t.roles||[],t.title||""].join(" ");return/loan.*officer|credit.*officer|field.*officer/i.test(e)}function yr(t){const e=(t==null?void 0:t.summary)||t||{},a=o=>Number(o||0),n=o=>{if(o==null)return 0;const l=String(o).trim().replace("%",""),d=Number(l);return Number.isFinite(d)?d:0};return{totalBorrowers:a(e.totalBorrowers??e.borrowers??e.clients),totalLoans:a(e.totalLoans??e.loans),totalDisbursed:a(e.totalDisbursed??e.disbursed),totalPaid:a(e.totalPaid??e.paid),totalRepaid:a(e.totalRepaid??e.repaid??e.collections),totalExpectedRepayments:a(e.totalExpectedRepayments??e.expectedRepayments),totalDeposits:a(e.totalDeposits??e.deposits),totalWithdrawals:a(e.totalWithdrawals??e.withdrawals),netSavings:a(e.netSavings??(e.totalDeposits||0)-(e.totalWithdrawals||0)),defaultedLoan:a(e.defaultedLoan??e.defaulted??e.nplPrincipal),defaultedInterest:a(e.defaultedInterest??e.nplInterest),outstandingLoan:a(e.outstandingLoan??e.outstandingPrincipal??e.outstanding),outstandingInterest:a(e.outstandingInterest??e.accruedInterest),writtenOff:a(e.writtenOff??e.writeOffs),parPercent:n(e.parPercent??e.par??e.par30??e.portfolioAtRisk),topBorrowers:Array.isArray(e.topBorrowers)?e.topBorrowers:[],upcomingRepayments:Array.isArray(e.upcomingRepayments)?e.upcomingRepayments:[],branchPerformance:Array.isArray(e.branchPerformance)?e.branchPerformance:[],officerPerformance:Array.isArray(e.officerPerformance)?e.officerPerformance:[],generalCommunications:Array.isArray(e.generalCommunications)?e.generalCommunications:[]}}const br=()=>{const[t,e]=c.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return c.useEffect(()=>{if(typeof document>"u")return;const a=document.documentElement,n=new MutationObserver(()=>e(a.classList.contains("dark")));return n.observe(a,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),t},jr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),C={container:"w-full px-4 md:px-6 lg:px-8 py-6",h1:"text-3xl font-extrabold tracking-tight",card:"card",btn:"inline-flex items-center justify-center rounded-lg px-3 py-2 font-semibold transition border-2 border-[var(--border-strong)] bg-[var(--card)] text-[var(--fg)] hover:bg-[var(--chip-soft)]",tableWrap:"overflow-x-auto rounded-2xl border-2 shadow bg-[var(--card)] border-[var(--border-strong)]",th:"bg-[var(--table-head-bg)] text-left text-[13px] uppercase tracking-wide font-semibold px-3 py-2 border border-[var(--border)] text-[var(--fg)] opacity-90",td:"px-3 py-2 border border-[var(--border)] text-sm text-[var(--fg)]"},wr="h-10 w-full rounded-lg text-sm outline-none transition border-2 bg-[var(--input-bg)] text-[var(--input-fg)] border-[var(--input-border)] focus:ring-2 focus:ring-[var(--ring)]",pe=({className:t="",children:e,...a})=>r.jsxs("div",{className:`relative ${t}`,children:[r.jsx("select",{...a,className:`${wr} pr-9 appearance-none bg-none ms-select`,children:e}),r.jsx(na,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--muted)]","aria-hidden":"true"})]}),Or=()=>{const t=br(),[e,a]=c.useState(null),[n,o]=c.useState([]),[l,d]=c.useState([]),[u,v]=c.useState(""),[h,f]=c.useState(""),[p,g]=c.useState(""),[x,N]=c.useState(0),[j,B]=c.useState(null),[b,w]=c.useState(null),[m,O]=c.useState(Date.now()),[k,E]=c.useState([]),[R,q]=c.useState(!1),[D,re]=c.useState(null),[ne,X]=c.useState([]),[se,ue]=c.useState([]),[ie,je]=c.useState([]),[me,we]=c.useState([]),[vt,gt]=c.useState(!0),[yt,Me]=c.useState([]),U=(s,i="info")=>{const I=Math.random().toString(36).slice(2);Me(A=>[...A,{id:I,msg:s,type:i}]),setTimeout(()=>Me(A=>A.filter(L=>L.id!==I)),3500)},T=s=>{const i=Number(s);return Number.isFinite(i)?i:0},z=s=>{const i=T(s);return Number.isNaN(i)?"TZS —":`TZS ${jr.format(i)}`},$=(s,i={})=>{try{const I=new URLSearchParams;u&&I.set("branchId",u),h&&I.set("officerId",h),p&&I.set("timeRange",p),Object.entries(i).forEach(([L,S])=>{S!=null&&String(S)!==""&&I.set(L,S)});const A=I.toString();return A?`${s}?${A}`:s}catch{return s}};c.useEffect(()=>{try{const s=localStorage.getItem(Qe);if(s){const i=JSON.parse(s);v(i.branchId||""),f(i.officerId||""),g(i.timeRange||"")}}catch{}try{const s=localStorage.getItem(et);s&&N(Number(s)||0)}catch{}},[]),c.useEffect(()=>{const s={branchId:u,officerId:h,timeRange:p};localStorage.setItem(Qe,JSON.stringify(s))},[u,h,p]),c.useEffect(()=>{localStorage.setItem(et,String(x||0))},[x]);const Te=c.useCallback(async s=>{try{const[i,I]=await Promise.all([ce([...W("branches"),...W("org/branches")],{signal:s}),ce([...W("users?role=loan_officer"),...W("admin/staff?role=loan_officer")],{signal:s}).catch(()=>ce([...W("users"),...W("admin/staff")],{signal:s}))]),A=xr(i),L=vr(I),S=L.filter(gr);o(A),d(S.length?S:L)}catch(i){Y(i)||(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),U("Failed to load filters","error"))}},[]),ke=c.useCallback(async s=>{try{const i=await ce([...W("dashboard/summary")],{signal:s,params:{branchId:u,officerId:h,timeRange:p}});a(yr(i))}catch(i){Y(i)||(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),U("Failed to load summary","error"))}},[u,h,p]),oe=c.useCallback(async s=>{q(!0);try{const i=await ce([...W("dashboard/communications"),...W("admin/communications?activeOnly=1"),...W("admin/communications?activeOnly=1&channel=inapp")],{signal:s}),L=(Array.isArray(i)?i:(i==null?void 0:i.items)||(i==null?void 0:i.rows)||(i==null?void 0:i.data)||[]).map(S=>{const _=(Array.isArray(S.attachments)?S.attachments:Array.isArray(S.files)?S.files:[]).map(P=>({...P,fileUrl:(P==null?void 0:P.fileUrl)||(P==null?void 0:P.url)||(P==null?void 0:P.href)||(P==null?void 0:P.path)||""})).filter(P=>P.fileUrl);return{id:S.id??S._id??Math.random().toString(36).slice(2),text:S.text??S.title??S.body??"",type:(S.type??"").toString(),priority:(S.priority??"").toString(),audienceBranchId:S.audienceBranchId??S.branchId??S.targetBranchId??null,attachments:_}}).filter(S=>S.text).filter(S=>u?S.audienceBranchId==null||String(S.audienceBranchId)===String(u):!0);if(L.length)E(L);else{const Fe=((Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])||[]).map(_=>({id:_.id??_._id??Math.random().toString(36).slice(2),text:_.text??_.title??_.body??"",type:(_.type??"").toString(),priority:(_.priority??"").toString(),audienceBranchId:_.audienceBranchId??_.branchId??_.targetBranchId??null,attachments:Array.isArray(_.attachments)?_.attachments.map(P=>({...P,fileUrl:(P==null?void 0:P.fileUrl)||(P==null?void 0:P.url)||""})).filter(P=>P.fileUrl):[]})).filter(_=>_.text).filter(_=>u?_.audienceBranchId==null||String(_.audienceBranchId)===String(u):!0);E(Fe)}}catch(i){Y(i)||(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),U("Failed to load communications","error"));const I=Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[];E(I.map(A=>({id:A.id??A._id??Math.random().toString(36).slice(2),text:A.text??A.title??A.body??"",type:(A.type??"").toString(),priority:(A.priority??"").toString(),audienceBranchId:A.audienceBranchId??A.branchId??A.targetBranchId??null,attachments:Array.isArray(A.attachments)?A.attachments.map(L=>({...L,fileUrl:(L==null?void 0:L.fileUrl)||(L==null?void 0:L.url)||""})).filter(L=>L.fileUrl):[]})).filter(A=>u?A.audienceBranchId==null||String(A.audienceBranchId)===String(u):!0))}finally{q(!1)}},[e,u]),Ne=c.useCallback(async s=>{try{const i=await tt.get("/dashboard/monthly-trends",{signal:s});re(i.data||{})}catch(i){Y(i)||(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),U("Failed to load trends","error"))}},[]);c.useEffect(()=>{const s=new AbortController;return(async()=>{try{await Te(s.signal)}catch{}})(),()=>s.abort()},[Te]);const he=c.useCallback(async s=>{await Promise.all([ke(s),Ne(s)]),B(new Date),x>0&&w(Date.now()+x*6e4)},[ke,Ne,x]);c.useEffect(()=>{const s=new AbortController;return(async()=>{try{await he(s.signal)}catch(i){Y(i)||(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),U("Failed to load dashboard data","error"))}finally{gt(!1)}})(),()=>s.abort()},[he]),c.useEffect(()=>{const s=new AbortController;return oe(s.signal).catch(i=>{Y(i)||(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),U("Failed to load communications","error"))}),()=>s.abort()},[e,u,oe]),c.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&X(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&ue(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&je(e.branchPerformance),Array.isArray(e.officerPerformance)&&we(e.officerPerformance))},[e]),c.useEffect(()=>{if(!x||x<=0){w(null);return}const i=setInterval(()=>{const I=new AbortController;Promise.all([he(I.signal),oe(I.signal)]).catch(()=>{}).finally(()=>I.abort())},x*6e4);return w(Date.now()+x*6e4),()=>clearInterval(i)},[x,he,oe]),c.useEffect(()=>{const s=setInterval(()=>O(Date.now()),1e3);return()=>clearInterval(s)},[]);const Ae=({label:s,value:i,max:I})=>{const A=T(i),L=T(I),S=L>0?Math.round(A/L*100):0;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-[var(--muted)]",children:[r.jsx("span",{children:s}),r.jsx("span",{className:"tabular-nums text-[var(--fg)]/80",children:A.toLocaleString()})]}),r.jsx("div",{className:"h-2 w-full rounded bg-[var(--table-head-bg)]",children:r.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${S}%`,backgroundColor:"currentColor"}})})]})},bt=({className:s=""})=>r.jsx("div",{className:`animate-pulse rounded bg-[var(--table-head-bg)] ${s}`}),jt=()=>{const s=k.flatMap(i=>(i.attachments||[]).map(I=>I.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((i,I)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),I*150)}),U(`Opening ${s.length} attachment${s.length>1?"s":""}…`,"info"))},y=t?{grid:"#334155",axis:"#cbd5e1",legend:"#e2e8f0",tooltipBg:"#0b1220",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#334155",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"},$e=b?Math.max(0,Math.floor((b-m)/1e3)):0,wt=String(Math.floor($e/60)).padStart(2,"0"),kt=String($e%60).padStart(2,"0");return r.jsx("div",{className:C.container,children:r.jsxs("div",{className:"space-y-6",style:{color:"var(--fg)"},children:[r.jsx("style",{children:`
          select.ms-select{ -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image:none!important; }
          select.ms-select::-ms-expand{ display:none; }
        `}),r.jsxs("div",{className:`${C.card} p-4 md:p-6`,children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:C.h1,children:"Dashboard"}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--muted)"},children:"Quick snapshot of borrowers, loans, repayments and savings."}),r.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:j?`Last updated ${j.toLocaleString()}`:"Loading…"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[r.jsxs(pe,{"aria-label":"Filter by branch",value:u,onChange:s=>v(s.target.value),className:"min-w-[11rem]",children:[r.jsx("option",{value:"",children:"All Branches"}),n.map(s=>r.jsx("option",{value:s.id,children:s.name},s.id))]}),r.jsxs(pe,{"aria-label":"Filter by loan officer",value:h,onChange:s=>f(s.target.value),className:"min-w-[12rem]",children:[r.jsx("option",{value:"",children:"All Loan Officers"}),l.map(s=>r.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),r.jsxs(pe,{"aria-label":"Filter by time range",value:p,onChange:s=>g(s.target.value),className:"min-w-[10rem]",children:[r.jsx("option",{value:"",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"}),r.jsx("option",{value:"quarter",children:"This Quarter"}),r.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),r.jsx("option",{value:"annual",children:"Annual"})]}),r.jsxs(pe,{"aria-label":"Auto refresh interval",value:x,onChange:s=>N(Number(s.target.value)),className:"min-w-[12rem]",children:[r.jsx("option",{value:0,children:"No Auto-Refresh"}),r.jsx("option",{value:1,children:"Every 1 min"}),r.jsx("option",{value:5,children:"Every 5 mins"}),r.jsx("option",{value:15,children:"Every 15 mins"})]}),r.jsx("button",{className:C.btn,onClick:()=>{const s=new AbortController;Promise.all([ke(s.signal),Ne(s.signal),oe(s.signal)]).then(()=>{B(new Date),x>0&&w(Date.now()+x*6e4),U("Dashboard refreshed","success")}).catch(()=>U("Refresh failed","error")).finally(()=>s.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]}),x>0&&b&&r.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs",style:{border:"2px solid var(--border-strong)",color:"var(--fg)"},children:["Auto-refresh in ",wt,":",kt]})]}),r.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:yt.map(s=>r.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),r.jsxs("div",{className:`${C.card} overflow-hidden`,children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:"var(--border)",background:"var(--table-head-bg)"},children:[r.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--muted)"},children:"General Communications"}),k.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&r.jsxs("button",{onClick:jt,className:`${C.btn} h-7 px-2 text-xs`,title:"Open all attachments",disabled:R,children:[r.jsx(Nt,{className:"w-3 h-3"})," Download all"]})]}),R?r.jsx("div",{className:"p-3 text-sm",style:{color:"var(--muted)"},children:"Loading communications…"}):((k==null?void 0:k.length)??0)===0?r.jsx("div",{className:"p-3 text-sm",style:{color:"var(--muted)"},children:"No communications to display."}):r.jsxs("div",{className:"relative h-10",children:[r.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),r.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite",color:"var(--fg)"},children:k.map((s,i)=>{var I;return r.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:s.type}),s.priority&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:s.priority}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:((I=n.find(A=>String(A.id)===String(s.audienceBranchId)))==null?void 0:I.name)||`Branch #${s.audienceBranchId}`}),r.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-600"}),r.jsx("span",{className:"truncate",children:s.text})]},s.id||s.text||i)})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(xe,{to:"/loans/add",className:C.btn,children:[r.jsx(Se,{className:"w-4 h-4"})," Add Loan"]}),r.jsxs(xe,{to:"/borrowers/add",className:C.btn,children:[r.jsx(Se,{className:"w-4 h-4"})," Add Borrower"]}),r.jsxs(xe,{to:"/repayments/new",className:C.btn,children:[r.jsx(Se,{className:"w-4 h-4"})," Record Repayment"]})]}),r.jsx("main",{className:"space-y-6",children:vt?r.jsx("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:Array.from({length:8}).map((s,i)=>r.jsx(bt,{className:"h-32"},i))}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:[r.jsx(K,{tone:"indigo",title:"Total Borrowers",value:T(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:r.jsx(fa,{className:"w-6 h-6"}),to:$(F.borrowers)}),r.jsx(K,{tone:"sky",title:"Total Loans",value:T(e==null?void 0:e.totalLoans).toLocaleString(),icon:r.jsx(De,{className:"w-6 h-6"}),to:$(F.loans)}),r.jsx(K,{tone:"blue",title:"Total Disbursed",value:z(e==null?void 0:e.totalDisbursed),icon:r.jsx(De,{className:"w-6 h-6"}),to:$(F.loans,{tab:"disbursed"})}),r.jsx(K,{tone:"emerald",title:"Total Paid",value:z(e==null?void 0:e.totalPaid),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.repayments,{tab:"paid"})}),r.jsx(K,{tone:"emerald",title:"Total Repaid",value:z(e==null?void 0:e.totalRepaid),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.repayments,{tab:"paid"})}),r.jsx(K,{tone:"indigo",title:"Expected Repayments",value:z(e==null?void 0:e.totalExpectedRepayments),icon:r.jsx(oa,{className:"w-6 h-6"}),to:$(F.expectedRepayments,{tab:"expected"})}),r.jsx(K,{tone:"cyan",title:"Total Deposits",value:z(e==null?void 0:e.totalDeposits),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.deposits)}),r.jsx(K,{tone:"amber",title:"Total Withdrawals",value:z(e==null?void 0:e.totalWithdrawals),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.withdrawals)}),r.jsx(K,{tone:"blue",title:"Net Savings",value:z(e==null?void 0:e.netSavings),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.savings)}),r.jsx(K,{tone:"rose",title:"Defaulted Loan",value:z(e==null?void 0:e.defaultedLoan),icon:r.jsx(Xe,{className:"w-6 h-6"}),to:$(F.defaultedLoans,{tab:"defaulted"})}),r.jsx(K,{tone:"rose",title:"Defaulted Interest",value:z(e==null?void 0:e.defaultedInterest),icon:r.jsx(Xe,{className:"w-6 h-6"}),to:$(F.defaultedInterest,{tab:"defaulted-interest"})}),r.jsx(K,{tone:"violet",title:"Outstanding Loan",value:z(e==null?void 0:e.outstandingLoan),icon:r.jsx(De,{className:"w-6 h-6"}),to:$(F.outstandingLoan,{tab:"outstanding"})}),r.jsx(K,{tone:"violet",title:"Outstanding Interest",value:z(e==null?void 0:e.outstandingInterest),icon:r.jsx(Z,{className:"w-6 h-6"}),to:$(F.outstandingInterest,{tab:"outstanding-interest"})}),r.jsx(K,{tone:"slate",title:"Written Off",value:z(e==null?void 0:e.writtenOff),icon:r.jsx(ua,{className:"w-6 h-6"}),to:$(F.writtenOff,{tab:"written-off"})}),r.jsx(K,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${T(e==null?void 0:e.parPercent)}%`,icon:r.jsx(qe,{className:"w-6 h-6"}),to:$(F.par,{tab:"par"})})]}),D&&r.jsxs("div",{className:`${C.card} p-4`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(qe,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:"text-lg font-semibold",children:`Monthly Trends${D.month||D.year?` — ${D.month||""} ${D.year||""}`:""}`})]}),r.jsx("div",{className:"mb-4",children:r.jsx(Ie,{width:"100%",height:260,children:r.jsxs(Le,{data:[{name:"Loans",value:T(D.monthlyLoans)},{name:"Deposits",value:T(D.monthlyDeposits)},{name:"Repayments",value:T(D.monthlyRepayments)}],children:[r.jsx(Pe,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Oe,{dataKey:"name",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Be,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ee,{wrapperStyle:{color:y.legend}}),r.jsx(J,{dataKey:"value",fill:y.bar1})]})})}),(()=>{const s=[T(D.monthlyLoans),T(D.monthlyDeposits),T(D.monthlyRepayments)],i=Math.max(...s);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"text-indigo-600",children:r.jsx(Ae,{label:"Loans (count)",value:T(D.monthlyLoans),max:i})}),r.jsx("div",{className:"text-emerald-600",children:r.jsx(Ae,{label:"Deposits (TZS)",value:T(D.monthlyDeposits),max:i})}),r.jsx("div",{className:"text-blue-600",children:r.jsx(Ae,{label:"Repayments (TZS)",value:T(D.monthlyRepayments),max:i})})]})})()]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:C.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Top Borrowers"})}),ne.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:C.th,children:"Name"}),r.jsx("th",{className:C.th,children:"Outstanding"})]})}),r.jsx("tbody",{children:ne.map(s=>r.jsxs("tr",{children:[r.jsx("td",{className:C.td,children:s.name}),r.jsx("td",{className:C.td,children:z(s.outstanding)})]},s.id))})]})]}),r.jsxs("div",{className:C.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming Repayments"})}),se.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:C.th,children:"Borrower"}),r.jsx("th",{className:C.th,children:"Due Date"}),r.jsx("th",{className:C.th,children:"Amount"})]})}),r.jsx("tbody",{children:se.map(s=>r.jsxs("tr",{children:[r.jsx("td",{className:C.td,children:s.borrower}),r.jsx("td",{className:C.td,children:s.dueDate}),r.jsx("td",{className:C.td,children:z(s.amount)})]},s.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`${C.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Branch Performance"}),ie.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ie,{width:"100%",height:260,children:r.jsxs(Le,{data:ie,children:[r.jsx(Pe,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Oe,{dataKey:"branch",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Be,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ee,{wrapperStyle:{color:y.legend}}),r.jsx(J,{dataKey:"disbursed",fill:y.bar1}),r.jsx(J,{dataKey:"repayments",fill:y.bar2})]})})]}),r.jsxs("div",{className:`${C.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Officer Performance"}),me.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ie,{width:"100%",height:260,children:r.jsxs(Le,{data:me,children:[r.jsx(Pe,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Oe,{dataKey:"officer",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Be,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ee,{wrapperStyle:{color:y.legend}}),r.jsx(J,{dataKey:"loans",fill:y.bar1}),r.jsx(J,{dataKey:"collections",fill:y.bar2})]})})]})]})]})})]})})},K=({title:t,value:e,icon:a,tone:n="indigo",to:o=null,delta:l=null,deltaLabel:d="",spark:u=null})=>{const v={indigo:"text-indigo-600",sky:"text-sky-600",blue:"text-blue-600",emerald:"text-emerald-600",cyan:"text-cyan-600",amber:"text-amber-600",violet:"text-violet-600",rose:"text-rose-600",slate:"text-slate-500"}[n]||"text-slate-500",h=()=>{if(!Array.isArray(u)||u.length<2)return null;const p=96,g=28,x=2,N=Math.min(...u),j=Math.max(...u),B=Math.max(j-N,1e-6),b=(p-x*2)/(u.length-1),w="M "+u.map((m,O)=>{const k=(x+O*b).toFixed(1),E=(g-x-(m-N)/B*(g-x*2)).toFixed(1);return`${k} ${E}`}).join(" L ");return r.jsx("svg",{width:p,height:g,className:"mt-2 opacity-70",children:r.jsx("path",{d:w,fill:"none",stroke:"currentColor",strokeWidth:"2"})})},f=l==null?"":l>=0?"text-emerald-700 bg-emerald-50 ring-1 ring-emerald-200":"text-rose-700 bg-rose-50 ring-1 ring-rose-200";return r.jsxs("div",{className:"group relative",children:[o&&r.jsx(xe,{to:o,className:"absolute inset-0 z-10 rounded-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","aria-label":`View ${t} details`,title:`View ${t} details`}),r.jsxs("div",{className:"relative rounded-2xl p-5 min-h-[10.5rem] shadow transition-all group-hover:shadow-md group-hover:-translate-y-0.5 border-2",style:{background:"var(--card)",borderColor:"var(--border-strong)",color:"var(--fg)"},children:[r.jsxs("div",{className:"relative flex items-start justify-between gap-3",children:[r.jsx("div",{className:`p-3 rounded-full ring-2 ${v}`,style:{background:"var(--card)",boxShadow:"0 1px 0 rgba(0,0,0,.04)"},children:a}),l!=null&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium ${f}`,children:[l>=0?"↑":"↓"," ",Math.abs(l).toLocaleString(),"%",d&&r.jsxs("span",{className:"opacity-70",children:[" ",d]})]})]}),r.jsxs("div",{className:"relative mt-3 min-w-0",children:[r.jsx("h3",{className:`text-sm font-semibold truncate ${v}`,children:t}),r.jsx("p",{className:"text-[28px] md:text-[32px] leading-tight font-semibold font-mono tabular-nums break-words",children:e??"—"})]}),r.jsx("div",{className:`relative ${v}`,children:r.jsx(h,{})})]})]})};export{Or as default};
