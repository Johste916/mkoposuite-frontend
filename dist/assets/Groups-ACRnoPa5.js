import{r as c,j as e,L as m,h}from"./index-_x_s48EO.js";async function x(s=[],a={}){let t;for(const d of s)try{const o=await h.get(d,a);return o==null?void 0:o.data}catch(o){t=o}throw t||new Error("No endpoint succeeded")}function b(s){return(Array.isArray(s)?s:(s==null?void 0:s.items)||(s==null?void 0:s.rows)||(s==null?void 0:s.data)||[]).map(t=>{var o,i,l,n;return{id:t.id??t._id??t.groupId??t.code??t.slug??t.uuid??String(Math.random()),name:t.name??t.groupName??t.title??"—",membersCount:t.membersCount??t.memberCount??((o=t.members)==null?void 0:o.length)??t.size??0,branchName:t.branchName??((i=t.branch)==null?void 0:i.name)??"—",totalLoans:t.totalLoans??t.loanCount??((l=t.stats)==null?void 0:l.loans)??0,outstanding:t.totalLoanAmount??t.outstanding??((n=t.stats)==null?void 0:n.outstanding)??0}})}const r={container:"w-full px-4 md:px-6 lg:px-8 py-6 min-h-screen bg-[var(--bg)] text-[var(--fg)]",card:"rounded-2xl border-2 border-[var(--border-strong)] bg-[var(--card)] shadow-lg",head:"bg-[var(--kpi-bg)] sticky top-0",th:"px-3 py-3 font-semibold border-b-2 border-[var(--border)] text-left",td:"px-3 py-2",row:"odd:bg-[var(--card)] even:bg-[var(--kpi-bg)] border-t border-[var(--border)]",linkStrong:"inline-flex items-center gap-1 font-bold underline decoration-2 underline-offset-4 rounded text-[var(--ring)] hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",muted:"text-[var(--muted)]",danger:"text-[var(--danger-fg)]"},g=()=>{const[s,a]=c.useState([]),[t,d]=c.useState(!0),[o,i]=c.useState("");c.useEffect(()=>{const n=new AbortController;return(async()=>{try{d(!0);const u=await x(["/borrowers/groups?include=members","/groups?include=members","/borrower-groups?include=members","/api/borrowers/groups?include=members"],{signal:n.signal});a(b(u)),i("")}catch{i("Failed to load groups (endpoint not implemented)."),a([])}finally{d(!1)}})(),()=>n.abort()},[]);const l=n=>`TZS ${Number(n||0).toLocaleString()}`;return e.jsxs("div",{className:r.container,children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight",children:"Borrower Groups"}),e.jsx(m,{to:"/borrowers/groups/add",className:"px-4 py-2 rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 font-semibold focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",children:"Add Group"})]}),e.jsx("div",{className:`${r.card} overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-[15px] border-collapse",children:[e.jsx("thead",{className:r.head,children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:r.th,children:"Name"}),e.jsx("th",{className:r.th,children:"Members"}),e.jsx("th",{className:r.th,children:"Branch"}),e.jsx("th",{className:r.th,children:"Loans"}),e.jsx("th",{className:r.th,children:"Outstanding"}),e.jsx("th",{className:`${r.th} text-right pr-4`,children:"Actions"})]})}),e.jsx("tbody",{children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:`p-4 ${r.muted}`,children:"Loading…"})}):o?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:`p-4 ${r.danger}`,children:o})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:`p-4 ${r.muted}`,children:"No groups yet."})}):s.map(n=>e.jsxs("tr",{className:r.row,children:[e.jsx("td",{className:r.td,children:e.jsx(m,{to:`/borrowers/groups/${encodeURIComponent(n.id)}`,className:r.linkStrong,children:n.name})}),e.jsx("td",{className:r.td,children:n.membersCount}),e.jsx("td",{className:r.td,children:n.branchName}),e.jsx("td",{className:r.td,children:n.totalLoans}),e.jsx("td",{className:r.td,children:l(n.outstanding)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(m,{to:`/borrowers/groups/${encodeURIComponent(n.id)}`,className:r.linkStrong,children:"View"})})]},n.id))})]})})})]})};export{g as default};
