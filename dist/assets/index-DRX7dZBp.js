import{a as d}from"./index-MSOOl8cj.js";const c="https://mkoposuite-backend-42w2.onrender.com/api".replace(/\/+$/,"")||`${window.location.origin}/api`,i=d.create({baseURL:c,withCredentials:!1}),r=["token","authToken","accessToken","jwt"];function l(e){try{const t=String(e).split(".");if(t.length<2)return null;const n=JSON.parse(atob(t[1]));return n.tenantId||n.tenant_id||n.tid||n.tenant||null}catch{return null}}i.interceptors.request.use(e=>{let t=null;for(const a of r)if(t=localStorage.getItem(a)||sessionStorage.getItem(a),t)break;if(t&&(e.headers.Authorization=`Bearer ${t.replace(/^Bearer /i,"")}`),!e.headers["x-tenant-id"]){const a=localStorage.getItem("tenantId")||sessionStorage.getItem("tenantId")||void 0||l(t);a&&(e.headers["x-tenant-id"]=a)}const n=localStorage.getItem("branchId")||sessionStorage.getItem("branchId");return n&&!e.headers["x-branch-id"]&&(e.headers["x-branch-id"]=n),e});i.interceptors.response.use(e=>e,e=>{var n,a,s,o;const t=((a=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:a.error)||((o=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:o.message)||(e==null?void 0:e.message)||"Request failed";return console.error("API error:",t,(e==null?void 0:e.response)||e),Promise.reject(e)});export{i as a};
