import{i as v,u as b,r as i,g as o,j as e,L as m}from"./index-G5wp67oJ.js";import{S as N}from"./save-CYB7ZQ5x.js";import"./createLucideIcon-DtohkNYs.js";const j="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7",c="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-500 transition-all";function k(){const{id:r}=v(),l=!!r,g=b(),[a,t]=i.useState({name:"",code:"",branch:"",accountName:"",accountNumber:"",swift:"",phone:"",address:"",currency:"TZS",openingBalance:"",currentBalance:"",isActive:!0}),[d,u]=i.useState(!1),[p,x]=i.useState(l);i.useEffect(()=>{l&&(async()=>{x(!0);try{const s=(await o.get(`/banks/${r}`)).data||{};t({name:s.name||"",code:s.code||"",branch:s.branch||"",accountName:s.accountName||"",accountNumber:s.accountNumber||"",swift:s.swift||"",phone:s.phone||"",address:s.address||"",currency:s.currency||"TZS",openingBalance:s.openingBalance??"",currentBalance:s.currentBalance??"",isActive:s.isActive!==!1})}catch(n){console.error(n),alert("Failed to load bank")}finally{x(!1)}})()},[r,l]);const h=async n=>{if(n.preventDefault(),!a.name.trim())return alert("Bank name is required.");u(!0);try{l?await o.put(`/banks/${r}`,{...a,openingBalance:a.openingBalance===""?null:Number(a.openingBalance),currentBalance:a.currentBalance===""?null:Number(a.currentBalance)}):await o.post("/banks",{...a,openingBalance:a.openingBalance===""?0:Number(a.openingBalance),currentBalance:a.currentBalance===""?a.openingBalance===""?0:Number(a.openingBalance):Number(a.currentBalance)}),g("/banks")}catch(s){console.error(s),alert("Failed to save bank")}finally{u(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:l?"Edit Bank":"Add Bank"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Banks are used for disbursing loans and receiving repayments."})]}),e.jsx(m,{to:"/banks",className:"text-indigo-600 hover:underline text-sm",children:"Back to Banks"})]}),e.jsx("form",{onSubmit:h,className:j,children:p?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading…"}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Name"}),e.jsx("input",{className:c,value:a.name,onChange:n=>t({...a,name:n.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Code (optional)"}),e.jsx("input",{className:c,value:a.code,onChange:n=>t({...a,code:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Branch (optional)"}),e.jsx("input",{className:c,value:a.branch,onChange:n=>t({...a,branch:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Account Name (optional)"}),e.jsx("input",{className:c,value:a.accountName,onChange:n=>t({...a,accountName:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Account Number (optional)"}),e.jsx("input",{className:c,value:a.accountNumber,onChange:n=>t({...a,accountNumber:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"SWIFT (optional)"}),e.jsx("input",{className:c,value:a.swift,onChange:n=>t({...a,swift:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Phone (optional)"}),e.jsx("input",{className:c,value:a.phone,onChange:n=>t({...a,phone:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Currency"}),e.jsx("input",{className:c,value:a.currency,onChange:n=>t({...a,currency:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Opening Balance"}),e.jsx("input",{type:"number",step:"0.01",className:c,value:a.openingBalance,onChange:n=>t({...a,openingBalance:n.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Current Balance (optional)"}),e.jsx("input",{type:"number",step:"0.01",className:c,value:a.currentBalance,onChange:n=>t({...a,currentBalance:n.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Address (optional)"}),e.jsx("textarea",{className:`${c} min-h-[84px]`,value:a.address,onChange:n=>t({...a,address:n.target.value})})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[e.jsx("input",{id:"active",type:"checkbox",checked:a.isActive,onChange:n=>t({...a,isActive:n.target.checked})}),e.jsx("label",{htmlFor:"active",className:"text-sm text-gray-700",children:"Active"})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end gap-3 pt-2",children:[e.jsx(m,{to:"/banks",className:"px-4 py-2 rounded-xl border hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{disabled:d,type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(N,{className:"h-4 w-4"}),d?"Saving…":"Save"]})]})]})})]})}export{k as default};
