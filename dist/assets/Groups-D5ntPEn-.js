import{r,g as j,j as e,L as c}from"./index-BVWWaTks.js";const N=()=>{const[a,i]=r.useState([]),[x,l]=r.useState(!0),[n,h]=r.useState("");r.useEffect(()=>{const s=new AbortController;return(async()=>{var o,d;try{l(!0);const t=await j.get("/borrowers/groups",{signal:s.signal}),m=Array.isArray(t.data)?t.data:((o=t.data)==null?void 0:o.items)||((d=t.data)==null?void 0:d.data)||[];i(m)}catch{h("Failed to load groups")}finally{l(!1)}})(),()=>s.abort()},[]);const p=s=>`TZS ${Number(s||0).toLocaleString()}`;return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Borrower Groups"}),e.jsx(c,{to:"/borrowers/groups/add",className:"px-3 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Add Group"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Members"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Branch"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Loans"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Outstanding"}),e.jsx("th",{className:"px-3 py-2 text-right pr-4",children:"Actions"})]})}),e.jsx("tbody",{children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-gray-500",children:"Loading…"})}):n?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-red-600",children:n})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"p-4 text-gray-500",children:"No groups yet."})}):a.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:s.name}),e.jsx("td",{className:"px-3 py-2",children:s.membersCount??s.memberCount??"—"}),e.jsx("td",{className:"px-3 py-2",children:s.branchName||"—"}),e.jsx("td",{className:"px-3 py-2",children:s.totalLoans??s.loanCount??"—"}),e.jsx("td",{className:"px-3 py-2",children:p(s.totalLoanAmount||s.outstanding)}),e.jsx("td",{className:"px-3 py-2 text-right",children:e.jsx(c,{to:`/borrowers/groups/${encodeURIComponent(s.id)}`,className:"text-indigo-600 hover:text-indigo-800 hover:underline",children:"View"})})]},s.id))})]})})]})};export{N as default};
