import{r as i,j as f,b as ct}from"./index-6M8fKSo2.js";import{c as V,b as Re,s as H,d as D,p as J,e as ut,i as dt,f as W,g as pt,h as mt,j as Le,k as vt,l as ft,m as k,n as ht,o as Q,q as gt,r as yt,t as bt,u as Pt,v as xt,w as At,x as ee,y as Et,z as U,A as _e,S as Ot,D as Ke,E as X,F as jt,G as Me,H as $e,I as de,J as K,K as be,M as Z,N as oe,O as It,P as q,Q as Be,U as We,V as Dt,W as Pe,Z as Fe,_ as St,$ as wt,a0 as Nt,a1 as Ct,a2 as Tt,a3 as kt,a4 as Rt,a5 as G,a6 as Ge,a7 as Lt,a8 as _t,a9 as le,aa as Ve,ab as ze,ac as Kt,ad as Mt,ae as $t,af as xe,ag as Ue,ah as Bt,ai as Wt,aj as Ft,ak as Gt,al as Vt,am as Xe,an as zt,ao as Ut,ap as Ae,aq as z,ar as Xt,as as Yt,at as Ye,au as Zt,av as qt,aw as Ee,ax as Ht,ay as Jt,az as Qt,aA as ea,aB as ta,R as ae,C as Oe,X as je,Y as Ie,T as re,L as ne,B as aa,a as ra}from"./BarChart-byPannJ2.js";function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},se.apply(null,arguments)}var Ze=e=>{var{cx:t,cy:r,r:a,className:n}=e,o=V("recharts-dot",n);return t===+t&&r===+r&&a===+a?i.createElement("circle",se({},H(e),Re(e),{className:o,cx:t,cy:r,r:a})):null},qe=e=>e.graphicalItems.polarItems,na=D([J,ut],dt),pe=D([qe,W,na],pt),ia=D([pe],mt),me=D([ia,Le],vt),oa=D([me,W,pe],ft),la=D([me,W,pe],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(n=>{var o,s=k(a,(o=t.dataKey)!==null&&o!==void 0?o:n.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:k(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]}))),De=()=>{},sa=D([W,ht,De,la,De,Q,J],gt),He=D([W,Q,me,oa,yt,J,sa],bt),ca=D([He,W,Pt],xt);D([W,He,ca,J],At);function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Se(Object(r),!0).forEach(function(a){ua(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ua(e,t,r){return(t=da(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function da(e){var t=pa(e,"string");return typeof t=="symbol"?t:t+""}function pa(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ma=(e,t)=>t,ve=D([qe,ma],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),va=[],fe=(e,t,r)=>(r==null?void 0:r.length)===0?va:r,Je=D([Le,ve,fe],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&r!=null&&(n=r.map(o=>we(we({},t.presentationProps),o.props))),n!=null)return n}}),fa=D([Je,ve,fe],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,n)=>{var o,s=k(a,t.nameKey,t.name),u;return r!=null&&(o=r[n])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?u=r[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?u=a.fill:u=t.fill,{value:ee(s,t.dataKey),color:u,payload:a,type:t.legendType}})}),ha=D([Je,ve,fe,Et],(e,t,r,a)=>{if(!(t==null||e==null))return ka({offset:a,pieSettings:t,displayedData:e,cells:r})}),ga=["onMouseEnter","onClick","onMouseLeave"],ya=["id"],ba=["id"];function he(e,t){if(e==null)return{};var r,a,n=Pa(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pa(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ne(Object(r),!0).forEach(function(a){xa(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function xa(e,t,r){return(t=Aa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aa(e){var t=Ea(e,"string");return typeof t=="symbol"?t:t+""}function Ea(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_.apply(null,arguments)}function Oa(e){var t=i.useMemo(()=>Ke(e.children,de),[e.children]),r=X(a=>fa(a,e.id,t));return r==null?null:i.createElement(jt,{legendPayload:r})}function ja(e){var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:o,fill:s,name:u,hide:m,tooltipType:v}=e;return{dataDefinedOnItem:a==null?void 0:a.map(g=>g.tooltipPayload),positions:a==null?void 0:a.map(g=>g.tooltipPosition),settings:{stroke:n,strokeWidth:o,fill:s,dataKey:t,nameKey:r,name:ee(u,t),hide:m,type:v,color:s,unit:""}}}var Ia=(e,t)=>e>t?"start":e<t?"end":"middle",Da=(e,t,r)=>typeof t=="function"?t(e):q(t,r,r*.8),Sa=(e,t,r)=>{var{top:a,left:n,width:o,height:s}=t,u=It(o,s),m=n+q(e.cx,o,o/2),v=a+q(e.cy,s,s/2),g=q(e.innerRadius,u,0),h=Da(r,e.outerRadius,u),l=e.maxRadius||Math.sqrt(o*o+s*s)/2;return{cx:m,cy:v,innerRadius:g,outerRadius:h,maxRadius:l}},wa=(e,t)=>{var r=Z(t-e),a=Math.min(Math.abs(t-e),360);return r*a},Na=(e,t)=>{if(i.isValidElement(e))return i.cloneElement(e,t);if(typeof e=="function")return e(t);var r=V("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return i.createElement(Ge,_({},t,{type:"linear",className:r}))},Ca=(e,t,r)=>{if(i.isValidElement(e))return i.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),i.isValidElement(a)))return a;var n=V("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return i.createElement(Lt,_({},t,{alignmentBaseline:"middle",className:n}),a)};function Ta(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:o,dataKey:s}=r;if(!a||!n||!t)return null;var u=H(r),m=G(n,!1),v=G(o,!1),g=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,h=t.map((l,d)=>{var c=(l.startAngle+l.endAngle)/2,p=oe(l.cx,l.cy,l.outerRadius+g,c),y=b(b(b(b({},u),l),{},{stroke:"none"},m),{},{index:d,textAnchor:Ia(p.x,l.cx)},p),A=b(b(b(b({},u),l),{},{fill:"none",stroke:l.fill},v),{},{index:d,points:[oe(l.cx,l.cy,l.outerRadius,c),p],key:"line"});return i.createElement(K,{key:"label-".concat(l.startAngle,"-").concat(l.endAngle,"-").concat(l.midAngle,"-").concat(d)},o&&Na(o,A),Ca(n,y,k(l,s)))});return i.createElement(K,{className:"recharts-pie-labels"},h)}function Qe(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n,showLabels:o}=e,s=X(Fe),{onMouseEnter:u,onClick:m,onMouseLeave:v}=n,g=he(n,ga),h=St(u,n.dataKey),l=wt(v),d=Nt(m,n.dataKey);return t==null?null:i.createElement(i.Fragment,null,t.map((c,p)=>{if((c==null?void 0:c.startAngle)===0&&(c==null?void 0:c.endAngle)===0&&t.length!==1)return null;var y=r&&String(p)===s,A=s?a:null,w=y?r:A,P=b(b({},c),{},{stroke:c.stroke,tabIndex:-1,[Tt]:p,[Ct]:n.dataKey});return i.createElement(K,_({tabIndex:-1,className:"recharts-pie-sector"},kt(g,c,p),{onMouseEnter:h(c,p),onMouseLeave:l(c,p),onClick:d(c,p),key:"sector-".concat(c==null?void 0:c.startAngle,"-").concat(c==null?void 0:c.endAngle,"-").concat(c.midAngle,"-").concat(p)}),i.createElement(Rt,_({option:w,isActive:y,shapeType:"sector"},P)))}),i.createElement(Ta,{sectors:t,props:n,showLabels:o}))}function ka(e){var t,{pieSettings:r,displayedData:a,cells:n,offset:o}=e,{cornerRadius:s,startAngle:u,endAngle:m,dataKey:v,nameKey:g,tooltipType:h}=r,l=Math.abs(r.minAngle),d=wa(u,m),c=Math.abs(d),p=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,y=a.filter(x=>k(x,v,0)!==0).length,A=(c>=360?y:y-1)*p,w=c-y*l-A,P=a.reduce((x,E)=>{var O=k(E,v,0);return x+(be(O)?O:0)},0),R;if(P>0){var S;R=a.map((x,E)=>{var O=k(x,v,0),j=k(x,g,E),C=Sa(r,o,x),L=(be(O)?O:0)/P,N,M=b(b({},x),n&&n[E]&&n[E].props);E?N=S.endAngle+Z(d)*p*(O!==0?1:0):N=u;var F=N+Z(d)*((O!==0?l:0)+L*w),$=(N+F)/2,I=(C.innerRadius+C.outerRadius)/2,te=[{name:j,value:O,payload:M,dataKey:v,type:h}],Y=oe(C.cx,C.cy,I,$);return S=b(b(b(b({},r.presentationProps),{},{percent:L,cornerRadius:s,name:j,tooltipPayload:te,midAngle:$,middleRadius:I,tooltipPosition:Y},M),C),{},{value:k(x,v),startAngle:N,endAngle:F,payload:M,paddingAngle:Z(d)*p}),S})}return R}function Ra(e){var{props:t,previousSectorsRef:r}=e,{sectors:a,isAnimationActive:n,animationBegin:o,animationDuration:s,animationEasing:u,activeShape:m,inactiveShape:v,onAnimationStart:g,onAnimationEnd:h}=t,l=Be(t,"recharts-pie-"),d=r.current,[c,p]=i.useState(!0),y=i.useCallback(()=>{typeof h=="function"&&h(),p(!1)},[h]),A=i.useCallback(()=>{typeof g=="function"&&g(),p(!0)},[g]);return i.createElement(We,{begin:o,duration:s,isActive:n,easing:u,onAnimationStart:A,onAnimationEnd:y,key:l},w=>{var P=[],R=a&&a[0],S=R.startAngle;return a.forEach((x,E)=>{var O=d&&d[E],j=E>0?Dt(x,"paddingAngle",0):0;if(O){var C=Pe(O.endAngle-O.startAngle,x.endAngle-x.startAngle),L=b(b({},x),{},{startAngle:S+j,endAngle:S+C(w)+j});P.push(L),S=L.endAngle}else{var{endAngle:N,startAngle:M}=x,F=Pe(0,N-M),$=F(w),I=b(b({},x),{},{startAngle:S+j,endAngle:S+$+j});P.push(I),S=I.endAngle}}),r.current=P,i.createElement(K,null,i.createElement(Qe,{sectors:P,activeShape:m,inactiveShape:v,allOtherPieProps:t,showLabels:!c}))})}function La(e){var{sectors:t,isAnimationActive:r,activeShape:a,inactiveShape:n}=e,o=i.useRef(null),s=o.current;return r&&t&&t.length&&(!s||s!==t)?i.createElement(Ra,{props:e,previousSectorsRef:o}):i.createElement(Qe,{sectors:t,activeShape:a,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function _a(e){var{hide:t,className:r,rootTabIndex:a}=e,n=V("recharts-pie",r);return t?null:i.createElement(K,{tabIndex:a,className:n},i.createElement(La,e))}var Ka={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!$e.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Ma(e){var{id:t}=e,r=he(e,ya),a=i.useMemo(()=>Ke(e.children,de),[e.children]),n=X(o=>ha(o,t,a));return i.createElement(i.Fragment,null,i.createElement(Me,{fn:ja,args:b(b({},e),{},{sectors:n})}),i.createElement(_a,_({},r,{sectors:n})))}function et(e){var t=U(e,Ka),{id:r}=t,a=he(t,ba),n=H(a);return i.createElement(_e,{id:r,type:"pie"},o=>i.createElement(i.Fragment,null,i.createElement(Ot,{type:"pie",id:o,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n}),i.createElement(Oa,_({},a,{id:o})),i.createElement(Ma,_({},a,{id:o})),a.children))}et.displayName="Pie";function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ce(Object(r),!0).forEach(function(a){$a(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $a(e,t,r){return(t=Ba(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ba(e){var t=Wa(e,"string");return typeof t=="symbol"?t:t+""}function Wa(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fa=e=>{var{point:t,childIndex:r,mainColor:a,activeDot:n,dataKey:o}=e;if(n===!1||t.x==null||t.y==null)return null;var s=Te(Te({index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},G(n,!1)),Re(n)),u;return i.isValidElement(n)?u=i.cloneElement(n,s):typeof n=="function"?u=n(s):u=i.createElement(Ze,s),i.createElement(K,{className:"recharts-active-dot"},u)};function Ga(e){var{points:t,mainColor:r,activeDot:a,itemDataKey:n}=e,o=X(Fe),s=_t();if(t==null||s==null)return null;var u=t.find(m=>s.includes(m.payload));return le(u)?null:Fa({point:u,childIndex:Number(o),mainColor:r,dataKey:n,activeDot:a})}var tt=(e,t,r,a)=>Ve(e,"xAxis",t,a),at=(e,t,r,a)=>ze(e,"xAxis",t,a),rt=(e,t,r,a)=>Ve(e,"yAxis",r,a),nt=(e,t,r,a)=>ze(e,"yAxis",r,a),Va=D([Q,tt,rt,at,nt],(e,t,r,a,n)=>$t(e,"xAxis")?xe(t,a,!1):xe(r,n,!1)),za=(e,t,r,a,n)=>n;function Ua(e){return e.type==="line"}var Xa=D([Mt,za],(e,t)=>e.filter(Ua).find(r=>r.id===t)),Ya=D([Q,tt,rt,at,nt,Xa,Va,Kt],(e,t,r,a,n,o,s,u)=>{var{chartData:m,dataStartIndex:v,dataEndIndex:g}=u;if(!(o==null||t==null||r==null||a==null||n==null||a.length===0||n.length===0||s==null)){var{dataKey:h,data:l}=o,d;if(l!=null&&l.length>0?d=l:d=m==null?void 0:m.slice(v,g+1),d!=null)return fr({layout:e,xAxis:t,yAxis:r,xAxisTicks:a,yAxisTicks:n,dataKey:h,bandSize:s,displayedData:d})}}),Za=["id"],qa=["type","layout","connectNulls","needClip"],Ha=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ke(Object(r),!0).forEach(function(a){Ja(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ja(e,t,r){return(t=Qa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qa(e){var t=er(e,"string");return typeof t=="symbol"?t:t+""}function er(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ge(e,t){if(e==null)return{};var r,a,n=tr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},B.apply(null,arguments)}var ar=e=>{var{dataKey:t,name:r,stroke:a,legendType:n,hide:o}=e;return[{inactive:o,dataKey:t,type:n,color:a,value:ee(r,t),payload:e}]};function rr(e){var{dataKey:t,data:r,stroke:a,strokeWidth:n,fill:o,name:s,hide:u,unit:m}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:o,dataKey:t,nameKey:void 0,name:ee(s,t),hide:u,type:e.tooltipType,color:e.stroke,unit:m}}}var it=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function nr(e,t){for(var r=e.length%2!==0?[...e,0]:e,a=[],n=0;n<t;++n)a=[...a,...r];return a}var ir=(e,t,r)=>{var a=r.reduce((h,l)=>h+l);if(!a)return it(t,e);for(var n=Math.floor(e/a),o=e%a,s=t-e,u=[],m=0,v=0;m<r.length;v+=r[m],++m)if(v+r[m]>o){u=[...r.slice(0,m),o-v];break}var g=u.length%2===0?[0,s]:[s];return[...nr(r,n),...u,...g].map(h=>"".concat(h,"px")).join(", ")};function or(e,t){var r;if(i.isValidElement(e))r=i.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var a=V("recharts-line-dot",typeof e!="boolean"?e.className:"");r=i.createElement(Ze,B({},t,{className:a}))}return r}function lr(e,t){return e==null?!1:t?!0:e.length===1}function sr(e){var{clipPathId:t,points:r,props:a}=e,{dot:n,dataKey:o,needClip:s}=a;if(!lr(r,n))return null;var{id:u}=a,m=ge(a,Za),v=Xe(n),g=H(m),h=G(n,!0),l=r.map((c,p)=>{var y=T(T(T({key:"dot-".concat(p),r:3},g),h),{},{index:p,cx:c.x,cy:c.y,dataKey:o,value:c.value,payload:c.payload,points:r});return or(n,y)}),d={clipPath:s?"url(#clipPath-".concat(v?"":"dots-").concat(t,")"):void 0};return i.createElement(K,B({className:"recharts-line-dots",key:"dots"},d),l)}function ce(e){var{clipPathId:t,pathRef:r,points:a,strokeDasharray:n,props:o,showLabels:s}=e,{type:u,layout:m,connectNulls:v,needClip:g}=o,h=ge(o,qa),l=T(T({},G(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:g?"url(#clipPath-".concat(t,")"):void 0,points:a,type:u,layout:m,connectNulls:v,strokeDasharray:n??o.strokeDasharray});return i.createElement(i.Fragment,null,(a==null?void 0:a.length)>1&&i.createElement(Ge,B({},l,{pathRef:r})),i.createElement(sr,{points:a,clipPathId:t,props:o}),s&&Xt.renderCallByParent(o,a))}function cr(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function ur(e){var{clipPathId:t,props:r,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:o}=e,{points:s,strokeDasharray:u,isAnimationActive:m,animationBegin:v,animationDuration:g,animationEasing:h,animateNewValues:l,width:d,height:c,onAnimationEnd:p,onAnimationStart:y}=r,A=n.current,w=Be(r,"recharts-line-"),[P,R]=i.useState(!1),S=i.useCallback(()=>{typeof p=="function"&&p(),R(!1)},[p]),x=i.useCallback(()=>{typeof y=="function"&&y(),R(!0)},[y]),E=cr(a.current),O=o.current;return i.createElement(We,{begin:v,duration:g,isActive:m,easing:h,onAnimationEnd:S,onAnimationStart:x,key:w},j=>{var C=z(O,E+O,j),L=Math.min(C,E),N;if(u){var M="".concat(u).split(/[,\s]+/gim).map(I=>parseFloat(I));N=ir(L,E,M)}else N=it(E,L);if(A){var F=A.length/s.length,$=j===1?s:s.map((I,te)=>{var Y=Math.floor(te*F);if(A[Y]){var ye=A[Y];return T(T({},I),{},{x:z(ye.x,I.x,j),y:z(ye.y,I.y,j)})}return l?T(T({},I),{},{x:z(d*2,I.x,j),y:z(c/2,I.y,j)}):T(T({},I),{},{x:I.x,y:I.y})});return n.current=$,i.createElement(ce,{props:r,points:$,clipPathId:t,pathRef:a,showLabels:!P,strokeDasharray:N})}return j>0&&E>0&&(n.current=s,o.current=L),i.createElement(ce,{props:r,points:s,clipPathId:t,pathRef:a,showLabels:!P,strokeDasharray:N})})}function dr(e){var{clipPathId:t,props:r}=e,{points:a,isAnimationActive:n}=r,o=i.useRef(null),s=i.useRef(0),u=i.useRef(null),m=o.current;return n&&a&&a.length&&m!==a?i.createElement(ur,{props:r,clipPathId:t,previousPointsRef:o,longestAnimatedLengthRef:s,pathRef:u}):i.createElement(ce,{props:r,points:a,clipPathId:t,pathRef:u,showLabels:!0})}var pr=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:k(e.payload,t)});class mr extends i.Component{render(){var t,{hide:r,dot:a,points:n,className:o,xAxisId:s,yAxisId:u,top:m,left:v,width:g,height:h,id:l,needClip:d}=this.props;if(r)return null;var c=V("recharts-line",o),p=l,{r:y=3,strokeWidth:A=2}=(t=G(a,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=Xe(a),P=y*2+A;return i.createElement(i.Fragment,null,i.createElement(K,{className:c},d&&i.createElement("defs",null,i.createElement(zt,{clipPathId:p,xAxisId:s,yAxisId:u}),!w&&i.createElement("clipPath",{id:"clipPath-dots-".concat(p)},i.createElement("rect",{x:v-P/2,y:m-P/2,width:g+P,height:h+P}))),i.createElement(dr,{props:this.props,clipPathId:p}),i.createElement(Ut,{xAxisId:s,yAxisId:u,data:n,dataPointFormatter:pr,errorBarOffset:0},this.props.children)),i.createElement(Ga,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ot={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!$e.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function vr(e){var t=U(e,ot),{activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:o,animationEasing:s,connectNulls:u,dot:m,hide:v,isAnimationActive:g,label:h,legendType:l,xAxisId:d,yAxisId:c,id:p}=t,y=ge(t,Ha),{needClip:A}=Ft(d,c),w=Gt(),P=Vt(),R=Ue(),S=X(C=>Ya(C,d,c,R,p));if(P!=="horizontal"&&P!=="vertical"||S==null||w==null)return null;var{height:x,width:E,x:O,y:j}=w;return i.createElement(mr,B({},y,{id:p,connectNulls:u,dot:m,activeDot:r,animateNewValues:a,animationBegin:n,animationDuration:o,animationEasing:s,isAnimationActive:g,hide:v,label:h,legendType:l,xAxisId:d,yAxisId:c,points:S,layout:P,height:x,width:E,left:O,top:j,needClip:A}))}function fr(e){var{layout:t,xAxis:r,yAxis:a,xAxisTicks:n,yAxisTicks:o,dataKey:s,bandSize:u,displayedData:m}=e;return m.map((v,g)=>{var h=k(v,s);if(t==="horizontal"){var l=Ae({axis:r,ticks:n,bandSize:u,entry:v,index:g}),d=le(h)?null:a.scale(h);return{x:l,y:d,value:h,payload:v}}var c=le(h)?null:r.scale(h),p=Ae({axis:a,ticks:o,bandSize:u,entry:v,index:g});return c==null||p==null?null:{x:c,y:p,value:h,payload:v}}).filter(Boolean)}function lt(e){var t=U(e,ot),r=Ue();return i.createElement(_e,{id:t.id,type:"line"},a=>i.createElement(i.Fragment,null,i.createElement(Bt,{legendPayload:ar(t)}),i.createElement(Me,{fn:rr,args:t}),i.createElement(Wt,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),i.createElement(vr,B({},t,{id:a}))))}lt.displayName="Line";var hr=["axis"],gr=i.forwardRef((e,t)=>i.createElement(Yt,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hr,tooltipPayloadSearcher:Ye,categoricalChartProps:e,ref:t}));function yr(e){var t=Zt();return i.useEffect(()=>{t(qt(e))},[t,e]),null}var br=["width","height","layout"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ue.apply(null,arguments)}function Pr(e,t){if(e==null)return{};var r,a,n=xr(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Ar={top:5,right:5,bottom:5,left:5},Er={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ar,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Or=i.forwardRef(function(t,r){var a,n=U(t.categoricalChartProps,Er),{width:o,height:s,layout:u}=n,m=Pr(n,br);if(!Ee(o)||!Ee(s))return null;var{chartName:v,defaultTooltipEventType:g,validateTooltipEventTypes:h,tooltipPayloadSearcher:l}=t,d={chartName:v,defaultTooltipEventType:g,validateTooltipEventTypes:h,tooltipPayloadSearcher:l,eventEmitter:void 0};return i.createElement(Ht,{preloadedState:{options:d},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:v},i.createElement(Jt,{chartData:n.data}),i.createElement(Qt,{width:o,height:s,layout:u,margin:n.margin}),i.createElement(ea,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),i.createElement(yr,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),i.createElement(ta,ue({width:o,height:s},m,{ref:r})))}),jr=["item"],Ir={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Dr=i.forwardRef((e,t)=>{var r=U(e,Ir);return i.createElement(Or,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jr,tooltipPayloadSearcher:Ye,categoricalChartProps:r,ref:t})});const ie=e=>Number(e||0).toLocaleString(),st=e=>new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10),Sr=()=>{const e=new Date;return e.setDate(e.getDate()-30),st(e)};function Cr(){const[e,t]=i.useState(Sr()),[r,a]=i.useState(st(new Date)),[n,o]=i.useState(!1),[s,u]=i.useState([]),m=async()=>{o(!0);try{const{data:l}=await ct.get("/repayments",{params:{dateFrom:e,dateTo:r,page:1,pageSize:2e3}}),d=Array.isArray(l)?l:(l==null?void 0:l.items)||[];u(d)}catch{u([])}finally{o(!1)}};i.useEffect(()=>{m()},[]);const v=i.useMemo(()=>{const l={};for(const d of s){const c=(d.date||d.paymentDate||d.paidAt||d.createdAt||"").slice(0,10),p=Number(d.amount??d.amountPaid??0);!c||!p||(l[c]=(l[c]||0)+p)}return Object.entries(l).sort(([d],[c])=>d<c?-1:1).map(([d,c])=>({date:d,total:Number(c.toFixed(2))}))},[s]),g=i.useMemo(()=>{const l={};for(const d of s){const c=(d.method||"other").toLowerCase(),p=Number(d.amount??d.amountPaid??0);p&&(l[c]=(l[c]||0)+p)}return Object.entries(l).map(([d,c])=>({name:d,value:Number(c.toFixed(2))}))},[s]),h=i.useMemo(()=>{var d,c;const l={};for(const p of s){const y=((c=(d=p.Loan)==null?void 0:d.Borrower)==null?void 0:c.name)||p.borrowerName||"Unknown",A=Number(p.amount??p.amountPaid??0);l[y]=(l[y]||0)+A}return Object.entries(l).map(([p,y])=>({name:p,total:Number(y.toFixed(2))})).sort((p,y)=>y.total-p.total).slice(0,10)},[s]);return f.jsx("div",{className:"space-y-6",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border shadow p-6",children:[f.jsxs("div",{className:"flex items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Repayment Charts"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily totals, method split, and top borrowers."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"date",value:e,onChange:l=>t(l.target.value),className:"border rounded px-2 py-1 text-sm"}),f.jsx("span",{className:"text-sm self-center",children:"to"}),f.jsx("input",{type:"date",value:r,onChange:l=>a(l.target.value),className:"border rounded px-2 py-1 text-sm"}),f.jsx("button",{onClick:m,disabled:n,className:"px-3 py-2 rounded border hover:bg-gray-50 text-sm disabled:opacity-60",children:n?"Loadingâ€¦":"Refresh"})]})]}),f.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mt-6",children:[f.jsxs("div",{className:"h-80 border rounded-lg p-2",children:[f.jsx("h3",{className:"font-medium px-2 pt-2",children:"Daily Collections"}),f.jsx(ae,{width:"100%",height:"90%",children:f.jsxs(gr,{data:v,children:[f.jsx(Oe,{strokeDasharray:"3 3"}),f.jsx(je,{dataKey:"date"}),f.jsx(Ie,{}),f.jsx(re,{formatter:l=>ie(l)}),f.jsx(ne,{}),f.jsx(lt,{type:"monotone",dataKey:"total",name:"TZS"})]})})]}),f.jsxs("div",{className:"h-80 border rounded-lg p-2",children:[f.jsx("h3",{className:"font-medium px-2 pt-2",children:"By Method"}),f.jsx(ae,{width:"100%",height:"90%",children:f.jsxs(Dr,{children:[f.jsx(et,{data:g,dataKey:"value",nameKey:"name",outerRadius:100,label:!0}),f.jsx(re,{formatter:l=>ie(l)}),f.jsx(ne,{}),g.map((l,d)=>f.jsx(de,{},d))]})})]}),f.jsxs("div",{className:"h-80 border rounded-lg p-2 lg:col-span-2",children:[f.jsx("h3",{className:"font-medium px-2 pt-2",children:"Top Borrowers (by Amount)"}),f.jsx(ae,{width:"100%",height:"90%",children:f.jsxs(aa,{data:h,children:[f.jsx(Oe,{strokeDasharray:"3 3"}),f.jsx(je,{dataKey:"name",hide:!0}),f.jsx(Ie,{}),f.jsx(re,{formatter:l=>ie(l)}),f.jsx(ne,{}),f.jsx(ra,{dataKey:"total",name:"TZS"})]})})]})]})]})})}export{Cr as default};
