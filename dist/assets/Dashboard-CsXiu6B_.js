import{r as l,g as Qe,j as r,L as fe}from"./index-sMnl2-1N.js";import{D as wt}from"./download-BXaltMIF.js";import{C as Ae}from"./circle-plus-DLEpg2OG.js";import{c as V}from"./createLucideIcon-BX53ym5_.js";import{i as $e,S as kt,a as ge,r as At,u as et,R as Nt,b as St,c as Pt,d as It,g as Ot,e as tt,f as Ct,h as Bt,j as Et,k as pe,l as Dt,G as Lt,C as Rt,m as at,n as Tt,L as xe,o as _t,p as Mt,t as $t,q as Ke,s as rt,v as nt,w as st,x as it,y as Kt,z as ot,A as Ft,J as zt,B as q,D as Wt,E as Vt,F as Gt,H as Ut,I as Fe,K as W,M as qt,N as Z,O as Y,P as Q,Q as Xt,T as lt,U as ct,V as dt,W as Ht,X as Zt,Y as ze,Z as Yt,_ as Jt,$ as We,a0 as Qt,a1 as Le,a2 as Ve,a3 as ea,a4 as ta,a5 as Ne,a6 as Se,a7 as Pe,a8 as Ie,a9 as Oe,aa as Ce}from"./CartesianChart-BMacLdYZ.js";import{C as aa}from"./chevron-down-BCTTrhMu.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ge=V("chart-no-axes-column",ra);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sa=V("clipboard-list",na);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Be=V("credit-card",ia);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],X=V("dollar-sign",oa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],ca=V("thumbs-down",la);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ue=V("triangle-alert",da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ma=V("users",ua);var ha="Invariant failed";function fa(t,e){throw new Error(ha)}var pa=["x","y"];function Re(){return Re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Re.apply(null,arguments)}function qe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function se(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?qe(Object(a),!0).forEach(function(n){xa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function xa(t,e,a){return(e=va(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function va(t){var e=ga(t,"string");return typeof e=="symbol"?e:e+""}function ga(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ya(t,e){if(t==null)return{};var a,n,o=ba(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)a=s[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function ba(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}function ja(t,e){var{x:a,y:n}=t,o=ya(t,pa),s="".concat(a),d=parseInt(s,10),u="".concat(n),v=parseInt(u,10),h="".concat(e.height||o.height),f=parseInt(h,10),p="".concat(e.width||o.width),g=parseInt(p,10);return se(se(se(se(se({},e),o),d?{x:d}:{}),v?{y:v}:{}),{},{height:f,width:g,name:e.name,radius:e.radius})}function ut(t){return l.createElement(kt,Re({shapeType:"rectangle",propTransformer:ja,activeClassName:"recharts-active-bar"},t))}var wa=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if($e(e))return e;var s=$e(n)||ge(n);return s?e(n,o):(s||fa(),a)}},ka=["onMouseEnter","onMouseLeave","onClick"],Aa=["value","background","tooltipPosition"],Na=["id"],Sa=["onMouseEnter","onClick","onMouseLeave"];function J(){return J=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},J.apply(null,arguments)}function Xe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(a),!0).forEach(function(n){Pa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xe(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Pa(t,e,a){return(e=Ia(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ia(t){var e=Oa(t,"string");return typeof e=="symbol"?e:e+""}function Oa(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ve(t,e){if(t==null)return{};var a,n,o=Ca(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)a=s[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function Ca(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}var Ba=t=>{var{dataKey:e,name:a,fill:n,legendType:o,hide:s}=t;return[{inactive:s,dataKey:e,type:o,color:n,value:tt(a,e),payload:t}]};function Ea(t){var{dataKey:e,stroke:a,strokeWidth:n,fill:o,name:s,hide:d,unit:u}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:tt(s,e),hide:d,type:t.tooltipType,color:t.fill,unit:u}}}function Da(t){var e=pe(rt),{data:a,dataKey:n,background:o,allOtherBarProps:s}=t,{onMouseEnter:d,onMouseLeave:u,onClick:v}=s,h=ve(s,ka),f=nt(d,n),p=st(u),g=it(v,n);if(!o||a==null)return null;var x=Kt(o,!1);return l.createElement(l.Fragment,null,a.map((A,j)=>{var{value:I,background:b,tooltipPosition:w}=A,m=ve(A,Aa);if(!b)return null;var S=f(A,j),k=p(A,j),C=g(A,j),B=E(E(E(E(E({option:o,isActive:String(j)===e},m),{},{fill:"#eee"},b),x),ot(h,A,j)),{},{onMouseEnter:S,onMouseLeave:k,onClick:C,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return l.createElement(ut,J({key:"background-bar-".concat(j)},B))}))}function mt(t){var{data:e,props:a,showLabels:n}=t,o=Wt(a),{id:s}=o,d=ve(o,Na),{shape:u,dataKey:v,activeBar:h}=a,f=pe(rt),p=pe(Vt),{onMouseEnter:g,onClick:x,onMouseLeave:A}=a,j=ve(a,Sa),I=nt(g,v),b=st(A),w=it(x,v);return e?l.createElement(l.Fragment,null,e.map((m,S)=>{var k=h&&String(S)===f&&(p==null||v===p),C=k?h:u,B=E(E(E({},d),m),{},{isActive:k,option:C,index:S,dataKey:v});return l.createElement(xe,J({className:"recharts-bar-rectangle"},ot(j,m,S),{onMouseEnter:I(m,S),onMouseLeave:b(m,S),onClick:w(m,S),key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(S)}),l.createElement(ut,B))}),n&&Gt.renderCallByParent(a,e)):null}function La(t){var{props:e,previousRectanglesRef:a}=t,{data:n,layout:o,isAnimationActive:s,animationBegin:d,animationDuration:u,animationEasing:v,onAnimationEnd:h,onAnimationStart:f}=e,p=a.current,g=Ft(e,"recharts-bar-"),[x,A]=l.useState(!1),j=l.useCallback(()=>{typeof h=="function"&&h(),A(!1)},[h]),I=l.useCallback(()=>{typeof f=="function"&&f(),A(!0)},[f]);return l.createElement(zt,{begin:d,duration:u,isActive:s,easing:v,onAnimationEnd:j,onAnimationStart:I,key:g},b=>{var w=b===1?n:n==null?void 0:n.map((m,S)=>{var k=p&&p[S];if(k)return E(E({},m),{},{x:q(k.x,m.x,b),y:q(k.y,m.y,b),width:q(k.width,m.width,b),height:q(k.height,m.height,b)});if(o==="horizontal"){var C=q(0,m.height,b);return E(E({},m),{},{y:m.y+m.height-C,height:C})}var B=q(0,m.width,b);return E(E({},m),{},{width:B})});return b>0&&(a.current=w??null),w==null?null:l.createElement(xe,null,l.createElement(mt,{props:e,data:w,showLabels:!x}))})}function Ra(t){var{data:e,isAnimationActive:a}=t,n=l.useRef(null);return a&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(La,{previousRectanglesRef:n,props:t}):l.createElement(mt,{props:t,data:e,showLabels:!0})}var ht=0,Ta=(t,e)=>{var a=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:a,errorVal:at(t,e)}};class _a extends l.PureComponent{render(){var{hide:e,data:a,dataKey:n,className:o,xAxisId:s,yAxisId:d,needClip:u,background:v,id:h}=this.props;if(e)return null;var f=Tt("recharts-bar",o),p=h;return l.createElement(xe,{className:f,id:h},u&&l.createElement("defs",null,l.createElement(_t,{clipPathId:p,xAxisId:s,yAxisId:d})),l.createElement(xe,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},l.createElement(Da,{data:a,dataKey:n,background:v,allOtherBarProps:this.props}),l.createElement(Ra,this.props)),this.props.children)}}var Ma={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Lt.isSsr,legendType:"rect",minPointSize:ht,xAxisId:0,yAxisId:0};function $a(t){var{xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:s,activeBar:d,animationBegin:u,animationDuration:v,animationEasing:h,isAnimationActive:f}=t,{needClip:p}=Ct(e,a),g=Bt(),x=et(),A=Et(t.children,Rt),j=pe(w=>mr(w,e,a,x,t.id,A));if(g!=="vertical"&&g!=="horizontal")return null;var I,b=j==null?void 0:j[0];return b==null||b.height==null||b.width==null?I=0:I=g==="vertical"?b.height/2:b.width/2,l.createElement(Dt,{xAxisId:e,yAxisId:a,data:j,dataPointFormatter:Ta,errorBarOffset:I},l.createElement(_a,J({},t,{layout:g,needClip:p,data:j,xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:s,activeBar:d,animationBegin:u,animationDuration:v,animationEasing:h,isAnimationActive:f})))}function Ka(t){var{layout:e,barSettings:{dataKey:a,minPointSize:n},pos:o,bandSize:s,xAxis:d,yAxis:u,xAxisTicks:v,yAxisTicks:h,stackedData:f,displayedData:p,offset:g,cells:x}=t,A=e==="horizontal"?u:d,j=f?A.scale.domain():null,I=Mt({numericAxis:A});return p.map((b,w)=>{var m,S,k,C,B,G;f?m=$t(f[w],j):(m=at(b,a),Array.isArray(m)||(m=[I,m]));var O=wa(n,ht)(m[1],w);if(e==="horizontal"){var ee,[te,U]=[u.scale(m[0]),u.scale(m[1])];S=Ke({axis:d,ticks:v,bandSize:s,offset:o.offset,entry:b,index:w}),k=(ee=U??te)!==null&&ee!==void 0?ee:void 0,C=o.size;var ae=te-U;if(B=Ut(ae)?0:ae,G={x:S,y:g.top,width:C,height:g.height},Math.abs(O)>0&&Math.abs(B)<Math.abs(O)){var ce=Fe(B||O)*(Math.abs(O)-Math.abs(B));k-=ce,B+=ce}}else{var[re,ye]=[d.scale(m[0]),d.scale(m[1])];if(S=re,k=Ke({axis:u,ticks:h,bandSize:s,offset:o.offset,entry:b,index:w}),C=ye-re,B=o.size,G={x:g.left,y:k,width:g.width,height:B},Math.abs(O)>0&&Math.abs(C)<Math.abs(O)){var de=Fe(C||O)*(Math.abs(O)-Math.abs(C));C+=de}}if(S==null||k==null||C==null||B==null)return null;var be=E(E({},b),{},{x:S,y:k,width:C,height:B,value:f?m:m[1],payload:b,background:G,tooltipPosition:{x:S+C/2,y:k+B/2}},x&&x[w]&&x[w].props);return be}).filter(Boolean)}function H(t){var e=At(t,Ma),a=et();return l.createElement(Nt,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(St,{legendPayload:Ba(e)}),l.createElement(Pt,{fn:Ea,args:e}),l.createElement(It,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Ot(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:a}),l.createElement($a,J({},e,{id:n}))))}H.displayName="Bar";function He(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function me(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?He(Object(a),!0).forEach(function(n){Fa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Fa(t,e,a){return(e=za(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function za(t){var e=Wa(t,"string");return typeof e=="symbol"?e:e+""}function Wa(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Va=(t,e)=>e,Ga=(t,e,a)=>a,Ua=(t,e,a,n)=>n,qa=(t,e,a,n,o)=>o,le=W([ct,qa],(t,e)=>t.filter(a=>a.type==="bar").find(a=>a.id===e)),Xa=W([le],t=>t==null?void 0:t.maxBarSize),Ha=(t,e,a,n,o,s)=>s,Ze=(t,e,a)=>{var n=a??t;if(!ge(n))return Le(n,e,0)},Za=W([Q,ct,Va,Ga,Ua],(t,e,a,n,o)=>e.filter(s=>t==="horizontal"?s.xAxisId===a:s.yAxisId===n).filter(s=>s.isPanorama===o).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Ya=(t,e,a,n)=>{var o=Q(t);return o==="horizontal"?ze(t,"yAxis",a,n):ze(t,"xAxis",e,n)},Ja=(t,e,a)=>{var n=Q(t);return n==="horizontal"?We(t,"xAxis",e):We(t,"yAxis",a)},Qa=(t,e,a)=>{var n={},o=t.filter(Qt),s=t.filter(h=>h.stackId==null),d=o.reduce((h,f)=>(h[f.stackId]||(h[f.stackId]=[]),h[f.stackId].push(f),h),n),u=Object.entries(d).map(h=>{var[f,p]=h,g=p.map(A=>A.dataKey),x=Ze(e,a,p[0].barSize);return{stackId:f,dataKeys:g,barSize:x}}),v=s.map(h=>{var f=[h.dataKey].filter(g=>g!=null),p=Ze(e,a,h.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...v]},er=W([Za,Jt,Ja],Qa),tr=(t,e,a,n,o)=>{var s,d,u=le(t,e,a,n,o);if(u!=null){var v=Q(t),h=dt(t),{maxBarSize:f}=u,p=ge(f)?h:f,g,x;return v==="horizontal"?(g=Z(t,"xAxis",e,n),x=Y(t,"xAxis",e,n)):(g=Z(t,"yAxis",a,n),x=Y(t,"yAxis",a,n)),(s=(d=lt(g,x,!0))!==null&&d!==void 0?d:p)!==null&&s!==void 0?s:0}},ft=(t,e,a,n)=>{var o=Q(t),s,d;return o==="horizontal"?(s=Z(t,"xAxis",e,n),d=Y(t,"xAxis",e,n)):(s=Z(t,"yAxis",a,n),d=Y(t,"yAxis",a,n)),lt(s,d)};function ar(t,e,a,n,o){var s=n.length;if(!(s<1)){var d=Le(t,a,0,!0),u,v=[];if(Ve(n[0].barSize)){var h=!1,f=a/s,p=n.reduce((b,w)=>b+(w.barSize||0),0);p+=(s-1)*d,p>=a&&(p-=(s-1)*d,d=0),p>=a&&f>0&&(h=!0,f*=.9,p=s*f);var g=(a-p)/2>>0,x={offset:g-d,size:0};u=n.reduce((b,w)=>{var m,S={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+d,size:h?f:(m=w.barSize)!==null&&m!==void 0?m:0}},k=[...b,S];return x=k[k.length-1].position,k},v)}else{var A=Le(e,a,0,!0);a-2*A-(s-1)*d<=0&&(d=0);var j=(a-2*A-(s-1)*d)/s;j>1&&(j>>=0);var I=Ve(o)?Math.min(j,o):j;u=n.reduce((b,w,m)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:A+(j+d)*m+(j-I)/2,size:I}}],v)}return u}}var rr=(t,e,a,n,o,s,d)=>{var u=ge(d)?e:d,v=ar(a,n,o!==s?o:s,t,u);return o!==s&&v!=null&&(v=v.map(h=>me(me({},h),{},{position:me(me({},h.position),{},{offset:h.position.offset-o/2})}))),v},nr=W([er,dt,Ht,Zt,tr,ft,Xa],rr),sr=(t,e,a,n)=>Z(t,"xAxis",e,n),ir=(t,e,a,n)=>Z(t,"yAxis",a,n),or=(t,e,a,n)=>Y(t,"xAxis",e,n),lr=(t,e,a,n)=>Y(t,"yAxis",a,n),cr=W([nr,le],(t,e)=>{if(!(t==null||e==null)){var a=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(a!=null)return a.position}}),dr=(t,e)=>{var a=Yt(e);if(!(!t||a==null||e==null)){var{stackId:n}=e;if(n!=null){var o=t[n];if(o){var{stackedData:s}=o;if(s)return s.find(d=>d.key===a)}}}},ur=W([Ya,le],dr),mr=W([qt,sr,ir,or,lr,cr,Q,Xt,ft,ur,le,Ha],(t,e,a,n,o,s,d,u,v,h,f,p)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:A}=u;if(!(f==null||s==null||d!=="horizontal"&&d!=="vertical"||e==null||a==null||n==null||o==null||v==null)){var{data:j}=f,I;if(j!=null&&j.length>0?I=j:I=g==null?void 0:g.slice(x,A+1),I!=null)return Ka({layout:d,barSettings:f,pos:s,bandSize:v,xAxis:e,yAxis:a,xAxisTicks:n,yAxisTicks:o,stackedData:h,displayedData:I,offset:t,cells:p})}}),hr=["axis","item"],Ee=l.forwardRef((t,e)=>l.createElement(ea,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hr,tooltipPayloadSearcher:ta,categoricalChartProps:t,ref:e}));const R={borrowers:"/borrowers",loans:"/loans",repayments:"/repayments",expectedRepayments:"/repayments",deposits:"/deposits",withdrawals:"/withdrawals",savings:"/savings",defaultedLoans:"/loans",defaultedInterest:"/loans",outstandingLoan:"/loans",outstandingInterest:"/loans",writtenOff:"/loans",par:"/loans"},Ye="ms_dash_filters_v1",Je="ms_dash_auto_refresh_v1";function $(t){const a=(t.startsWith("/")?t:`/${t}`).replace(/^\/api\//,"/"),n=a.startsWith("/api/")?a:`/api${a}`;return Array.from(new Set([a,n]))}function ie(t){return(t==null?void 0:t.name)==="CanceledError"||(t==null?void 0:t.code)==="ERR_CANCELED"||/abort|cancell?ed/i.test((t==null?void 0:t.message)||"")}async function oe(t=[],e={}){let a;for(const n of t)try{const o=await Qe.get(n,e);return o==null?void 0:o.data}catch(o){a=o}throw a||new Error("No endpoint succeeded")}function fr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.branchId??a.code??String(a.name||"branch"),name:a.name??a.title??a.label??String(a.code||"—")}))}function pr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.userId??String(a.email||a.phone||"user"),name:a.name||[a.firstName,a.lastName].filter(Boolean).join(" ").trim()||a.username||a.email||a.phone||"—",roles:(a.roles||a.Roles||[]).map(n=>(n.name||n.code||"").toString().toLowerCase()),title:(a.title||a.jobTitle||"").toString().toLowerCase()}))}function xr(t){const e=[...t.roles||[],t.title||""].join(" ");return/loan.*officer|credit.*officer|field.*officer/i.test(e)}function vr(t){const e=(t==null?void 0:t.summary)||t||{},a=o=>Number(o||0),n=o=>{if(o==null)return 0;const s=String(o).trim().replace("%",""),d=Number(s);return Number.isFinite(d)?d:0};return{totalBorrowers:a(e.totalBorrowers??e.borrowers??e.clients),totalLoans:a(e.totalLoans??e.loans),totalDisbursed:a(e.totalDisbursed??e.disbursed),totalPaid:a(e.totalPaid??e.paid),totalRepaid:a(e.totalRepaid??e.repaid??e.collections),totalExpectedRepayments:a(e.totalExpectedRepayments??e.expectedRepayments),totalDeposits:a(e.totalDeposits??e.deposits),totalWithdrawals:a(e.totalWithdrawals??e.withdrawals),netSavings:a(e.netSavings??(e.totalDeposits||0)-(e.totalWithdrawals||0)),defaultedLoan:a(e.defaultedLoan??e.defaulted??e.nplPrincipal),defaultedInterest:a(e.defaultedInterest??e.nplInterest),outstandingLoan:a(e.outstandingLoan??e.outstandingPrincipal??e.outstanding),outstandingInterest:a(e.outstandingInterest??e.accruedInterest),writtenOff:a(e.writtenOff??e.writeOffs),parPercent:n(e.parPercent??e.par??e.par30??e.portfolioAtRisk),topBorrowers:Array.isArray(e.topBorrowers)?e.topBorrowers:[],upcomingRepayments:Array.isArray(e.upcomingRepayments)?e.upcomingRepayments:[],branchPerformance:Array.isArray(e.branchPerformance)?e.branchPerformance:[],officerPerformance:Array.isArray(e.officerPerformance)?e.officerPerformance:[],generalCommunications:Array.isArray(e.generalCommunications)?e.generalCommunications:[]}}function De(t,{branchId:e}={}){const a=Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[],n=Date.now(),o={critical:4,high:3,normal:2,low:1};return a.map((s,d)=>({id:s.id??s._id??s.uuid??`comm_${d}`,title:s.title??"",text:s.text??s.body??"",type:(s.type||"notice").toString().toLowerCase(),priority:(s.priority||"normal").toString().toLowerCase(),channel:(s.channel||"inapp").toString().toLowerCase(),isActive:!!(s.isActive??s.active??s.enabled??!0),showInTicker:!!(s.showInTicker??s.ticker??s.showTicker??!1),showOnDashboard:!!(s.showOnDashboard??s.dashboard??!1),startAt:s.startAt?new Date(s.startAt).getTime():null,endAt:s.endAt?new Date(s.endAt).getTime():null,audienceBranchId:s.audienceBranchId!=null?String(s.audienceBranchId):null,attachments:Array.isArray(s.attachments)?s.attachments:[]})).filter(s=>s.isActive&&s.channel==="inapp").filter(s=>s.showInTicker).filter(s=>s.startAt?n>=s.startAt:!0).filter(s=>s.endAt?n<=s.endAt:!0).filter(s=>s.audienceBranchId&&e?String(s.audienceBranchId)===String(e):!0).sort((s,d)=>(o[d.priority]||0)-(o[s.priority]||0))}const gr=()=>{const[t,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const a=document.documentElement,n=new MutationObserver(()=>e(a.classList.contains("dark")));return n.observe(a,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),t},yr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),P={container:"w-full px-4 md:px-6 lg:px-8 py-6",h1:"text-3xl font-extrabold tracking-tight",card:"card",btn:"inline-flex items-center justify-center rounded-lg px-3 py-2 font-semibold transition border-2 border-[var(--border-strong)] bg-[var(--card)] text-[var(--fg)] hover:bg-[var(--chip-soft)]",tableWrap:"overflow-x-auto rounded-2xl border-2 shadow bg-[var(--card)] border-[var(--border-strong)]",th:"bg-[var(--table-head-bg)] text-left text-[13px] uppercase tracking-wide font-semibold px-3 py-2 border border-[var(--border)] text-[var(--fg)] opacity-90",td:"px-3 py-2 border border-[var(--border)] text-sm text-[var(--fg)]"},br="h-10 w-full rounded-lg text-sm outline-none transition border-2 bg-[var(--input-bg)] text-[var(--input-fg)] border-[var(--input-border)] focus:ring-2 focus:ring-[var(--ring)]",he=({className:t="",children:e,...a})=>r.jsxs("div",{className:`relative ${t}`,children:[r.jsx("select",{...a,className:`${br} pr-9 appearance-none bg-none ms-select`,children:e}),r.jsx(aa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--muted)]","aria-hidden":"true"})]}),Pr=()=>{const t=gr(),[e,a]=l.useState(null),[n,o]=l.useState([]),[s,d]=l.useState([]),[u,v]=l.useState(""),[h,f]=l.useState(""),[p,g]=l.useState(""),[x,A]=l.useState(0),[j,I]=l.useState(null),[b,w]=l.useState(null),[m,S]=l.useState(Date.now()),[k,C]=l.useState([]),[B,G]=l.useState(!1),[O,ee]=l.useState(null),[te,U]=l.useState([]),[ae,ce]=l.useState([]),[re,ye]=l.useState([]),[de,be]=l.useState([]),[pt,xt]=l.useState(!0),[vt,Te]=l.useState([]),z=(i,c="info")=>{const N=Math.random().toString(36).slice(2);Te(M=>[...M,{id:N,msg:i,type:c}]),setTimeout(()=>Te(M=>M.filter(K=>K.id!==N)),3500)},D=i=>{const c=Number(i);return Number.isFinite(c)?c:0},_=i=>{const c=D(i);return Number.isNaN(c)?"TZS —":`TZS ${yr.format(c)}`},L=(i,c={})=>{try{const N=new URLSearchParams;u&&N.set("branchId",u),h&&N.set("officerId",h),p&&N.set("timeRange",p),Object.entries(c).forEach(([K,F])=>{F!=null&&String(F)!==""&&N.set(K,F)});const M=N.toString();return M?`${i}?${M}`:i}catch{return i}};l.useEffect(()=>{try{const i=localStorage.getItem(Ye);if(i){const c=JSON.parse(i);v(c.branchId||""),f(c.officerId||""),g(c.timeRange||"")}}catch{}try{const i=localStorage.getItem(Je);i&&A(Number(i)||0)}catch{}},[]),l.useEffect(()=>{const i={branchId:u,officerId:h,timeRange:p};localStorage.setItem(Ye,JSON.stringify(i))},[u,h,p]),l.useEffect(()=>{localStorage.setItem(Je,String(x||0))},[x]);const _e=l.useCallback(async i=>{try{const[c,N]=await Promise.all([oe([...$("branches"),...$("org/branches")],{signal:i}),oe([...$("users?role=loan_officer"),...$("admin/staff?role=loan_officer")],{signal:i}).catch(()=>oe([...$("users"),...$("admin/staff")],{signal:i}))]),M=fr(c),K=pr(N),F=K.filter(xr);o(M),d(F.length?F:K)}catch(c){ie(c)||(console.error("Filter fetch error:",(c==null?void 0:c.message)||c),z("Failed to load filters","error"))}},[]),je=l.useCallback(async i=>{try{const c=await oe([...$("dashboard/summary")],{signal:i,params:{branchId:u,officerId:h,timeRange:p}});a(vr(c))}catch(c){ie(c)||(console.error("Dashboard summary error:",(c==null?void 0:c.message)||c),z("Failed to load summary","error"))}},[u,h,p]),ne=l.useCallback(async i=>{G(!0);try{const c=await oe([...$("dashboard/communications"),...$("admin/communications?activeOnly=1&channel=inapp"),...$("settings/communications?activeOnly=1&channel=inapp")],{signal:i,params:{branchId:u}});let N=De(c,{branchId:u});!N.length&&Array.isArray(e==null?void 0:e.generalCommunications)&&(N=De(e.generalCommunications,{branchId:u})),C(N)}catch{const c=De((e==null?void 0:e.generalCommunications)||[],{branchId:u});C(c)}finally{G(!1)}},[u,e]),we=l.useCallback(async i=>{try{const c=await Qe.get("/dashboard/monthly-trends",{signal:i});ee(c.data||{})}catch(c){ie(c)||(console.error("Monthly trends error:",(c==null?void 0:c.message)||c),z("Failed to load trends","error"))}},[]);l.useEffect(()=>{const i=new AbortController;return(async()=>{try{await _e(i.signal)}catch{}})(),()=>i.abort()},[_e]);const ue=l.useCallback(async i=>{await Promise.all([je(i),we(i)]),I(new Date),x>0&&w(Date.now()+x*6e4)},[je,we,x]);l.useEffect(()=>{const i=new AbortController;return(async()=>{try{await ue(i.signal)}catch(c){ie(c)||(console.error("Dashboard fetch error:",(c==null?void 0:c.message)||c),z("Failed to load dashboard data","error"))}finally{xt(!1)}})(),()=>i.abort()},[ue]),l.useEffect(()=>{if(!e)return;const i=new AbortController;return ne(i.signal).catch(c=>{ie(c)||(console.error("Comms fetch error:",(c==null?void 0:c.message)||c),z("Failed to load communications","error"))}),()=>i.abort()},[e,ne]),l.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&U(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&ce(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&ye(e.branchPerformance),Array.isArray(e.officerPerformance)&&be(e.officerPerformance))},[e]),l.useEffect(()=>{if(!x||x<=0){w(null);return}const c=setInterval(()=>{const N=new AbortController;Promise.all([ue(N.signal),ne(N.signal)]).catch(()=>{}).finally(()=>N.abort())},x*6e4);return w(Date.now()+x*6e4),()=>clearInterval(c)},[x,ue,ne]),l.useEffect(()=>{const i=setInterval(()=>S(Date.now()),1e3);return()=>clearInterval(i)},[]);const ke=({label:i,value:c,max:N})=>{const M=D(c),K=D(N),F=K>0?Math.round(M/K*100):0;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-[var(--muted)]",children:[r.jsx("span",{children:i}),r.jsx("span",{className:"tabular-nums text-[var(--fg)]/80",children:M.toLocaleString()})]}),r.jsx("div",{className:"h-2 w-full rounded bg-[var(--table-head-bg)]",children:r.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${F}%`,backgroundColor:"currentColor"}})})]})},gt=({className:i=""})=>r.jsx("div",{className:`animate-pulse rounded bg-[var(--table-head-bg)] ${i}`}),yt=()=>{const i=k.flatMap(c=>(c.attachments||[]).map(N=>N.fileUrl)).filter(Boolean);i.length!==0&&(i.forEach((c,N)=>{setTimeout(()=>window.open(c,"_blank","noopener,noreferrer"),N*150)}),z(`Opening ${i.length} attachment${i.length>1?"s":""}…`,"info"))},y=t?{grid:"#334155",axis:"#cbd5e1",legend:"#e2e8f0",tooltipBg:"#0b1220",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#334155",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"},Me=b?Math.max(0,Math.floor((b-m)/1e3)):0,bt=String(Math.floor(Me/60)).padStart(2,"0"),jt=String(Me%60).padStart(2,"0");return r.jsx("div",{className:P.container,children:r.jsxs("div",{className:"space-y-6",style:{color:"var(--fg)"},children:[r.jsx("style",{children:`
          select.ms-select{ -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image:none!important; }
          select.ms-select::-ms-expand{ display:none; }
        `}),r.jsxs("div",{className:`${P.card} p-4 md:p-6`,children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:P.h1,children:"Dashboard"}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--muted)"},children:"Quick snapshot of borrowers, loans, repayments and savings."}),r.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:j?`Last updated ${j.toLocaleString()}`:"Loading…"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[r.jsxs(he,{"aria-label":"Filter by branch",value:u,onChange:i=>v(i.target.value),className:"min-w-[11rem]",children:[r.jsx("option",{value:"",children:"All Branches"}),n.map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))]}),r.jsxs(he,{"aria-label":"Filter by loan officer",value:h,onChange:i=>f(i.target.value),className:"min-w-[12rem]",children:[r.jsx("option",{value:"",children:"All Loan Officers"}),s.map(i=>r.jsx("option",{value:i.id,children:i.name||i.email},i.id))]}),r.jsxs(he,{"aria-label":"Filter by time range",value:p,onChange:i=>g(i.target.value),className:"min-w-[10rem]",children:[r.jsx("option",{value:"",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"}),r.jsx("option",{value:"quarter",children:"This Quarter"}),r.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),r.jsx("option",{value:"annual",children:"Annual"})]}),r.jsxs(he,{"aria-label":"Auto refresh interval",value:x,onChange:i=>A(Number(i.target.value)),className:"min-w-[12rem]",children:[r.jsx("option",{value:0,children:"No Auto-Refresh"}),r.jsx("option",{value:1,children:"Every 1 min"}),r.jsx("option",{value:5,children:"Every 5 mins"}),r.jsx("option",{value:15,children:"Every 15 mins"})]}),r.jsx("button",{className:P.btn,onClick:()=>{const i=new AbortController;Promise.all([je(i.signal),we(i.signal),ne(i.signal)]).then(()=>{I(new Date),x>0&&w(Date.now()+x*6e4),z("Dashboard refreshed","success")}).catch(()=>z("Refresh failed","error")).finally(()=>i.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]}),x>0&&b&&r.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs",style:{border:"2px solid var(--border-strong)",color:"var(--fg)"},children:["Auto-refresh in ",bt,":",jt]})]}),r.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:vt.map(i=>r.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:i.msg},i.id))}),((k==null?void 0:k.length)??0)>0&&r.jsxs("div",{className:`${P.card} overflow-hidden`,children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:"var(--border)",background:"var(--table-head-bg)"},children:[r.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--muted)"},children:"General Communications"}),k.some(i=>Array.isArray(i.attachments)&&i.attachments.length>0)&&r.jsxs("button",{onClick:yt,className:`${P.btn} h-7 px-2 text-xs`,title:"Open all attachments",disabled:B,children:[r.jsx(wt,{className:"w-3 h-3"})," Download all"]})]}),r.jsxs("div",{className:"relative h-10",children:[r.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),r.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite",color:"var(--fg)"},children:k.map((i,c)=>{var N;return r.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.type&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:i.type}),i.priority&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:i.priority}),typeof i.audienceBranchId<"u"&&i.audienceBranchId!==null&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:((N=n.find(M=>String(M.id)===String(i.audienceBranchId)))==null?void 0:N.name)||`Branch #${i.audienceBranchId}`}),r.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-600"}),r.jsx("span",{className:"truncate",children:i.text||i.title})]},i.id||i.text||c)})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(fe,{to:"/loans/add",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Add Loan"]}),r.jsxs(fe,{to:"/borrowers/add",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Add Borrower"]}),r.jsxs(fe,{to:"/repayments/new",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Record Repayment"]})]}),r.jsx("main",{className:"space-y-6",children:pt?r.jsx("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:Array.from({length:8}).map((i,c)=>r.jsx(gt,{className:"h-32"},c))}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:[r.jsx(T,{tone:"indigo",title:"Total Borrowers",value:D(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:r.jsx(ma,{className:"w-6 h-6"}),to:L(R.borrowers)}),r.jsx(T,{tone:"sky",title:"Total Loans",value:D(e==null?void 0:e.totalLoans).toLocaleString(),icon:r.jsx(Be,{className:"w-6 h-6"}),to:L(R.loans)}),r.jsx(T,{tone:"blue",title:"Total Disbursed",value:_(e==null?void 0:e.totalDisbursed),icon:r.jsx(Be,{className:"w-6 h-6"}),to:L(R.loans,{tab:"disbursed"})}),r.jsx(T,{tone:"emerald",title:"Total Paid",value:_(e==null?void 0:e.totalPaid),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.repayments,{tab:"paid"})}),r.jsx(T,{tone:"emerald",title:"Total Repaid",value:_(e==null?void 0:e.totalRepaid),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.repayments,{tab:"paid"})}),r.jsx(T,{tone:"indigo",title:"Expected Repayments",value:_(e==null?void 0:e.totalExpectedRepayments),icon:r.jsx(sa,{className:"w-6 h-6"}),to:L(R.expectedRepayments,{tab:"expected"})}),r.jsx(T,{tone:"cyan",title:"Total Deposits",value:_(e==null?void 0:e.totalDeposits),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.deposits)}),r.jsx(T,{tone:"amber",title:"Total Withdrawals",value:_(e==null?void 0:e.totalWithdrawals),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.withdrawals)}),r.jsx(T,{tone:"blue",title:"Net Savings",value:_(e==null?void 0:e.netSavings),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.savings)}),r.jsx(T,{tone:"rose",title:"Defaulted Loan",value:_(e==null?void 0:e.defaultedLoan),icon:r.jsx(Ue,{className:"w-6 h-6"}),to:L(R.defaultedLoans,{tab:"defaulted"})}),r.jsx(T,{tone:"rose",title:"Defaulted Interest",value:_(e==null?void 0:e.defaultedInterest),icon:r.jsx(Ue,{className:"w-6 h-6"}),to:L(R.defaultedInterest,{tab:"defaulted-interest"})}),r.jsx(T,{tone:"violet",title:"Outstanding Loan",value:_(e==null?void 0:e.outstandingLoan),icon:r.jsx(Be,{className:"w-6 h-6"}),to:L(R.outstandingLoan,{tab:"outstanding"})}),r.jsx(T,{tone:"violet",title:"Outstanding Interest",value:_(e==null?void 0:e.outstandingInterest),icon:r.jsx(X,{className:"w-6 h-6"}),to:L(R.outstandingInterest,{tab:"outstanding-interest"})}),r.jsx(T,{tone:"slate",title:"Written Off",value:_(e==null?void 0:e.writtenOff),icon:r.jsx(ca,{className:"w-6 h-6"}),to:L(R.writtenOff,{tab:"written-off"})}),r.jsx(T,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${D(e==null?void 0:e.parPercent)}%`,icon:r.jsx(Ge,{className:"w-6 h-6"}),to:L(R.par,{tab:"par"})})]}),O&&r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Ge,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:"text-lg font-semibold",children:`Monthly Trends${O.month||O.year?` — ${O.month||""} ${O.year||""}`:""}`})]}),r.jsx("div",{className:"mb-4",children:r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:[{name:"Loans",value:D(O.monthlyLoans)},{name:"Deposits",value:D(O.monthlyDeposits)},{name:"Repayments",value:D(O.monthlyRepayments)}],children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"name",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Oe,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ce,{wrapperStyle:{color:y.legend}}),r.jsx(H,{dataKey:"value",fill:y.bar1})]})})}),(()=>{const i=[D(O.monthlyLoans),D(O.monthlyDeposits),D(O.monthlyRepayments)],c=Math.max(...i);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"text-indigo-600",children:r.jsx(ke,{label:"Loans (count)",value:D(O.monthlyLoans),max:c})}),r.jsx("div",{className:"text-emerald-600",children:r.jsx(ke,{label:"Deposits (TZS)",value:D(O.monthlyDeposits),max:c})}),r.jsx("div",{className:"text-blue-600",children:r.jsx(ke,{label:"Repayments (TZS)",value:D(O.monthlyRepayments),max:c})})]})})()]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:P.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Top Borrowers"})}),te.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:P.th,children:"Name"}),r.jsx("th",{className:P.th,children:"Outstanding"})]})}),r.jsx("tbody",{children:te.map(i=>r.jsxs("tr",{children:[r.jsx("td",{className:P.td,children:i.name}),r.jsx("td",{className:P.td,children:_(i.outstanding)})]},i.id))})]})]}),r.jsxs("div",{className:P.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming Repayments"})}),ae.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:P.th,children:"Borrower"}),r.jsx("th",{className:P.th,children:"Due Date"}),r.jsx("th",{className:P.th,children:"Amount"})]})}),r.jsx("tbody",{children:ae.map(i=>r.jsxs("tr",{children:[r.jsx("td",{className:P.td,children:i.borrower}),r.jsx("td",{className:P.td,children:i.dueDate}),r.jsx("td",{className:P.td,children:_(i.amount)})]},i.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Branch Performance"}),re.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:re,children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"branch",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Oe,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ce,{wrapperStyle:{color:y.legend}}),r.jsx(H,{dataKey:"disbursed",fill:y.bar1}),r.jsx(H,{dataKey:"repayments",fill:y.bar2})]})})]}),r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Officer Performance"}),de.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:de,children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"officer",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Oe,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Ce,{wrapperStyle:{color:y.legend}}),r.jsx(H,{dataKey:"loans",fill:y.bar1}),r.jsx(H,{dataKey:"collections",fill:y.bar2})]})})]})]})]})})]})})},T=({title:t,value:e,icon:a,tone:n="indigo",to:o=null,delta:s=null,deltaLabel:d="",spark:u=null})=>{const v={indigo:"text-indigo-600",sky:"text-sky-600",blue:"text-blue-600",emerald:"text-emerald-600",cyan:"text-cyan-600",amber:"text-amber-600",violet:"text-violet-600",rose:"text-rose-600",slate:"text-slate-500"}[n]||"text-slate-500",h=()=>{if(!Array.isArray(u)||u.length<2)return null;const p=96,g=28,x=2,A=Math.min(...u),j=Math.max(...u),I=Math.max(j-A,1e-6),b=(p-x*2)/(u.length-1),w="M "+u.map((m,S)=>{const k=(x+S*b).toFixed(1),C=(g-x-(m-A)/I*(g-x*2)).toFixed(1);return`${k} ${C}`}).join(" L ");return r.jsx("svg",{width:p,height:g,className:"mt-2 opacity-70",children:r.jsx("path",{d:w,fill:"none",stroke:"currentColor",strokeWidth:"2"})})},f=s==null?"":s>=0?"text-emerald-700 bg-emerald-50 ring-1 ring-emerald-200":"text-rose-700 bg-rose-50 ring-1 ring-rose-200";return r.jsxs("div",{className:"group relative",children:[o&&r.jsx(fe,{to:o,className:"absolute inset-0 z-10 rounded-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","aria-label":`View ${t} details`,title:`View ${t} details`}),r.jsxs("div",{className:"relative rounded-2xl p-5 min-h-[10.5rem] shadow transition-all group-hover:shadow-md group-hover:-translate-y-0.5 border-2",style:{background:"var(--card)",borderColor:"var(--border-strong)",color:"var(--fg)"},children:[r.jsxs("div",{className:"relative flex items-start justify-between gap-3",children:[r.jsx("div",{className:`p-3 rounded-full ring-2 ${v}`,style:{background:"var(--card)",boxShadow:"0 1px 0 rgba(0,0,0,.04)"},children:a}),s!=null&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium ${f}`,children:[s>=0?"↑":"↓"," ",Math.abs(s).toLocaleString(),"%",d&&r.jsxs("span",{className:"opacity-70",children:[" ",d]})]})]}),r.jsxs("div",{className:"relative mt-3 min-w-0",children:[r.jsx("h3",{className:`text-sm font-semibold truncate ${v}`,children:t}),r.jsx("p",{className:"text-[28px] md:text-[32px] leading-tight font-semibold font-mono tabular-nums break-words",children:e??"—"})]}),r.jsx("div",{className:`relative ${v}`,children:r.jsx(h,{})})]})]})};export{Pr as default};
