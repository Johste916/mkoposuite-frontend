import{r as d,j as t,L as b,g as h}from"./index-8DtxmKky.js";const j="w-full px-4 md:px-6 lg:px-8 py-6 min-h-screen bg-white text-slate-900",y="rounded-2xl border-2 border-slate-400 bg-white shadow-lg",N="inline-flex items-center gap-1 text-indigo-700 font-bold underline decoration-2 underline-offset-4 hover:text-indigo-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400 rounded",w="inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border-2 border-slate-400 bg-white hover:bg-slate-50 cursor-pointer font-semibold",v=l=>{const r="px-2 py-0.5 text-xs font-semibold rounded-full border",a=String(l||"pending").toLowerCase();return a.includes("verified")||a==="approved"?`${r} bg-emerald-100 border-emerald-300 text-emerald-800`:a.includes("rejected")?`${r} bg-rose-100 border-rose-300 text-rose-800`:a.includes("pending")?`${r} bg-amber-100 border-amber-300 text-amber-800`:`${r} bg-slate-100 border-slate-300 text-slate-800`},k=()=>{const[l,r]=d.useState([]),[a,x]=d.useState(!0),[p,m]=d.useState(""),i=async e=>{var s,o;try{x(!0);const c=e?{signal:e}:{},n=await h.get("/borrowers/kyc/queue",c),g=Array.isArray(n.data)?n.data:((s=n.data)==null?void 0:s.items)||((o=n.data)==null?void 0:o.data)||[];r(g),m("")}catch{m("Failed to load KYC queue"),r([])}finally{x(!1)}};d.useEffect(()=>{const e=new AbortController;return i(e.signal),()=>e.abort()},[]);const u=async(e,s)=>{if(s!=null&&s.length)try{const o=new FormData;Array.from(s).forEach(c=>o.append("file",c)),await h.post(`/borrowers/${encodeURIComponent(e)}/kyc`,o,{headers:{"Content-Type":"multipart/form-data"}}),await i(),alert("KYC uploaded")}catch{alert("Failed to upload KYC")}},f=e=>(e==null?void 0:e.name)||`${(e==null?void 0:e.firstName)||""} ${(e==null?void 0:e.lastName)||""}`.trim()||(e==null?void 0:e.id)||"—";return t.jsxs("div",{className:j,children:[t.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight",children:"KYC Queue"}),t.jsx("button",{onClick:()=>i(),className:"px-3 py-2 rounded-lg border-2 border-slate-400 bg-white hover:bg-slate-50 font-semibold","aria-busy":a,children:"Refresh"})]}),t.jsx("div",{className:`${y} overflow-hidden`,children:t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full text-[15px] border-collapse",children:[t.jsx("thead",{className:"bg-slate-100 sticky top-0",children:t.jsxs("tr",{className:"text-left",children:[t.jsx("th",{className:"px-3 py-3 font-semibold border-b-2 border-slate-200",children:"Borrower"}),t.jsx("th",{className:"px-3 py-3 font-semibold border-b-2 border-slate-200",children:"Phone"}),t.jsx("th",{className:"px-3 py-3 font-semibold border-b-2 border-slate-200",children:"Status"}),t.jsx("th",{className:"px-3 py-3 font-semibold border-b-2 border-slate-200",children:"Upload"})]})}),t.jsx("tbody",{children:a?t.jsx("tr",{children:t.jsx("td",{className:"p-4 text-slate-700",colSpan:4,children:"Loading…"})}):p?t.jsx("tr",{children:t.jsx("td",{className:"p-4 text-rose-700",colSpan:4,children:p})}):l.length===0?t.jsx("tr",{children:t.jsx("td",{className:"p-4 text-slate-700",colSpan:4,children:"Queue is empty."})}):l.map(e=>t.jsxs("tr",{className:"odd:bg-white even:bg-slate-50 border-t border-slate-200",children:[t.jsx("td",{className:"px-3 py-2",children:t.jsx(b,{to:`/borrowers/${encodeURIComponent(e.id)}`,className:N,children:f(e)})}),t.jsx("td",{className:"px-3 py-2",children:e.phone||"—"}),t.jsx("td",{className:"px-3 py-2",children:t.jsx("span",{className:v(e.kycStatus||e.status),children:e.kycStatus||e.status||"pending"})}),t.jsx("td",{className:"px-3 py-2",children:t.jsxs("label",{className:w,children:[t.jsx("span",{children:"Choose files…"}),t.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:s=>u(e.id,s.target.files)})]})})]},e.id))})]})})})]})};export{k as default};
