import{r as o,j as e,b as m}from"./index-ChU33jNq.js";function f({title:h,category:r}){const[x,j]=o.useState([]),[p,d]=o.useState(""),[l,c]=o.useState({name:"",code:"",meta:""}),i=async()=>{var s,t;d("");try{const{data:a}=await m.get(`/admin/types/${r}`);j(a||[])}catch(a){d(((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.error)||a.message)}};o.useEffect(()=>{i()},[r]);const N=async()=>{var s,t;try{let a;if(l.meta&&typeof l.meta=="string")try{a=JSON.parse(l.meta)}catch{}else l.meta&&typeof l.meta=="object"&&(a=l.meta);await m.post(`/admin/types/${r}`,{name:l.name,code:l.code,meta:a}),c({name:"",code:"",meta:""}),await i()}catch(a){d(((t=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:t.error)||a.message)}},u=async s=>{var t,a;if(window.confirm("Delete?"))try{await m.delete(`/admin/types/${r}/${s}`),await i()}catch(n){d(((a=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:a.error)||n.message)}};return e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm space-y-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:h}),p&&e.jsx("div",{className:"text-sm text-rose-600",children:p}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs",children:"Name"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:l.name,onChange:s=>c(t=>({...t,name:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs",children:"Code"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:l.code,onChange:s=>c(t=>({...t,code:s.target.value}))})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"block text-xs",children:"Meta (JSON, optional)"}),e.jsx("textarea",{rows:4,className:"w-full border rounded px-2 py-1 text-sm",value:l.meta,onChange:s=>c(t=>({...t,meta:s.target.value}))})]}),e.jsx("div",{children:e.jsx("button",{onClick:N,className:"px-3 py-2 border rounded bg-white",children:"Add"})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-xl",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"Name"}),e.jsx("th",{className:"p-2 text-left",children:"Code"}),e.jsx("th",{className:"p-2 text-left",children:"Meta"}),e.jsx("th",{className:"p-2"})]})}),e.jsx("tbody",{children:x.length===0?e.jsx("tr",{children:e.jsx("td",{className:"p-3",colSpan:4,children:"No items"})}):x.map(s=>e.jsxs("tr",{className:"border-b align-top",children:[e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"p-2",children:s.code||"—"}),e.jsx("td",{className:"p-2",children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:s.meta?JSON.stringify(s.meta,null,2):"—"})}),e.jsx("td",{className:"p-2 text-right",children:e.jsx("button",{onClick:()=>u(s.id),className:"px-2 py-1 text-xs border rounded",children:"Delete"})})]},s.id))})]})})]})}export{f as T};
