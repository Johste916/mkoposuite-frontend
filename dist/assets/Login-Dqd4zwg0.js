import{u as L,a as F,r,j as e,F as I,b as A,c as C,d as P,L as N,e as O,f as R}from"./index-CecoMAn-.js";const D="https://mkoposuite-backend-42w2.onrender.com/api",o=D.replace(/\/+$/,""),$=/\/api$/i.test(o)?`${o}/login`:`${o}/api/login`,B="/brand/mkoposuite-logo.png",G="Please login to continue";function U(){const y=L(),d=F(),[c,m]=r.useState(""),[x,_]=r.useState(""),[i,S]=r.useState(!1),[u,p]=r.useState(""),[g,h]=r.useState(!1);r.useEffect(()=>{const n=new URLSearchParams(d.search).get("email");n&&m(n)},[d.search]);async function k(s){var n,b,f,v,j;s.preventDefault(),p(""),h(!0);try{const{data:t}=await R.post($,{email:c,password:x}),{token:l,user:a,tenantId:E}=t||{};if(!l)throw new Error("No token received from server");localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(a||{}));const w=E||(a==null?void 0:a.tenantId)||((n=a==null?void 0:a.tenant)==null?void 0:n.id)||void 0||null;w&&localStorage.setItem("activeTenantId",String(w)),y("/")}catch(t){const l=((f=(b=t==null?void 0:t.response)==null?void 0:b.data)==null?void 0:f.error)||((j=(v=t==null?void 0:t.response)==null?void 0:v.data)==null?void 0:j.message)||"Invalid email or password";p(l)}finally{h(!1)}}return e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-slate-100 via-stone-100 to-slate-100",children:[e.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[e.jsx("div",{className:"absolute inset-0 opacity-[.10] bg-[radial-gradient(900px_520px_at_15%_-10%,rgba(16,185,129,0.18),transparent_70%)]"}),e.jsx("div",{className:"absolute inset-0 opacity-[.07] bg-[radial-gradient(780px_420px_at_95%_98%,rgba(245,158,11,0.15),transparent_70%)]"})]}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"rounded-2xl bg-white/98 backdrop-blur-sm shadow-[0_12px_40px_-10px_rgba(15,23,42,0.25)] ring-1 ring-slate-200",children:e.jsxs("div",{className:"px-8 pt-8 pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute -inset-4 rounded-[1.8rem] bg-[conic-gradient(from_200deg_at_50%_0%,rgba(16,185,129,0.25),transparent_40%,rgba(245,158,11,0.22),transparent_85%)] blur-2xl"}),e.jsx("div",{className:"relative grid place-items-center h-36 w-36 sm:h-40 sm:w-40 rounded-3xl bg-emerald-50 ring-1 ring-emerald-200/80 shadow",children:e.jsx("img",{src:B,alt:"MkopoSuite",className:"h-28 w-auto sm:h-32 object-contain select-none",draggable:!1,loading:"eager"})})]}),e.jsx("p",{className:"mt-5 text-[13px] text-slate-500",children:G})]}),u?e.jsx("div",{role:"alert",className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:u}):null,e.jsxs("form",{onSubmit:k,className:"mt-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(I,{})}),e.jsx("input",{type:"email",value:c,onChange:s=>m(s.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-3 py-2 text-sm shadow-sm outline-none transition focus:border-emerald-500/70 focus:ring-2 focus:ring-emerald-100",required:!0,placeholder:"admin@example.com",autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(A,{})}),e.jsx("input",{type:i?"text":"password",value:x,onChange:s=>_(s.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-10 py-2 text-sm shadow-sm outline-none transition focus:border-emerald-500/70 focus:ring-2 focus:ring-emerald-100",required:!0,placeholder:"Enter your password",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>S(s=>!s),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600","aria-label":i?"Hide password":"Show password",children:i?e.jsx(C,{}):e.jsx(P,{})})]})]}),e.jsx("div",{className:"flex items-center justify-end text-sm",children:e.jsx(N,{to:"/forgot-password",className:"text-emerald-700 hover:text-emerald-800",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:g,className:"inline-flex w-full items-center justify-center rounded-xl bg-emerald-700 px-4 py-2.5 text-sm font-medium text-white shadow hover:bg-emerald-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 disabled:opacity-60",children:g?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 animate-spin"}),"Logging in…"]}):"Login"})]}),e.jsxs("div",{className:"mt-5 text-center text-sm text-slate-500",children:["Don’t have an account?"," ",e.jsx(N,{to:"/signup",className:"font-medium text-emerald-700 hover:text-emerald-800",children:"Create one"})]}),e.jsxs("div",{className:"mt-4 text-center text-[11px] text-slate-400",children:["© ",new Date().getFullYear()," MkopoSuite. All rights reserved."]})]})}),e.jsx("div",{className:"mx-auto mt-2 h-2 w-56 rounded-full bg-emerald-300/25 blur-md"})]})})]})}export{U as default};
