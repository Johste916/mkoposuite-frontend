import{a as r}from"./index-BhqW3eqK.js";const m=(e={})=>Object.entries(e).filter(([,t])=>t!=null&&t!=="").map(([t,n])=>`${encodeURIComponent(t)}=${encodeURIComponent(n)}`).join("&");function a(e={}){if(e.from&&e.to)return e;const t=new Date,n=new Date(t);n.setDate(n.getDate()-30);const o=s=>s.toISOString().slice(0,10);return{...e,from:e.from||o(n),to:e.to||o(t)}}const p={async list(e){return r.getFirst(["/repayments","/transactions/repayments"],{params:e})},async listByLoan(e,t){return r.getFirst([`/repayments/loan/${encodeURIComponent(e)}`,`/loan/${encodeURIComponent(e)}/repayments`],{params:t})},async get(e){return r.getFirst([`/repayments/${encodeURIComponent(e)}`,`/repayments/id/${encodeURIComponent(e)}`])},async previewAllocation(e){return r.postFirst(["/repayments/preview-allocation","/preview-allocation"],e)},async create(e){return r.postFirst(["/repayments/manual","/manual"],e)},async createBulk(e=[]){return r.postFirst(["/repayments/bulk","/bulk"],e)},async uploadCsv(e){const t=new FormData;return t.append("file",e),r.postFirst(["/repayments/csv","/upload-csv"],t,{headers:{}})},pendingApprovals(){return r.getFirst(["/repayments/approvals/pending","/approvals/pending"])},approve(e){return r.postFirst([`/repayments/approvals/${encodeURIComponent(e)}/approve`,`/approvals/${encodeURIComponent(e)}/approve`],{})},reject(e,t=""){return r.postFirst([`/repayments/approvals/${encodeURIComponent(e)}/reject`,`/approvals/${encodeURIComponent(e)}/reject`],{reason:t})},summary(e){const t=a(e);return r.getFirst(["/reports/summary","/repayments/summary","/reports/repayments/summary"],{params:t})},timeseries(e){const t=a(e);return r.getFirst(["/reports/timeseries","/repayments/timeseries","/reports/repayments/timeseries"],{params:t})},exportCsvUrl(e){var s;const t=((s=r.defaults.baseURL)==null?void 0:s.replace(/\/+$/,""))||"",n=e?`?${m(e)}`:"";return`${t}/repayments/export.csv${n}`}},{previewAllocation:i}=p,y=p.create;export{y as c,i as p,p as r};
