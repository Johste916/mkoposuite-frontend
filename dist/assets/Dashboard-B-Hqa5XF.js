import{r as l,b as G,j as a,L as Ne}from"./index-DMb-qiOH.js";import{c as F}from"./createLucideIcon-D1ThL8U0.js";import{C as we}from"./circle-plus-CUYFAyjK.js";import{U as Oa}from"./users-BrXcp47P.js";import{i as Ue,S as Ia,a as ve,r as Ea,u as la,R as Ba,b as Da,c as _a,d as Ma,g as Ta,e as oa,f as La,h as Ra,j as $a,k as pe,l as Ka,G as za,C as Fa,m as da,n as Wa,L as be,o as Ua,p as Va,t as Ga,q as Ve,s as ca,v as ua,w as xa,x as ma,y as qa,z as ha,A as Ha,J as Xa,B as Z,D as Ya,E as Za,F as Ja,H as Qa,I as Ge,K as q,M as et,N as ee,O as ae,P as re,Q as at,T as ga,U as pa,V as ba,W as tt,X as rt,Y as qe,Z as st,_ as nt,$ as He,a0 as it,a1 as De,a2 as Xe,a3 as lt,a4 as ot,a5 as Ae,a6 as Pe,a7 as Se,a8 as Ce,a9 as Oe,aa as Ie}from"./CartesianChart-BnCG8SmN.js";import{U as dt}from"./user-plus-B2Gfujd4.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ye=F("chart-no-axes-column",ct);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ze=F("clipboard-list",ut);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ee=F("credit-card",xt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],J=F("dollar-sign",mt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=F("download",ht);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Qe=F("info",gt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],bt=F("message-square",pt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],vt=F("thumbs-down",ft);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ea=F("triangle-alert",yt);var kt="Invariant failed";function jt(t,e){throw new Error(kt)}var Nt=["x","y"];function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_e.apply(null,arguments)}function aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aa(Object(r),!0).forEach(function(n){wt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wt(t,e,r){return(e=At(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function At(t){var e=Pt(t,"string");return typeof e=="symbol"?e:e+""}function Pt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function St(t,e){if(t==null)return{};var r,n,o=Ct(t,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(n=0;n<d.length;n++)r=d[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Ct(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function Ot(t,e){var{x:r,y:n}=t,o=St(t,Nt),d="".concat(r),c=parseInt(d,10),g="".concat(n),v=parseInt(g,10),x="".concat(e.height||o.height),h=parseInt(x,10),p="".concat(e.width||o.width),y=parseInt(p,10);return le(le(le(le(le({},e),o),c?{x:c}:{}),v?{y:v}:{}),{},{height:h,width:y,name:e.name,radius:e.radius})}function fa(t){return l.createElement(Ia,_e({shapeType:"rectangle",propTransformer:Ot,activeClassName:"recharts-active-bar"},t))}var It=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(Ue(e))return e;var d=Ue(n)||ve(n);return d?e(n,o):(d||jt(),r)}},Et=["onMouseEnter","onMouseLeave","onClick"],Bt=["value","background","tooltipPosition"],Dt=["id"],_t=["onMouseEnter","onClick","onMouseLeave"];function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(null,arguments)}function ta(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ta(Object(r),!0).forEach(function(n){Mt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mt(t,e,r){return(e=Tt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tt(t){var e=Lt(t,"string");return typeof e=="symbol"?e:e+""}function Lt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fe(t,e){if(t==null)return{};var r,n,o=Rt(t,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(n=0;n<d.length;n++)r=d[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Rt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var $t=t=>{var{dataKey:e,name:r,fill:n,legendType:o,hide:d}=t;return[{inactive:d,dataKey:e,type:o,color:n,value:oa(r,e),payload:t}]};function Kt(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:o,name:d,hide:c,unit:g}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:oa(d,e),hide:c,type:t.tooltipType,color:t.fill,unit:g}}}function zt(t){var e=pe(ca),{data:r,dataKey:n,background:o,allOtherBarProps:d}=t,{onMouseEnter:c,onMouseLeave:g,onClick:v}=d,x=fe(d,Et),h=ua(c,n),p=xa(g),y=ma(v,n);if(!o||r==null)return null;var j=qa(o,!1);return l.createElement(l.Fragment,null,r.map((A,f)=>{var{value:C,background:k,tooltipPosition:N}=A,u=fe(A,Bt);if(!k)return null;var S=h(A,f),w=p(A,f),O=y(A,f),P=D(D(D(D(D({option:o,isActive:String(f)===e},u),{},{fill:"#eee"},k),j),ha(x,A,f)),{},{onMouseEnter:S,onMouseLeave:w,onClick:O,dataKey:n,index:f,className:"recharts-bar-background-rectangle"});return l.createElement(fa,te({key:"background-bar-".concat(f)},P))}))}function va(t){var{data:e,props:r,showLabels:n}=t,o=Ya(r),{id:d}=o,c=fe(o,Dt),{shape:g,dataKey:v,activeBar:x}=r,h=pe(ca),p=pe(Za),{onMouseEnter:y,onClick:j,onMouseLeave:A}=r,f=fe(r,_t),C=ua(y,v),k=xa(A),N=ma(j,v);return e?l.createElement(l.Fragment,null,e.map((u,S)=>{var w=x&&String(S)===h&&(p==null||v===p),O=w?x:g,P=D(D(D({},c),u),{},{isActive:w,option:O,index:S,dataKey:v});return l.createElement(be,te({className:"recharts-bar-rectangle"},ha(f,u,S),{onMouseEnter:C(u,S),onMouseLeave:k(u,S),onClick:N(u,S),key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(S)}),l.createElement(fa,P))}),n&&Ja.renderCallByParent(r,e)):null}function Ft(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:o,isAnimationActive:d,animationBegin:c,animationDuration:g,animationEasing:v,onAnimationEnd:x,onAnimationStart:h}=e,p=r.current,y=Ha(e,"recharts-bar-"),[j,A]=l.useState(!1),f=l.useCallback(()=>{typeof x=="function"&&x(),A(!1)},[x]),C=l.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return l.createElement(Xa,{begin:c,duration:g,isActive:d,easing:v,onAnimationEnd:f,onAnimationStart:C,key:y},k=>{var N=k===1?n:n==null?void 0:n.map((u,S)=>{var w=p&&p[S];if(w)return D(D({},u),{},{x:Z(w.x,u.x,k),y:Z(w.y,u.y,k),width:Z(w.width,u.width,k),height:Z(w.height,u.height,k)});if(o==="horizontal"){var O=Z(0,u.height,k);return D(D({},u),{},{y:u.y+u.height-O,height:O})}var P=Z(0,u.width,k);return D(D({},u),{},{width:P})});return k>0&&(r.current=N??null),N==null?null:l.createElement(be,null,l.createElement(va,{props:e,data:N,showLabels:!j}))})}function Wt(t){var{data:e,isAnimationActive:r}=t,n=l.useRef(null);return r&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(Ft,{previousRectanglesRef:n,props:t}):l.createElement(va,{props:t,data:e,showLabels:!0})}var ya=0,Ut=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:da(t,e)}};class Vt extends l.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:o,xAxisId:d,yAxisId:c,needClip:g,background:v,id:x}=this.props;if(e)return null;var h=Wa("recharts-bar",o),p=x;return l.createElement(be,{className:h,id:x},g&&l.createElement("defs",null,l.createElement(Ua,{clipPathId:p,xAxisId:d,yAxisId:c})),l.createElement(be,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(p,")"):void 0},l.createElement(zt,{data:r,dataKey:n,background:v,allOtherBarProps:this.props}),l.createElement(Wt,this.props)),this.props.children)}}var Gt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!za.isSsr,legendType:"rect",minPointSize:ya,xAxisId:0,yAxisId:0};function qt(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:d,activeBar:c,animationBegin:g,animationDuration:v,animationEasing:x,isAnimationActive:h}=t,{needClip:p}=La(e,r),y=Ra(),j=la(),A=$a(t.children,Fa),f=pe(N=>yr(N,e,r,j,t.id,A));if(y!=="vertical"&&y!=="horizontal")return null;var C,k=f==null?void 0:f[0];return k==null||k.height==null||k.width==null?C=0:C=y==="vertical"?k.height/2:k.width/2,l.createElement(Ka,{xAxisId:e,yAxisId:r,data:f,dataPointFormatter:Ut,errorBarOffset:C},l.createElement(Vt,te({},t,{layout:y,needClip:p,data:f,xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:d,activeBar:c,animationBegin:g,animationDuration:v,animationEasing:x,isAnimationActive:h})))}function Ht(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:o,bandSize:d,xAxis:c,yAxis:g,xAxisTicks:v,yAxisTicks:x,stackedData:h,displayedData:p,offset:y,cells:j}=t,A=e==="horizontal"?g:c,f=h?A.scale.domain():null,C=Va({numericAxis:A});return p.map((k,N)=>{var u,S,w,O,P,W;h?u=Ga(h[N],f):(u=da(k,r),Array.isArray(u)||(u=[C,u]));var T=It(n,ya)(u[1],N);if(e==="horizontal"){var H,[de,U]=[g.scale(u[0]),g.scale(u[1])];S=Ve({axis:c,ticks:v,bandSize:d,offset:o.offset,entry:k,index:N}),w=(H=U??de)!==null&&H!==void 0?H:void 0,O=o.size;var ce=de-U;if(P=Qa(ce)?0:ce,W={x:S,y:y.top,width:O,height:y.height},Math.abs(T)>0&&Math.abs(P)<Math.abs(T)){var se=Ge(P||T)*(Math.abs(T)-Math.abs(P));w-=se,P+=se}}else{var[ne,X]=[c.scale(u[0]),c.scale(u[1])];if(S=ne,w=Ve({axis:g,ticks:x,bandSize:d,offset:o.offset,entry:k,index:N}),O=X-ne,P=o.size,W={x:y.left,y:w,width:y.width,height:P},Math.abs(T)>0&&Math.abs(O)<Math.abs(T)){var Y=Ge(O||T)*(Math.abs(T)-Math.abs(O));O+=Y}}if(S==null||w==null||O==null||P==null)return null;var ue=D(D({},k),{},{x:S,y:w,width:O,height:P,value:h?u:u[1],payload:k,background:W,tooltipPosition:{x:S+O/2,y:w+P/2}},j&&j[N]&&j[N].props);return ue}).filter(Boolean)}function Q(t){var e=Ea(t,Gt),r=la();return l.createElement(Ba,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Da,{legendPayload:$t(e)}),l.createElement(_a,{fn:Kt,args:e}),l.createElement(Ma,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Ta(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),l.createElement(qt,te({},e,{id:n}))))}Q.displayName="Bar";function ra(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ra(Object(r),!0).forEach(function(n){Xt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xt(t,e,r){return(e=Yt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t){var e=Zt(t,"string");return typeof e=="symbol"?e:e+""}function Zt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jt=(t,e)=>e,Qt=(t,e,r)=>r,er=(t,e,r,n)=>n,ar=(t,e,r,n,o)=>o,oe=q([pa,ar],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),tr=q([oe],t=>t==null?void 0:t.maxBarSize),rr=(t,e,r,n,o,d)=>d,sa=(t,e,r)=>{var n=r??t;if(!ve(n))return De(n,e,0)},sr=q([re,pa,Jt,Qt,er],(t,e,r,n,o)=>e.filter(d=>t==="horizontal"?d.xAxisId===r:d.yAxisId===n).filter(d=>d.isPanorama===o).filter(d=>d.hide===!1).filter(d=>d.type==="bar")),nr=(t,e,r,n)=>{var o=re(t);return o==="horizontal"?qe(t,"yAxis",r,n):qe(t,"xAxis",e,n)},ir=(t,e,r)=>{var n=re(t);return n==="horizontal"?He(t,"xAxis",e):He(t,"yAxis",r)},lr=(t,e,r)=>{var n={},o=t.filter(it),d=t.filter(x=>x.stackId==null),c=o.reduce((x,h)=>(x[h.stackId]||(x[h.stackId]=[]),x[h.stackId].push(h),x),n),g=Object.entries(c).map(x=>{var[h,p]=x,y=p.map(A=>A.dataKey),j=sa(e,r,p[0].barSize);return{stackId:h,dataKeys:y,barSize:j}}),v=d.map(x=>{var h=[x.dataKey].filter(y=>y!=null),p=sa(e,r,x.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...g,...v]},or=q([sr,nt,ir],lr),dr=(t,e,r,n,o)=>{var d,c,g=oe(t,e,r,n,o);if(g!=null){var v=re(t),x=ba(t),{maxBarSize:h}=g,p=ve(h)?x:h,y,j;return v==="horizontal"?(y=ee(t,"xAxis",e,n),j=ae(t,"xAxis",e,n)):(y=ee(t,"yAxis",r,n),j=ae(t,"yAxis",r,n)),(d=(c=ga(y,j,!0))!==null&&c!==void 0?c:p)!==null&&d!==void 0?d:0}},ka=(t,e,r,n)=>{var o=re(t),d,c;return o==="horizontal"?(d=ee(t,"xAxis",e,n),c=ae(t,"xAxis",e,n)):(d=ee(t,"yAxis",r,n),c=ae(t,"yAxis",r,n)),ga(d,c)};function cr(t,e,r,n,o){var d=n.length;if(!(d<1)){var c=De(t,r,0,!0),g,v=[];if(Xe(n[0].barSize)){var x=!1,h=r/d,p=n.reduce((k,N)=>k+(N.barSize||0),0);p+=(d-1)*c,p>=r&&(p-=(d-1)*c,c=0),p>=r&&h>0&&(x=!0,h*=.9,p=d*h);var y=(r-p)/2>>0,j={offset:y-c,size:0};g=n.reduce((k,N)=>{var u,S={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j.offset+j.size+c,size:x?h:(u=N.barSize)!==null&&u!==void 0?u:0}},w=[...k,S];return j=w[w.length-1].position,w},v)}else{var A=De(e,r,0,!0);r-2*A-(d-1)*c<=0&&(c=0);var f=(r-2*A-(d-1)*c)/d;f>1&&(f>>=0);var C=Xe(o)?Math.min(f,o):f;g=n.reduce((k,N,u)=>[...k,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:A+(f+c)*u+(f-C)/2,size:C}}],v)}return g}}var ur=(t,e,r,n,o,d,c)=>{var g=ve(c)?e:c,v=cr(r,n,o!==d?o:d,t,g);return o!==d&&v!=null&&(v=v.map(x=>ge(ge({},x),{},{position:ge(ge({},x.position),{},{offset:x.position.offset-o/2})}))),v},xr=q([or,ba,tt,rt,dr,ka,tr],ur),mr=(t,e,r,n)=>ee(t,"xAxis",e,n),hr=(t,e,r,n)=>ee(t,"yAxis",r,n),gr=(t,e,r,n)=>ae(t,"xAxis",e,n),pr=(t,e,r,n)=>ae(t,"yAxis",r,n),br=q([xr,oe],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),fr=(t,e)=>{var r=st(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var o=t[n];if(o){var{stackedData:d}=o;if(d)return d.find(c=>c.key===r)}}}},vr=q([nr,oe],fr),yr=q([et,mr,hr,gr,pr,br,re,at,ka,vr,oe,rr],(t,e,r,n,o,d,c,g,v,x,h,p)=>{var{chartData:y,dataStartIndex:j,dataEndIndex:A}=g;if(!(h==null||d==null||c!=="horizontal"&&c!=="vertical"||e==null||r==null||n==null||o==null||v==null)){var{data:f}=h,C;if(f!=null&&f.length>0?C=f:C=y==null?void 0:y.slice(j,A+1),C!=null)return Ht({layout:c,barSettings:h,pos:d,bandSize:v,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:o,stackedData:x,displayedData:C,offset:t,cells:p})}}),kr=["axis","item"],Be=l.forwardRef((t,e)=>l.createElement(lt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kr,tooltipPayloadSearcher:ot,categoricalChartProps:t,ref:e}));const na="ms_dash_filters_v1",ia="ms_dash_auto_refresh_v1",jr=()=>{const[t,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const r=document.documentElement,n=new MutationObserver(()=>{e(r.classList.contains("dark"))});return n.observe(r,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),t},Dr=()=>{const t=jr(),[e,r]=l.useState(null),[n,o]=l.useState([]),[d,c]=l.useState([]),[g,v]=l.useState(""),[x,h]=l.useState(""),[p,y]=l.useState(""),[j,A]=l.useState(0),[f,C]=l.useState([]),[k,N]=l.useState(!1),[u,S]=l.useState([]),[w,O]=l.useState(0),[P,W]=l.useState(1),T=10,[H,de]=l.useState(""),[U,ce]=l.useState(""),[se,ne]=l.useState({}),[X,Y]=l.useState({}),[ue,xe]=l.useState({}),[L,ja]=l.useState(null),[Me,Nr]=l.useState([]),[Te,wr]=l.useState([]),[Le,Ar]=l.useState([]),[Re,Pr]=l.useState([]),[$e,Na]=l.useState(!0),[wa,Ke]=l.useState([]),$=(s,i="info")=>{const m=Math.random().toString(36).slice(2);Ke(B=>[...B,{id:m,msg:s,type:i}]),setTimeout(()=>Ke(B=>B.filter(I=>I.id!==m)),3500)},_=s=>{const i=Number(s);return Number.isFinite(i)?i:0},R=s=>{const i=_(s);return isNaN(i)?"TZS —":`TZS ${i.toLocaleString()}`},Aa=s=>{var i;return((i=n.find(m=>String(m.id)===String(s)))==null?void 0:i.name)||(s?`Branch #${s}`:"All branches")};l.useEffect(()=>{try{const s=localStorage.getItem(na);if(s){const i=JSON.parse(s);v(i.branchId||""),h(i.officerId||""),y(i.timeRange||"")}}catch{}try{const s=localStorage.getItem(ia);s&&A(Number(s)||0)}catch{}},[]),l.useEffect(()=>{const s={branchId:g,officerId:x,timeRange:p};localStorage.setItem(na,JSON.stringify(s))},[g,x,p]),l.useEffect(()=>{localStorage.setItem(ia,String(j||0))},[j]);const ze=l.useCallback(async s=>{try{const[i,m]=await Promise.all([G.get("/branches",{signal:s}),G.get("/users",{params:{role:"loan_officer"},signal:s})]);o(Array.isArray(i.data)?i.data:[]),c(Array.isArray(m.data)?m.data:[])}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),$("Failed to load filters","error"))}},[]),ye=l.useCallback(async s=>{try{const i=await G.get("/dashboard/summary",{params:{branchId:g,officerId:x,timeRange:p},signal:s});r(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),$("Failed to load summary","error"))}},[g,x,p]),ie=l.useCallback(async s=>{N(!0);try{const i=await G.get("/dashboard/communications",{signal:s}).catch(()=>null);i!=null&&i.data&&Array.isArray(i.data)?C(i.data):C(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{N(!1)}},[e]),V=l.useCallback(async(s={},i)=>{var m,B;try{const I=await G.get("/dashboard/activity",{params:{page:s.page??P,pageSize:T,dateFrom:H||void 0,dateTo:U||void 0},signal:i});S(((m=I.data)==null?void 0:m.items)||[]),O(((B=I.data)==null?void 0:B.total)||0)}catch(I){(I==null?void 0:I.name)!=="CanceledError"&&(console.error("Activity fetch error:",(I==null?void 0:I.message)||I),$("Failed to load activity","error"))}},[P,H,U]),ke=l.useCallback(async s=>{try{const i=await G.get("/dashboard/monthly-trends",{signal:s});ja(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),$("Failed to load trends","error"))}},[]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await ze(s.signal)}catch{}})(),()=>s.abort()},[ze]);const me=l.useCallback(async s=>{await Promise.all([ye(s),V({},s),ke(s)])},[ye,V,ke]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await me(s.signal)}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),$("Failed to load dashboard data","error"))}finally{Na(!1)}})(),()=>s.abort()},[me]),l.useEffect(()=>{if(!e)return;const s=new AbortController;return ie(s.signal).catch(i=>{(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),$("Failed to load communications","error"))}),()=>s.abort()},[e,ie]),l.useEffect(()=>{if(!j||j<=0)return;const s=setInterval(()=>{const i=new AbortController;Promise.all([me(i.signal),ie(i.signal)]).catch(()=>{}).finally(()=>i.abort())},j*6e4);return()=>clearInterval(s)},[j,me,ie]);const Pa=async s=>{const i=`c-${s}`;xe(m=>({...m,[i]:!0}));try{const m=(se[s]||"").trim();if(!m)return;await G.post(`/dashboard/activity/${s}/comment`,{comment:m}),ne(B=>({...B,[s]:""})),await V(),$("Reply posted","success")}catch(m){console.error("Add comment error:",(m==null?void 0:m.message)||m),$("Failed to post reply","error")}finally{xe(m=>({...m,[i]:!1}))}},Sa=async s=>{const i=`a-${s}`;xe(m=>({...m,[i]:!0}));try{const m=X[s]||{};if(!m.assigneeId)return;await G.post(`/dashboard/activity/${s}/assign`,{assigneeId:m.assigneeId,dueDate:m.dueDate||null,note:m.note||""}),Y(B=>({...B,[s]:{assigneeId:"",dueDate:"",note:""}})),await V(),$("Task assigned","success")}catch(m){console.error("Assign task error:",(m==null?void 0:m.message)||m),$("Failed to assign task","error")}finally{xe(m=>({...m,[i]:!1}))}},je=({label:s,value:i,max:m})=>{const B=_(i),I=_(m),he=I>0?Math.round(B/I*100):0;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-slate-400",children:[a.jsx("span",{children:s}),a.jsx("span",{children:B.toLocaleString()})]}),a.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded",children:a.jsx("div",{className:"h-2 rounded",style:{width:`${he}%`,backgroundColor:"currentColor"}})})]})},Fe=({className:s})=>a.jsx("div",{className:`animate-pulse bg-gray-100 dark:bg-slate-800/50 rounded ${s}`}),Ca=()=>{const s=f.flatMap(i=>(i.attachments||[]).map(m=>m.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((i,m)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),m*150)}),$(`Opening ${s.length} attachment${s.length>1?"s":""}…`,"info"))},z=e==null?void 0:e.dashboardMessage,b=t?{grid:"#334155",axis:"#94a3b8",legend:"#e2e8f0",tooltipBg:"#0f172a",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#475569",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border border-blue-100 dark:border-slate-700 p-4 md:p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-800 dark:text-slate-100 tracking-tight",children:"Dashboard"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("select",{value:g,onChange:s=>v(s.target.value),className:"border rounded-lg px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",children:[a.jsx("option",{value:"",children:"All Branches"}),n.map(s=>a.jsx("option",{value:s.id,children:s.name},s.id))]}),a.jsxs("select",{value:x,onChange:s=>h(s.target.value),className:"border rounded-lg px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",children:[a.jsx("option",{value:"",children:"All Loan Officers"}),d.map(s=>a.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),a.jsxs("select",{value:p,onChange:s=>y(s.target.value),className:"border rounded-lg px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",children:[a.jsx("option",{value:"",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"quarter",children:"This Quarter"}),a.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),a.jsx("option",{value:"annual",children:"Annual"})]}),a.jsxs("select",{value:j,onChange:s=>A(Number(s.target.value)),className:"border rounded-lg px-3 py-2 bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",children:[a.jsx("option",{value:0,children:"No Auto-Refresh"}),a.jsx("option",{value:1,children:"Every 1 min"}),a.jsx("option",{value:5,children:"Every 5 mins"}),a.jsx("option",{value:15,children:"Every 15 mins"})]}),a.jsx("button",{className:"px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700",onClick:()=>{const s=new AbortController;Promise.all([ye(s.signal),V({page:1},s.signal),ke(s.signal),ie(s.signal)]).then(()=>{W(1),$("Dashboard refreshed","success")}).catch(()=>$("Refresh failed","error")).finally(()=>s.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]})}),a.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:wa.map(s=>a.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),(e==null?void 0:e.importantNotice)&&a.jsx("div",{className:"rounded-xl border border-amber-200 dark:border-amber-900/40 bg-amber-50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-200 p-4",children:a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx(Qe,{className:"w-5 h-5 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Important Notice"}),a.jsx("p",{className:"text-sm",children:e.importantNotice})]})]})}),e!=null&&e.companyMessage?a.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-950/30 dark:border-blue-800 text-blue-700 dark:text-blue-200 p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qe,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm font-medium",children:e.companyMessage})]})}):$e?a.jsx(Fe,{className:"h-12"}):null,z&&a.jsx("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl shadow-sm p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[z.title&&a.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-slate-100",children:z.title}),z.text&&a.jsx("p",{className:"text-sm text-gray-700 dark:text-slate-300 mt-1",children:z.text}),Array.isArray(z.attachments)&&z.attachments.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-[11px] text-gray-500 dark:text-slate-400 mb-1",children:"Attachments"}),a.jsx("div",{className:"flex flex-wrap gap-3",children:z.attachments.map(s=>a.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 dark:text-blue-300 underline",title:s.fileName,children:s.fileName||"Attachment"},`${s.id}-${s.fileUrl}`))})]})]}),Array.isArray(z.attachments)&&z.attachments.length>0&&a.jsxs("button",{onClick:()=>{z.attachments.forEach((s,i)=>{s.fileUrl&&setTimeout(()=>window.open(s.fileUrl,"_blank","noopener,noreferrer"),i*150)})},className:"text-xs flex items-center gap-1 border rounded px-2 py-1 h-8 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",children:[a.jsx(Je,{className:"w-3 h-3"})," Open all"]})]})}),((f==null?void 0:f.length)??0)>0&&a.jsxs("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 dark:bg-slate-800/40 dark:border-slate-700",children:[a.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-slate-300",children:"General Communications"}),f.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&a.jsxs("button",{onClick:Ca,className:"text-xs flex items-center gap-1 border rounded px-2 py-1 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",children:[a.jsx(Je,{className:"w-3 h-3"})," Download all"]})]}),a.jsxs("div",{className:"relative h-10",children:[a.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),a.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-700 dark:text-slate-200 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:f.map(s=>a.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.type}),s.priority&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.priority}),s.audienceRole&&a.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:["role: ",s.audienceRole]}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:Aa(s.audienceBranchId)}),a.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),s.text]},s.id||s.text))})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(Ne,{to:"/loans/add",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Add Loan"]}),a.jsxs(Ne,{to:"/borrowers/add",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Add Borrower"]}),a.jsxs(Ne,{to:"/repayments/new",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Record Repayment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[a.jsx("main",{className:"space-y-6",children:$e?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,i)=>a.jsx(Fe,{className:"h-24"},i))}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[a.jsx(M,{tone:"indigo",title:"Total Borrowers",value:_(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:a.jsx(Oa,{className:"w-5 h-5"})}),a.jsx(M,{tone:"sky",title:"Total Loans",value:_(e==null?void 0:e.totalLoans).toLocaleString(),icon:a.jsx(Ee,{className:"w-5 h-5"})}),a.jsx(M,{tone:"blue",title:"Total Disbursed",value:R(e==null?void 0:e.totalDisbursed),icon:a.jsx(Ee,{className:"w-5 h-5"})}),a.jsx(M,{tone:"emerald",title:"Total Paid",value:R(e==null?void 0:e.totalPaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"emerald",title:"Total Repaid",value:R(e==null?void 0:e.totalRepaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"indigo",title:"Expected Repayments",value:R(e==null?void 0:e.totalExpectedRepayments),icon:a.jsx(Ze,{className:"w-5 h-5"})}),a.jsx(M,{tone:"cyan",title:"Total Deposits",value:R(e==null?void 0:e.totalDeposits),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"amber",title:"Total Withdrawals",value:R(e==null?void 0:e.totalWithdrawals),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"blue",title:"Net Savings",value:R(e==null?void 0:e.netSavings),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"rose",title:"Defaulted Loan",value:R(e==null?void 0:e.defaultedLoan),icon:a.jsx(ea,{className:"w-5 h-5"})}),a.jsx(M,{tone:"rose",title:"Defaulted Interest",value:R(e==null?void 0:e.defaultedInterest),icon:a.jsx(ea,{className:"w-5 h-5"})}),a.jsx(M,{tone:"violet",title:"Outstanding Loan",value:R(e==null?void 0:e.outstandingLoan),icon:a.jsx(Ee,{className:"w-5 h-5"})}),a.jsx(M,{tone:"violet",title:"Outstanding Interest",value:R(e==null?void 0:e.outstandingInterest),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"slate",title:"Written Off",value:R(e==null?void 0:e.writtenOff),icon:a.jsx(vt,{className:"w-5 h-5"})}),a.jsx(M,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${_(e==null?void 0:e.parPercent)}%`,icon:a.jsx(Ye,{className:"w-5 h-5"})})]}),L&&a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ye,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),a.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-slate-100",children:["Monthly Trends",L.month||L.year?` — ${L.month||""} ${L.year||""}`:""]})]}),a.jsx("div",{className:"mb-4",children:a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Be,{data:[{name:"Loans",value:_(L.monthlyLoans)},{name:"Deposits",value:_(L.monthlyDeposits)},{name:"Repayments",value:_(L.monthlyRepayments)}],children:[a.jsx(Pe,{stroke:b.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"name",tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Ce,{tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:b.tooltipBg,borderColor:b.grid,color:b.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:b.legend}}),a.jsx(Q,{dataKey:"value",fill:b.bar1})]})})}),(()=>{const s=[_(L.monthlyLoans),_(L.monthlyDeposits),_(L.monthlyRepayments)],i=Math.max(...s);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"text-indigo-600 dark:text-indigo-400",children:a.jsx(je,{label:"Loans (count)",value:_(L.monthlyLoans),max:i})}),a.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:a.jsx(je,{label:"Deposits (TZS)",value:_(L.monthlyDeposits),max:i})}),a.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:a.jsx(je,{label:"Repayments (TZS)",value:_(L.monthlyRepayments),max:i})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Top Borrowers"}),Me.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[a.jsx("th",{className:"py-1 pr-4",children:"Name"}),a.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),a.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Me.map(s=>a.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[a.jsx("td",{className:"py-1 pr-4",children:s.name}),a.jsx("td",{className:"py-1 pr-4",children:R(s.outstanding)})]},s.id))})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Upcoming Repayments"}),Te.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[a.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),a.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),a.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),a.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Te.map(s=>a.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[a.jsx("td",{className:"py-1 pr-4",children:s.borrower}),a.jsx("td",{className:"py-1 pr-4",children:s.dueDate}),a.jsx("td",{className:"py-1 pr-4",children:R(s.amount)})]},s.id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Branch Performance"}),Le.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Be,{data:Le,children:[a.jsx(Pe,{stroke:b.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"branch",tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Ce,{tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:b.tooltipBg,borderColor:b.grid,color:b.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:b.legend}}),a.jsx(Q,{dataKey:"disbursed",fill:b.bar1}),a.jsx(Q,{dataKey:"repayments",fill:b.bar2})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Officer Performance"}),Re.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Be,{data:Re,children:[a.jsx(Pe,{stroke:b.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"officer",tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Ce,{tick:{fill:b.axis},axisLine:{stroke:b.axis},tickLine:{stroke:b.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:b.tooltipBg,borderColor:b.grid,color:b.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:b.legend}}),a.jsx(Q,{dataKey:"loans",fill:b.bar1}),a.jsx(Q,{dataKey:"collections",fill:b.bar2})]})})]})]})]})}),a.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ze,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),a.jsx("h2",{className:"font-semibold text-gray-800 dark:text-slate-100",children:"Recent Activity"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[a.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",value:H,onChange:s=>de(s.target.value)}),a.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",value:U,onChange:s=>ce(s.target.value)}),a.jsx("button",{className:"col-span-2 border rounded px-2 py-1 text-sm bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700",onClick:()=>{W(1),V({page:1})},children:"Search by date"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent dark:from-slate-900"}),a.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent dark:from-slate-900"}),a.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:u.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No activity."}):u.map(s=>{var i,m,B,I,he;return a.jsxs("div",{className:"border rounded p-3 border-slate-200 dark:border-slate-700",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-slate-100",children:[s.type," • ",s.entityType," #",s.entityId]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-slate-300",children:s.message}),a.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-1",children:["by ",((i=s.createdBy)==null?void 0:i.name)||((m=s.createdBy)==null?void 0:m.email)," • ",new Date(s.createdAt).toLocaleString()]}),Array.isArray(s.comments)&&s.comments.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:s.comments.map(E=>{var K,We;return a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-2",children:[a.jsx("p",{className:"text-xs text-gray-800 dark:text-slate-200",children:E.comment}),a.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-0.5",children:["— ",((K=E.createdBy)==null?void 0:K.name)||((We=E.createdBy)==null?void 0:We.email)," • ",new Date(E.createdAt).toLocaleString()]})]},E.id)})}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("input",{value:se[s.id]||"",onChange:E=>ne(K=>({...K,[s.id]:E.target.value})),placeholder:"Reply…",className:"flex-1 border rounded px-2 py-1 text-xs bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100"}),a.jsxs("button",{onClick:()=>Pa(s.id),disabled:ue[`c-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700 disabled:opacity-50 flex items-center gap-1",children:[a.jsx(bt,{className:"w-3 h-3"})," Reply"]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[a.jsxs("select",{value:((B=X[s.id])==null?void 0:B.assigneeId)||"",onChange:E=>Y(K=>({...K,[s.id]:{...K[s.id]||{},assigneeId:E.target.value}})),className:"col-span-2 border rounded px-2 py-1 text-xs bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100",children:[a.jsx("option",{value:"",children:"Assign to…"}),d.map(E=>a.jsx("option",{value:E.id,children:E.name||E.email},E.id))]}),a.jsx("input",{type:"date",value:((I=X[s.id])==null?void 0:I.dueDate)||"",onChange:E=>Y(K=>({...K,[s.id]:{...K[s.id]||{},dueDate:E.target.value}})),className:"border rounded px-2 py-1 text-xs bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100"}),a.jsxs("button",{onClick:()=>Sa(s.id),disabled:ue[`a-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700 disabled:opacity-50 flex items-center gap-1 justify-center",children:[a.jsx(dt,{className:"w-3 h-3"})," Assign"]}),a.jsx("input",{value:((he=X[s.id])==null?void 0:he.note)||"",onChange:E=>Y(K=>({...K,[s.id]:{...K[s.id]||{},note:E.target.value}})),placeholder:"Note…",className:"col-span-4 border rounded px-2 py-1 text-xs bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-100"})]})]},s.id)})})]}),w>T&&a.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-slate-700 dark:text-slate-300",children:[a.jsxs("span",{children:[Math.min(P*T,w)," of ",w]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{const s=Math.max(P-1,1);W(s),V({page:s})},disabled:P===1,className:"px-2 py-1 border rounded disabled:opacity-50 bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700",children:"Prev"}),a.jsx("button",{onClick:()=>{const s=P*T<w?P+1:P;s!==P&&(W(s),V({page:s}))},disabled:P*T>=w,className:"px-2 py-1 border rounded disabled:opacity-50 bg-white hover:bg-gray-50 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-slate-700",children:"Next"})]})]})]})})]})]})},M=({title:t,value:e,icon:r,tone:n="indigo"})=>{const o={indigo:{ring:"ring-indigo-100 dark:ring-indigo-900/40",icon:"text-indigo-600 bg-indigo-50 dark:text-indigo-300 dark:bg-indigo-950/40"},sky:{ring:"ring-sky-100 dark:ring-sky-900/40",icon:"text-sky-600 bg-sky-50 dark:text-sky-300 dark:bg-sky-950/40"},blue:{ring:"ring-blue-100 dark:ring-blue-900/40",icon:"text-blue-600 bg-blue-50 dark:text-blue-300 dark:bg-blue-950/40"},emerald:{ring:"ring-emerald-100 dark:ring-emerald-900/40",icon:"text-emerald-600 bg-emerald-50 dark:text-emerald-300 dark:bg-emerald-950/40"},cyan:{ring:"ring-cyan-100 dark:ring-cyan-900/40",icon:"text-cyan-600 bg-cyan-50 dark:text-cyan-300 dark:bg-cyan-950/40"},amber:{ring:"ring-amber-100 dark:ring-amber-900/40",icon:"text-amber-600 bg-amber-50 dark:text-amber-300 dark:bg-amber-950/40"},violet:{ring:"ring-violet-100 dark:ring-violet-900/40",icon:"text-violet-600 bg-violet-50 dark:text-violet-300 dark:bg-violet-950/40"},rose:{ring:"ring-rose-100 dark:ring-rose-900/40",icon:"text-rose-600 bg-rose-50 dark:text-rose-300 dark:bg-rose-950/40"},slate:{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"}}[n]||{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"};return a.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 ring-1 ${o.ring}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-full ${o.icon}`,children:r}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-slate-400",children:t}),a.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e??"—"})]})]})})};export{Dr as default};
