import{j as e,b as A}from"./index-DX7Us0v_.js";import{u as E}from"./useSettingsResource-CjdDVQ04.js";import{S as P}from"./settings-CLFHPjR4.js";import"./index-CvoA56ja.js";const D=(s,r,l)=>`data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='${s}' height='${r}'>
      <rect width='100%' height='100%' fill='#e5e7eb'/>
      <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'
            fill='#6b7280' font-size='12' font-family='sans-serif'>${l}</text>
    </svg>`)}`,T=D(80,80,"Logo"),F=D(80,80,"Img");function W(){var m,f,N,v,C;const{data:s,setData:r,loading:l,saving:o,error:c,success:n,save:d}=E(P.getGeneral,P.saveGeneral,{company:{name:"MkopoSuite",email:"info@example.com",phone:"+255700000000",website:"https://example.com",address1:"",address2:"",city:"",country:"Tanzania",logoUrl:"",profileImageUrl:""},branding:{primaryColor:"#1d4ed8",secondaryColor:"#0ea5e9"},locale:{currency:"TZS",timezone:"Africa/Dar_es_Salaam",language:"en",currencyInWords:"Shillings",dateFormat:"dd/mm/yyyy"},numberFormats:{thousandSeparator:",",decimalSeparator:".",currencyPosition:"prefix"},dashboard:{landingWidgets:["kpis","recent-activity","collections"],showTicker:!0,importantNotice:"",companyMessage:""}}),p=async(a,t)=>{var w;if(!a)return;const x=new FormData;x.append("file",a);const g=((w=(await A.post("/uploads/image",x,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:w.url)||"";r(L=>{var k;const S=structuredClone(L),y=t.split(".");let h=S;for(let j=0;j<y.length-1;j++)h=h[k=y[j]]||(h[k]={});return h[y.at(-1)]=g,S})};return l?e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"General Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Branding, company info, locale and formats."})]}),c&&e.jsx("div",{className:"bg-rose-50 text-rose-700 border border-rose-200 rounded-lg p-3 text-sm",children:c}),n&&e.jsx("div",{className:"bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg p-3 text-sm",children:n}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Company"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((m=s.company)==null?void 0:m.logoUrl)||T,onError:a=>{a.currentTarget.src=T},alt:"Logo",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var t;return p((t=a.target.files)==null?void 0:t[0],"company.logoUrl")},className:"text-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Profile Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((f=s.company)==null?void 0:f.profileImageUrl)||F,onError:a=>{a.currentTarget.src=F},alt:"Profile",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var t;return p((t=a.target.files)==null?void 0:t[0],"company.profileImageUrl")},className:"text-sm"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[["Company Name","company.name","text","MkopoSuite"],["Email","company.email","email","info@example.com"],["Phone","company.phone","tel","+255700000000"],["Website","company.website","url","https://example.com"],["Address line 1","company.address1","text",""],["Address line 2","company.address2","text",""],["City","company.city","text",""],["Country","company.country","text","Tanzania"]].map(([a,t,x,b])=>e.jsx(I,{label:a,type:x,placeholder:b,value:u(s,t)||"",onChange:g=>i(r,t,g)},t))})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Branding"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(M,{label:"Primary Color",value:((N=s.branding)==null?void 0:N.primaryColor)||"#1d4ed8",onChange:a=>i(r,"branding.primaryColor",a)}),e.jsx(M,{label:"Secondary Color",value:((v=s.branding)==null?void 0:v.secondaryColor)||"#0ea5e9",onChange:a=>i(r,"branding.secondaryColor",a)})]})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Locale & Formats"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[[["Currency","locale.currency","text","TZS"],["Currency in Words","locale.currencyInWords","text","Shillings"],["Timezone","locale.timezone","text","Africa/Dar_es_Salaam"],["Language","locale.language","text","en"],["Date Format","locale.dateFormat","text","dd/mm/yyyy"],["Thousand Separator","numberFormats.thousandSeparator","text",","],["Decimal Separator","numberFormats.decimalSeparator","text","."]].map(([a,t,x,b])=>e.jsx(I,{label:a,type:x,placeholder:b,value:u(s,t)??"",onChange:g=>i(r,t,g)},t)),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Currency Position"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:((C=s.numberFormats)==null?void 0:C.currencyPosition)||"prefix",onChange:a=>i(r,"numberFormats.currencyPosition",a.target.value),children:[e.jsx("option",{value:"prefix",children:"Prefix (TZS 1,000)"}),e.jsx("option",{value:"suffix",children:"Suffix (1,000 TZS)"})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Dashboard Messages"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Important Notice (shown in amber band)"}),e.jsx("textarea",{className:"mt-1 w-full rounded border px-3 py-2 text-sm min-h-[80px]",value:u(s,"dashboard.importantNotice")||"",onChange:a=>i(r,"dashboard.importantNotice",a.target.value),placeholder:"REMINDER: Submit weekly PAR review by Friday 4:00 PM."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm",children:"Company Message (shown in blue band)"}),e.jsx("textarea",{className:"mt-1 w-full rounded border px-3 py-2 text-sm min-h-[80px]",value:u(s,"dashboard.companyMessage")||"",onChange:a=>i(r,"dashboard.companyMessage",a.target.value),placeholder:"Welcome to MkopoSuite LMS — Q3 focus: Risk reduction & collections discipline."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"showTicker",type:"checkbox",className:"h-4 w-4",checked:!!u(s,"dashboard.showTicker"),onChange:a=>i(r,"dashboard.showTicker",a.target.checked)}),e.jsx("label",{htmlFor:"showTicker",className:"text-sm",children:"Show communications ticker on dashboard"})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white text-sm",disabled:o,onClick:()=>d(),children:o?"Saving…":"Save Changes"})})]})}function u(s,r){return r.split(".").reduce((l,o)=>l?l[o]:void 0,s)}function i(s,r,l){s(o=>{var p;const c=structuredClone(o),n=r.split(".");let d=c;for(let m=0;m<n.length-1;m++)d=d[p=n[m]]||(d[p]={});return d[n.at(-1)]=l,c})}function I({label:s,type:r="text",value:l,onChange:o,placeholder:c}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsx("input",{type:r,className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:l,onChange:n=>o(n.target.value),placeholder:c})]})}function M({label:s,value:r,onChange:l}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("input",{type:"color",className:"w-10 h-10 rounded border",value:r,onChange:o=>l(o.target.value)}),e.jsx("input",{type:"text",className:"flex-1 rounded border px-3 py-2 text-sm",value:r,onChange:o=>l(o.target.value),placeholder:"#1d4ed8"})]})]})}export{W as default};
