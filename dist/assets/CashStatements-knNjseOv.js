import{r as t,j as e}from"./index-CYBEjh8Z.js";import{h as C,x as k}from"./banking-Dossnt0G.js";function L(){var h,m,p,u;const[j,b]=t.useState([]),[c,N]=t.useState(""),[n,y]=t.useState(""),[l,g]=t.useState(""),[d,f]=t.useState(!0),[a,v]=t.useState(null),[i,o]=t.useState(!1),[x,r]=t.useState(null);t.useEffect(()=>{C().then(b).catch(s=>r((s==null?void 0:s.normalizedMessage)||String(s)))},[]);const S=async()=>{if(c){o(!0),r(null);try{const s=await k(c,{from:n,to:l,includeOpening:d});v(s)}catch(s){r((s==null?void 0:s.normalizedMessage)||String(s))}finally{o(!1)}}};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Cash Statement"}),e.jsx("div",{className:"text-xs text-gray-500",children:"/api/banks/cash/accounts/:id/statement"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"Cash Account"}),e.jsxs("select",{className:"border px-2 py-1 rounded",value:c,onChange:s=>N(s.target.value),children:[e.jsx("option",{value:"",children:"-- select --"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"From"}),e.jsx("input",{type:"date",className:"border px-2 py-1 rounded",value:n,onChange:s=>y(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"To"}),e.jsx("input",{type:"date",className:"border px-2 py-1 rounded",value:l,onChange:s=>g(s.target.value)})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:s=>f(s.target.checked)}),e.jsx("span",{className:"text-sm",children:"Include opening"})]}),e.jsx("button",{className:"bg-black text-white px-3 py-1 rounded",onClick:S,disabled:!c||i,children:i?"Loading…":"Load"})]}),x&&e.jsx("div",{className:"text-red-600 text-sm",children:x}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm",children:["Account: ",e.jsx("b",{children:(h=a.account)==null?void 0:h.name})," • Opening:"," ",e.jsx("b",{children:Number(a.openingBalance||0).toLocaleString()})," ",(m=a.account)==null?void 0:m.currency]}),e.jsx("div",{className:"overflow-auto border rounded",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border px-2 py-1 text-left",children:"Date"}),e.jsx("th",{className:"border px-2 py-1",children:"Type"}),e.jsx("th",{className:"border px-2 py-1",children:"Dir"}),e.jsx("th",{className:"border px-2 py-1 text-right",children:"Amount"}),e.jsx("th",{className:"border px-2 py-1",children:"Ref"}),e.jsx("th",{className:"border px-2 py-1",children:"Desc"}),e.jsx("th",{className:"border px-2 py-1",children:"Status"})]})}),e.jsxs("tbody",{children:[(p=a.items)==null?void 0:p.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-2 py-1",children:s.occurredAt?new Date(s.occurredAt).toLocaleString():"—"}),e.jsx("td",{className:"border px-2 py-1",children:s.type}),e.jsx("td",{className:"border px-2 py-1",children:s.direction}),e.jsx("td",{className:"border px-2 py-1 text-right",children:Number(s.amount).toLocaleString()}),e.jsx("td",{className:"border px-2 py-1",children:s.reference||""}),e.jsx("td",{className:"border px-2 py-1",children:s.description||""}),e.jsx("td",{className:"border px-2 py-1",children:s.status})]},s.id)),!((u=a.items)!=null&&u.length)&&e.jsx("tr",{children:e.jsx("td",{className:"border px-2 py-2 text-center",colSpan:7,children:"No transactions"})})]})]})})]})]})}export{L as default};
