import{r as c,j as s}from"./index-DUtn1vUj.js";import{h as x,y as j}from"./banking-BvKXTNe4.js";const N="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7",y="border rounded px-3 py-2";function b(){const[p,u]=c.useState([]),[a,l]=c.useState(""),[d,r]=c.useState([]),[i,n]=c.useState(null),[o,h]=c.useState(!1);return c.useEffect(()=>{x().then(u).catch(e=>n((e==null?void 0:e.normalizedMessage)||String(e)))},[]),c.useEffect(()=>{(async()=>{if(!a)return r([]);try{h(!0),n(null);const t=await j(a);r(t||[])}catch(t){n((t==null?void 0:t.normalizedMessage)||String(t)),r([])}finally{h(!1)}})()},[a]),s.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Cash Transactions"}),s.jsxs("section",{className:N,children:[s.jsxs("div",{className:"mb-3 flex items-end gap-3",children:[s.jsxs("select",{className:y,value:a,onChange:e=>l(e.target.value),children:[s.jsx("option",{value:"",children:"— select account —"}),p.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsx("button",{className:"px-3 py-2 rounded border",onClick:()=>a&&l(a),disabled:!a||o,children:o?"Loading…":"Refresh"})]}),i&&s.jsx("div",{className:"text-sm text-red-600 mb-2",children:i}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left text-gray-600",children:[s.jsx("th",{className:"py-2 pr-4",children:"Date"}),s.jsx("th",{className:"py-2 pr-4",children:"Account"}),s.jsx("th",{className:"py-2 pr-4",children:"Type"}),s.jsx("th",{className:"py-2 pr-4",children:"Dir"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Amount"}),s.jsx("th",{className:"py-2 pr-4",children:"Ref"})]})}),s.jsxs("tbody",{children:[d.map(e=>{var t,m;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"py-2 pr-4",children:e.occurredAt?new Date(e.occurredAt).toLocaleString():"—"}),s.jsx("td",{className:"py-2 pr-4",children:e.accountName||((m=(t=e.cashAccountId)==null?void 0:t.slice)==null?void 0:m.call(t,0,8))||"—"}),s.jsx("td",{className:"py-2 pr-4",children:e.type}),s.jsx("td",{className:"py-2 pr-4",children:e.direction}),s.jsxs("td",{className:"py-2 pr-4 text-right",children:[Number(e.amount).toLocaleString()," ",e.currency||"TZS"]}),s.jsx("td",{className:"py-2 pr-4",children:e.reference||"—"})]},e.id)}),d.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"py-6 text-center text-gray-500",children:"No data"})})]})]})})]})]})}export{b as default};
