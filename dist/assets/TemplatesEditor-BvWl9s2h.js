import{r as o,j as e,b as x}from"./index-DMb-qiOH.js";function g({title:p,category:n,channel:j=null}){const[m,u]=o.useState([]),[h,d]=o.useState(""),[l,r]=o.useState({name:"",subject:"",body:"",channel:j||"email"}),i=async()=>{var s,a;d("");try{const{data:t}=await x.get(`/admin/templates/${n}`);u(t||[])}catch(t){d(((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.error)||t.message)}};o.useEffect(()=>{i()},[n]);const b=async()=>{var s,a;try{await x.post(`/admin/templates/${n}`,l),r({name:"",subject:"",body:"",channel:l.channel}),await i()}catch(t){d(((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.error)||t.message)}},N=async s=>{var a,t;if(confirm("Delete?"))try{await x.delete(`/admin/templates/${n}/${s}`),await i()}catch(c){d(((t=(a=c==null?void 0:c.response)==null?void 0:a.data)==null?void 0:t.error)||c.message)}};return e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm space-y-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:p}),h&&e.jsx("div",{className:"text-sm text-rose-600",children:h}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs",children:"Name"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:l.name,onChange:s=>r(a=>({...a,name:s.target.value}))})]}),l.channel!=="sms"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs",children:"Subject"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 text-sm",value:l.subject,onChange:s=>r(a=>({...a,subject:s.target.value}))})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs",children:"Body"}),e.jsx("textarea",{rows:8,className:"w-full border rounded px-2 py-1 text-sm",value:l.body,onChange:s=>r(a=>({...a,body:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs",children:"Channel"}),e.jsxs("select",{className:"w-full border rounded px-2 py-1 text-sm",value:l.channel,onChange:s=>r(a=>({...a,channel:s.target.value})),children:[e.jsx("option",{value:"email",children:"email"}),e.jsx("option",{value:"sms",children:"sms"})]})]}),e.jsx("div",{className:"self-end",children:e.jsx("button",{onClick:b,className:"px-3 py-2 border rounded bg-white",children:"Add"})})]}),e.jsx("div",{className:"overflow-x-auto border rounded-xl",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-2 text-left",children:"Name"}),e.jsx("th",{className:"p-2",children:"Channel"}),e.jsx("th",{className:"p-2"})]})}),e.jsx("tbody",{children:m.length===0?e.jsx("tr",{children:e.jsx("td",{className:"p-3",colSpan:3,children:"No templates"})}):m.map(s=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"p-2 text-center",children:s.channel||"â€”"}),e.jsx("td",{className:"p-2 text-right",children:e.jsx("button",{onClick:()=>N(s.id),className:"px-2 py-1 text-xs border rounded",children:"Delete"})})]},s.id))})]})})]})}export{g as T};
