import{r,j as e}from"./index-BbV8pT_v.js";import{S as p}from"./settings-p3w4x-Ur.js";function f(){const[o,g]=r.useState([]),[i,a]=r.useState(""),[d,l]=r.useState(!1),[c,m]=r.useState(null),s=async()=>{var n,x;l(!0),a("");try{const t=await p.listBranches();g(Array.isArray(t)?t:[])}catch(t){a(((x=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:x.message)||t.message||"Failed to load branches")}finally{l(!1)}};r.useEffect(()=>{s()},[]);const b=async(n,x)=>{var t,h;m(n),a("");try{await p.updateBranch(n,x),await s()}catch(u){a(((h=(t=u==null?void 0:u.response)==null?void 0:t.data)==null?void 0:h.message)||u.message||"Failed to update branch")}finally{m(null)}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Branch Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Edit branch information."})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[i&&e.jsx("div",{className:"text-sm text-rose-600 mb-2",children:i}),d?e.jsx("div",{className:"text-sm text-slate-500",children:"Loadingâ€¦"}):o.length===0?e.jsx("div",{className:"text-sm text-slate-500",children:"No branches found."}):e.jsx("div",{className:"space-y-3",children:o.map(n=>e.jsx(j,{b:n,onSave:b,saving:c===n.id},n.id))})]})]})}function j({b:o,onSave:g,saving:i}){const[a,d]=r.useState(o),[l,c]=r.useState(!1),m=()=>g(o.id,{name:a.name,code:a.code,location:a.location,manager:a.manager}).then(()=>c(!1));return e.jsxs("div",{className:"p-3 border rounded-lg grid grid-cols-1 md:grid-cols-5 gap-2",children:[e.jsx("input",{disabled:!l,className:"rounded border px-3 py-2 text-sm",value:a.name||"",onChange:s=>d({...a,name:s.target.value}),placeholder:"Name"}),e.jsx("input",{disabled:!l,className:"rounded border px-3 py-2 text-sm",value:a.code||"",onChange:s=>d({...a,code:s.target.value}),placeholder:"Code"}),e.jsx("input",{disabled:!l,className:"rounded border px-3 py-2 text-sm",value:a.location||"",onChange:s=>d({...a,location:s.target.value}),placeholder:"Location"}),e.jsx("input",{disabled:!l,className:"rounded border px-3 py-2 text-sm",value:a.manager||"",onChange:s=>d({...a,manager:s.target.value}),placeholder:"Manager"}),e.jsx("div",{className:"flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white",onClick:m,disabled:i,children:"Save"}),e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:()=>{d(o),c(!1)},children:"Cancel"})]}):e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:()=>c(!0),children:"Edit"})})]})}export{f as default};
