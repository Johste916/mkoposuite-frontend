import{r as l,g as Z,j as t,L as ye}from"./index-DyAnIdDJ.js";import{D as Gt}from"./download-Bp92EDXK.js";import{C as Ce}from"./circle-plus-D3ExXiUk.js";import{c as G}from"./createLucideIcon-Bwt99HA0.js";import{i as Qe,S as Ut,a as Ne,r as Ht,u as pt,R as Xt,b as Zt,c as Yt,d as Jt,g as Qt,e as gt,f as ea,h as ta,j as aa,k as ke,l as ra,G as sa,C as na,m as bt,n as ia,L as je,o as oa,p as la,t as da,q as et,s as ft,v as vt,w as yt,x as kt,y as ca,z as jt,A as ua,J as ma,B as te,D as xa,E as ha,F as pa,H as ga,I as tt,K as Y,M as ba,N as se,O as ne,P as oe,Q as fa,T as wt,U as Nt,V as At,W as va,X as ya,Y as at,Z as ka,_ as ja,$ as rt,a0 as wa,a1 as $e,a2 as st,a3 as Na,a4 as Aa,a5 as Oe,a6 as Ee,a7 as De,a8 as Be,a9 as Le,aa as Me}from"./CartesianChart-DazLxhGH.js";import{U as Sa}from"./user-plus-xEQu1NzX.js";import{C as Pa}from"./calendar-BBzBowhN.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],nt=G("chart-no-axes-column",Ia);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oa=G("chevron-down",Ca);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],it=G("clipboard-list",Ea);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Te=G("credit-card",Da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ae=G("dollar-sign",Ba);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ma=G("message-square",La);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],_a=G("thumbs-down",Ta);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ot=G("triangle-alert",Ra);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fa=G("users",$a);var Ka="Invariant failed";function za(r,e){throw new Error(Ka)}var Wa=["x","y"];function Fe(){return Fe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Fe.apply(null,arguments)}function lt(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function me(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?lt(Object(s),!0).forEach(function(n){Va(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):lt(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function Va(r,e,s){return(e=qa(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function qa(r){var e=Ga(r,"string");return typeof e=="symbol"?e:e+""}function Ga(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ua(r,e){if(r==null)return{};var s,n,c=Ha(r,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(n=0;n<d.length;n++)s=d[n],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}function Ha(r,e){if(r==null)return{};var s={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;s[n]=r[n]}return s}function Xa(r,e){var{x:s,y:n}=r,c=Ua(r,Wa),d="".concat(s),m=parseInt(d,10),p="".concat(n),v=parseInt(p,10),h="".concat(e.height||c.height),g=parseInt(h,10),b="".concat(e.width||c.width),y=parseInt(b,10);return me(me(me(me(me({},e),c),m?{x:m}:{}),v?{y:v}:{}),{},{height:g,width:y,name:e.name,radius:e.radius})}function St(r){return l.createElement(Ut,Fe({shapeType:"rectangle",propTransformer:Xa,activeClassName:"recharts-active-bar"},r))}var Za=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,c)=>{if(Qe(e))return e;var d=Qe(n)||Ne(n);return d?e(n,c):(d||za(),s)}},Ya=["onMouseEnter","onMouseLeave","onClick"],Ja=["value","background","tooltipPosition"],Qa=["id"],er=["onMouseEnter","onClick","onMouseLeave"];function ie(){return ie=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},ie.apply(null,arguments)}function dt(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function L(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?dt(Object(s),!0).forEach(function(n){tr(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):dt(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function tr(r,e,s){return(e=ar(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function ar(r){var e=rr(r,"string");return typeof e=="symbol"?e:e+""}function rr(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function we(r,e){if(r==null)return{};var s,n,c=sr(r,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(n=0;n<d.length;n++)s=d[n],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}function sr(r,e){if(r==null)return{};var s={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;s[n]=r[n]}return s}var nr=r=>{var{dataKey:e,name:s,fill:n,legendType:c,hide:d}=r;return[{inactive:d,dataKey:e,type:c,color:n,value:gt(s,e),payload:r}]};function ir(r){var{dataKey:e,stroke:s,strokeWidth:n,fill:c,name:d,hide:m,unit:p}=r;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:c,dataKey:e,nameKey:void 0,name:gt(d,e),hide:m,type:r.tooltipType,color:r.fill,unit:p}}}function or(r){var e=ke(ft),{data:s,dataKey:n,background:c,allOtherBarProps:d}=r,{onMouseEnter:m,onMouseLeave:p,onClick:v}=d,h=we(d,Ya),g=vt(m,n),b=yt(p),y=kt(v,n);if(!c||s==null)return null;var f=ca(c,!1);return l.createElement(l.Fragment,null,s.map((S,w)=>{var{value:I,background:j,tooltipPosition:N}=S,x=we(S,Ja);if(!j)return null;var P=g(S,w),A=b(S,w),C=y(S,w),D=L(L(L(L(L({option:c,isActive:String(w)===e},x),{},{fill:"#eee"},j),f),jt(h,S,w)),{},{onMouseEnter:P,onMouseLeave:A,onClick:C,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return l.createElement(St,ie({key:"background-bar-".concat(w)},D))}))}function Pt(r){var{data:e,props:s,showLabels:n}=r,c=xa(s),{id:d}=c,m=we(c,Qa),{shape:p,dataKey:v,activeBar:h}=s,g=ke(ft),b=ke(ha),{onMouseEnter:y,onClick:f,onMouseLeave:S}=s,w=we(s,er),I=vt(y,v),j=yt(S),N=kt(f,v);return e?l.createElement(l.Fragment,null,e.map((x,P)=>{var A=h&&String(P)===g&&(b==null||v===b),C=A?h:p,D=L(L(L({},m),x),{},{isActive:A,option:C,index:P,dataKey:v});return l.createElement(je,ie({className:"recharts-bar-rectangle"},jt(w,x,P),{onMouseEnter:I(x,P),onMouseLeave:j(x,P),onClick:N(x,P),key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(P)}),l.createElement(St,D))}),n&&pa.renderCallByParent(s,e)):null}function lr(r){var{props:e,previousRectanglesRef:s}=r,{data:n,layout:c,isAnimationActive:d,animationBegin:m,animationDuration:p,animationEasing:v,onAnimationEnd:h,onAnimationStart:g}=e,b=s.current,y=ua(e,"recharts-bar-"),[f,S]=l.useState(!1),w=l.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),I=l.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return l.createElement(ma,{begin:m,duration:p,isActive:d,easing:v,onAnimationEnd:w,onAnimationStart:I,key:y},j=>{var N=j===1?n:n==null?void 0:n.map((x,P)=>{var A=b&&b[P];if(A)return L(L({},x),{},{x:te(A.x,x.x,j),y:te(A.y,x.y,j),width:te(A.width,x.width,j),height:te(A.height,x.height,j)});if(c==="horizontal"){var C=te(0,x.height,j);return L(L({},x),{},{y:x.y+x.height-C,height:C})}var D=te(0,x.width,j);return L(L({},x),{},{width:D})});return j>0&&(s.current=N??null),N==null?null:l.createElement(je,null,l.createElement(Pt,{props:e,data:N,showLabels:!f}))})}function dr(r){var{data:e,isAnimationActive:s}=r,n=l.useRef(null);return s&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(lr,{previousRectanglesRef:n,props:r}):l.createElement(Pt,{props:r,data:e,showLabels:!0})}var It=0,cr=(r,e)=>{var s=Array.isArray(r.value)?r.value[1]:r.value;return{x:r.x,y:r.y,value:s,errorVal:bt(r,e)}};class ur extends l.PureComponent{render(){var{hide:e,data:s,dataKey:n,className:c,xAxisId:d,yAxisId:m,needClip:p,background:v,id:h}=this.props;if(e)return null;var g=ia("recharts-bar",c),b=h;return l.createElement(je,{className:g,id:h},p&&l.createElement("defs",null,l.createElement(oa,{clipPathId:b,xAxisId:d,yAxisId:m})),l.createElement(je,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(b,")"):void 0},l.createElement(or,{data:s,dataKey:n,background:v,allOtherBarProps:this.props}),l.createElement(dr,this.props)),this.props.children)}}var mr={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!sa.isSsr,legendType:"rect",minPointSize:It,xAxisId:0,yAxisId:0};function xr(r){var{xAxisId:e,yAxisId:s,hide:n,legendType:c,minPointSize:d,activeBar:m,animationBegin:p,animationDuration:v,animationEasing:h,isAnimationActive:g}=r,{needClip:b}=ea(e,s),y=ta(),f=pt(),S=aa(r.children,na),w=ke(N=>Fr(N,e,s,f,r.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var I,j=w==null?void 0:w[0];return j==null||j.height==null||j.width==null?I=0:I=y==="vertical"?j.height/2:j.width/2,l.createElement(ra,{xAxisId:e,yAxisId:s,data:w,dataPointFormatter:cr,errorBarOffset:I},l.createElement(ur,ie({},r,{layout:y,needClip:b,data:w,xAxisId:e,yAxisId:s,hide:n,legendType:c,minPointSize:d,activeBar:m,animationBegin:p,animationDuration:v,animationEasing:h,isAnimationActive:g})))}function hr(r){var{layout:e,barSettings:{dataKey:s,minPointSize:n},pos:c,bandSize:d,xAxis:m,yAxis:p,xAxisTicks:v,yAxisTicks:h,stackedData:g,displayedData:b,offset:y,cells:f}=r,S=e==="horizontal"?p:m,w=g?S.scale.domain():null,I=la({numericAxis:S});return b.map((j,N)=>{var x,P,A,C,D,Q;g?x=da(g[N],w):(x=bt(j,s),Array.isArray(x)||(x=[I,x]));var V=Za(n,It)(x[1],N);if(e==="horizontal"){var le,[U,ee]=[p.scale(x[0]),p.scale(x[1])];P=et({axis:m,ticks:v,bandSize:d,offset:c.offset,entry:j,index:N}),A=(le=ee??U)!==null&&le!==void 0?le:void 0,C=c.size;var K=U-ee;if(D=ga(K)?0:K,Q={x:P,y:y.top,width:C,height:y.height},Math.abs(V)>0&&Math.abs(D)<Math.abs(V)){var J=tt(D||V)*(Math.abs(V)-Math.abs(D));A-=J,D+=J}}else{var[H,de]=[m.scale(x[0]),m.scale(x[1])];if(P=H,A=et({axis:p,ticks:h,bandSize:d,offset:c.offset,entry:j,index:N}),C=de-H,D=c.size,Q={x:y.left,y:A,width:y.width,height:D},Math.abs(V)>0&&Math.abs(C)<Math.abs(V)){var Ae=tt(C||V)*(Math.abs(V)-Math.abs(C));C+=Ae}}if(P==null||A==null||C==null||D==null)return null;var ce=L(L({},j),{},{x:P,y:A,width:C,height:D,value:g?x:x[1],payload:j,background:Q,tooltipPosition:{x:P+C/2,y:A+D/2}},f&&f[N]&&f[N].props);return ce}).filter(Boolean)}function re(r){var e=Ht(r,mr),s=pt();return l.createElement(Xt,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Zt,{legendPayload:nr(e)}),l.createElement(Yt,{fn:ir,args:e}),l.createElement(Jt,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Qt(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:s}),l.createElement(xr,ie({},e,{id:n}))))}re.displayName="Bar";function ct(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function ve(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ct(Object(s),!0).forEach(function(n){pr(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):ct(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function pr(r,e,s){return(e=gr(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function gr(r){var e=br(r,"string");return typeof e=="symbol"?e:e+""}function br(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var fr=(r,e)=>e,vr=(r,e,s)=>s,yr=(r,e,s,n)=>n,kr=(r,e,s,n,c)=>c,he=Y([Nt,kr],(r,e)=>r.filter(s=>s.type==="bar").find(s=>s.id===e)),jr=Y([he],r=>r==null?void 0:r.maxBarSize),wr=(r,e,s,n,c,d)=>d,ut=(r,e,s)=>{var n=s??r;if(!Ne(n))return $e(n,e,0)},Nr=Y([oe,Nt,fr,vr,yr],(r,e,s,n,c)=>e.filter(d=>r==="horizontal"?d.xAxisId===s:d.yAxisId===n).filter(d=>d.isPanorama===c).filter(d=>d.hide===!1).filter(d=>d.type==="bar")),Ar=(r,e,s,n)=>{var c=oe(r);return c==="horizontal"?at(r,"yAxis",s,n):at(r,"xAxis",e,n)},Sr=(r,e,s)=>{var n=oe(r);return n==="horizontal"?rt(r,"xAxis",e):rt(r,"yAxis",s)},Pr=(r,e,s)=>{var n={},c=r.filter(wa),d=r.filter(h=>h.stackId==null),m=c.reduce((h,g)=>(h[g.stackId]||(h[g.stackId]=[]),h[g.stackId].push(g),h),n),p=Object.entries(m).map(h=>{var[g,b]=h,y=b.map(S=>S.dataKey),f=ut(e,s,b[0].barSize);return{stackId:g,dataKeys:y,barSize:f}}),v=d.map(h=>{var g=[h.dataKey].filter(y=>y!=null),b=ut(e,s,h.barSize);return{stackId:void 0,dataKeys:g,barSize:b}});return[...p,...v]},Ir=Y([Nr,ja,Sr],Pr),Cr=(r,e,s,n,c)=>{var d,m,p=he(r,e,s,n,c);if(p!=null){var v=oe(r),h=At(r),{maxBarSize:g}=p,b=Ne(g)?h:g,y,f;return v==="horizontal"?(y=se(r,"xAxis",e,n),f=ne(r,"xAxis",e,n)):(y=se(r,"yAxis",s,n),f=ne(r,"yAxis",s,n)),(d=(m=wt(y,f,!0))!==null&&m!==void 0?m:b)!==null&&d!==void 0?d:0}},Ct=(r,e,s,n)=>{var c=oe(r),d,m;return c==="horizontal"?(d=se(r,"xAxis",e,n),m=ne(r,"xAxis",e,n)):(d=se(r,"yAxis",s,n),m=ne(r,"yAxis",s,n)),wt(d,m)};function Or(r,e,s,n,c){var d=n.length;if(!(d<1)){var m=$e(r,s,0,!0),p,v=[];if(st(n[0].barSize)){var h=!1,g=s/d,b=n.reduce((j,N)=>j+(N.barSize||0),0);b+=(d-1)*m,b>=s&&(b-=(d-1)*m,m=0),b>=s&&g>0&&(h=!0,g*=.9,b=d*g);var y=(s-b)/2>>0,f={offset:y-m,size:0};p=n.reduce((j,N)=>{var x,P={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:f.offset+f.size+m,size:h?g:(x=N.barSize)!==null&&x!==void 0?x:0}},A=[...j,P];return f=A[A.length-1].position,A},v)}else{var S=$e(e,s,0,!0);s-2*S-(d-1)*m<=0&&(m=0);var w=(s-2*S-(d-1)*m)/d;w>1&&(w>>=0);var I=st(c)?Math.min(w,c):w;p=n.reduce((j,N,x)=>[...j,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:S+(w+m)*x+(w-I)/2,size:I}}],v)}return p}}var Er=(r,e,s,n,c,d,m)=>{var p=Ne(m)?e:m,v=Or(s,n,c!==d?c:d,r,p);return c!==d&&v!=null&&(v=v.map(h=>ve(ve({},h),{},{position:ve(ve({},h.position),{},{offset:h.position.offset-c/2})}))),v},Dr=Y([Ir,At,va,ya,Cr,Ct,jr],Er),Br=(r,e,s,n)=>se(r,"xAxis",e,n),Lr=(r,e,s,n)=>se(r,"yAxis",s,n),Mr=(r,e,s,n)=>ne(r,"xAxis",e,n),Tr=(r,e,s,n)=>ne(r,"yAxis",s,n),_r=Y([Dr,he],(r,e)=>{if(!(r==null||e==null)){var s=r.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(s!=null)return s.position}}),Rr=(r,e)=>{var s=ka(e);if(!(!r||s==null||e==null)){var{stackId:n}=e;if(n!=null){var c=r[n];if(c){var{stackedData:d}=c;if(d)return d.find(m=>m.key===s)}}}},$r=Y([Ar,he],Rr),Fr=Y([ba,Br,Lr,Mr,Tr,_r,oe,fa,Ct,$r,he,wr],(r,e,s,n,c,d,m,p,v,h,g,b)=>{var{chartData:y,dataStartIndex:f,dataEndIndex:S}=p;if(!(g==null||d==null||m!=="horizontal"&&m!=="vertical"||e==null||s==null||n==null||c==null||v==null)){var{data:w}=g,I;if(w!=null&&w.length>0?I=w:I=y==null?void 0:y.slice(f,S+1),I!=null)return hr({layout:m,barSettings:g,pos:d,bandSize:v,xAxis:e,yAxis:s,xAxisTicks:n,yAxisTicks:c,stackedData:h,displayedData:I,offset:r,cells:b})}}),Kr=["axis","item"],_e=l.forwardRef((r,e)=>l.createElement(Na,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kr,tooltipPayloadSearcher:Aa,categoricalChartProps:r,ref:e}));const _={borrowers:"/borrowers",loans:"/loans",repayments:"/repayments",expectedRepayments:"/repayments",deposits:"/deposits",withdrawals:"/withdrawals",savings:"/savings",defaultedLoans:"/loans",defaultedInterest:"/loans",outstandingLoan:"/loans",outstandingInterest:"/loans",writtenOff:"/loans",par:"/loans"},mt="ms_dash_filters_v1",xt="ms_dash_auto_refresh_v1",zr=()=>{const[r,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const s=document.documentElement,n=new MutationObserver(()=>{e(s.classList.contains("dark"))});return n.observe(s,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),r},Wr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),Ke="h-10 w-full rounded-lg border text-sm outline-none transition bg-white text-slate-900 border-slate-300 focus:ring-2 focus:ring-indigo-500/50 dark:bg-slate-800 dark:text-slate-100 dark:border-slate-700",xe=({className:r="",children:e,...s})=>t.jsxs("div",{className:`relative ${r}`,children:[t.jsx("select",{...s,className:`${Ke} pr-9 appearance-none bg-none ms-select`,style:{backgroundImage:"none"},children:e}),t.jsx(Oa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 dark:text-slate-300","aria-hidden":"true"})]}),Re=({className:r="",...e})=>t.jsxs("div",{className:`relative ${r}`,children:[t.jsx("input",{type:"date",...e,className:`${Ke} pr-9 appearance-none bg-none ms-date`,style:{backgroundImage:"none"}}),t.jsx(Pa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 dark:text-slate-300","aria-hidden":"true"})]}),ht=({className:r="",...e})=>t.jsx("input",{...e,className:`${Ke} ${r}`}),Yr=()=>{const r=zr(),[e,s]=l.useState(null),[n,c]=l.useState([]),[d,m]=l.useState([]),[p,v]=l.useState(""),[h,g]=l.useState(""),[b,y]=l.useState(""),[f,S]=l.useState(0),[w,I]=l.useState(null),[j,N]=l.useState(null),[x,P]=l.useState(Date.now()),[A,C]=l.useState([]),[D,Q]=l.useState(!1),[V,le]=l.useState([]),[U,ee]=l.useState(0),[K,J]=l.useState(1),H=10,[de,Ae]=l.useState(""),[ce,Ot]=l.useState(""),[ze,We]=l.useState({}),[pe,ge]=l.useState({}),[Ve,be]=l.useState({}),[$,Et]=l.useState(null),[qe,Dt]=l.useState([]),[Ge,Bt]=l.useState([]),[Ue,Lt]=l.useState([]),[He,Mt]=l.useState([]),[Tt,_t]=l.useState(!0),[Rt,Xe]=l.useState([]),z=(i,o="info")=>{const u=Math.random().toString(36).slice(2);Xe(E=>[...E,{id:u,msg:i,type:o}]),setTimeout(()=>Xe(E=>E.filter(O=>O.id!==u)),3500)},M=i=>{const o=Number(i);return Number.isFinite(o)?o:0},F=i=>{const o=M(i);return Number.isNaN(o)?"TZS —":`TZS ${Wr.format(o)}`},T=(i,o={})=>{try{const u=new URLSearchParams;p&&u.set("branchId",p),h&&u.set("officerId",h),b&&u.set("timeRange",b),Object.entries(o).forEach(([O,q])=>{q!=null&&String(q)!==""&&u.set(O,q)});const E=u.toString();return E?`${i}?${E}`:i}catch{return i}},$t=i=>{var o;return((o=n.find(u=>String(u.id)===String(i)))==null?void 0:o.name)||(i?`Branch #${i}`:"All branches")};l.useEffect(()=>{try{const i=localStorage.getItem(mt);if(i){const o=JSON.parse(i);v(o.branchId||""),g(o.officerId||""),y(o.timeRange||"")}}catch{}try{const i=localStorage.getItem(xt);i&&S(Number(i)||0)}catch{}},[]),l.useEffect(()=>{const i={branchId:p,officerId:h,timeRange:b};localStorage.setItem(mt,JSON.stringify(i))},[p,h,b]),l.useEffect(()=>{localStorage.setItem(xt,String(f||0))},[f]);const Ze=l.useCallback(async i=>{try{const[o,u]=await Promise.all([Z.get("/branches",{signal:i}),Z.get("/users",{params:{role:"loan_officer"},signal:i})]);c(Array.isArray(o.data)?o.data:[]),m(Array.isArray(u.data)?u.data:[])}catch(o){(o==null?void 0:o.name)!=="CanceledError"&&(console.error("Filter fetch error:",(o==null?void 0:o.message)||o),z("Failed to load filters","error"))}},[]),Se=l.useCallback(async i=>{try{const o=await Z.get("/dashboard/summary",{params:{branchId:p,officerId:h,timeRange:b},signal:i});s(o.data||{})}catch(o){(o==null?void 0:o.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(o==null?void 0:o.message)||o),z("Failed to load summary","error"))}},[p,h,b]),ue=l.useCallback(async i=>{Q(!0);try{const o=await Z.get("/dashboard/communications",{signal:i}).catch(()=>null);o!=null&&o.data&&Array.isArray(o.data)?C(o.data):C(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{Q(!1)}},[e]),X=l.useCallback(async(i={},o)=>{var u,E;try{const O=await Z.get("/dashboard/activity",{params:{page:i.page??K,pageSize:H,dateFrom:de||void 0,dateTo:ce||void 0},signal:o});le(((u=O.data)==null?void 0:u.items)||[]),ee(((E=O.data)==null?void 0:E.total)||0)}catch(O){(O==null?void 0:O.name)!=="CanceledError"&&(console.error("Activity fetch error:",(O==null?void 0:O.message)||O),z("Failed to load activity","error"))}},[K,de,ce]),Pe=l.useCallback(async i=>{try{const o=await Z.get("/dashboard/monthly-trends",{signal:i});Et(o.data||{})}catch(o){(o==null?void 0:o.name)!=="CanceledError"&&(console.error("Monthly trends error:",(o==null?void 0:o.message)||o),z("Failed to load trends","error"))}},[]);l.useEffect(()=>{const i=new AbortController;return(async()=>{try{await Ze(i.signal)}catch{}})(),()=>i.abort()},[Ze]);const fe=l.useCallback(async i=>{await Promise.all([Se(i),X({},i),Pe(i)]),I(new Date),f>0&&N(Date.now()+f*6e4)},[Se,X,Pe,f]);l.useEffect(()=>{const i=new AbortController;return(async()=>{try{await fe(i.signal)}catch(o){(o==null?void 0:o.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(o==null?void 0:o.message)||o),z("Failed to load dashboard data","error"))}finally{_t(!1)}})(),()=>i.abort()},[fe]),l.useEffect(()=>{if(!e)return;const i=new AbortController;return ue(i.signal).catch(o=>{(o==null?void 0:o.name)!=="CanceledError"&&(console.error("Comms fetch error:",(o==null?void 0:o.message)||o),z("Failed to load communications","error"))}),()=>i.abort()},[e,ue]),l.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&Dt(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&Bt(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&Lt(e.branchPerformance),Array.isArray(e.officerPerformance)&&Mt(e.officerPerformance))},[e]),l.useEffect(()=>{if(!f||f<=0){N(null);return}const o=setInterval(()=>{const u=new AbortController;Promise.all([fe(u.signal),ue(u.signal)]).catch(()=>{}).finally(()=>u.abort())},f*6e4);return N(Date.now()+f*6e4),()=>clearInterval(o)},[f,fe,ue]),l.useEffect(()=>{const i=setInterval(()=>P(Date.now()),1e3);return()=>clearInterval(i)},[]);const Ft=async i=>{const o=`c-${i}`;be(u=>({...u,[o]:!0}));try{const u=(ze[i]||"").trim();if(!u)return;await Z.post(`/dashboard/activity/${i}/comment`,{comment:u}),We(E=>({...E,[i]:""})),await X(),z("Reply posted","success")}catch(u){console.error("Add comment error:",(u==null?void 0:u.message)||u),z("Failed to post reply","error")}finally{be(u=>({...u,[o]:!1}))}},Kt=async i=>{const o=`a-${i}`;be(u=>({...u,[o]:!0}));try{const u=pe[i]||{};if(!u.assigneeId)return;await Z.post(`/dashboard/activity/${i}/assign`,{assigneeId:u.assigneeId,dueDate:u.dueDate||null,note:u.note||""}),ge(E=>({...E,[a.id]:{assigneeId:"",dueDate:"",note:""}})),await X(),z("Task assigned","success")}catch(u){console.error("Assign task error:",(u==null?void 0:u.message)||u),z("Failed to assign task","error")}finally{be(u=>({...u,[o]:!1}))}},Ie=({label:i,value:o,max:u})=>{const E=M(o),O=M(u),q=O>0?Math.round(E/O*100):0;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-slate-300",children:[t.jsx("span",{children:i}),t.jsx("span",{className:"tabular-nums",children:E.toLocaleString()})]}),t.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded",children:t.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${q}%`,backgroundColor:"currentColor"}})})]})},zt=({className:i=""})=>t.jsx("div",{className:`animate-pulse bg-gray-100 dark:bg-slate-800/50 rounded ${i}`}),Wt=()=>{const i=A.flatMap(o=>(o.attachments||[]).map(u=>u.fileUrl)).filter(Boolean);i.length!==0&&(i.forEach((o,u)=>{setTimeout(()=>window.open(o,"_blank","noopener,noreferrer"),u*150)}),z(`Opening ${i.length} attachment${i.length>1?"s":""}…`,"info"))},k=r?{grid:"#334155",axis:"#cbd5e1",legend:"#e2e8f0",tooltipBg:"#0b1220",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#334155",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"},Ye=j?Math.max(0,Math.floor((j-x)/1e3)):0,Vt=String(Math.floor(Ye/60)).padStart(2,"0"),qt=String(Ye%60).padStart(2,"0");return t.jsxs("div",{className:"space-y-6",children:[t.jsx("style",{children:`
        /* Select: remove native arrow across browsers */
        select.ms-select {
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
          background-image: none !important;
        }
        /* Legacy Edge/IE */
        select.ms-select::-ms-expand { display: none; }

        /* Date input: hide native calendar button so our icon is the only one */
        input.ms-date[type="date"] {
          -webkit-appearance: none;
          appearance: none;
          background-image: none !important;
        }
        input.ms-date[type="date"]::-webkit-calendar-picker-indicator {
          opacity: 0;
          display: none;
        }
      `}),t.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-slate-900/85 backdrop-blur supports-[backdrop-filter]:backdrop-blur-sm border border-slate-200 dark:border-slate-800 p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight",children:"Dashboard"}),t.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300/90 mt-1",children:w?`Last updated ${w.toLocaleString()}`:"Loading…"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs(xe,{"aria-label":"Filter by branch",value:p,onChange:i=>v(i.target.value),className:"min-w-[11rem]",children:[t.jsx("option",{value:"",children:"All Branches"}),n.map(i=>t.jsx("option",{value:i.id,children:i.name},i.id))]}),t.jsxs(xe,{"aria-label":"Filter by loan officer",value:h,onChange:i=>g(i.target.value),className:"min-w-[12rem]",children:[t.jsx("option",{value:"",children:"All Loan Officers"}),d.map(i=>t.jsx("option",{value:i.id,children:i.name||i.email},i.id))]}),t.jsxs(xe,{"aria-label":"Filter by time range",value:b,onChange:i=>y(i.target.value),className:"min-w-[10rem]",children:[t.jsx("option",{value:"",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"}),t.jsx("option",{value:"quarter",children:"This Quarter"}),t.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),t.jsx("option",{value:"annual",children:"Annual"})]}),t.jsxs(xe,{"aria-label":"Auto refresh interval",value:f,onChange:i=>S(Number(i.target.value)),className:"min-w-[12rem]",children:[t.jsx("option",{value:0,children:"No Auto-Refresh"}),t.jsx("option",{value:1,children:"Every 1 min"}),t.jsx("option",{value:5,children:"Every 5 mins"}),t.jsx("option",{value:15,children:"Every 15 mins"})]}),t.jsx("button",{className:`ms-btn h-10 px-3.5 sm:px-4 inline-flex items-center justify-center whitespace-nowrap shrink-0
                         bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-700
                         hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-lg`,onClick:()=>{const i=new AbortController;Promise.all([Se(i.signal),X({page:1},i.signal),Pe(i.signal),ue(i.signal)]).then(()=>{J(1),I(new Date),f>0&&N(Date.now()+f*6e4),z("Dashboard refreshed","success")}).catch(()=>z("Refresh failed","error")).finally(()=>i.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]}),f>0&&j&&t.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full border border-slate-200 dark:border-slate-700 px-2.5 py-1 text-xs text-slate-700 dark:text-slate-200",children:["Auto-refresh in ",Vt,":",qt]})]}),t.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:Rt.map(i=>t.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:i.msg},i.id))}),((A==null?void 0:A.length)??0)>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 dark:bg-slate-800/60 dark:border-slate-700",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-slate-200",children:"General Communications"}),A.some(i=>Array.isArray(i.attachments)&&i.attachments.length>0)&&t.jsxs("button",{onClick:Wt,className:"text-xs flex items-center gap-1 border rounded px-2 py-1 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",disabled:D,children:[t.jsx(Gt,{className:"w-3 h-3"})," Download all"]})]}),t.jsxs("div",{className:"relative h-10",children:[t.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),t.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-800 dark:text-slate-100 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:A.map((i,o)=>t.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.type&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:i.type}),i.priority&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:i.priority}),i.audienceRole&&t.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:["role: ",i.audienceRole]}),typeof i.audienceBranchId<"u"&&i.audienceBranchId!==null&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:$t(i.audienceBranchId)}),t.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),t.jsx("span",{className:"truncate",children:i.text})]},i.id||i.text||o))})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(ye,{to:"/loans/add",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ce,{className:"w-4 h-4"})," Add Loan"]}),t.jsxs(ye,{to:"/borrowers/add",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ce,{className:"w-4 h-4"})," Add Borrower"]}),t.jsxs(ye,{to:"/repayments/new",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ce,{className:"w-4 h-4"})," Record Repayment"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[t.jsx("main",{className:"space-y-6",children:Tt?t.jsx("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:Array.from({length:8}).map((i,o)=>t.jsx(zt,{className:"h-32"},o))}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:[t.jsx(R,{tone:"indigo",title:"Total Borrowers",value:M(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:t.jsx(Fa,{className:"w-6 h-6"}),to:T(_.borrowers)}),t.jsx(R,{tone:"sky",title:"Total Loans",value:M(e==null?void 0:e.totalLoans).toLocaleString(),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.loans)}),t.jsx(R,{tone:"blue",title:"Total Disbursed",value:F(e==null?void 0:e.totalDisbursed),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.loans,{tab:"disbursed"})}),t.jsx(R,{tone:"emerald",title:"Total Paid",value:F(e==null?void 0:e.totalPaid),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.repayments,{tab:"paid"})}),t.jsx(R,{tone:"emerald",title:"Total Repaid",value:F(e==null?void 0:e.totalRepaid),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.repayments,{tab:"paid"})}),t.jsx(R,{tone:"indigo",title:"Expected Repayments",value:F(e==null?void 0:e.totalExpectedRepayments),icon:t.jsx(it,{className:"w-6 h-6"}),to:T(_.expectedRepayments,{tab:"expected"})}),t.jsx(R,{tone:"cyan",title:"Total Deposits",value:F(e==null?void 0:e.totalDeposits),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.deposits)}),t.jsx(R,{tone:"amber",title:"Total Withdrawals",value:F(e==null?void 0:e.totalWithdrawals),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.withdrawals)}),t.jsx(R,{tone:"blue",title:"Net Savings",value:F(e==null?void 0:e.netSavings),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.savings)}),t.jsx(R,{tone:"rose",title:"Defaulted Loan",value:F(e==null?void 0:e.defaultedLoan),icon:t.jsx(ot,{className:"w-6 h-6"}),to:T(_.defaultedLoans,{tab:"defaulted"})}),t.jsx(R,{tone:"rose",title:"Defaulted Interest",value:F(e==null?void 0:e.defaultedInterest),icon:t.jsx(ot,{className:"w-6 h-6"}),to:T(_.defaultedInterest,{tab:"defaulted-interest"})}),t.jsx(R,{tone:"violet",title:"Outstanding Loan",value:F(e==null?void 0:e.outstandingLoan),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.outstandingLoan,{tab:"outstanding"})}),t.jsx(R,{tone:"violet",title:"Outstanding Interest",value:F(e==null?void 0:e.outstandingInterest),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.outstandingInterest,{tab:"outstanding-interest"})}),t.jsx(R,{tone:"slate",title:"Written Off",value:F(e==null?void 0:e.writtenOff),icon:t.jsx(_a,{className:"w-6 h-6"}),to:T(_.writtenOff,{tab:"written-off"})}),t.jsx(R,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${M(e==null?void 0:e.parPercent)}%`,icon:t.jsx(nt,{className:"w-6 h-6"}),to:T(_.par,{tab:"par"})})]}),$&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(nt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-slate-100",children:`Monthly Trends${$.month||$.year?` — ${$.month||""} ${$.year||""}`:""}`})]}),t.jsx("div",{className:"mb-4",children:t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:[{name:"Loans",value:M($.monthlyLoans)},{name:"Deposits",value:M($.monthlyDeposits)},{name:"Repayments",value:M($.monthlyRepayments)}],children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"name",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"value",fill:k.bar1})]})})}),(()=>{const i=[M($.monthlyLoans),M($.monthlyDeposits),M($.monthlyRepayments)],o=Math.max(...i);return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"text-indigo-600 dark:text-indigo-400",children:t.jsx(Ie,{label:"Loans (count)",value:M($.monthlyLoans),max:o})}),t.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:t.jsx(Ie,{label:"Deposits (TZS)",value:M($.monthlyDeposits),max:o})}),t.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:t.jsx(Ie,{label:"Repayments (TZS)",value:M($.monthlyRepayments),max:o})})]})})()]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Top Borrowers"}),qe.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-700 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Name"}),t.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),t.jsx("tbody",{className:"text-slate-900 dark:text-slate-100",children:qe.map(i=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:i.name}),t.jsx("td",{className:"py-1 pr-4",children:F(i.outstanding)})]},i.id))})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Upcoming Repayments"}),Ge.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-700 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),t.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),t.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),t.jsx("tbody",{className:"text-slate-900 dark:text-slate-100",children:Ge.map(i=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:i.borrower}),t.jsx("td",{className:"py-1 pr-4",children:i.dueDate}),t.jsx("td",{className:"py-1 pr-4",children:F(i.amount)})]},i.id))})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Branch Performance"}),Ue.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:Ue,children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"branch",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"disbursed",fill:k.bar1}),t.jsx(re,{dataKey:"repayments",fill:k.bar2})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Officer Performance"}),He.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:He,children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"officer",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"loans",fill:k.bar1}),t.jsx(re,{dataKey:"collections",fill:k.bar2})]})})]})]})]})}),t.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(it,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h2",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Recent Activity"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[t.jsx(Re,{value:de,onChange:i=>Ae(i.target.value),className:"h-9"}),t.jsx(Re,{value:ce,onChange:i=>Ot(i.target.value),className:"h-9"}),t.jsx("button",{className:`ms-btn col-span-2 h-9 text-sm rounded-lg
                           bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                           border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,onClick:()=>{J(1),X({page:1})},children:"Search by date"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:V.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No activity."}):V.map(i=>{var o,u,E,O,q;return t.jsxs("div",{className:"border rounded p-3 border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:[i.type," • ",i.entityType," #",i.entityId]}),t.jsx("p",{className:"text-xs text-slate-800 dark:text-slate-200 break-words",children:i.message}),t.jsxs("p",{className:"text-[11px] text-slate-600 dark:text-slate-400 mt-1",children:["by ",((o=i.createdBy)==null?void 0:o.name)||((u=i.createdBy)==null?void 0:u.email)," • ",new Date(i.createdAt).toLocaleString()]}),Array.isArray(i.comments)&&i.comments.length>0&&t.jsx("div",{className:"mt-2 space-y-1",children:i.comments.map(B=>{var W,Je;return t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-2",children:[t.jsx("p",{className:"text-xs text-gray-900 dark:text-slate-100 break-words",children:B.comment}),t.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-slate-400 mt-0.5",children:["— ",((W=B.createdBy)==null?void 0:W.name)||((Je=B.createdBy)==null?void 0:Je.email)," • ",new Date(B.createdAt).toLocaleString()]})]},B.id)})}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx(ht,{value:ze[i.id]||"",onChange:B=>We(W=>({...W,[i.id]:B.target.value})),placeholder:"Reply…",className:"flex-1 h-9 text-xs"}),t.jsxs("button",{onClick:()=>Ft(i.id),disabled:Ve[`c-${i.id}`],className:`ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center gap-1 rounded-lg
                                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ma,{className:"w-3 h-3"})," Reply"]})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[t.jsxs(xe,{value:((E=pe[i.id])==null?void 0:E.assigneeId)||"",onChange:B=>ge(W=>({...W,[i.id]:{...W[i.id]||{},assigneeId:B.target.value}})),className:"col-span-2 h-9 text-xs",children:[t.jsx("option",{value:"",children:"Assign to…"}),d.map(B=>t.jsx("option",{value:B.id,children:B.name||B.email},B.id))]}),t.jsx(Re,{value:((O=pe[i.id])==null?void 0:O.dueDate)||"",onChange:B=>ge(W=>({...W,[i.id]:{...W[i.id]||{},dueDate:B.target.value}})),className:"h-9 text-xs"}),t.jsxs("button",{onClick:()=>Kt(i.id),disabled:Ve[`a-${i.id}`],className:`ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center justify-center gap-1 rounded-lg
                                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Sa,{className:"w-3 h-3"})," Assign"]}),t.jsx(ht,{value:((q=pe[i.id])==null?void 0:q.note)||"",onChange:B=>ge(W=>({...W,[i.id]:{...W[i.id]||{},note:B.target.value}})),placeholder:"Note…",className:"col-span-4 h-9 text-xs"})]})]},i.id)})})]}),U>H&&t.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-slate-800 dark:text-slate-200",children:[t.jsxs("span",{children:[Math.min(K*H,U)," of ",U]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{const i=Math.max(K-1,1);J(i),X({page:i})},disabled:K===1,className:`ms-btn px-2 py-1 disabled:opacity-50 rounded-lg
                               bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                               border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:"Prev"}),t.jsx("button",{onClick:()=>{const i=K*H<U?K+1:K;i!==K&&(J(i),X({page:i}))},disabled:K*H>=U,className:`ms-btn px-2 py-1 disabled:opacity-50 rounded-lg
                               bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                               border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:"Next"})]})]})]})})]})]})},R=({title:r,value:e,icon:s,tone:n="indigo",to:c=null,delta:d=null,deltaLabel:m="",spark:p=null})=>{const v={indigo:{bg:"from-indigo-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-indigo-100 dark:ring-indigo-900/40",ink:"text-indigo-700 dark:text-indigo-300",badge:"bg-indigo-600/10 text-indigo-600 dark:text-indigo-300",spot:"bg-indigo-400/20"},sky:{bg:"from-sky-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-sky-100 dark:ring-sky-900/40",ink:"text-sky-700 dark:text-sky-300",badge:"bg-sky-600/10 text-sky-600 dark:text-sky-300",spot:"bg-sky-400/20"},blue:{bg:"from-blue-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-blue-100 dark:ring-blue-900/40",ink:"text-blue-700 dark:text-blue-300",badge:"bg-blue-600/10 text-blue-600 dark:text-blue-300",spot:"bg-blue-400/20"},emerald:{bg:"from-emerald-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-emerald-100 dark:ring-emerald-900/40",ink:"text-emerald-700 dark:text-emerald-300",badge:"bg-emerald-600/10 text-emerald-600 dark:text-emerald-300",spot:"bg-emerald-400/20"},cyan:{bg:"from-cyan-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-cyan-100 dark:ring-cyan-900/40",ink:"text-cyan-700 dark:text-cyan-300",badge:"bg-cyan-600/10 text-cyan-600 dark:text-cyan-300",spot:"bg-cyan-400/20"},amber:{bg:"from-amber-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-amber-100 dark:ring-amber-900/40",ink:"text-amber-700 dark:text-amber-300",badge:"bg-amber-600/10 text-amber-600 dark:text-amber-300",spot:"bg-amber-400/20"},violet:{bg:"from-violet-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-violet-100 dark:ring-violet-900/40",ink:"text-violet-700 dark:text-violet-300",badge:"bg-violet-600/10 text-violet-600 dark:text-violet-300",spot:"bg-violet-400/20"},rose:{bg:"from-rose-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-rose-100 dark:ring-rose-900/40",ink:"text-rose-700 dark:text-rose-300",badge:"bg-rose-600/10 text-rose-600 dark:text-rose-300",spot:"bg-rose-400/20"},slate:{bg:"from-slate-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-slate-100 dark:ring-slate-800/60",ink:"text-slate-700 dark:text-slate-300",badge:"bg-slate-600/10 text-slate-600 dark:text-slate-300",spot:"bg-slate-400/20"}}[n]||{bg:"from-slate-50 to-white dark:from-slate-900 dark:to-slate-900",ring:"ring-slate-100 dark:ring-slate-800/60",ink:"text-slate-700 dark:text-slate-300",badge:"bg-slate-600/10 text-slate-600 dark:text-slate-300",spot:"bg-slate-400/20"},h=()=>{if(!Array.isArray(p)||p.length<2)return null;const b=96,y=28,f=2,S=Math.min(...p),w=Math.max(...p),I=Math.max(w-S,1e-6),j=(b-f*2)/(p.length-1),N="M "+p.map((x,P)=>{const A=(f+P*j).toFixed(1),C=(y-f-(x-S)/I*(y-f*2)).toFixed(1);return`${A} ${C}`}).join(" L ");return t.jsx("svg",{width:b,height:y,className:"mt-2 opacity-70",children:t.jsx("path",{d:N,fill:"none",stroke:"currentColor",strokeWidth:"2"})})},g=d==null?"":d>=0?"text-emerald-700 dark:text-emerald-300 bg-emerald-600/10":"text-rose-700 dark:text-rose-300 bg-rose-600/10";return t.jsxs("div",{className:"group relative",children:[c&&t.jsx(ye,{to:c,className:"absolute inset-0 z-10 rounded-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500","aria-label":`View ${r} details`,title:`View ${r} details`}),t.jsxs("div",{className:["relative rounded-xl p-5 min-h-[10.5rem] shadow-sm transition-all","bg-gradient-to-br",v.bg,"ring-1",v.ring,c?"hover:shadow-md hover:-translate-y-0.5":""].join(" "),children:[t.jsx("div",{className:`pointer-events-none absolute -top-6 -right-6 h-24 w-24 rounded-full blur-2xl ${v.spot}`}),t.jsxs("div",{className:"relative flex items-start justify-between gap-3",children:[t.jsx("div",{className:`p-3 rounded-full ${v.badge}`,children:s}),d!=null&&t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium ${g}`,children:[d>=0?"↑":"↓"," ",Math.abs(d).toLocaleString(),"%",m&&t.jsxs("span",{className:"opacity-70",children:[" ",m]})]})]}),t.jsxs("div",{className:"relative mt-3 min-w-0",children:[t.jsx("h3",{className:`text-sm font-medium ${v.ink} truncate`,children:r}),t.jsx("p",{className:"text-[28px] md:text-[32px] leading-tight font-semibold text-slate-900 dark:text-white font-mono tabular-nums break-words",children:e??"—"})]}),t.jsx("div",{className:"relative text-slate-400 dark:text-slate-500",children:t.jsx(h,{})})]})]})};export{Yr as default};
