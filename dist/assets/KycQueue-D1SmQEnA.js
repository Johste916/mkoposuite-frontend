import{r as n,j as e,L as b,g as m}from"./index-BVbJtkKt.js";const a={container:"w-full px-4 md:px-6 lg:px-8 py-6 min-h-screen bg-[var(--bg)] text-[var(--fg)]",card:"rounded-2xl border-2 border-[var(--border-strong)] bg-[var(--card)] shadow-lg",link:"inline-flex items-center gap-1 font-bold underline decoration-2 underline-offset-4 rounded text-[var(--ring)] hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",uploadBtn:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border-2 border-[var(--border-strong)] bg-[var(--card)] hover:bg-[var(--kpi-bg)] cursor-pointer font-semibold focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",th:"px-3 py-3 font-semibold border-b-2 border-[var(--border)] text-left",head:"bg-[var(--kpi-bg)] sticky top-0",row:"odd:bg-[var(--card)] even:bg-[var(--kpi-bg)] border-t border-[var(--border)]",muted:"text-[var(--muted)]"},j=()=>"px-2 py-0.5 text-xs font-semibold rounded-full border bg-[var(--chip-soft)] border-[var(--border)] text-[var(--fg)]",N=()=>{const[i,c]=n.useState([]),[p,u]=n.useState(!0),[x,h]=n.useState(""),d=async r=>{var s,t;try{u(!0);const l=r?{signal:r}:{},o=await m.get("/borrowers/kyc/queue",l),v=Array.isArray(o.data)?o.data:((s=o.data)==null?void 0:s.items)||((t=o.data)==null?void 0:t.data)||[];c(v),h("")}catch{h("Failed to load KYC queue"),c([])}finally{u(!1)}};n.useEffect(()=>{const r=new AbortController;return d(r.signal),()=>r.abort()},[]);const g=async(r,s)=>{if(s!=null&&s.length)try{const t=new FormData;Array.from(s).forEach(l=>t.append("file",l)),await m.post(`/borrowers/${encodeURIComponent(r)}/kyc`,t,{headers:{"Content-Type":"multipart/form-data"}}),await d(),alert("KYC uploaded")}catch{alert("Failed to upload KYC")}},f=r=>(r==null?void 0:r.name)||`${(r==null?void 0:r.firstName)||""} ${(r==null?void 0:r.lastName)||""}`.trim()||(r==null?void 0:r.id)||"—";return e.jsxs("div",{className:a.container,children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight",children:"KYC Queue"}),e.jsx("button",{onClick:()=>d(),className:"px-3 py-2 rounded-lg border-2 border-[var(--border-strong)] bg-[var(--card)] hover:bg-[var(--kpi-bg)] font-semibold focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","aria-busy":p,children:"Refresh"})]}),e.jsx("div",{className:`${a.card} overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-[15px] border-collapse",children:[e.jsx("thead",{className:a.head,children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:a.th,children:"Borrower"}),e.jsx("th",{className:a.th,children:"Phone"}),e.jsx("th",{className:a.th,children:"Status"}),e.jsx("th",{className:a.th,children:"Upload"})]})}),e.jsx("tbody",{children:p?e.jsx("tr",{children:e.jsx("td",{className:`p-4 ${a.muted}`,colSpan:4,children:"Loading…"})}):x?e.jsx("tr",{children:e.jsx("td",{className:"p-4",style:{color:"var(--danger-fg)"},colSpan:4,children:x})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{className:`p-4 ${a.muted}`,colSpan:4,children:"Queue is empty."})}):i.map(r=>e.jsxs("tr",{className:a.row,children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx(b,{to:`/borrowers/${encodeURIComponent(r.id)}`,className:a.link,children:f(r)})}),e.jsx("td",{className:"px-3 py-2",children:r.phone||"—"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:j(),children:r.kycStatus||r.status||"pending"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("label",{className:a.uploadBtn,children:[e.jsx("span",{children:"Choose files…"}),e.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:s=>g(r.id,s.target.files)})]})})]},r.id))})]})})})]})};export{N as default};
