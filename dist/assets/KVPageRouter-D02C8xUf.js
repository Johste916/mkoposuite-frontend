import{d as j,j as e,r as g}from"./index-BbV8pT_v.js";import{e as h,K as f}from"./settings-p3w4x-Ur.js";import{u as k}from"./useSettingsResource-coOsv9ZD.js";const y=({value:i,onChange:t,placeholder:d})=>e.jsx("input",{className:"w-full rounded border px-3 py-2 text-sm",value:i,onChange:r=>t(r.target.value),placeholder:d}),v=({value:i,onChange:t,rows:d=8,placeholder:r})=>e.jsx("textarea",{className:"w-full rounded border px-3 py-2 text-sm",rows:d,value:i,onChange:n=>t(n.target.value),placeholder:r});function N({value:i,onChange:t,itemPlaceholder:d="Type name…"}){const r=h(i,[]),[n,l]=g.useState(""),p=()=>{const o=n.trim();o&&(t([...r,o]),l(""))},x=o=>t(r.filter((m,a)=>a!==o)),c=(o,m)=>t(r.map((a,s)=>s===o?m:a));return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{value:n,onChange:l,placeholder:d}),e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:p,children:"Add"})]}),r.length===0?e.jsx("div",{className:"text-sm text-slate-500",children:"No items yet."}):e.jsx("ul",{className:"space-y-2",children:r.map((o,m)=>e.jsxs("li",{className:"flex gap-2",children:[e.jsx(y,{value:o,onChange:a=>c(m,a)}),e.jsx("button",{className:"px-3 py-1.5 rounded bg-rose-50 text-rose-700",onClick:()=>x(m),children:"Delete"})]},m))})]})}function w({value:i,onChange:t,keyLabel:d="Key",valLabel:r="Label",valueAs:n="text"}){const l=h(i,{}),p=Object.entries(l),x=()=>{const a={...l};let s=1;for(;a[`field_${s}`];)s++;a[`field_${s}`]="",t(a)},c=(a,s)=>{if(!s||s===a)return;const u={...l},b=u[a];delete u[a],u[s]=b,t(u)},o=(a,s)=>t({...l,[a]:s}),m=a=>{const s={...l};delete s[a],t(s)};return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:x,children:"Add Row"})}),p.length===0?e.jsx("div",{className:"text-sm text-slate-500",children:"No mappings yet."}):e.jsx("div",{className:"space-y-2",children:p.map(([a,s])=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 items-start",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:d}),e.jsx(y,{value:a,onChange:u=>c(a,u)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-slate-500",children:r}),n==="textarea"?e.jsx(v,{value:s??"",onChange:u=>o(a,u),rows:5}):e.jsx(y,{value:s??"",onChange:u=>o(a,u)})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-rose-50 text-rose-700",onClick:()=>m(a),children:"Delete"})})]},a))})]})}function S({value:i,onChange:t,placeholder:d=`{
  "example": true
}`}){const[r,n]=g.useState(()=>JSON.stringify(h(i,{}),null,2)),[l,p]=g.useState(""),x=()=>{try{const c=r.trim()?JSON.parse(r):{};t(c),p("")}catch(c){p(c.message)}};return e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{value:r,onChange:n,rows:14,placeholder:d}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:x,children:"Apply"}),l&&e.jsx("span",{className:"text-xs text-rose-600",children:l})]})]})}const C={"format-borrower-reports":{title:"Format Borrower Reports",key:"format-borrower-reports",editor:"map",defaults:{dateFormat:"dd/mm/yyyy",showTotals:"true"},help:"Configure simple format flags or name→value pairs the reports will honor."},"rename-borrower-reports":{title:"Rename Borrower Reports",key:"rename-borrower-reports",editor:"map",defaults:{"Borrowers Report":"Clients","At a Glance":"Overview"},help:"Map default report titles to your preferred names."},"rename-collection-sheet-headings":{title:"Rename Collection Sheet Headings",key:"collection-sheet-headings",editor:"map",defaults:{amount:"Amount",due_date:"Due Date",client:"Borrower"},help:"Rename column headings in collection sheets."},"invite-borrowers-settings":{title:"Invite Borrowers Settings",key:"invite-borrowers",editor:"map",defaults:{subject:"Welcome to MkopoSuite",message:"Hello {{name}}, …"},help:"Simple subject/message pair for borrower invites. Use {{name}} in templates.",valueAs:"textarea"},"modify-add-borrower-fields":{title:"Modify Add Borrower Fields",key:"borrower-fields",editor:"json",defaults:{required:["firstName","lastName"],optional:["middleName"]},help:"Define required/optional/custom borrower fields."},"loan-repayment-methods":{title:"Loan Repayment Methods",key:"repayment-methods",editor:"list",defaults:["Cash","Bank Transfer","Mobile Money"],help:"Add the repayment methods you accept."},"manage-collectors":{title:"Manage Collectors",key:"collectors",editor:"list",defaults:[],help:"Manage collector labels used in sheets and reports."},"collateral-types":{title:"Collateral Types",key:"collateral-types",editor:"list",defaults:["Vehicle","Land Title","Electronics"]},"payroll-templates":{title:"Payroll Templates",key:"payroll-templates",editor:"list",defaults:["Standard","Contractors"]},"other-income-types":{title:"Other Income Types",key:"other-income-types",editor:"list",defaults:["Training Fees","Asset Sale"]},"expense-types":{title:"Expense Types",key:"expense-types",editor:"list",defaults:["Rent","Fuel","Utilities"]},"asset-management-types":{title:"Asset Management Types",key:"asset-management-types",editor:"list",defaults:["Vehicle","Electronics","Furniture"]},"savings-products":{title:"Savings Products",key:"savings-products",editor:"list",defaults:["Voluntary","Compulsory"]},"savings-fees":{title:"Savings Fees",key:"savings-fees",editor:"list",defaults:["Withdrawal Fee","Dormancy Fee"]},"savings-transaction-types":{title:"Savings Transaction Types",key:"savings-transaction-types",editor:"list",defaults:["Deposit","Withdrawal","Interest"]},"sms-credits":{title:"SMS Credits",key:"sms-credits",editor:"json",defaults:{balance:0,provider:"n/a"},help:"If you integrate a provider, this can be populated automatically."},"sender-id":{title:"Sender ID",key:"sms-sender-id",editor:"map",defaults:{senderId:""}},"sms-templates":{title:"SMS Templates",key:"sms-templates",editor:"map",defaults:{repayment_reminder:"Dear {{name}}, your loan is due on {{due_date}}."},valueAs:"textarea",help:"Use {{var}} placeholders. Common vars: {{name}}, {{amount}}, {{due_date}}."},"auto-send-sms":{title:"Auto Send SMS",key:"sms-auto",editor:"json",defaults:{enabled:!1,events:{repayment_due:!0,missed_payment:!0}}},"collection-sheets-sms-template":{title:"Collection Sheets - SMS Template",key:"collection-sheets-sms",editor:"map",defaults:{template:"Hello {{name}}, you owe {{amount}} due {{due_date}}."},valueAs:"textarea"},"email-templates":{title:"Email Templates",key:"email-templates",editor:"map",defaults:{borrower_invite:"Hello {{name}}, welcome to MkopoSuite."},valueAs:"textarea"},"auto-send-emails":{title:"Auto Send Emails",key:"email-auto",editor:"json",defaults:{enabled:!1,events:{new_loan:!0,repayment_receipt:!0}}},"collection-sheets-email-template":{title:"Collection Sheets - Email Template",key:"collection-sheets-email",editor:"map",defaults:{subject:"Collection Reminder",body:"Dear {{name}}, …"},valueAs:"textarea"},"e-signature-settings":{title:"E-Signature Settings",key:"esign-settings",editor:"json",defaults:{provider:"manual",webhooks:!1}},"email-templates-for-e-signature":{title:"E-Signature Email Templates",key:"esign-email-templates",editor:"map",defaults:{request_signature:"Please review and e-sign your document."},valueAs:"textarea"},"investor-products":{title:"Investor Products",key:"investor-products",editor:"list",defaults:["Term Note","Revenue Share"]},"loan-investment-products":{title:"Loan Investment Products",key:"loan-investment-products",editor:"list",defaults:["Co-lending","Participation"]},"investor-fees":{title:"Investor Fees",key:"investor-fees",editor:"list",defaults:["Management Fee","Performance Fee"]},"format-investor-report":{title:"Format Investor Report",key:"format-investor-report",editor:"map",defaults:{dateFormat:"dd/mm/yyyy"}},"rename-investor-report":{title:"Rename Investor Report",key:"rename-investor-report",editor:"map",defaults:{"Investor Report":"Investors Overview"}},"invite-investors-settings":{title:"Invite Investors Settings",key:"invite-investors",editor:"map",defaults:{subject:"Invest with us",message:"Hello {{name}}, …"},valueAs:"textarea"},"investor-transaction-types":{title:"Investor Transaction Types",key:"investor-transaction-types",editor:"list",defaults:["Contribution","Distribution","Fee"]},settings:{title:"Accounting Settings",key:"accounting-settings",editor:"map",defaults:{basis:"cash"}},"bank-accounts":{title:"Bank Accounts",key:"bank-accounts",editor:"list",defaults:[]},taxes:{title:"Taxes",key:"taxes",editor:"list",defaults:["VAT 18%"]},"opening-balances":{title:"Opening Balances",key:"opening-balances",editor:"json",defaults:{},help:"Record opening balances from the Accounting module; this is a simple placeholder."},"backup-settings":{title:"Backup Settings",key:"backup-settings",editor:"json",defaults:{schedule:"0 3 * * *",retentionDays:30,offsite:!1}},"download-backups":{title:"Download Backups",key:"download-backups",editor:"json",defaults:{},help:"Use your infrastructure/DB tooling to download backups. This page stores optional notes."}};function I(){const{slug:i}=j(),t=C[i];if(!t)return e.jsxs("div",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Unknown Settings"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["No editor is registered for: ",e.jsx("code",{children:i})]})]});const d=()=>f.get(t.key),r=s=>f.save(t.key,s),{data:n,setData:l,loading:p,saving:x,error:c,success:o,save:m}=k(d,r,t.defaults),a=t.title;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:a}),t.help&&e.jsx("p",{className:"text-sm text-slate-500",children:t.help})]}),c&&e.jsx("div",{className:"bg-rose-50 text-rose-700 border border-rose-200 rounded-lg p-3 text-sm",children:String(c)}),o&&e.jsx("div",{className:"bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg p-3 text-sm",children:o}),e.jsx("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-3",children:p?e.jsx("div",{className:"text-sm text-slate-500",children:"Loading…"}):t.editor==="list"?e.jsx(N,{value:n,onChange:s=>l(s)}):t.editor==="map"?e.jsx(w,{value:n,onChange:s=>l(s),valueAs:t.valueAs||"text"}):t.editor==="text"?e.jsx(v,{value:h(n,""),onChange:s=>l(s),rows:12}):t.editor==="json"?e.jsx(S,{value:n,onChange:s=>l(s)}):e.jsx("div",{className:"text-sm text-slate-500",children:"No editor available."})}),e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white text-sm",disabled:x,onClick:()=>m(),children:x?"Saving…":"Save"})]})}export{I as default};
