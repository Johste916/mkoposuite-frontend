import{r as l,b as U,j as t,L as Ne}from"./index-CakYFgIn.js";import{c as z}from"./createLucideIcon-DdGJCGmW.js";import{C as we}from"./circle-plus-B0s99Qje.js";import{i as Ve,S as Ot,a as be,r as It,u as lt,R as Et,b as Bt,c as Dt,d as _t,g as Mt,e as ot,f as Tt,h as Lt,j as Rt,k as ge,l as $t,G as Ft,C as Kt,m as ct,n as zt,L as fe,o as Wt,p as Vt,t as Gt,q as Ge,s as dt,v as ut,w as mt,x as xt,y as Ut,z as ht,A as qt,J as Ht,B as Y,D as Xt,E as Zt,F as Yt,H as Jt,I as Ue,K as q,M as Qt,N as ee,O as te,P as re,Q as ea,T as pt,U as gt,V as ft,W as ta,X as aa,Y as qe,Z as ra,_ as sa,$ as He,a0 as na,a1 as De,a2 as Xe,a3 as ia,a4 as la,a5 as Ae,a6 as Pe,a7 as Se,a8 as Ce,a9 as Oe,aa as Ie}from"./CartesianChart-BzGAZ2nT.js";import{U as oa}from"./user-plus-DsmYyjdS.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ze=z("chart-no-axes-column",ca);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ye=z("clipboard-list",da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ee=z("credit-card",ua);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],J=z("dollar-sign",ma);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=z("download",xa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Qe=z("info",ha);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],ga=z("message-square",pa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],va=z("thumbs-down",fa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],et=z("triangle-alert",ba);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ka=z("users",ya);var ja="Invariant failed";function Na(a,e){throw new Error(ja)}var wa=["x","y"];function _e(){return _e=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},_e.apply(null,arguments)}function tt(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,n)}return r}function le(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tt(Object(r),!0).forEach(function(n){Aa(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Aa(a,e,r){return(e=Pa(e))in a?Object.defineProperty(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}function Pa(a){var e=Sa(a,"string");return typeof e=="symbol"?e:e+""}function Sa(a,e){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var n=r.call(a,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function Ca(a,e){if(a==null)return{};var r,n,o=Oa(a,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(o[r]=a[r])}return o}function Oa(a,e){if(a==null)return{};var r={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(e.indexOf(n)!==-1)continue;r[n]=a[n]}return r}function Ia(a,e){var{x:r,y:n}=a,o=Ca(a,wa),c="".concat(r),d=parseInt(c,10),p="".concat(n),b=parseInt(p,10),m="".concat(e.height||o.height),h=parseInt(m,10),g="".concat(e.width||o.width),y=parseInt(g,10);return le(le(le(le(le({},e),o),d?{x:d}:{}),b?{y:b}:{}),{},{height:h,width:y,name:e.name,radius:e.radius})}function vt(a){return l.createElement(Ot,_e({shapeType:"rectangle",propTransformer:Ia,activeClassName:"recharts-active-bar"},a))}var Ea=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(Ve(e))return e;var c=Ve(n)||be(n);return c?e(n,o):(c||Na(),r)}},Ba=["onMouseEnter","onMouseLeave","onClick"],Da=["value","background","tooltipPosition"],_a=["id"],Ma=["onMouseEnter","onClick","onMouseLeave"];function ae(){return ae=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(a[n]=r[n])}return a},ae.apply(null,arguments)}function at(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,n)}return r}function D(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?at(Object(r),!0).forEach(function(n){Ta(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Ta(a,e,r){return(e=La(e))in a?Object.defineProperty(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}function La(a){var e=Ra(a,"string");return typeof e=="symbol"?e:e+""}function Ra(a,e){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var n=r.call(a,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function ve(a,e){if(a==null)return{};var r,n,o=$a(a,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(o[r]=a[r])}return o}function $a(a,e){if(a==null)return{};var r={};for(var n in a)if({}.hasOwnProperty.call(a,n)){if(e.indexOf(n)!==-1)continue;r[n]=a[n]}return r}var Fa=a=>{var{dataKey:e,name:r,fill:n,legendType:o,hide:c}=a;return[{inactive:c,dataKey:e,type:o,color:n,value:ot(r,e),payload:a}]};function Ka(a){var{dataKey:e,stroke:r,strokeWidth:n,fill:o,name:c,hide:d,unit:p}=a;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:ot(c,e),hide:d,type:a.tooltipType,color:a.fill,unit:p}}}function za(a){var e=ge(dt),{data:r,dataKey:n,background:o,allOtherBarProps:c}=a,{onMouseEnter:d,onMouseLeave:p,onClick:b}=c,m=ve(c,Ba),h=ut(d,n),g=mt(p),y=xt(b,n);if(!o||r==null)return null;var j=Ut(o,!1);return l.createElement(l.Fragment,null,r.map((A,v)=>{var{value:C,background:k,tooltipPosition:N}=A,u=ve(A,Da);if(!k)return null;var S=h(A,v),w=g(A,v),O=y(A,v),P=D(D(D(D(D({option:o,isActive:String(v)===e},u),{},{fill:"#eee"},k),j),ht(m,A,v)),{},{onMouseEnter:S,onMouseLeave:w,onClick:O,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return l.createElement(vt,ae({key:"background-bar-".concat(v)},P))}))}function bt(a){var{data:e,props:r,showLabels:n}=a,o=Xt(r),{id:c}=o,d=ve(o,_a),{shape:p,dataKey:b,activeBar:m}=r,h=ge(dt),g=ge(Zt),{onMouseEnter:y,onClick:j,onMouseLeave:A}=r,v=ve(r,Ma),C=ut(y,b),k=mt(A),N=xt(j,b);return e?l.createElement(l.Fragment,null,e.map((u,S)=>{var w=m&&String(S)===h&&(g==null||b===g),O=w?m:p,P=D(D(D({},d),u),{},{isActive:w,option:O,index:S,dataKey:b});return l.createElement(fe,ae({className:"recharts-bar-rectangle"},ht(v,u,S),{onMouseEnter:C(u,S),onMouseLeave:k(u,S),onClick:N(u,S),key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(S)}),l.createElement(vt,P))}),n&&Yt.renderCallByParent(r,e)):null}function Wa(a){var{props:e,previousRectanglesRef:r}=a,{data:n,layout:o,isAnimationActive:c,animationBegin:d,animationDuration:p,animationEasing:b,onAnimationEnd:m,onAnimationStart:h}=e,g=r.current,y=qt(e,"recharts-bar-"),[j,A]=l.useState(!1),v=l.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),C=l.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return l.createElement(Ht,{begin:d,duration:p,isActive:c,easing:b,onAnimationEnd:v,onAnimationStart:C,key:y},k=>{var N=k===1?n:n==null?void 0:n.map((u,S)=>{var w=g&&g[S];if(w)return D(D({},u),{},{x:Y(w.x,u.x,k),y:Y(w.y,u.y,k),width:Y(w.width,u.width,k),height:Y(w.height,u.height,k)});if(o==="horizontal"){var O=Y(0,u.height,k);return D(D({},u),{},{y:u.y+u.height-O,height:O})}var P=Y(0,u.width,k);return D(D({},u),{},{width:P})});return k>0&&(r.current=N??null),N==null?null:l.createElement(fe,null,l.createElement(bt,{props:e,data:N,showLabels:!j}))})}function Va(a){var{data:e,isAnimationActive:r}=a,n=l.useRef(null);return r&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(Wa,{previousRectanglesRef:n,props:a}):l.createElement(bt,{props:a,data:e,showLabels:!0})}var yt=0,Ga=(a,e)=>{var r=Array.isArray(a.value)?a.value[1]:a.value;return{x:a.x,y:a.y,value:r,errorVal:ct(a,e)}};class Ua extends l.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:o,xAxisId:c,yAxisId:d,needClip:p,background:b,id:m}=this.props;if(e)return null;var h=zt("recharts-bar",o),g=m;return l.createElement(fe,{className:h,id:m},p&&l.createElement("defs",null,l.createElement(Wt,{clipPathId:g,xAxisId:c,yAxisId:d})),l.createElement(fe,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(g,")"):void 0},l.createElement(za,{data:r,dataKey:n,background:b,allOtherBarProps:this.props}),l.createElement(Va,this.props)),this.props.children)}}var qa={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ft.isSsr,legendType:"rect",minPointSize:yt,xAxisId:0,yAxisId:0};function Ha(a){var{xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:p,animationDuration:b,animationEasing:m,isAnimationActive:h}=a,{needClip:g}=Tt(e,r),y=Lt(),j=lt(),A=Rt(a.children,Kt),v=ge(N=>kr(N,e,r,j,a.id,A));if(y!=="vertical"&&y!=="horizontal")return null;var C,k=v==null?void 0:v[0];return k==null||k.height==null||k.width==null?C=0:C=y==="vertical"?k.height/2:k.width/2,l.createElement($t,{xAxisId:e,yAxisId:r,data:v,dataPointFormatter:Ga,errorBarOffset:C},l.createElement(Ua,ae({},a,{layout:y,needClip:g,data:v,xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:p,animationDuration:b,animationEasing:m,isAnimationActive:h})))}function Xa(a){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:o,bandSize:c,xAxis:d,yAxis:p,xAxisTicks:b,yAxisTicks:m,stackedData:h,displayedData:g,offset:y,cells:j}=a,A=e==="horizontal"?p:d,v=h?A.scale.domain():null,C=Vt({numericAxis:A});return g.map((k,N)=>{var u,S,w,O,P,W;h?u=Gt(h[N],v):(u=ct(k,r),Array.isArray(u)||(u=[C,u]));var T=Ea(n,yt)(u[1],N);if(e==="horizontal"){var H,[ce,V]=[p.scale(u[0]),p.scale(u[1])];S=Ge({axis:d,ticks:b,bandSize:c,offset:o.offset,entry:k,index:N}),w=(H=V??ce)!==null&&H!==void 0?H:void 0,O=o.size;var de=ce-V;if(P=Jt(de)?0:de,W={x:S,y:y.top,width:O,height:y.height},Math.abs(T)>0&&Math.abs(P)<Math.abs(T)){var se=Ue(P||T)*(Math.abs(T)-Math.abs(P));w-=se,P+=se}}else{var[ne,X]=[d.scale(u[0]),d.scale(u[1])];if(S=ne,w=Ge({axis:p,ticks:m,bandSize:c,offset:o.offset,entry:k,index:N}),O=X-ne,P=o.size,W={x:y.left,y:w,width:y.width,height:P},Math.abs(T)>0&&Math.abs(O)<Math.abs(T)){var Z=Ue(O||T)*(Math.abs(T)-Math.abs(O));O+=Z}}if(S==null||w==null||O==null||P==null)return null;var ue=D(D({},k),{},{x:S,y:w,width:O,height:P,value:h?u:u[1],payload:k,background:W,tooltipPosition:{x:S+O/2,y:w+P/2}},j&&j[N]&&j[N].props);return ue}).filter(Boolean)}function Q(a){var e=It(a,qa),r=lt();return l.createElement(Et,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Bt,{legendPayload:Fa(e)}),l.createElement(Dt,{fn:Ka,args:e}),l.createElement(_t,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Mt(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),l.createElement(Ha,ae({},e,{id:n}))))}Q.displayName="Bar";function rt(a,e){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(a,o).enumerable})),r.push.apply(r,n)}return r}function pe(a){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rt(Object(r),!0).forEach(function(n){Za(a,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(r,n))})}return a}function Za(a,e,r){return(e=Ya(e))in a?Object.defineProperty(a,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[e]=r,a}function Ya(a){var e=Ja(a,"string");return typeof e=="symbol"?e:e+""}function Ja(a,e){if(typeof a!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var n=r.call(a,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}var Qa=(a,e)=>e,er=(a,e,r)=>r,tr=(a,e,r,n)=>n,ar=(a,e,r,n,o)=>o,oe=q([gt,ar],(a,e)=>a.filter(r=>r.type==="bar").find(r=>r.id===e)),rr=q([oe],a=>a==null?void 0:a.maxBarSize),sr=(a,e,r,n,o,c)=>c,st=(a,e,r)=>{var n=r??a;if(!be(n))return De(n,e,0)},nr=q([re,gt,Qa,er,tr],(a,e,r,n,o)=>e.filter(c=>a==="horizontal"?c.xAxisId===r:c.yAxisId===n).filter(c=>c.isPanorama===o).filter(c=>c.hide===!1).filter(c=>c.type==="bar")),ir=(a,e,r,n)=>{var o=re(a);return o==="horizontal"?qe(a,"yAxis",r,n):qe(a,"xAxis",e,n)},lr=(a,e,r)=>{var n=re(a);return n==="horizontal"?He(a,"xAxis",e):He(a,"yAxis",r)},or=(a,e,r)=>{var n={},o=a.filter(na),c=a.filter(m=>m.stackId==null),d=o.reduce((m,h)=>(m[h.stackId]||(m[h.stackId]=[]),m[h.stackId].push(h),m),n),p=Object.entries(d).map(m=>{var[h,g]=m,y=g.map(A=>A.dataKey),j=st(e,r,g[0].barSize);return{stackId:h,dataKeys:y,barSize:j}}),b=c.map(m=>{var h=[m.dataKey].filter(y=>y!=null),g=st(e,r,m.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...p,...b]},cr=q([nr,sa,lr],or),dr=(a,e,r,n,o)=>{var c,d,p=oe(a,e,r,n,o);if(p!=null){var b=re(a),m=ft(a),{maxBarSize:h}=p,g=be(h)?m:h,y,j;return b==="horizontal"?(y=ee(a,"xAxis",e,n),j=te(a,"xAxis",e,n)):(y=ee(a,"yAxis",r,n),j=te(a,"yAxis",r,n)),(c=(d=pt(y,j,!0))!==null&&d!==void 0?d:g)!==null&&c!==void 0?c:0}},kt=(a,e,r,n)=>{var o=re(a),c,d;return o==="horizontal"?(c=ee(a,"xAxis",e,n),d=te(a,"xAxis",e,n)):(c=ee(a,"yAxis",r,n),d=te(a,"yAxis",r,n)),pt(c,d)};function ur(a,e,r,n,o){var c=n.length;if(!(c<1)){var d=De(a,r,0,!0),p,b=[];if(Xe(n[0].barSize)){var m=!1,h=r/c,g=n.reduce((k,N)=>k+(N.barSize||0),0);g+=(c-1)*d,g>=r&&(g-=(c-1)*d,d=0),g>=r&&h>0&&(m=!0,h*=.9,g=c*h);var y=(r-g)/2>>0,j={offset:y-d,size:0};p=n.reduce((k,N)=>{var u,S={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j.offset+j.size+d,size:m?h:(u=N.barSize)!==null&&u!==void 0?u:0}},w=[...k,S];return j=w[w.length-1].position,w},b)}else{var A=De(e,r,0,!0);r-2*A-(c-1)*d<=0&&(d=0);var v=(r-2*A-(c-1)*d)/c;v>1&&(v>>=0);var C=Xe(o)?Math.min(v,o):v;p=n.reduce((k,N,u)=>[...k,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:A+(v+d)*u+(v-C)/2,size:C}}],b)}return p}}var mr=(a,e,r,n,o,c,d)=>{var p=be(d)?e:d,b=ur(r,n,o!==c?o:c,a,p);return o!==c&&b!=null&&(b=b.map(m=>pe(pe({},m),{},{position:pe(pe({},m.position),{},{offset:m.position.offset-o/2})}))),b},xr=q([cr,ft,ta,aa,dr,kt,rr],mr),hr=(a,e,r,n)=>ee(a,"xAxis",e,n),pr=(a,e,r,n)=>ee(a,"yAxis",r,n),gr=(a,e,r,n)=>te(a,"xAxis",e,n),fr=(a,e,r,n)=>te(a,"yAxis",r,n),vr=q([xr,oe],(a,e)=>{if(!(a==null||e==null)){var r=a.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),br=(a,e)=>{var r=ra(e);if(!(!a||r==null||e==null)){var{stackId:n}=e;if(n!=null){var o=a[n];if(o){var{stackedData:c}=o;if(c)return c.find(d=>d.key===r)}}}},yr=q([ir,oe],br),kr=q([Qt,hr,pr,gr,fr,vr,re,ea,kt,yr,oe,sr],(a,e,r,n,o,c,d,p,b,m,h,g)=>{var{chartData:y,dataStartIndex:j,dataEndIndex:A}=p;if(!(h==null||c==null||d!=="horizontal"&&d!=="vertical"||e==null||r==null||n==null||o==null||b==null)){var{data:v}=h,C;if(v!=null&&v.length>0?C=v:C=y==null?void 0:y.slice(j,A+1),C!=null)return Xa({layout:d,barSettings:h,pos:c,bandSize:b,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:o,stackedData:m,displayedData:C,offset:a,cells:g})}}),jr=["axis","item"],Be=l.forwardRef((a,e)=>l.createElement(ia,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:jr,tooltipPayloadSearcher:la,categoricalChartProps:a,ref:e}));const nt="ms_dash_filters_v1",it="ms_dash_auto_refresh_v1",Nr=()=>{const[a,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const r=document.documentElement,n=new MutationObserver(()=>{e(r.classList.contains("dark"))});return n.observe(r,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),a},wr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),_r=()=>{const a=Nr(),[e,r]=l.useState(null),[n,o]=l.useState([]),[c,d]=l.useState([]),[p,b]=l.useState(""),[m,h]=l.useState(""),[g,y]=l.useState(""),[j,A]=l.useState(0),[v,C]=l.useState([]),[k,N]=l.useState(!1),[u,S]=l.useState([]),[w,O]=l.useState(0),[P,W]=l.useState(1),T=10,[H,ce]=l.useState(""),[V,de]=l.useState(""),[se,ne]=l.useState({}),[X,Z]=l.useState({}),[ue,me]=l.useState({}),[L,jt]=l.useState(null),[Me,Ar]=l.useState([]),[Te,Pr]=l.useState([]),[Le,Sr]=l.useState([]),[Re,Cr]=l.useState([]),[$e,Nt]=l.useState(!0),[wt,Fe]=l.useState([]),$=(s,i="info")=>{const x=Math.random().toString(36).slice(2);Fe(B=>[...B,{id:x,msg:s,type:i}]),setTimeout(()=>Fe(B=>B.filter(I=>I.id!==x)),3500)},_=s=>{const i=Number(s);return Number.isFinite(i)?i:0},R=s=>{const i=_(s);return Number.isNaN(i)?"TZS —":`TZS ${wr.format(i)}`},At=s=>{var i;return((i=n.find(x=>String(x.id)===String(s)))==null?void 0:i.name)||(s?`Branch #${s}`:"All branches")};l.useEffect(()=>{try{const s=localStorage.getItem(nt);if(s){const i=JSON.parse(s);b(i.branchId||""),h(i.officerId||""),y(i.timeRange||"")}}catch{}try{const s=localStorage.getItem(it);s&&A(Number(s)||0)}catch{}},[]),l.useEffect(()=>{const s={branchId:p,officerId:m,timeRange:g};localStorage.setItem(nt,JSON.stringify(s))},[p,m,g]),l.useEffect(()=>{localStorage.setItem(it,String(j||0))},[j]);const Ke=l.useCallback(async s=>{try{const[i,x]=await Promise.all([U.get("/branches",{signal:s}),U.get("/users",{params:{role:"loan_officer"},signal:s})]);o(Array.isArray(i.data)?i.data:[]),d(Array.isArray(x.data)?x.data:[])}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),$("Failed to load filters","error"))}},[]),ye=l.useCallback(async s=>{try{const i=await U.get("/dashboard/summary",{params:{branchId:p,officerId:m,timeRange:g},signal:s});r(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),$("Failed to load summary","error"))}},[p,m,g]),ie=l.useCallback(async s=>{N(!0);try{const i=await U.get("/dashboard/communications",{signal:s}).catch(()=>null);i!=null&&i.data&&Array.isArray(i.data)?C(i.data):C(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{N(!1)}},[e]),G=l.useCallback(async(s={},i)=>{var x,B;try{const I=await U.get("/dashboard/activity",{params:{page:s.page??P,pageSize:T,dateFrom:H||void 0,dateTo:V||void 0},signal:i});S(((x=I.data)==null?void 0:x.items)||[]),O(((B=I.data)==null?void 0:B.total)||0)}catch(I){(I==null?void 0:I.name)!=="CanceledError"&&(console.error("Activity fetch error:",(I==null?void 0:I.message)||I),$("Failed to load activity","error"))}},[P,H,V]),ke=l.useCallback(async s=>{try{const i=await U.get("/dashboard/monthly-trends",{signal:s});jt(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),$("Failed to load trends","error"))}},[]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await Ke(s.signal)}catch{}})(),()=>s.abort()},[Ke]);const xe=l.useCallback(async s=>{await Promise.all([ye(s),G({},s),ke(s)])},[ye,G,ke]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await xe(s.signal)}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),$("Failed to load dashboard data","error"))}finally{Nt(!1)}})(),()=>s.abort()},[xe]),l.useEffect(()=>{if(!e)return;const s=new AbortController;return ie(s.signal).catch(i=>{(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),$("Failed to load communications","error"))}),()=>s.abort()},[e,ie]),l.useEffect(()=>{if(!j||j<=0)return;const s=setInterval(()=>{const i=new AbortController;Promise.all([xe(i.signal),ie(i.signal)]).catch(()=>{}).finally(()=>i.abort())},j*6e4);return()=>clearInterval(s)},[j,xe,ie]);const Pt=async s=>{const i=`c-${s}`;me(x=>({...x,[i]:!0}));try{const x=(se[s]||"").trim();if(!x)return;await U.post(`/dashboard/activity/${s}/comment`,{comment:x}),ne(B=>({...B,[s]:""})),await G(),$("Reply posted","success")}catch(x){console.error("Add comment error:",(x==null?void 0:x.message)||x),$("Failed to post reply","error")}finally{me(x=>({...x,[i]:!1}))}},St=async s=>{const i=`a-${s}`;me(x=>({...x,[i]:!0}));try{const x=X[s]||{};if(!x.assigneeId)return;await U.post(`/dashboard/activity/${s}/assign`,{assigneeId:x.assigneeId,dueDate:x.dueDate||null,note:x.note||""}),Z(B=>({...B,[s]:{assigneeId:"",dueDate:"",note:""}})),await G(),$("Task assigned","success")}catch(x){console.error("Assign task error:",(x==null?void 0:x.message)||x),$("Failed to assign task","error")}finally{me(x=>({...x,[i]:!1}))}},je=({label:s,value:i,max:x})=>{const B=_(i),I=_(x),he=I>0?Math.round(B/I*100):0;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-slate-400",children:[t.jsx("span",{children:s}),t.jsx("span",{children:B.toLocaleString()})]}),t.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded",children:t.jsx("div",{className:"h-2 rounded",style:{width:`${he}%`,backgroundColor:"currentColor"}})})]})},ze=({className:s=""})=>t.jsx("div",{className:`animate-pulse bg-gray-100 dark:bg-slate-800/50 rounded ${s}`}),Ct=()=>{const s=v.flatMap(i=>(i.attachments||[]).map(x=>x.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((i,x)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),x*150)}),$(`Opening ${s.length} attachment${s.length>1?"s":""}…`,"info"))},K=e==null?void 0:e.dashboardMessage,f=a?{grid:"#334155",axis:"#94a3b8",legend:"#e2e8f0",tooltipBg:"#0f172a",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#475569",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border border-blue-100 dark:border-slate-700 p-4 md:p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-800 dark:text-slate-100 tracking-tight",children:"Dashboard"}),t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs("select",{"aria-label":"Filter by branch",value:p,onChange:s=>b(s.target.value),className:"ms-select",children:[t.jsx("option",{value:"",children:"All Branches"}),n.map(s=>t.jsx("option",{value:s.id,children:s.name},s.id))]}),t.jsxs("select",{"aria-label":"Filter by loan officer",value:m,onChange:s=>h(s.target.value),className:"ms-select min-w-[12rem]",children:[t.jsx("option",{value:"",children:"All Loan Officers"}),c.map(s=>t.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),t.jsxs("select",{"aria-label":"Filter by time range",value:g,onChange:s=>y(s.target.value),className:"ms-select ms-select--sm",children:[t.jsx("option",{value:"",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"}),t.jsx("option",{value:"quarter",children:"This Quarter"}),t.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),t.jsx("option",{value:"annual",children:"Annual"})]}),t.jsxs("select",{"aria-label":"Auto refresh interval",value:j,onChange:s=>A(Number(s.target.value)),className:"ms-select",children:[t.jsx("option",{value:0,children:"No Auto-Refresh"}),t.jsx("option",{value:1,children:"Every 1 min"}),t.jsx("option",{value:5,children:"Every 5 mins"}),t.jsx("option",{value:15,children:"Every 15 mins"})]}),t.jsx("button",{className:"ms-btn h-10 px-3.5 sm:px-4 inline-flex items-center justify-center whitespace-nowrap shrink-0",onClick:()=>{const s=new AbortController;Promise.all([ye(s.signal),G({page:1},s.signal),ke(s.signal),ie(s.signal)]).then(()=>{W(1),$("Dashboard refreshed","success")}).catch(()=>$("Refresh failed","error")).finally(()=>s.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]})}),t.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:wt.map(s=>t.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),(e==null?void 0:e.importantNotice)&&t.jsx("div",{className:"rounded-xl border border-amber-200 dark:border-amber-900/40 bg-amber-50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-200 p-4",children:t.jsxs("div",{className:"flex gap-2 items-start",children:[t.jsx(Qe,{className:"w-5 h-5 mt-0.5"}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("p",{className:"font-semibold truncate",children:"Important Notice"}),t.jsx("p",{className:"text-sm break-words",children:e.importantNotice})]})]})}),e!=null&&e.companyMessage?t.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-950/30 dark:border-blue-800 text-blue-700 dark:text-blue-200 p-4",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Qe,{className:"w-5 h-5 shrink-0"}),t.jsx("p",{className:"text-sm font-medium break-words",children:e.companyMessage})]})}):$e?t.jsx(ze,{className:"h-12"}):null,K&&t.jsx("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl shadow-sm p-4",children:t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsxs("div",{className:"min-w-0",children:[K.title&&t.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-slate-100 truncate",children:K.title}),K.text&&t.jsx("p",{className:"text-sm text-gray-700 dark:text-slate-300 mt-1 break-words",children:K.text}),Array.isArray(K.attachments)&&K.attachments.length>0&&t.jsxs("div",{className:"mt-2",children:[t.jsx("p",{className:"text-[11px] text-gray-500 dark:text-slate-400 mb-1",children:"Attachments"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:K.attachments.map(s=>t.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 dark:text-blue-300 underline",title:s.fileName,children:s.fileName||"Attachment"},`${s.id||s.fileUrl}`))})]})]}),Array.isArray(K.attachments)&&K.attachments.length>0&&t.jsxs("button",{onClick:()=>{K.attachments.forEach((s,i)=>{s.fileUrl&&setTimeout(()=>window.open(s.fileUrl,"_blank","noopener,noreferrer"),i*150)})},className:"text-xs flex items-center gap-1 border rounded px-2 py-1 h-8 dark:border-slate-700 dark:hover:bg-slate-800 shrink-0",title:"Open all attachments",children:[t.jsx(Je,{className:"w-3 h-3"})," Open all"]})]})}),((v==null?void 0:v.length)??0)>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 dark:bg-slate-800/40 dark:border-slate-700",children:[t.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-slate-300",children:"General Communications"}),v.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&t.jsxs("button",{onClick:Ct,className:"text-xs flex items-center gap-1 border rounded px-2 py-1 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",disabled:k,children:[t.jsx(Je,{className:"w-3 h-3"})," Download all"]})]}),t.jsxs("div",{className:"relative h-10",children:[t.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),t.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-700 dark:text-slate-200 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:v.map((s,i)=>t.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.type}),s.priority&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.priority}),s.audienceRole&&t.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:["role: ",s.audienceRole]}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:At(s.audienceBranchId)}),t.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),t.jsx("span",{className:"truncate",children:s.text})]},s.id||s.text||i))})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(Ne,{to:"/loans/add",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[t.jsx(we,{className:"w-4 h-4"})," Add Loan"]}),t.jsxs(Ne,{to:"/borrowers/add",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[t.jsx(we,{className:"w-4 h-4"})," Add Borrower"]}),t.jsxs(Ne,{to:"/repayments/new",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[t.jsx(we,{className:"w-4 h-4"})," Record Repayment"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[t.jsx("main",{className:"space-y-6",children:$e?t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,i)=>t.jsx(ze,{className:"h-24"},i))}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[t.jsx(M,{tone:"indigo",title:"Total Borrowers",value:_(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:t.jsx(ka,{className:"w-5 h-5"})}),t.jsx(M,{tone:"sky",title:"Total Loans",value:_(e==null?void 0:e.totalLoans).toLocaleString(),icon:t.jsx(Ee,{className:"w-5 h-5"})}),t.jsx(M,{tone:"blue",title:"Total Disbursed",value:R(e==null?void 0:e.totalDisbursed),icon:t.jsx(Ee,{className:"w-5 h-5"})}),t.jsx(M,{tone:"emerald",title:"Total Paid",value:R(e==null?void 0:e.totalPaid),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"emerald",title:"Total Repaid",value:R(e==null?void 0:e.totalRepaid),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"indigo",title:"Expected Repayments",value:R(e==null?void 0:e.totalExpectedRepayments),icon:t.jsx(Ye,{className:"w-5 h-5"})}),t.jsx(M,{tone:"cyan",title:"Total Deposits",value:R(e==null?void 0:e.totalDeposits),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"amber",title:"Total Withdrawals",value:R(e==null?void 0:e.totalWithdrawals),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"blue",title:"Net Savings",value:R(e==null?void 0:e.netSavings),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"rose",title:"Defaulted Loan",value:R(e==null?void 0:e.defaultedLoan),icon:t.jsx(et,{className:"w-5 h-5"})}),t.jsx(M,{tone:"rose",title:"Defaulted Interest",value:R(e==null?void 0:e.defaultedInterest),icon:t.jsx(et,{className:"w-5 h-5"})}),t.jsx(M,{tone:"violet",title:"Outstanding Loan",value:R(e==null?void 0:e.outstandingLoan),icon:t.jsx(Ee,{className:"w-5 h-5"})}),t.jsx(M,{tone:"violet",title:"Outstanding Interest",value:R(e==null?void 0:e.outstandingInterest),icon:t.jsx(J,{className:"w-5 h-5"})}),t.jsx(M,{tone:"slate",title:"Written Off",value:R(e==null?void 0:e.writtenOff),icon:t.jsx(va,{className:"w-5 h-5"})}),t.jsx(M,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${_(e==null?void 0:e.parPercent)}%`,icon:t.jsx(Ze,{className:"w-5 h-5"})})]}),L&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Ze,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h3",{className:"font-semibold text-gray-800 dark:text-slate-100",children:`Monthly Trends${L.month||L.year?` — ${L.month||""} ${L.year||""}`:""}`})]}),t.jsx("div",{className:"mb-4",children:t.jsx(Ae,{width:"100%",height:260,children:t.jsxs(Be,{data:[{name:"Loans",value:_(L.monthlyLoans)},{name:"Deposits",value:_(L.monthlyDeposits)},{name:"Repayments",value:_(L.monthlyRepayments)}],children:[t.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),t.jsx(Se,{dataKey:"name",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Ie,{wrapperStyle:{color:f.legend}}),t.jsx(Q,{dataKey:"value",fill:f.bar1})]})})}),(()=>{const s=[_(L.monthlyLoans),_(L.monthlyDeposits),_(L.monthlyRepayments)],i=Math.max(...s);return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"text-indigo-600 dark:text-indigo-400",children:t.jsx(je,{label:"Loans (count)",value:_(L.monthlyLoans),max:i})}),t.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:t.jsx(je,{label:"Deposits (TZS)",value:_(L.monthlyDeposits),max:i})}),t.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:t.jsx(je,{label:"Repayments (TZS)",value:_(L.monthlyRepayments),max:i})})]})})()]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Top Borrowers"}),Me.length===0?t.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Name"}),t.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),t.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Me.map(s=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:s.name}),t.jsx("td",{className:"py-1 pr-4",children:R(s.outstanding)})]},s.id))})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Upcoming Repayments"}),Te.length===0?t.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),t.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),t.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),t.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Te.map(s=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:s.borrower}),t.jsx("td",{className:"py-1 pr-4",children:s.dueDate}),t.jsx("td",{className:"py-1 pr-4",children:R(s.amount)})]},s.id))})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Branch Performance"}),Le.length===0?t.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):t.jsx(Ae,{width:"100%",height:260,children:t.jsxs(Be,{data:Le,children:[t.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),t.jsx(Se,{dataKey:"branch",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Ie,{wrapperStyle:{color:f.legend}}),t.jsx(Q,{dataKey:"disbursed",fill:f.bar1}),t.jsx(Q,{dataKey:"repayments",fill:f.bar2})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Officer Performance"}),Re.length===0?t.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):t.jsx(Ae,{width:"100%",height:260,children:t.jsxs(Be,{data:Re,children:[t.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),t.jsx(Se,{dataKey:"officer",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),t.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Ie,{wrapperStyle:{color:f.legend}}),t.jsx(Q,{dataKey:"loans",fill:f.bar1}),t.jsx(Q,{dataKey:"collections",fill:f.bar2})]})})]})]})]})}),t.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(Ye,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h2",{className:"font-semibold text-gray-800 dark:text-slate-100",children:"Recent Activity"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[t.jsx("input",{type:"date",className:"ms-input h-9",value:H,onChange:s=>ce(s.target.value)}),t.jsx("input",{type:"date",className:"ms-input h-9",value:V,onChange:s=>de(s.target.value)}),t.jsx("button",{className:"ms-btn col-span-2 h-9 text-sm",onClick:()=>{W(1),G({page:1})},children:"Search by date"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:u.length===0?t.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No activity."}):u.map(s=>{var i,x,B,I,he;return t.jsxs("div",{className:"border rounded p-3 border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-slate-100",children:[s.type," • ",s.entityType," #",s.entityId]}),t.jsx("p",{className:"text-xs text-gray-600 dark:text-slate-300 break-words",children:s.message}),t.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-1",children:["by ",((i=s.createdBy)==null?void 0:i.name)||((x=s.createdBy)==null?void 0:x.email)," • ",new Date(s.createdAt).toLocaleString()]}),Array.isArray(s.comments)&&s.comments.length>0&&t.jsx("div",{className:"mt-2 space-y-1",children:s.comments.map(E=>{var F,We;return t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-2",children:[t.jsx("p",{className:"text-xs text-gray-800 dark:text-slate-200 break-words",children:E.comment}),t.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-0.5",children:["— ",((F=E.createdBy)==null?void 0:F.name)||((We=E.createdBy)==null?void 0:We.email)," • ",new Date(E.createdAt).toLocaleString()]})]},E.id)})}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx("input",{value:se[s.id]||"",onChange:E=>ne(F=>({...F,[s.id]:E.target.value})),placeholder:"Reply…",className:"ms-input flex-1 h-9 text-xs"}),t.jsxs("button",{onClick:()=>Pt(s.id),disabled:ue[`c-${s.id}`],className:"ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center gap-1",children:[t.jsx(ga,{className:"w-3 h-3"})," Reply"]})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[t.jsxs("select",{value:((B=X[s.id])==null?void 0:B.assigneeId)||"",onChange:E=>Z(F=>({...F,[s.id]:{...F[s.id]||{},assigneeId:E.target.value}})),className:"ms-select col-span-2 h-9 text-xs",children:[t.jsx("option",{value:"",children:"Assign to…"}),c.map(E=>t.jsx("option",{value:E.id,children:E.name||E.email},E.id))]}),t.jsx("input",{type:"date",value:((I=X[s.id])==null?void 0:I.dueDate)||"",onChange:E=>Z(F=>({...F,[s.id]:{...F[s.id]||{},dueDate:E.target.value}})),className:"ms-input h-9 text-xs"}),t.jsxs("button",{onClick:()=>St(s.id),disabled:ue[`a-${s.id}`],className:"ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center justify-center gap-1",children:[t.jsx(oa,{className:"w-3 h-3"})," Assign"]}),t.jsx("input",{value:((he=X[s.id])==null?void 0:he.note)||"",onChange:E=>Z(F=>({...F,[s.id]:{...F[s.id]||{},note:E.target.value}})),placeholder:"Note…",className:"ms-input col-span-4 h-9 text-xs"})]})]},s.id)})})]}),w>T&&t.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-slate-700 dark:text-slate-300",children:[t.jsxs("span",{children:[Math.min(P*T,w)," of ",w]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{const s=Math.max(P-1,1);W(s),G({page:s})},disabled:P===1,className:"ms-btn px-2 py-1 disabled:opacity-50",children:"Prev"}),t.jsx("button",{onClick:()=>{const s=P*T<w?P+1:P;s!==P&&(W(s),G({page:s}))},disabled:P*T>=w,className:"ms-btn px-2 py-1 disabled:opacity-50",children:"Next"})]})]})]})})]})]})},M=({title:a,value:e,icon:r,tone:n="indigo"})=>{const o={indigo:{ring:"ring-indigo-100 dark:ring-indigo-900/40",icon:"text-indigo-600 bg-indigo-50 dark:text-indigo-300 dark:bg-indigo-950/40"},sky:{ring:"ring-sky-100 dark:ring-sky-900/40",icon:"text-sky-600 bg-sky-50 dark:text-sky-300 dark:bg-sky-950/40"},blue:{ring:"ring-blue-100 dark:ring-blue-900/40",icon:"text-blue-600 bg-blue-50 dark:text-blue-300 dark:bg-blue-950/40"},emerald:{ring:"ring-emerald-100 dark:ring-emerald-900/40",icon:"text-emerald-600 bg-emerald-50 dark:text-emerald-300 dark:bg-emerald-950/40"},cyan:{ring:"ring-cyan-100 dark:ring-cyan-900/40",icon:"text-cyan-600 bg-cyan-50 dark:text-cyan-300 dark:bg-cyan-950/40"},amber:{ring:"ring-amber-100 dark:ring-amber-900/40",icon:"text-amber-600 bg-amber-50 dark:text-amber-300 dark:bg-amber-950/40"},violet:{ring:"ring-violet-100 dark:ring-violet-900/40",icon:"text-violet-600 bg-violet-50 dark:text-violet-300 dark:bg-violet-950/40"},rose:{ring:"ring-rose-100 dark:ring-rose-900/40",icon:"text-rose-600 bg-rose-50 dark:text-rose-300 dark:bg-rose-950/40"},slate:{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"}}[n]||{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"};return t.jsx("div",{className:`bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 ring-1 ${o.ring} min-h-[8rem]`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`p-2 rounded-full ${o.icon}`,children:r}),t.jsxs("div",{className:"min-w-0",children:[t.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-slate-400 truncate",children:a}),t.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white break-words",children:e??"—"})]})]})})};export{_r as default};
