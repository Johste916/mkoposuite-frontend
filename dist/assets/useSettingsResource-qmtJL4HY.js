import{r as t}from"./index-Ctyu1vaI.js";function h(c,S,u={}){const[f,i]=t.useState(u),[g,l]=t.useState(!0),[v,d]=t.useState(!1),[m,n]=t.useState(""),[y,o]=t.useState("");return t.useEffect(()=>{let s=!0;return(async()=>{var a,r;l(!0),n(""),o("");try{const e=await c();s&&i(e||u)}catch(e){s&&n(((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.message)||e.message||"Failed to load")}finally{s&&l(!1)}})(),()=>{s=!1}},[c]),{data:f,setData:i,loading:g,saving:v,error:m,success:y,save:async(s=f)=>{var a,r;d(!0),n(""),o("");try{return await S(s),o("Saved!"),!0}catch(e){return n(((r=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:r.message)||e.message||"Failed to save"),!1}finally{d(!1)}}}}export{h as u};
