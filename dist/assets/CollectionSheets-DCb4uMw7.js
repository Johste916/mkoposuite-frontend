import{r as a,j as t,L as p,x as D}from"./index-DApvAOBl.js";import{u as M,L as P}from"./ListShell-CSf7sHGa.js";function R(){const{pathname:s}=D();return s.endsWith("/daily")?"daily":s.endsWith("/missed")?"missed":s.endsWith("/past-maturity")?"past-maturity":""}function q(){const s=R(),[l,m]=a.useState(""),[o,h]=a.useState(""),[r,x]=a.useState(""),[n,f]=a.useState(""),[i,y]=a.useState(""),[c,g]=a.useState(""),j=a.useMemo(()=>{switch(s){case"daily":return"Showing todayâ€™s collection sheets.";case"missed":return"Sheets scheduled before today and not completed.";case"past-maturity":return"Sheets older than 30 days and not completed.";default:return"All collection sheets. Use filters to narrow results."}},[s]),v=a.useMemo(()=>{const e=new URLSearchParams;s&&e.set("scope",s),l&&e.set("status",l),o&&e.set("type",o),r&&e.set("dateFrom",r),n&&e.set("dateTo",n),i&&e.set("collector",i),c&&e.set("loanOfficer",c);const u=e.toString();return u?`/api/collections?${u}`:"/api/collections"},[s,l,o,r,n,i,c]),{rows:S,total:b,page:C,setPage:N,limit:L,setLimit:w,q:d,setQ:F,loading:E,error:O}=M({url:v}),T=[{key:"date",title:"Date"},{key:"type",title:"Type"},{key:"collector",title:"Collector"},{key:"loanOfficer",title:"Loan Officer"},{key:"status",title:"Status"}],k=a.useMemo(()=>{const e=new URLSearchParams;return s&&e.set("scope",s),d&&e.set("q",d),l&&e.set("status",l),o&&e.set("type",o),r&&e.set("dateFrom",r),n&&e.set("dateTo",n),i&&e.set("collector",i),c&&e.set("loanOfficer",c),e.set("export","csv"),`/api/collections?${e.toString()}`},[s,d,l,o,r,n,i,c]),A=a.useMemo(()=>{switch(s){case"daily":return"Daily Collection Sheet";case"missed":return"Missed Repayment Sheet";case"past-maturity":return"Past Maturity Loans";default:return"Collection Sheets"}},[s]);return t.jsx(P,{title:A,subtitle:t.jsx("span",{className:"text-xs text-slate-500",children:j}),q:d,setQ:F,columns:T,rows:S,loading:E,error:O,page:C,setPage:N,limit:L,setLimit:w,total:b,toolbar:t.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full",children:[t.jsx(p,{to:"/collections/new",className:"mr-3 border rounded px-3 py-1 text-sm bg-blue-600 text-white hover:bg-blue-700",children:"+ New Collection Sheet"}),t.jsx("label",{className:"text-sm",children:"Status"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:l,onChange:e=>m(e.target.value),children:[t.jsx("option",{value:"",children:"All"}),t.jsx("option",{value:"pending",children:"pending"}),t.jsx("option",{value:"completed",children:"completed"}),t.jsx("option",{value:"cancelled",children:"cancelled"})]}),t.jsx("label",{className:"text-sm ml-3",children:"Type"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:o,onChange:e=>h(e.target.value),children:[t.jsx("option",{value:"",children:"All"}),t.jsx("option",{value:"FIELD",children:"FIELD"}),t.jsx("option",{value:"OFFICE",children:"OFFICE"}),t.jsx("option",{value:"AGENCY",children:"AGENCY"})]}),t.jsx("label",{className:"text-sm ml-3",children:"From"}),t.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:e=>x(e.target.value)}),t.jsx("label",{className:"text-sm",children:"To"}),t.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:n,onChange:e=>f(e.target.value)}),t.jsx("input",{placeholder:"Collector",className:"border rounded px-2 py-1 ml-3",value:i,onChange:e=>y(e.target.value)}),t.jsx("input",{placeholder:"Loan Officer",className:"border rounded px-2 py-1",value:c,onChange:e=>g(e.target.value)}),t.jsx("a",{href:k,className:"ml-auto inline-flex items-center border rounded px-3 py-1 text-sm hover:bg-gray-50",children:"Export CSV"})]}),renderRowActions:e=>t.jsx(p,{to:`/collections/${e.id}/edit`,className:"text-blue-600 hover:underline text-sm",children:"Edit"})})}export{q as default};
