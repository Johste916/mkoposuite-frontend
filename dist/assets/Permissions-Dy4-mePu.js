import{r as n,j as e,g as l}from"./index-SCX1ScrD.js";const r={page:"w-full px-4 md:px-6 lg:px-10 py-6 text-slate-900",h1:"text-3xl font-extrabold tracking-tight",card:"rounded-2xl border-2 border-slate-300 bg-white shadow",th:"bg-slate-100 text-left text-[12px] uppercase tracking-wide text-slate-700 font-semibold px-3 py-2 border-2 border-slate-200",td:"px-3 py-2 border-2 border-slate-200 text-sm",field:"h-11 w-full rounded-lg border-2 border-slate-300 bg-white text-sm px-3 outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-600",btnPrimary:"inline-flex items-center rounded-lg bg-indigo-600 text-white px-3 py-2 font-semibold hover:bg-indigo-700",btnDanger:"inline-flex items-center rounded-lg bg-rose-600 text-white px-3 py-2 font-semibold hover:bg-rose-700"};function y(){const[d,g]=n.useState([]),[c,m]=n.useState(""),[f,x]=n.useState(!1),[p,h]=n.useState(!1),o=async()=>{var s,i;try{x(!0);const t=await l.get("/permissions");g(Array.isArray(t.data)?t.data:[])}catch(t){console.error("Failed to load permissions",t),alert(((i=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:i.error)||"Failed to load permissions")}finally{x(!1)}},b=async()=>{var i,t;const s=c.trim();if(s){h(!0);try{await l.post("/permissions",{name:s}),m(""),o()}catch(a){console.error("Failed to add permission",a),alert(((t=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:t.error)||"Error adding permission")}finally{h(!1)}}},u=async s=>{var i,t;if(window.confirm("Delete this permission?"))try{await l.delete(`/permissions/${s}`),o()}catch(a){console.error("Failed to delete permission",a),alert(((t=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:t.error)||"Error deleting permission")}};return n.useEffect(()=>{o()},[]),e.jsxs("div",{className:r.page,children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between mb-4",children:[e.jsx("h1",{className:r.h1,children:"Permissions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:`${r.field} w-72 h-10`,placeholder:"New permission (e.g., loan.approve)",value:c,onChange:s=>m(s.target.value)}),e.jsx("button",{onClick:b,className:`${r.btnPrimary} disabled:opacity-60`,disabled:p,children:p?"Saving…":"Add"})]})]}),e.jsx("div",{className:`${r.card} overflow-x-auto`,children:e.jsxs("table",{className:"min-w-full border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsx("tr",{children:["ID","Name","Actions"].map((s,i)=>e.jsx("th",{className:`${r.th} ${i===2?"text-right":""}`,children:s},s))})}),e.jsx("tbody",{children:f?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:`${r.td} text-center py-8 text-slate-600`,children:"Loading…"})}):d.length?d.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:r.td,children:s.id}),e.jsx("td",{className:r.td,children:s.name}),e.jsx("td",{className:`${r.td} text-right`,children:e.jsx("button",{onClick:()=>u(s.id),className:r.btnDanger,children:"Delete"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:`${r.td} text-center py-8 text-slate-600`,children:"No permissions found"})})})]})})]})}export{y as default};
