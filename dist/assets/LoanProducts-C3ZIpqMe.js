import{r as n,j as t,g as l}from"./index-DyuA89p_.js";function g(){const[d,m]=n.useState([]),[o,u]=n.useState(""),[a,s]=n.useState({name:"",code:"",status:"active",interestMethod:"flat",interestRate:0,minPrincipal:"",maxPrincipal:"",minTermMonths:"",maxTermMonths:"",penaltyRate:"",fees:[],eligibility:{}}),[i,c]=n.useState(null),r=async()=>{const e=await l.get("/loan-products",{params:{q:o}});m(e.data.items||[])};n.useEffect(()=>{r()},[]);const h=async e=>{e.preventDefault(),i?await l.put(`/loan-products/${i}`,a):await l.post("/loan-products",a),s({name:"",code:"",status:"active",interestMethod:"flat",interestRate:0,minPrincipal:"",maxPrincipal:"",minTermMonths:"",maxTermMonths:"",penaltyRate:"",fees:[],eligibility:{}}),c(null),r()},x=e=>{c(e.id),s({name:e.name,code:e.code,status:e.status,interestMethod:e.interestMethod,interestRate:e.interestRate,minPrincipal:e.minPrincipal??"",maxPrincipal:e.maxPrincipal??"",minTermMonths:e.minTermMonths??"",maxTermMonths:e.maxTermMonths??"",penaltyRate:e.penaltyRate??"",fees:e.fees||[],eligibility:e.eligibility||{}})},p=async e=>{confirm("Delete product?")&&(await l.delete(`/loan-products/${e}`),r())},b=async e=>{await l.patch(`/loan-products/${e}/toggle`),r()};return t.jsxs("div",{className:"p-4 space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Loan Products"}),t.jsxs("form",{onSubmit:h,className:"grid sm:grid-cols-2 gap-3 bg-white p-4 rounded shadow",children:[t.jsx("input",{className:"border px-3 py-2 rounded",placeholder:"Name",value:a.name,onChange:e=>s({...a,name:e.target.value}),required:!0}),t.jsx("input",{className:"border px-3 py-2 rounded",placeholder:"Code",value:a.code,onChange:e=>s({...a,code:e.target.value}),required:!0}),t.jsxs("select",{className:"border px-3 py-2 rounded",value:a.status,onChange:e=>s({...a,status:e.target.value}),children:[t.jsx("option",{value:"active",children:"Active"}),t.jsx("option",{value:"inactive",children:"Inactive"})]}),t.jsxs("select",{className:"border px-3 py-2 rounded",value:a.interestMethod,onChange:e=>s({...a,interestMethod:e.target.value}),children:[t.jsx("option",{value:"flat",children:"Flat"}),t.jsx("option",{value:"reducing",children:"Reducing"})]}),t.jsx("input",{type:"number",step:"0.0001",className:"border px-3 py-2 rounded",placeholder:"Interest Rate (%)",value:a.interestRate,onChange:e=>s({...a,interestRate:e.target.value}),required:!0}),t.jsx("input",{type:"number",className:"border px-3 py-2 rounded",placeholder:"Min Principal",value:a.minPrincipal,onChange:e=>s({...a,minPrincipal:e.target.value})}),t.jsx("input",{type:"number",className:"border px-3 py-2 rounded",placeholder:"Max Principal",value:a.maxPrincipal,onChange:e=>s({...a,maxPrincipal:e.target.value})}),t.jsx("input",{type:"number",className:"border px-3 py-2 rounded",placeholder:"Min Term (months)",value:a.minTermMonths,onChange:e=>s({...a,minTermMonths:e.target.value})}),t.jsx("input",{type:"number",className:"border px-3 py-2 rounded",placeholder:"Max Term (months)",value:a.maxTermMonths,onChange:e=>s({...a,maxTermMonths:e.target.value})}),t.jsx("input",{type:"number",step:"0.0001",className:"border px-3 py-2 rounded",placeholder:"Penalty Rate (%)",value:a.penaltyRate,onChange:e=>s({...a,penaltyRate:e.target.value})}),t.jsx("button",{className:"col-span-full bg-blue-600 text-white py-2 rounded",children:i?"Update Product":"Create Product"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("div",{}),t.jsx("input",{className:"border px-3 py-2 rounded",placeholder:"Search name/code",value:o,onChange:e=>u(e.target.value),onKeyDown:e=>e.key==="Enter"&&r()})]}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full bg-white rounded shadow border",children:[t.jsx("thead",{className:"bg-gray-100",children:t.jsxs("tr",{children:[t.jsx("th",{className:"p-2 border",children:"Name"}),t.jsx("th",{className:"p-2 border",children:"Code"}),t.jsx("th",{className:"p-2 border",children:"Method"}),t.jsx("th",{className:"p-2 border",children:"Rate (%)"}),t.jsx("th",{className:"p-2 border",children:"Principal Range"}),t.jsx("th",{className:"p-2 border",children:"Term Range"}),t.jsx("th",{className:"p-2 border",children:"Status"}),t.jsx("th",{className:"p-2 border",children:"Actions"})]})}),t.jsxs("tbody",{children:[d.map(e=>t.jsxs("tr",{children:[t.jsx("td",{className:"border px-2",children:e.name}),t.jsx("td",{className:"border px-2",children:e.code}),t.jsx("td",{className:"border px-2",children:e.interestMethod}),t.jsx("td",{className:"border px-2",children:e.interestRate}),t.jsxs("td",{className:"border px-2",children:[e.minPrincipal??"—"," — ",e.maxPrincipal??"—"]}),t.jsxs("td",{className:"border px-2",children:[e.minTermMonths??"—"," — ",e.maxTermMonths??"—"]}),t.jsx("td",{className:"border px-2",children:e.status}),t.jsxs("td",{className:"border px-2 space-x-2",children:[t.jsx("button",{className:"text-blue-600",onClick:()=>x(e),children:"Edit"}),t.jsx("button",{className:"text-yellow-700",onClick:()=>b(e.id),children:e.status==="active"?"Deactivate":"Activate"}),t.jsx("button",{className:"text-red-600",onClick:()=>p(e.id),children:"Delete"})]})]},e.id)),!d.length&&t.jsx("tr",{children:t.jsx("td",{className:"p-4 text-center",colSpan:"8",children:"No products found."})})]})]})})]})}export{g as default};
