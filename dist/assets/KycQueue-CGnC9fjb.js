import{r as l,j as e,g as p}from"./index-Ba7wW-0c.js";const j=()=>{const[n,d]=l.useState([]),[h,c]=l.useState(!0),[o,i]=l.useState(""),x=async t=>{var a,s;try{c(!0);const r=await p.get("/borrowers/kyc/queue",{signal:t}),u=Array.isArray(r.data)?r.data:((a=r.data)==null?void 0:a.items)||((s=r.data)==null?void 0:s.data)||[];d(u),i("")}catch{i("Failed to load KYC queue"),d([])}finally{c(!1)}};l.useEffect(()=>{const t=new AbortController;return x(t.signal),()=>t.abort()},[]);const m=async(t,a)=>{if(!(a!=null&&a.length))return;const s=new FormData;Array.from(a).forEach(r=>s.append("file",r)),await p.post(`/borrowers/${t}/kyc`,s,{headers:{"Content-Type":"multipart/form-data"}}),await x(),alert("KYC uploaded")};return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"KYC Queue"}),e.jsx("div",{className:"bg-white rounded-xl shadow border overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"Borrower"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Phone"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Upload"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-gray-500",colSpan:4,children:"Loading…"})}):o?e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-red-600",colSpan:4,children:o})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-gray-500",colSpan:4,children:"Queue is empty."})}):n.map(t=>{const a=t.name||`${t.firstName||""} ${t.lastName||""}`.trim()||t.id;return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-3 py-2",children:a}),e.jsx("td",{className:"px-3 py-2",children:t.phone||"—"}),e.jsx("td",{className:"px-3 py-2",children:t.kycStatus||t.status||"pending"}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"file",multiple:!0,onChange:s=>m(t.id,s.target.files)})})]},t.id)})})]})})]})};export{j as default};
