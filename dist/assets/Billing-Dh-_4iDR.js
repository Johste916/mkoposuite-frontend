import{r as d,j as e,b as n}from"./index-CosGzjM2.js";const h="billingSettings",c={companyName:"",billingEmail:"",plan:"starter",address1:"",address2:"",city:"",country:"",taxId:""};function w(){const[a,i]=d.useState(c),[j,m]=d.useState(!0),[b,x]=d.useState(!1),[u,g]=d.useState(null),[p,o]=d.useState(null),y=async()=>{m(!0),o(null);try{const l=await n.get("/settings/billing"),s=(l==null?void 0:l.data)||{};i({...c,...s})}catch{try{const s=await n.get("/account/settings/billing"),r=(s==null?void 0:s.data)||{};i({...c,...r})}catch{try{const r=localStorage.getItem(h);i(r?JSON.parse(r):c)}catch{i(c)}}}finally{m(!1)}};d.useEffect(()=>{y()},[]);const t=l=>{const{name:s,value:r}=l.target;i(f=>({...f,[s]:r}))},v=async l=>{l.preventDefault(),x(!0),g(null),o(null);try{let s=!1;try{await n.put("/settings/billing",a),s=!0}catch{try{await n.post("/settings/billing",a),s=!0}catch{try{await n.put("/account/settings/billing",a),s=!0}catch{localStorage.setItem(h,JSON.stringify(a)),s=!0}}}s&&g("Billing settings saved.")}catch{o("Failed to save. Please try again.")}finally{x(!1)}};return e.jsxs("div",{className:"max-w-3xl",children:[e.jsx("h1",{className:"text-xl font-semibold mb-4",children:"Billing Settings"}),u&&e.jsx("div",{className:"mb-3 rounded-lg border border-emerald-200 bg-emerald-50 p-3 text-emerald-800",children:u}),p&&e.jsx("div",{className:"mb-3 rounded-lg border border-rose-200 bg-rose-50 p-3 text-rose-800",children:p}),e.jsx("form",{onSubmit:v,className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:j?e.jsx("div",{className:"text-sm text-slate-500",children:"Loading billing settings…"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Company name"}),e.jsx("input",{name:"companyName",value:a.companyName,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Billing email"}),e.jsx("input",{name:"billingEmail",type:"email",value:a.billingEmail,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Plan"}),e.jsxs("select",{name:"plan",value:a.plan,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800",children:[e.jsx("option",{value:"starter",children:"Starter"}),e.jsx("option",{value:"growth",children:"Growth"}),e.jsx("option",{value:"enterprise",children:"Enterprise"})]}),e.jsx("p",{className:"text-xs mt-1 text-slate-500",children:"Changing plans may affect billing on your next cycle."})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address line 1"}),e.jsx("input",{name:"address1",value:a.address1,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address line 2"}),e.jsx("input",{name:"address2",value:a.address2,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),e.jsx("input",{name:"city",value:a.city,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),e.jsx("input",{name:"country",value:a.country,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tax/VAT ID"}),e.jsx("input",{name:"taxId",value:a.taxId,onChange:t,className:"w-full rounded-md border border-slate-200 dark:border-slate-700 px-3 py-2 text-sm bg-white dark:bg-slate-800"})]})}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",disabled:b,className:"inline-flex items-center gap-2 h-9 px-4 rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:b?"Saving…":"Save changes"})})]})})]})}export{w as default};
