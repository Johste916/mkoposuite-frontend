import{a as c}from"./index-DzNpvMXd.js";const i="https://mkoposuite-backend-42w2.onrender.com/api".replace(/\/+$/,"")||`${window.location.origin}/api`,s=c.create({baseURL:i,withCredentials:!1,headers:{"Content-Type":"application/json"}}),m=["token","authToken","accessToken","jwt"];s.interceptors.request.use(e=>{for(const t of m){const a=localStorage.getItem(t);if(a){e.headers.Authorization=`Bearer ${a.replace(/^Bearer /i,"")}`;break}}return e});s.interceptors.response.use(e=>e,e=>{var a,o,n,p;const t=((o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.error)||((p=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:p.message)||(e==null?void 0:e.message)||"Request failed";return console.error("API error:",t,(e==null?void 0:e.response)||e),Promise.reject(e)});const r=(e={})=>s.get("/repayments",{params:e}).then(t=>t.data),l=(e=[])=>s.post("/repayments/bulk",{rows:e}).then(t=>t.data),u=e=>s.post(`/repayments/${e}/approve`).then(t=>t.data),h=(e,t="")=>s.post(`/repayments/${e}/reject`,{reason:t}).then(a=>a.data),y=(e,t={})=>{const a=new FormData;return a.append("file",e),Object.entries(t||{}).forEach(([o,n])=>a.append(o,n)),s.post("/repayments/upload-csv",a,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>o.data)};export{s as a,u as b,l as c,r as l,h as r,y as u};
