import{r as i,j as c}from"./index-D-guICjU.js";import{r as te}from"./repayments-x6iKsHBv.js";import{n as V,ab as Te,D as H,K as S,ac as Q,ad as sa,ae as oa,af as W,ag as ca,ah as ua,ai as ke,aj as da,ak as pa,m as L,al as ma,P as Z,am as va,an as fa,ao as ha,ap as ya,aq as ga,ar as xa,e as ee,M as ba,r as U,R as Le,as as Pa,j as Re,k as X,at as Aa,c as _e,G as Ke,C as ce,L as K,i as ye,I as J,au as ne,av as ja,a1 as q,A as Me,J as $e,aw as Ea,ax as ge,s as Be,v as Oa,w as Ia,x as Da,ay as Sa,az as wa,z as Na,S as Ca,y as G,aA as We,aB as Ta,aC as ka,a as ie,N as Fe,O as Ge,Q as La,U as Ra,aD as _a,T as xe,u as Ve,b as Ka,d as Ma,f as $a,aE as Ba,h as Wa,aF as ze,o as Fa,l as Ga,aG as be,B as z,F as Va,a3 as za,a4 as Ue,aH as Ua,aI as Xa,aJ as Pe,aK as Ya,aL as Ja,aM as qa,aN as Ha,aO as Qa,a5 as Ae,a6 as Za,a7 as et,a8 as at,a9 as je,aa as Ee}from"./CartesianChart-BXA9Wt40.js";import"./index--QyFw8bA.js";function le(){return le=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},le.apply(null,arguments)}var Xe=e=>{var{cx:a,cy:r,r:t,className:n}=e,l=V("recharts-dot",n);return a===+a&&r===+r&&t===+t?i.createElement("circle",le({},H(e),Te(e),{className:l,cx:a,cy:r,r:t})):null},Ye=e=>e.graphicalItems.polarItems,tt=S([Q,sa],oa),ue=S([Ye,W,tt],ca),rt=S([ue],ua),de=S([rt,ke],da),nt=S([de,W,ue],pa),it=S([de,W,ue],(e,a,r)=>r.length>0?e.flatMap(t=>r.flatMap(n=>{var l,s=L(t,(l=a.dataKey)!==null&&l!==void 0?l:n.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(a==null?void 0:a.dataKey)!=null?e.map(t=>({value:L(t,a.dataKey),errorDomain:[]})):e.map(t=>({value:t,errorDomain:[]}))),Oe=()=>{},lt=S([W,ma,Oe,it,Oe,Z,Q],va),Je=S([W,Z,de,nt,fa,Q,lt],ha),st=S([Je,W,ya],ga);S([W,Je,st,Q],xa);function Ie(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function De(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ie(Object(r),!0).forEach(function(t){ot(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ot(e,a,r){return(a=ct(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function ct(e){var a=ut(e,"string");return typeof a=="symbol"?a:a+""}function ut(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var dt=(e,a)=>a,pe=S([Ye,dt],(e,a)=>e.filter(r=>r.type==="pie").find(r=>r.id===a)),pt=[],me=(e,a,r)=>(r==null?void 0:r.length)===0?pt:r,qe=S([ke,pe,me],(e,a,r)=>{var{chartData:t}=e;if(a!=null){var n;if((a==null?void 0:a.data)!=null&&a.data.length>0?n=a.data:n=t,(!n||!n.length)&&r!=null&&(n=r.map(l=>De(De({},a.presentationProps),l.props))),n!=null)return n}}),mt=S([qe,pe,me],(e,a,r)=>{if(!(e==null||a==null))return e.map((t,n)=>{var l,s=L(t,a.nameKey,a.name),o;return r!=null&&(l=r[n])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?o=r[n].props.fill:typeof t=="object"&&t!=null&&"fill"in t?o=t.fill:o=a.fill,{value:ee(s,a.dataKey),color:o,payload:t,type:a.legendType}})}),vt=S([qe,pe,me,ba],(e,a,r,t)=>{if(!(a==null||e==null))return Ct({offset:t,pieSettings:a,displayedData:e,cells:r})}),ft=["onMouseEnter","onClick","onMouseLeave"],ht=["id"],yt=["id"];function ve(e,a){if(e==null)return{};var r,t,n=gt(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gt(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function Se(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function P(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Se(Object(r),!0).forEach(function(t){xt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xt(e,a,r){return(a=bt(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function bt(e){var a=Pt(e,"string");return typeof a=="symbol"?a:a+""}function Pt(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},_.apply(null,arguments)}function At(e){var a=i.useMemo(()=>Re(e.children,ce),[e.children]),r=X(t=>mt(t,e.id,a));return r==null?null:i.createElement(Aa,{legendPayload:r})}function jt(e){var{dataKey:a,nameKey:r,sectors:t,stroke:n,strokeWidth:l,fill:s,name:o,hide:d,tooltipType:m}=e;return{dataDefinedOnItem:t==null?void 0:t.map(h=>h.tooltipPayload),positions:t==null?void 0:t.map(h=>h.tooltipPosition),settings:{stroke:n,strokeWidth:l,fill:s,dataKey:a,nameKey:r,name:ee(o,a),hide:d,type:m,color:s,unit:""}}}var Et=(e,a)=>e>a?"start":e<a?"end":"middle",Ot=(e,a,r)=>typeof a=="function"?a(e):q(a,r,r*.8),It=(e,a,r)=>{var{top:t,left:n,width:l,height:s}=a,o=ja(l,s),d=n+q(e.cx,l,l/2),m=t+q(e.cy,s,s/2),h=q(e.innerRadius,o,0),v=Ot(r,e.outerRadius,o),u=e.maxRadius||Math.sqrt(l*l+s*s)/2;return{cx:d,cy:m,innerRadius:h,outerRadius:v,maxRadius:u}},Dt=(e,a)=>{var r=J(a-e),t=Math.min(Math.abs(a-e),360);return r*t},St=(e,a)=>{if(i.isValidElement(e))return i.cloneElement(e,a);if(typeof e=="function")return e(a);var r=V("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return i.createElement(We,_({},a,{type:"linear",className:r}))},wt=(e,a,r)=>{if(i.isValidElement(e))return i.cloneElement(e,a);var t=r;if(typeof e=="function"&&(t=e(a),i.isValidElement(t)))return t;var n=V("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return i.createElement(Ta,_({},a,{alignmentBaseline:"middle",className:n}),t)};function Nt(e){var{sectors:a,props:r,showLabels:t}=e,{label:n,labelLine:l,dataKey:s}=r;if(!t||!n||!a)return null;var o=H(r),d=G(n,!1),m=G(l,!1),h=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,v=a.map((u,y)=>{var p=(u.startAngle+u.endAngle)/2,f=ne(u.cx,u.cy,u.outerRadius+h,p),b=P(P(P(P({},o),u),{},{stroke:"none"},d),{},{index:y,textAnchor:Et(f.x,u.cx)},f),j=P(P(P(P({},o),u),{},{fill:"none",stroke:u.fill},m),{},{index:y,points:[ne(u.cx,u.cy,u.outerRadius,p),f],key:"line"});return i.createElement(K,{key:"label-".concat(u.startAngle,"-").concat(u.endAngle,"-").concat(u.midAngle,"-").concat(y)},l&&St(l,j),wt(n,b,L(u,s)))});return i.createElement(K,{className:"recharts-pie-labels"},v)}function He(e){var{sectors:a,activeShape:r,inactiveShape:t,allOtherPieProps:n,showLabels:l}=e,s=X(Be),{onMouseEnter:o,onClick:d,onMouseLeave:m}=n,h=ve(n,ft),v=Oa(o,n.dataKey),u=Ia(m),y=Da(d,n.dataKey);return a==null?null:i.createElement(i.Fragment,null,a.map((p,f)=>{if((p==null?void 0:p.startAngle)===0&&(p==null?void 0:p.endAngle)===0&&a.length!==1)return null;var b=r&&String(f)===s,j=s?t:null,g=b?r:j,x=P(P({},p),{},{stroke:p.stroke,tabIndex:-1,[wa]:f,[Sa]:n.dataKey});return i.createElement(K,_({tabIndex:-1,className:"recharts-pie-sector"},Na(h,p,f),{onMouseEnter:v(p,f),onMouseLeave:u(p,f),onClick:y(p,f),key:"sector-".concat(p==null?void 0:p.startAngle,"-").concat(p==null?void 0:p.endAngle,"-").concat(p.midAngle,"-").concat(f)}),i.createElement(Ca,_({option:g,isActive:b,shapeType:"sector"},x)))}),i.createElement(Nt,{sectors:a,props:n,showLabels:l}))}function Ct(e){var a,{pieSettings:r,displayedData:t,cells:n,offset:l}=e,{cornerRadius:s,startAngle:o,endAngle:d,dataKey:m,nameKey:h,tooltipType:v}=r,u=Math.abs(r.minAngle),y=Dt(o,d),p=Math.abs(y),f=t.length<=1?0:(a=r.paddingAngle)!==null&&a!==void 0?a:0,b=t.filter(A=>L(A,m,0)!==0).length,j=(p>=360?b:b-1)*f,g=p-b*u-j,x=t.reduce((A,E)=>{var O=L(E,m,0);return A+(ye(O)?O:0)},0),N;if(x>0){var w;N=t.map((A,E)=>{var O=L(A,m,0),I=L(A,h,E),T=It(r,l,A),R=(ye(O)?O:0)/x,C,M=P(P({},A),n&&n[E]&&n[E].props);E?C=w.endAngle+J(y)*f*(O!==0?1:0):C=o;var F=C+J(y)*((O!==0?u:0)+R*g),$=(C+F)/2,D=(T.innerRadius+T.outerRadius)/2,ae=[{name:I,value:O,payload:M,dataKey:m,type:v}],Y=ne(T.cx,T.cy,D,$);return w=P(P(P(P({},r.presentationProps),{},{percent:R,cornerRadius:s,name:I,tooltipPayload:ae,midAngle:$,middleRadius:D,tooltipPosition:Y},M),T),{},{value:L(A,m),startAngle:C,endAngle:F,payload:M,paddingAngle:J(y)*f}),w})}return N}function Tt(e){var{props:a,previousSectorsRef:r}=e,{sectors:t,isAnimationActive:n,animationBegin:l,animationDuration:s,animationEasing:o,activeShape:d,inactiveShape:m,onAnimationStart:h,onAnimationEnd:v}=a,u=Me(a,"recharts-pie-"),y=r.current,[p,f]=i.useState(!0),b=i.useCallback(()=>{typeof v=="function"&&v(),f(!1)},[v]),j=i.useCallback(()=>{typeof h=="function"&&h(),f(!0)},[h]);return i.createElement($e,{begin:l,duration:s,isActive:n,easing:o,onAnimationStart:j,onAnimationEnd:b,key:u},g=>{var x=[],N=t&&t[0],w=N.startAngle;return t.forEach((A,E)=>{var O=y&&y[E],I=E>0?Ea(A,"paddingAngle",0):0;if(O){var T=ge(O.endAngle-O.startAngle,A.endAngle-A.startAngle),R=P(P({},A),{},{startAngle:w+I,endAngle:w+T(g)+I});x.push(R),w=R.endAngle}else{var{endAngle:C,startAngle:M}=A,F=ge(0,C-M),$=F(g),D=P(P({},A),{},{startAngle:w+I,endAngle:w+$+I});x.push(D),w=D.endAngle}}),r.current=x,i.createElement(K,null,i.createElement(He,{sectors:x,activeShape:d,inactiveShape:m,allOtherPieProps:a,showLabels:!p}))})}function kt(e){var{sectors:a,isAnimationActive:r,activeShape:t,inactiveShape:n}=e,l=i.useRef(null),s=l.current;return r&&a&&a.length&&(!s||s!==a)?i.createElement(Tt,{props:e,previousSectorsRef:l}):i.createElement(He,{sectors:a,activeShape:t,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function Lt(e){var{hide:a,className:r,rootTabIndex:t}=e,n=V("recharts-pie",r);return a?null:i.createElement(K,{tabIndex:t,className:n},i.createElement(kt,e))}var Rt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ke.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function _t(e){var{id:a}=e,r=ve(e,ht),t=i.useMemo(()=>Re(e.children,ce),[e.children]),n=X(l=>vt(l,a,t));return i.createElement(i.Fragment,null,i.createElement(_e,{fn:jt,args:P(P({},e),{},{sectors:n})}),i.createElement(Lt,_({},r,{sectors:n})))}function Qe(e){var a=U(e,Rt),{id:r}=a,t=ve(a,yt),n=H(t);return i.createElement(Le,{id:r,type:"pie"},l=>i.createElement(i.Fragment,null,i.createElement(Pa,{type:"pie",id:l,data:t.data,dataKey:t.dataKey,hide:t.hide,angleAxisId:0,radiusAxisId:0,name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,legendType:t.legendType,fill:t.fill,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,paddingAngle:t.paddingAngle,minAngle:t.minAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,presentationProps:n}),i.createElement(At,_({},t,{id:l})),i.createElement(_t,_({},t,{id:l})),t.children))}Qe.displayName="Pie";function we(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function Ne(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?we(Object(r),!0).forEach(function(t){Kt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Kt(e,a,r){return(a=Mt(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Mt(e){var a=$t(e,"string");return typeof a=="symbol"?a:a+""}function $t(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var Bt=e=>{var{point:a,childIndex:r,mainColor:t,activeDot:n,dataKey:l}=e;if(n===!1||a.x==null||a.y==null)return null;var s=Ne(Ne({index:r,dataKey:l,cx:a.x,cy:a.y,r:4,fill:t??"none",strokeWidth:2,stroke:"#fff",payload:a.payload,value:a.value},G(n,!1)),Te(n)),o;return i.isValidElement(n)?o=i.cloneElement(n,s):typeof n=="function"?o=n(s):o=i.createElement(Xe,s),i.createElement(K,{className:"recharts-active-dot"},o)};function Wt(e){var{points:a,mainColor:r,activeDot:t,itemDataKey:n}=e,l=X(Be),s=ka();if(a==null||s==null)return null;var o=a.find(d=>s.includes(d.payload));return ie(o)?null:Bt({point:o,childIndex:Number(l),mainColor:r,dataKey:n,activeDot:t})}var Ze=(e,a,r,t)=>Fe(e,"xAxis",a,t),ea=(e,a,r,t)=>Ge(e,"xAxis",a,t),aa=(e,a,r,t)=>Fe(e,"yAxis",r,t),ta=(e,a,r,t)=>Ge(e,"yAxis",r,t),Ft=S([Z,Ze,aa,ea,ta],(e,a,r,t,n)=>_a(e,"xAxis")?xe(a,t,!1):xe(r,n,!1)),Gt=(e,a,r,t,n)=>n;function Vt(e){return e.type==="line"}var zt=S([Ra,Gt],(e,a)=>e.filter(Vt).find(r=>r.id===a)),Ut=S([Z,Ze,aa,ea,ta,zt,Ft,La],(e,a,r,t,n,l,s,o)=>{var{chartData:d,dataStartIndex:m,dataEndIndex:h}=o;if(!(l==null||a==null||r==null||t==null||n==null||t.length===0||n.length===0||s==null)){var{dataKey:v,data:u}=l,y;if(u!=null&&u.length>0?y=u:y=d==null?void 0:d.slice(m,h+1),y!=null)return mr({layout:e,xAxis:a,yAxis:r,xAxisTicks:t,yAxisTicks:n,dataKey:v,bandSize:s,displayedData:y})}}),Xt=["id"],Yt=["type","layout","connectNulls","needClip"],Jt=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ce(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function k(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?Ce(Object(r),!0).forEach(function(t){qt(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qt(e,a,r){return(a=Ht(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Ht(e){var a=Qt(e,"string");return typeof a=="symbol"?a:a+""}function Qt(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function fe(e,a){if(e==null)return{};var r,t,n=Zt(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zt(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},B.apply(null,arguments)}var er=e=>{var{dataKey:a,name:r,stroke:t,legendType:n,hide:l}=e;return[{inactive:l,dataKey:a,type:n,color:t,value:ee(r,a),payload:e}]};function ar(e){var{dataKey:a,data:r,stroke:t,strokeWidth:n,fill:l,name:s,hide:o,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:t,strokeWidth:n,fill:l,dataKey:a,nameKey:void 0,name:ee(s,a),hide:o,type:e.tooltipType,color:e.stroke,unit:d}}}var ra=(e,a)=>"".concat(a,"px ").concat(e-a,"px");function tr(e,a){for(var r=e.length%2!==0?[...e,0]:e,t=[],n=0;n<a;++n)t=[...t,...r];return t}var rr=(e,a,r)=>{var t=r.reduce((v,u)=>v+u);if(!t)return ra(a,e);for(var n=Math.floor(e/t),l=e%t,s=a-e,o=[],d=0,m=0;d<r.length;m+=r[d],++d)if(m+r[d]>l){o=[...r.slice(0,d),l-m];break}var h=o.length%2===0?[0,s]:[s];return[...tr(r,n),...o,...h].map(v=>"".concat(v,"px")).join(", ")};function nr(e,a){var r;if(i.isValidElement(e))r=i.cloneElement(e,a);else if(typeof e=="function")r=e(a);else{var t=V("recharts-line-dot",typeof e!="boolean"?e.className:"");r=i.createElement(Xe,B({},a,{className:t}))}return r}function ir(e,a){return e==null?!1:a?!0:e.length===1}function lr(e){var{clipPathId:a,points:r,props:t}=e,{dot:n,dataKey:l,needClip:s}=t;if(!ir(r,n))return null;var{id:o}=t,d=fe(t,Xt),m=ze(n),h=H(d),v=G(n,!0),u=r.map((p,f)=>{var b=k(k(k({key:"dot-".concat(f),r:3},h),v),{},{index:f,cx:p.x,cy:p.y,dataKey:l,value:p.value,payload:p.payload,points:r});return nr(n,b)}),y={clipPath:s?"url(#clipPath-".concat(m?"":"dots-").concat(a,")"):void 0};return i.createElement(K,B({className:"recharts-line-dots",key:"dots"},y),u)}function se(e){var{clipPathId:a,pathRef:r,points:t,strokeDasharray:n,props:l,showLabels:s}=e,{type:o,layout:d,connectNulls:m,needClip:h}=l,v=fe(l,Yt),u=k(k({},G(v,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(a,")"):void 0,points:t,type:o,layout:d,connectNulls:m,strokeDasharray:n??l.strokeDasharray});return i.createElement(i.Fragment,null,(t==null?void 0:t.length)>1&&i.createElement(We,B({},u,{pathRef:r})),i.createElement(lr,{points:t,clipPathId:a,props:l}),s&&Va.renderCallByParent(l,t))}function sr(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function or(e){var{clipPathId:a,props:r,pathRef:t,previousPointsRef:n,longestAnimatedLengthRef:l}=e,{points:s,strokeDasharray:o,isAnimationActive:d,animationBegin:m,animationDuration:h,animationEasing:v,animateNewValues:u,width:y,height:p,onAnimationEnd:f,onAnimationStart:b}=r,j=n.current,g=Me(r,"recharts-line-"),[x,N]=i.useState(!1),w=i.useCallback(()=>{typeof f=="function"&&f(),N(!1)},[f]),A=i.useCallback(()=>{typeof b=="function"&&b(),N(!0)},[b]),E=sr(t.current),O=l.current;return i.createElement($e,{begin:m,duration:h,isActive:d,easing:v,onAnimationEnd:w,onAnimationStart:A,key:g},I=>{var T=z(O,E+O,I),R=Math.min(T,E),C;if(o){var M="".concat(o).split(/[,\s]+/gim).map(D=>parseFloat(D));C=rr(R,E,M)}else C=ra(E,R);if(j){var F=j.length/s.length,$=I===1?s:s.map((D,ae)=>{var Y=Math.floor(ae*F);if(j[Y]){var he=j[Y];return k(k({},D),{},{x:z(he.x,D.x,I),y:z(he.y,D.y,I)})}return u?k(k({},D),{},{x:z(y*2,D.x,I),y:z(p/2,D.y,I)}):k(k({},D),{},{x:D.x,y:D.y})});return n.current=$,i.createElement(se,{props:r,points:$,clipPathId:a,pathRef:t,showLabels:!x,strokeDasharray:C})}return I>0&&E>0&&(n.current=s,l.current=R),i.createElement(se,{props:r,points:s,clipPathId:a,pathRef:t,showLabels:!x,strokeDasharray:C})})}function cr(e){var{clipPathId:a,props:r}=e,{points:t,isAnimationActive:n}=r,l=i.useRef(null),s=i.useRef(0),o=i.useRef(null),d=l.current;return n&&t&&t.length&&d!==t?i.createElement(or,{props:r,clipPathId:a,previousPointsRef:l,longestAnimatedLengthRef:s,pathRef:o}):i.createElement(se,{props:r,points:t,clipPathId:a,pathRef:o,showLabels:!0})}var ur=(e,a)=>({x:e.x,y:e.y,value:e.value,errorVal:L(e.payload,a)});class dr extends i.Component{render(){var a,{hide:r,dot:t,points:n,className:l,xAxisId:s,yAxisId:o,top:d,left:m,width:h,height:v,id:u,needClip:y}=this.props;if(r)return null;var p=V("recharts-line",l),f=u,{r:b=3,strokeWidth:j=2}=(a=G(t,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},g=ze(t),x=b*2+j;return i.createElement(i.Fragment,null,i.createElement(K,{className:p},y&&i.createElement("defs",null,i.createElement(Fa,{clipPathId:f,xAxisId:s,yAxisId:o}),!g&&i.createElement("clipPath",{id:"clipPath-dots-".concat(f)},i.createElement("rect",{x:m-x/2,y:d-x/2,width:h+x,height:v+x}))),i.createElement(cr,{props:this.props,clipPathId:f}),i.createElement(Ga,{xAxisId:s,yAxisId:o,data:n,dataPointFormatter:ur,errorBarOffset:0},this.props.children)),i.createElement(Wt,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var na={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ke.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function pr(e){var a=U(e,na),{activeDot:r,animateNewValues:t,animationBegin:n,animationDuration:l,animationEasing:s,connectNulls:o,dot:d,hide:m,isAnimationActive:h,label:v,legendType:u,xAxisId:y,yAxisId:p,id:f}=a,b=fe(a,Jt),{needClip:j}=$a(y,p),g=Ba(),x=Wa(),N=Ve(),w=X(T=>Ut(T,y,p,N,f));if(x!=="horizontal"&&x!=="vertical"||w==null||g==null)return null;var{height:A,width:E,x:O,y:I}=g;return i.createElement(dr,B({},b,{id:f,connectNulls:o,dot:d,activeDot:r,animateNewValues:t,animationBegin:n,animationDuration:l,animationEasing:s,isAnimationActive:h,hide:m,label:v,legendType:u,xAxisId:y,yAxisId:p,points:w,layout:x,height:A,width:E,left:O,top:I,needClip:j}))}function mr(e){var{layout:a,xAxis:r,yAxis:t,xAxisTicks:n,yAxisTicks:l,dataKey:s,bandSize:o,displayedData:d}=e;return d.map((m,h)=>{var v=L(m,s);if(a==="horizontal"){var u=be({axis:r,ticks:n,bandSize:o,entry:m,index:h}),y=ie(v)?null:t.scale(v);return{x:u,y,value:v,payload:m}}var p=ie(v)?null:r.scale(v),f=be({axis:t,ticks:l,bandSize:o,entry:m,index:h});return p==null||f==null?null:{x:p,y:f,value:v,payload:m}}).filter(Boolean)}function ia(e){var a=U(e,na),r=Ve();return i.createElement(Le,{id:a.id,type:"line"},t=>i.createElement(i.Fragment,null,i.createElement(Ka,{legendPayload:er(a)}),i.createElement(_e,{fn:ar,args:a}),i.createElement(Ma,{type:"line",id:t,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,hide:a.hide,isPanorama:r}),i.createElement(pr,B({},a,{id:t}))))}ia.displayName="Line";var vr=["axis"],fr=i.forwardRef((e,a)=>i.createElement(za,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vr,tooltipPayloadSearcher:Ue,categoricalChartProps:e,ref:a}));function hr(e){var a=Ua();return i.useEffect(()=>{a(Xa(e))},[a,e]),null}var yr=["width","height","layout"];function oe(){return oe=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},oe.apply(null,arguments)}function gr(e,a){if(e==null)return{};var r,t,n=xr(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xr(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var br={top:5,right:5,bottom:5,left:5},Pr={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:br,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Ar=i.forwardRef(function(a,r){var t,n=U(a.categoricalChartProps,Pr),{width:l,height:s,layout:o}=n,d=gr(n,yr);if(!Pe(l)||!Pe(s))return null;var{chartName:m,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:u}=a,y={chartName:m,defaultTooltipEventType:h,validateTooltipEventTypes:v,tooltipPayloadSearcher:u,eventEmitter:void 0};return i.createElement(Ya,{preloadedState:{options:y},reduxStoreName:(t=n.id)!==null&&t!==void 0?t:m},i.createElement(Ja,{chartData:n.data}),i.createElement(qa,{width:l,height:s,layout:o,margin:n.margin}),i.createElement(Ha,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),i.createElement(hr,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),i.createElement(Qa,oe({width:l,height:s},d,{ref:r})))}),jr=["item"],Er={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Or=i.forwardRef((e,a)=>{var r=U(e,Er);return i.createElement(Ar,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:jr,tooltipPayloadSearcher:Ue,categoricalChartProps:r,ref:a})});const re=e=>Number(e||0).toLocaleString(),la=e=>new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().slice(0,10),Ir=()=>{const e=new Date;return e.setDate(e.getDate()-30),la(e)};function Cr(){var b,j;const[e,a]=i.useState(Ir()),[r,t]=i.useState(la(new Date)),[n,l]=i.useState("day"),[s,o]=i.useState(!1),[d,m]=i.useState({totalAmount:0,totalCount:0,byMethod:[]}),[h,v]=i.useState([]),u=async()=>{var g;o(!0);try{const[x,N]=await Promise.all([te.summary({dateFrom:e,dateTo:r}),te.timeseries({dateFrom:e,dateTo:r,granularity:n})]);m(x.data||{totalAmount:0,totalCount:0,byMethod:[]}),v(Array.isArray((g=N.data)==null?void 0:g.series)?N.data.series:[])}catch{m({totalAmount:0,totalCount:0,byMethod:[]}),v([])}finally{o(!1)}};i.useEffect(()=>{u()},[]);const y=i.useMemo(()=>te.exportCsvUrl({dateFrom:e,dateTo:r}),[e,r]),p=i.useMemo(()=>(h||[]).map(g=>({date:String(g.date).slice(0,10),total:Number(g.amount||0)})),[h]),f=i.useMemo(()=>(d.byMethod||[]).map(({method:g,amount:x})=>({name:g||"unknown",value:Number(x||0)})),[d]);return c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border shadow p-6",children:[c.jsxs("div",{className:"flex items-center justify-between gap-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-semibold",children:"Repayment Charts"}),c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily totals, method split, and top KPIs from server-side aggregation."})]}),c.jsx("div",{className:"flex gap-2",children:c.jsx("a",{className:"px-3 py-2 rounded border hover:bg-gray-50 text-sm",href:y,target:"_blank",rel:"noreferrer",children:"Export CSV"})})]}),c.jsxs("div",{className:"grid md:grid-cols-5 gap-3 mt-4",children:[c.jsxs("div",{className:"space-y-1 md:col-span-1",children:[c.jsx("label",{className:"text-sm",children:"From"}),c.jsx("input",{type:"date",value:e,onChange:g=>a(g.target.value),className:"border rounded px-2 py-1 text-sm w-full"})]}),c.jsxs("div",{className:"space-y-1 md:col-span-1",children:[c.jsx("label",{className:"text-sm",children:"To"}),c.jsx("input",{type:"date",value:r,onChange:g=>t(g.target.value),className:"border rounded px-2 py-1 text-sm w-full"})]}),c.jsxs("div",{className:"space-y-1 md:col-span-1",children:[c.jsx("label",{className:"text-sm",children:"Granularity"}),c.jsxs("select",{value:n,onChange:g=>l(g.target.value),className:"border rounded px-2 py-1 text-sm w-full",children:[c.jsx("option",{value:"day",children:"Daily"}),c.jsx("option",{value:"week",children:"Weekly"}),c.jsx("option",{value:"month",children:"Monthly"})]})]}),c.jsx("div",{className:"md:col-span-2 flex items-end justify-end",children:c.jsx("button",{onClick:u,disabled:s,className:"px-3 py-2 rounded border hover:bg-gray-50 text-sm disabled:opacity-60",children:s?"Loading…":"Apply"})})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mt-6",children:[c.jsxs("div",{className:"border rounded-xl p-4",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Total Collected"}),c.jsx("p",{className:"text-2xl font-semibold",children:re(d.totalAmount)})]}),c.jsxs("div",{className:"border rounded-xl p-4",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Payments Count"}),c.jsx("p",{className:"text-2xl font-semibold",children:d.totalCount||0})]}),c.jsxs("div",{className:"border rounded-xl p-4",children:[c.jsx("p",{className:"text-sm text-gray-500",children:"Top Method"}),c.jsx("p",{className:"text-2xl font-semibold",children:((j=(b=d.byMethod)==null?void 0:b[0])==null?void 0:j.method)||"—"})]})]}),c.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mt-6",children:[c.jsxs("div",{className:"h-80 border rounded-lg p-2",children:[c.jsx("h3",{className:"font-medium px-2 pt-2",children:"Collections Over Time"}),c.jsx(Ae,{width:"100%",height:"90%",children:c.jsxs(fr,{data:p,children:[c.jsx(Za,{strokeDasharray:"3 3"}),c.jsx(et,{dataKey:"date"}),c.jsx(at,{}),c.jsx(je,{formatter:g=>re(g)}),c.jsx(Ee,{}),c.jsx(ia,{type:"monotone",dataKey:"total",name:"Amount"})]})})]}),c.jsxs("div",{className:"h-80 border rounded-lg p-2",children:[c.jsx("h3",{className:"font-medium px-2 pt-2",children:"By Method"}),c.jsx(Ae,{width:"100%",height:"90%",children:c.jsxs(Or,{children:[c.jsx(Qe,{data:f,dataKey:"value",nameKey:"name",outerRadius:100,label:!0}),c.jsx(je,{formatter:g=>re(g)}),c.jsx(Ee,{}),f.map((g,x)=>c.jsx(ce,{},x))]})})]})]})]})})}export{Cr as default};
