import{r as c,g as De,j as r,L as he}from"./index-iSlS6Tx9.js";import{D as wt}from"./download-C3_PiwST.js";import{C as Ae}from"./circle-plus-CUW2BUMc.js";import{c as U}from"./createLucideIcon-DwyAA3jl.js";import{i as Fe,S as kt,a as ge,r as At,u as et,R as Nt,b as St,c as Pt,d as It,g as Ct,e as tt,f as Ot,h as Bt,j as Et,k as pe,l as Lt,G as Dt,C as Rt,m as at,n as Tt,L as xe,o as _t,p as Mt,t as $t,q as Ke,s as rt,v as nt,w as st,x as it,y as Ft,z as ot,A as Kt,J as zt,B as q,D as Wt,E as Ut,F as Vt,H as Gt,I as ze,K as W,M as qt,N as Y,O as J,P as ee,Q as Xt,T as lt,U as ct,V as dt,W as Ht,X as Zt,Y as We,Z as Yt,_ as Jt,$ as Ue,a0 as Qt,a1 as Re,a2 as Ve,a3 as ea,a4 as ta,a5 as Ne,a6 as Se,a7 as Pe,a8 as Ie,a9 as Ce,aa as Oe}from"./CartesianChart-BRAZzGwY.js";import{C as aa}from"./chevron-down-CVomvYg3.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ge=U("chart-no-axes-column",ra);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sa=U("clipboard-list",na);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Be=U("credit-card",ia);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],X=U("dollar-sign",oa);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],ca=U("thumbs-down",la);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qe=U("triangle-alert",da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ma=U("users",ua);var fa="Invariant failed";function ha(t,e){throw new Error(fa)}var pa=["x","y"];function Te(){return Te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Te.apply(null,arguments)}function Xe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function ie(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(a),!0).forEach(function(n){xa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xe(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function xa(t,e,a){return(e=va(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function va(t){var e=ga(t,"string");return typeof e=="symbol"?e:e+""}function ga(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ya(t,e){if(t==null)return{};var a,n,o=ba(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function ba(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}function ja(t,e){var{x:a,y:n}=t,o=ya(t,pa),l="".concat(a),s=parseInt(l,10),m="".concat(n),v=parseInt(m,10),u="".concat(e.height||o.height),h=parseInt(u,10),p="".concat(e.width||o.width),g=parseInt(p,10);return ie(ie(ie(ie(ie({},e),o),s?{x:s}:{}),v?{y:v}:{}),{},{height:h,width:g,name:e.name,radius:e.radius})}function ut(t){return c.createElement(kt,Te({shapeType:"rectangle",propTransformer:ja,activeClassName:"recharts-active-bar"},t))}var wa=function(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(Fe(e))return e;var l=Fe(n)||ge(n);return l?e(n,o):(l||ha(),a)}},ka=["onMouseEnter","onMouseLeave","onClick"],Aa=["value","background","tooltipPosition"],Na=["id"],Sa=["onMouseEnter","onClick","onMouseLeave"];function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)({}).hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Q.apply(null,arguments)}function He(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?He(Object(a),!0).forEach(function(n){Pa(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Pa(t,e,a){return(e=Ia(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Ia(t){var e=Ca(t,"string");return typeof e=="symbol"?e:e+""}function Ca(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ve(t,e){if(t==null)return{};var a,n,o=Oa(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)===-1&&{}.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}function Oa(t,e){if(t==null)return{};var a={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;a[n]=t[n]}return a}var Ba=t=>{var{dataKey:e,name:a,fill:n,legendType:o,hide:l}=t;return[{inactive:l,dataKey:e,type:o,color:n,value:tt(a,e),payload:t}]};function Ea(t){var{dataKey:e,stroke:a,strokeWidth:n,fill:o,name:l,hide:s,unit:m}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:tt(l,e),hide:s,type:t.tooltipType,color:t.fill,unit:m}}}function La(t){var e=pe(rt),{data:a,dataKey:n,background:o,allOtherBarProps:l}=t,{onMouseEnter:s,onMouseLeave:m,onClick:v}=l,u=ve(l,ka),h=nt(s,n),p=st(m),g=it(v,n);if(!o||a==null)return null;var x=Ft(o,!1);return c.createElement(c.Fragment,null,a.map((N,j)=>{var{value:I,background:b,tooltipPosition:w}=N,f=ve(N,Aa);if(!b)return null;var S=h(N,j),k=p(N,j),C=g(N,j),B=L(L(L(L(L({option:o,isActive:String(j)===e},f),{},{fill:"#eee"},b),x),ot(u,N,j)),{},{onMouseEnter:S,onMouseLeave:k,onClick:C,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return c.createElement(ut,Q({key:"background-bar-".concat(j)},B))}))}function mt(t){var{data:e,props:a,showLabels:n}=t,o=Wt(a),{id:l}=o,s=ve(o,Na),{shape:m,dataKey:v,activeBar:u}=a,h=pe(rt),p=pe(Ut),{onMouseEnter:g,onClick:x,onMouseLeave:N}=a,j=ve(a,Sa),I=nt(g,v),b=st(N),w=it(x,v);return e?c.createElement(c.Fragment,null,e.map((f,S)=>{var k=u&&String(S)===h&&(p==null||v===p),C=k?u:m,B=L(L(L({},s),f),{},{isActive:k,option:C,index:S,dataKey:v});return c.createElement(xe,Q({className:"recharts-bar-rectangle"},ot(j,f,S),{onMouseEnter:I(f,S),onMouseLeave:b(f,S),onClick:w(f,S),key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(S)}),c.createElement(ut,B))}),n&&Vt.renderCallByParent(a,e)):null}function Da(t){var{props:e,previousRectanglesRef:a}=t,{data:n,layout:o,isAnimationActive:l,animationBegin:s,animationDuration:m,animationEasing:v,onAnimationEnd:u,onAnimationStart:h}=e,p=a.current,g=Kt(e,"recharts-bar-"),[x,N]=c.useState(!1),j=c.useCallback(()=>{typeof u=="function"&&u(),N(!1)},[u]),I=c.useCallback(()=>{typeof h=="function"&&h(),N(!0)},[h]);return c.createElement(zt,{begin:s,duration:m,isActive:l,easing:v,onAnimationEnd:j,onAnimationStart:I,key:g},b=>{var w=b===1?n:n==null?void 0:n.map((f,S)=>{var k=p&&p[S];if(k)return L(L({},f),{},{x:q(k.x,f.x,b),y:q(k.y,f.y,b),width:q(k.width,f.width,b),height:q(k.height,f.height,b)});if(o==="horizontal"){var C=q(0,f.height,b);return L(L({},f),{},{y:f.y+f.height-C,height:C})}var B=q(0,f.width,b);return L(L({},f),{},{width:B})});return b>0&&(a.current=w??null),w==null?null:c.createElement(xe,null,c.createElement(mt,{props:e,data:w,showLabels:!x}))})}function Ra(t){var{data:e,isAnimationActive:a}=t,n=c.useRef(null);return a&&e&&e.length&&(n.current==null||n.current!==e)?c.createElement(Da,{previousRectanglesRef:n,props:t}):c.createElement(mt,{props:t,data:e,showLabels:!0})}var ft=0,Ta=(t,e)=>{var a=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:a,errorVal:at(t,e)}};class _a extends c.PureComponent{render(){var{hide:e,data:a,dataKey:n,className:o,xAxisId:l,yAxisId:s,needClip:m,background:v,id:u}=this.props;if(e)return null;var h=Tt("recharts-bar",o),p=u;return c.createElement(xe,{className:h,id:u},m&&c.createElement("defs",null,c.createElement(_t,{clipPathId:p,xAxisId:l,yAxisId:s})),c.createElement(xe,{className:"recharts-bar-rectangles",clipPath:m?"url(#clipPath-".concat(p,")"):void 0},c.createElement(La,{data:a,dataKey:n,background:v,allOtherBarProps:this.props}),c.createElement(Ra,this.props)),this.props.children)}}var Ma={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Dt.isSsr,legendType:"rect",minPointSize:ft,xAxisId:0,yAxisId:0};function $a(t){var{xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:l,activeBar:s,animationBegin:m,animationDuration:v,animationEasing:u,isAnimationActive:h}=t,{needClip:p}=Ot(e,a),g=Bt(),x=et(),N=Et(t.children,Rt),j=pe(w=>mr(w,e,a,x,t.id,N));if(g!=="vertical"&&g!=="horizontal")return null;var I,b=j==null?void 0:j[0];return b==null||b.height==null||b.width==null?I=0:I=g==="vertical"?b.height/2:b.width/2,c.createElement(Lt,{xAxisId:e,yAxisId:a,data:j,dataPointFormatter:Ta,errorBarOffset:I},c.createElement(_a,Q({},t,{layout:g,needClip:p,data:j,xAxisId:e,yAxisId:a,hide:n,legendType:o,minPointSize:l,activeBar:s,animationBegin:m,animationDuration:v,animationEasing:u,isAnimationActive:h})))}function Fa(t){var{layout:e,barSettings:{dataKey:a,minPointSize:n},pos:o,bandSize:l,xAxis:s,yAxis:m,xAxisTicks:v,yAxisTicks:u,stackedData:h,displayedData:p,offset:g,cells:x}=t,N=e==="horizontal"?m:s,j=h?N.scale.domain():null,I=Mt({numericAxis:N});return p.map((b,w)=>{var f,S,k,C,B,V;h?f=$t(h[w],j):(f=at(b,a),Array.isArray(f)||(f=[I,f]));var O=wa(n,ft)(f[1],w);if(e==="horizontal"){var te,[ae,G]=[m.scale(f[0]),m.scale(f[1])];S=Ke({axis:s,ticks:v,bandSize:l,offset:o.offset,entry:b,index:w}),k=(te=G??ae)!==null&&te!==void 0?te:void 0,C=o.size;var re=ae-G;if(B=Gt(re)?0:re,V={x:S,y:g.top,width:C,height:g.height},Math.abs(O)>0&&Math.abs(B)<Math.abs(O)){var le=ze(B||O)*(Math.abs(O)-Math.abs(B));k-=le,B+=le}}else{var[ne,ye]=[s.scale(f[0]),s.scale(f[1])];if(S=ne,k=Ke({axis:m,ticks:u,bandSize:l,offset:o.offset,entry:b,index:w}),C=ye-ne,B=o.size,V={x:g.left,y:k,width:g.width,height:B},Math.abs(O)>0&&Math.abs(C)<Math.abs(O)){var ce=ze(C||O)*(Math.abs(O)-Math.abs(C));C+=ce}}if(S==null||k==null||C==null||B==null)return null;var be=L(L({},b),{},{x:S,y:k,width:C,height:B,value:h?f:f[1],payload:b,background:V,tooltipPosition:{x:S+C/2,y:k+B/2}},x&&x[w]&&x[w].props);return be}).filter(Boolean)}function Z(t){var e=At(t,Ma),a=et();return c.createElement(Nt,{id:e.id,type:"bar"},n=>c.createElement(c.Fragment,null,c.createElement(St,{legendPayload:Ba(e)}),c.createElement(Pt,{fn:Ea,args:e}),c.createElement(It,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Ct(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:a}),c.createElement($a,Q({},e,{id:n}))))}Z.displayName="Bar";function Ze(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,n)}return a}function ue(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ze(Object(a),!0).forEach(function(n){Ka(t,n,a[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))})}return t}function Ka(t,e,a){return(e=za(e))in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function za(t){var e=Wa(t,"string");return typeof e=="symbol"?e:e+""}function Wa(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var n=a.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ua=(t,e)=>e,Va=(t,e,a)=>a,Ga=(t,e,a,n)=>n,qa=(t,e,a,n,o)=>o,oe=W([ct,qa],(t,e)=>t.filter(a=>a.type==="bar").find(a=>a.id===e)),Xa=W([oe],t=>t==null?void 0:t.maxBarSize),Ha=(t,e,a,n,o,l)=>l,Ye=(t,e,a)=>{var n=a??t;if(!ge(n))return Re(n,e,0)},Za=W([ee,ct,Ua,Va,Ga],(t,e,a,n,o)=>e.filter(l=>t==="horizontal"?l.xAxisId===a:l.yAxisId===n).filter(l=>l.isPanorama===o).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),Ya=(t,e,a,n)=>{var o=ee(t);return o==="horizontal"?We(t,"yAxis",a,n):We(t,"xAxis",e,n)},Ja=(t,e,a)=>{var n=ee(t);return n==="horizontal"?Ue(t,"xAxis",e):Ue(t,"yAxis",a)},Qa=(t,e,a)=>{var n={},o=t.filter(Qt),l=t.filter(u=>u.stackId==null),s=o.reduce((u,h)=>(u[h.stackId]||(u[h.stackId]=[]),u[h.stackId].push(h),u),n),m=Object.entries(s).map(u=>{var[h,p]=u,g=p.map(N=>N.dataKey),x=Ye(e,a,p[0].barSize);return{stackId:h,dataKeys:g,barSize:x}}),v=l.map(u=>{var h=[u.dataKey].filter(g=>g!=null),p=Ye(e,a,u.barSize);return{stackId:void 0,dataKeys:h,barSize:p}});return[...m,...v]},er=W([Za,Jt,Ja],Qa),tr=(t,e,a,n,o)=>{var l,s,m=oe(t,e,a,n,o);if(m!=null){var v=ee(t),u=dt(t),{maxBarSize:h}=m,p=ge(h)?u:h,g,x;return v==="horizontal"?(g=Y(t,"xAxis",e,n),x=J(t,"xAxis",e,n)):(g=Y(t,"yAxis",a,n),x=J(t,"yAxis",a,n)),(l=(s=lt(g,x,!0))!==null&&s!==void 0?s:p)!==null&&l!==void 0?l:0}},ht=(t,e,a,n)=>{var o=ee(t),l,s;return o==="horizontal"?(l=Y(t,"xAxis",e,n),s=J(t,"xAxis",e,n)):(l=Y(t,"yAxis",a,n),s=J(t,"yAxis",a,n)),lt(l,s)};function ar(t,e,a,n,o){var l=n.length;if(!(l<1)){var s=Re(t,a,0,!0),m,v=[];if(Ve(n[0].barSize)){var u=!1,h=a/l,p=n.reduce((b,w)=>b+(w.barSize||0),0);p+=(l-1)*s,p>=a&&(p-=(l-1)*s,s=0),p>=a&&h>0&&(u=!0,h*=.9,p=l*h);var g=(a-p)/2>>0,x={offset:g-s,size:0};m=n.reduce((b,w)=>{var f,S={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+s,size:u?h:(f=w.barSize)!==null&&f!==void 0?f:0}},k=[...b,S];return x=k[k.length-1].position,k},v)}else{var N=Re(e,a,0,!0);a-2*N-(l-1)*s<=0&&(s=0);var j=(a-2*N-(l-1)*s)/l;j>1&&(j>>=0);var I=Ve(o)?Math.min(j,o):j;m=n.reduce((b,w,f)=>[...b,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:N+(j+s)*f+(j-I)/2,size:I}}],v)}return m}}var rr=(t,e,a,n,o,l,s)=>{var m=ge(s)?e:s,v=ar(a,n,o!==l?o:l,t,m);return o!==l&&v!=null&&(v=v.map(u=>ue(ue({},u),{},{position:ue(ue({},u.position),{},{offset:u.position.offset-o/2})}))),v},nr=W([er,dt,Ht,Zt,tr,ht,Xa],rr),sr=(t,e,a,n)=>Y(t,"xAxis",e,n),ir=(t,e,a,n)=>Y(t,"yAxis",a,n),or=(t,e,a,n)=>J(t,"xAxis",e,n),lr=(t,e,a,n)=>J(t,"yAxis",a,n),cr=W([nr,oe],(t,e)=>{if(!(t==null||e==null)){var a=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(a!=null)return a.position}}),dr=(t,e)=>{var a=Yt(e);if(!(!t||a==null||e==null)){var{stackId:n}=e;if(n!=null){var o=t[n];if(o){var{stackedData:l}=o;if(l)return l.find(s=>s.key===a)}}}},ur=W([Ya,oe],dr),mr=W([qt,sr,ir,or,lr,cr,ee,Xt,ht,ur,oe,Ha],(t,e,a,n,o,l,s,m,v,u,h,p)=>{var{chartData:g,dataStartIndex:x,dataEndIndex:N}=m;if(!(h==null||l==null||s!=="horizontal"&&s!=="vertical"||e==null||a==null||n==null||o==null||v==null)){var{data:j}=h,I;if(j!=null&&j.length>0?I=j:I=g==null?void 0:g.slice(x,N+1),I!=null)return Fa({layout:s,barSettings:h,pos:l,bandSize:v,xAxis:e,yAxis:a,xAxisTicks:n,yAxisTicks:o,stackedData:u,displayedData:I,offset:t,cells:p})}}),fr=["axis","item"],Ee=c.forwardRef((t,e)=>c.createElement(ea,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fr,tooltipPayloadSearcher:ta,categoricalChartProps:t,ref:e}));const T={borrowers:"/borrowers",loans:"/loans",repayments:"/repayments",expectedRepayments:"/repayments",deposits:"/deposits",withdrawals:"/withdrawals",savings:"/savings",defaultedLoans:"/loans",defaultedInterest:"/loans",outstandingLoan:"/loans",outstandingInterest:"/loans",writtenOff:"/loans",par:"/loans"},Je="ms_dash_filters_v1",Qe="ms_dash_auto_refresh_v1";function K(t){const a=(t.startsWith("/")?t:`/${t}`).replace(/^\/api\//,"/"),n=a.startsWith("/api/")?a:`/api${a}`;return Array.from(new Set([a,n]))}function H(t){return(t==null?void 0:t.name)==="CanceledError"||(t==null?void 0:t.code)==="ERR_CANCELED"||/abort|cancell?ed/i.test((t==null?void 0:t.message)||"")}async function me(t=[],e={}){let a;for(const n of t)try{const o=await De.get(n,e);return o==null?void 0:o.data}catch(o){a=o}throw a||new Error("No endpoint succeeded")}function hr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.branchId??a.code??String(a.name||"branch"),name:a.name??a.title??a.label??String(a.code||"—")}))}function pr(t){return(Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[]).map(a=>({id:a.id??a._id??a.userId??String(a.email||a.phone||"user"),name:a.name||[a.firstName,a.lastName].filter(Boolean).join(" ").trim()||a.username||a.email||a.phone||"—",roles:(a.roles||a.Roles||[]).map(n=>(n.name||n.code||"").toString().toLowerCase()),title:(a.title||a.jobTitle||"").toString().toLowerCase()}))}function xr(t){const e=[...t.roles||[],t.title||""].join(" ");return/loan.*officer|credit.*officer|field.*officer/i.test(e)}function vr(t){const e=(t==null?void 0:t.summary)||t||{},a=o=>Number(o||0),n=o=>{if(o==null)return 0;const l=String(o).trim().replace("%",""),s=Number(l);return Number.isFinite(s)?s:0};return{totalBorrowers:a(e.totalBorrowers??e.borrowers??e.clients),totalLoans:a(e.totalLoans??e.loans),totalDisbursed:a(e.totalDisbursed??e.disbursed),totalPaid:a(e.totalPaid??e.paid),totalRepaid:a(e.totalRepaid??e.repaid??e.collections),totalExpectedRepayments:a(e.totalExpectedRepayments??e.expectedRepayments),totalDeposits:a(e.totalDeposits??e.deposits),totalWithdrawals:a(e.totalWithdrawals??e.withdrawals),netSavings:a(e.netSavings??(e.totalDeposits||0)-(e.totalWithdrawals||0)),defaultedLoan:a(e.defaultedLoan??e.defaulted??e.nplPrincipal),defaultedInterest:a(e.defaultedInterest??e.nplInterest),outstandingLoan:a(e.outstandingLoan??e.outstandingPrincipal??e.outstanding),outstandingInterest:a(e.outstandingInterest??e.accruedInterest),writtenOff:a(e.writtenOff??e.writeOffs),parPercent:n(e.parPercent??e.par??e.par30??e.portfolioAtRisk),topBorrowers:Array.isArray(e.topBorrowers)?e.topBorrowers:[],upcomingRepayments:Array.isArray(e.upcomingRepayments)?e.upcomingRepayments:[],branchPerformance:Array.isArray(e.branchPerformance)?e.branchPerformance:[],officerPerformance:Array.isArray(e.officerPerformance)?e.officerPerformance:[],generalCommunications:Array.isArray(e.generalCommunications)?e.generalCommunications:[]}}function gr(){var t,e;try{const a=JSON.parse(localStorage.getItem("user")||"{}");return((a==null?void 0:a.role)||((e=(t=a==null?void 0:a.Roles)==null?void 0:t[0])==null?void 0:e.name)||"").toString().toLowerCase()}catch{return""}}function Le(t,{branchId:e,role:a}){const n=Array.isArray(t)?t:(t==null?void 0:t.items)||(t==null?void 0:t.rows)||(t==null?void 0:t.data)||[],o=Date.now(),l=(a||"").toString().toLowerCase();return n.map(s=>{const v=(Array.isArray(s.attachments)?s.attachments:Array.isArray(s.files)?s.files:[]).map(u=>({...u,fileUrl:(u==null?void 0:u.fileUrl)||(u==null?void 0:u.url)||(u==null?void 0:u.href)||(u==null?void 0:u.path)||""})).filter(u=>u.fileUrl);return{id:s.id??s._id??Math.random().toString(36).slice(2),title:s.title??"",text:s.text??s.body??s.title??"",type:(s.type||"notice").toString().toLowerCase(),priority:(s.priority||"normal").toString().toLowerCase(),channel:(s.channel||"inapp").toString().toLowerCase(),isActive:!!(s.isActive??s.active??s.enabled??!0),showInTicker:!!(s.showInTicker??s.ticker??s.showTicker??!1),startAt:s.startAt?new Date(s.startAt).getTime():null,endAt:s.endAt?new Date(s.endAt).getTime():null,audienceRole:s.audienceRole?String(s.audienceRole).toLowerCase():null,audienceBranchId:s.audienceBranchId!=null?String(s.audienceBranchId):s.branchId!=null?String(s.branchId):s.targetBranchId!=null?String(s.targetBranchId):null,attachments:v}}).filter(s=>s.text).filter(s=>s.isActive&&s.channel==="inapp").filter(s=>s.startAt?o>=s.startAt:!0).filter(s=>s.endAt?o<=s.endAt:!0).filter(s=>s.audienceRole?s.audienceRole===l:!0).filter(s=>e&&s.audienceBranchId?String(s.audienceBranchId)===String(e):!0)}const yr=()=>{const[t,e]=c.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return c.useEffect(()=>{if(typeof document>"u")return;const a=document.documentElement,n=new MutationObserver(()=>e(a.classList.contains("dark")));return n.observe(a,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),t},br=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),P={container:"w-full px-4 md:px-6 lg:px-8 py-6",h1:"text-3xl font-extrabold tracking-tight",card:"card",btn:"inline-flex items-center justify-center rounded-lg px-3 py-2 font-semibold transition border-2 border-[var(--border-strong)] bg-[var(--card)] text-[var(--fg)] hover:bg-[var(--chip-soft)]",tableWrap:"overflow-x-auto rounded-2xl border-2 shadow bg-[var(--card)] border-[var(--border-strong)]",th:"bg-[var(--table-head-bg)] text-left text-[13px] uppercase tracking-wide font-semibold px-3 py-2 border border-[var(--border)] text-[var(--fg)] opacity-90",td:"px-3 py-2 border border-[var(--border)] text-sm text-[var(--fg)]"},jr="h-10 w-full rounded-lg text-sm outline-none transition border-2 bg-[var(--input-bg)] text-[var(--input-fg)] border-[var(--input-border)] focus:ring-2 focus:ring-[var(--ring)]",fe=({className:t="",children:e,...a})=>r.jsxs("div",{className:`relative ${t}`,children:[r.jsx("select",{...a,className:`${jr} pr-9 appearance-none bg-none ms-select`,children:e}),r.jsx(aa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-[var(--muted)]","aria-hidden":"true"})]}),Ir=()=>{const t=yr(),[e,a]=c.useState(null),[n,o]=c.useState([]),[l,s]=c.useState([]),[m,v]=c.useState(""),[u,h]=c.useState(""),[p,g]=c.useState(""),[x,N]=c.useState(0),[j,I]=c.useState(null),[b,w]=c.useState(null),[f,S]=c.useState(Date.now()),[k,C]=c.useState([]),[B,V]=c.useState(!1),[O,te]=c.useState(null),[ae,G]=c.useState([]),[re,le]=c.useState([]),[ne,ye]=c.useState([]),[ce,be]=c.useState([]),[pt,xt]=c.useState(!0),[vt,_e]=c.useState([]),z=(i,d="info")=>{const A=Math.random().toString(36).slice(2);_e(E=>[...E,{id:A,msg:i,type:d}]),setTimeout(()=>_e(E=>E.filter($=>$.id!==A)),3500)},D=i=>{const d=Number(i);return Number.isFinite(d)?d:0},M=i=>{const d=D(i);return Number.isNaN(d)?"TZS —":`TZS ${br.format(d)}`},R=(i,d={})=>{try{const A=new URLSearchParams;m&&A.set("branchId",m),u&&A.set("officerId",u),p&&A.set("timeRange",p),Object.entries(d).forEach(([$,F])=>{F!=null&&String(F)!==""&&A.set($,F)});const E=A.toString();return E?`${i}?${E}`:i}catch{return i}};c.useEffect(()=>{try{const i=localStorage.getItem(Je);if(i){const d=JSON.parse(i);v(d.branchId||""),h(d.officerId||""),g(d.timeRange||"")}}catch{}try{const i=localStorage.getItem(Qe);i&&N(Number(i)||0)}catch{}},[]),c.useEffect(()=>{const i={branchId:m,officerId:u,timeRange:p};localStorage.setItem(Je,JSON.stringify(i))},[m,u,p]),c.useEffect(()=>{localStorage.setItem(Qe,String(x||0))},[x]);const Me=c.useCallback(async i=>{try{const[d,A]=await Promise.all([me([...K("branches"),...K("org/branches")],{signal:i}),me([...K("users?role=loan_officer"),...K("admin/staff?role=loan_officer")],{signal:i}).catch(()=>me([...K("users"),...K("admin/staff")],{signal:i}))]),E=hr(d),$=pr(A),F=$.filter(xr);o(E),s(F.length?F:$)}catch(d){H(d)||(console.error("Filter fetch error:",(d==null?void 0:d.message)||d),z("Failed to load filters","error"))}},[]),je=c.useCallback(async i=>{try{const d=await me([...K("dashboard/summary")],{signal:i,params:{branchId:m,officerId:u,timeRange:p}});a(vr(d))}catch(d){H(d)||(console.error("Dashboard summary error:",(d==null?void 0:d.message)||d),z("Failed to load summary","error"))}},[m,u,p]),se=c.useCallback(async i=>{V(!0);const d=gr();try{const A=[...K("dashboard/communications"),...K("admin/communications?activeOnly=1&channel=inapp"),...K("admin/communications?activeOnly=1")],E=await De.getFirst(A,{signal:i}),$=Le(E,{branchId:m,role:d});if($.length)C($);else{const F=Array.isArray(e==null?void 0:e.generalCommunications)?Le(e.generalCommunications,{branchId:m,role:d}):[];C(F)}}catch(A){H(A)||(console.error("Comms fetch error:",(A==null?void 0:A.message)||A),z("Failed to load communications","error"));const E=Array.isArray(e==null?void 0:e.generalCommunications)?Le(e.generalCommunications,{branchId:m,role:d}):[];C(E)}finally{V(!1)}},[e,m]),we=c.useCallback(async i=>{try{const d=await De.get("/dashboard/monthly-trends",{signal:i});te(d.data||{})}catch(d){H(d)||(console.error("Monthly trends error:",(d==null?void 0:d.message)||d),z("Failed to load trends","error"))}},[]);c.useEffect(()=>{const i=new AbortController;return(async()=>{try{await Me(i.signal)}catch{}})(),()=>i.abort()},[Me]);const de=c.useCallback(async i=>{await Promise.all([je(i),we(i)]),I(new Date),x>0&&w(Date.now()+x*6e4)},[je,we,x]);c.useEffect(()=>{const i=new AbortController;return(async()=>{try{await de(i.signal)}catch(d){H(d)||(console.error("Dashboard fetch error:",(d==null?void 0:d.message)||d),z("Failed to load dashboard data","error"))}finally{xt(!1)}})(),()=>i.abort()},[de]),c.useEffect(()=>{const i=new AbortController;return se(i.signal).catch(d=>{H(d)||(console.error("Comms fetch error:",(d==null?void 0:d.message)||d),z("Failed to load communications","error"))}),()=>i.abort()},[e,m,se]),c.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&G(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&le(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&ye(e.branchPerformance),Array.isArray(e.officerPerformance)&&be(e.officerPerformance))},[e]),c.useEffect(()=>{if(!x||x<=0){w(null);return}const d=setInterval(()=>{const A=new AbortController;Promise.all([de(A.signal),se(A.signal)]).catch(()=>{}).finally(()=>A.abort())},x*6e4);return w(Date.now()+x*6e4),()=>clearInterval(d)},[x,de,se]),c.useEffect(()=>{const i=setInterval(()=>S(Date.now()),1e3);return()=>clearInterval(i)},[]);const ke=({label:i,value:d,max:A})=>{const E=D(d),$=D(A),F=$>0?Math.round(E/$*100):0;return r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-xs text-[var(--muted)]",children:[r.jsx("span",{children:i}),r.jsx("span",{className:"tabular-nums text-[var(--fg)]/80",children:E.toLocaleString()})]}),r.jsx("div",{className:"h-2 w-full rounded bg-[var(--table-head-bg)]",children:r.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${F}%`,backgroundColor:"currentColor"}})})]})},gt=({className:i=""})=>r.jsx("div",{className:`animate-pulse rounded bg-[var(--table-head-bg)] ${i}`}),yt=()=>{const i=k.flatMap(d=>(d.attachments||[]).map(A=>A.fileUrl)).filter(Boolean);i.length!==0&&(i.forEach((d,A)=>{setTimeout(()=>window.open(d,"_blank","noopener,noreferrer"),A*150)}),z(`Opening ${i.length} attachment${i.length>1?"s":""}…`,"info"))},y=t?{grid:"#334155",axis:"#cbd5e1",legend:"#e2e8f0",tooltipBg:"#0b1220",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#334155",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"},$e=b?Math.max(0,Math.floor((b-f)/1e3)):0,bt=String(Math.floor($e/60)).padStart(2,"0"),jt=String($e%60).padStart(2,"0");return r.jsx("div",{className:P.container,children:r.jsxs("div",{className:"space-y-6",style:{color:"var(--fg)"},children:[r.jsx("style",{children:`
          select.ms-select{ -webkit-appearance:none; -moz-appearance:none; appearance:none; background-image:none!important; }
          select.ms-select::-ms-expand{ display:none; }
        `}),r.jsxs("div",{className:`${P.card} p-4 md:p-6`,children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:P.h1,children:"Dashboard"}),r.jsx("p",{className:"text-sm mt-1",style:{color:"var(--muted)"},children:"Quick snapshot of borrowers, loans, repayments and savings."}),r.jsx("p",{className:"text-xs mt-1",style:{color:"var(--muted)"},children:j?`Last updated ${j.toLocaleString()}`:"Loading…"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[r.jsxs(fe,{"aria-label":"Filter by branch",value:m,onChange:i=>v(i.target.value),className:"min-w-[11rem]",children:[r.jsx("option",{value:"",children:"All Branches"}),n.map(i=>r.jsx("option",{value:i.id,children:i.name},i.id))]}),r.jsxs(fe,{"aria-label":"Filter by loan officer",value:u,onChange:i=>h(i.target.value),className:"min-w-[12rem]",children:[r.jsx("option",{value:"",children:"All Loan Officers"}),l.map(i=>r.jsx("option",{value:i.id,children:i.name||i.email},i.id))]}),r.jsxs(fe,{"aria-label":"Filter by time range",value:p,onChange:i=>g(i.target.value),className:"min-w-[10rem]",children:[r.jsx("option",{value:"",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"}),r.jsx("option",{value:"quarter",children:"This Quarter"}),r.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),r.jsx("option",{value:"annual",children:"Annual"})]}),r.jsxs(fe,{"aria-label":"Auto refresh interval",value:x,onChange:i=>N(Number(i.target.value)),className:"min-w-[12rem]",children:[r.jsx("option",{value:0,children:"No Auto-Refresh"}),r.jsx("option",{value:1,children:"Every 1 min"}),r.jsx("option",{value:5,children:"Every 5 mins"}),r.jsx("option",{value:15,children:"Every 15 mins"})]}),r.jsx("button",{className:P.btn,onClick:()=>{const i=new AbortController;Promise.all([je(i.signal),we(i.signal),se(i.signal)]).then(()=>{I(new Date),x>0&&w(Date.now()+x*6e4),z("Dashboard refreshed","success")}).catch(()=>z("Refresh failed","error")).finally(()=>i.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]}),x>0&&b&&r.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full px-2.5 py-1 text-xs",style:{border:"2px solid var(--border-strong)",color:"var(--fg)"},children:["Auto-refresh in ",bt,":",jt]})]}),r.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:vt.map(i=>r.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${i.type==="error"?"bg-red-600":i.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:i.msg},i.id))}),r.jsxs("div",{className:`${P.card} overflow-hidden`,children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:"var(--border)",background:"var(--table-head-bg)"},children:[r.jsx("div",{className:"text-xs font-semibold",style:{color:"var(--muted)"},children:"General Communications"}),k.some(i=>Array.isArray(i.attachments)&&i.attachments.length>0)&&r.jsxs("button",{onClick:yt,className:`${P.btn} h-7 px-2 text-xs`,title:"Open all attachments",disabled:B,children:[r.jsx(wt,{className:"w-3 h-3"})," Download all"]})]}),B?r.jsx("div",{className:"p-3 text-sm",style:{color:"var(--muted)"},children:"Loading communications…"}):((k==null?void 0:k.length)??0)===0?r.jsx("div",{className:"p-3 text-sm",style:{color:"var(--muted)"},children:"No communications to display."}):r.jsxs("div",{className:"relative h-10",children:[r.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),r.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite",color:"var(--fg)"},children:k.map((i,d)=>{var A;return r.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.type&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:i.type}),i.priority&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:i.priority}),typeof i.audienceBranchId<"u"&&i.audienceBranchId!==null&&r.jsx("span",{className:"text-[11px] px-1.5 py-0.5 rounded border",style:{background:"var(--card)",borderColor:"var(--border)"},children:((A=n.find(E=>String(E.id)===String(i.audienceBranchId)))==null?void 0:A.name)||`Branch #${i.audienceBranchId}`}),r.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-600"}),r.jsx("span",{className:"truncate",children:i.text})]},i.id||i.text||d)})})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsxs(he,{to:"/loans/add",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Add Loan"]}),r.jsxs(he,{to:"/borrowers/add",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Add Borrower"]}),r.jsxs(he,{to:"/repayments/new",className:P.btn,children:[r.jsx(Ae,{className:"w-4 h-4"})," Record Repayment"]})]}),r.jsx("main",{className:"space-y-6",children:pt?r.jsx("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:Array.from({length:8}).map((i,d)=>r.jsx(gt,{className:"h-32"},d))}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:[r.jsx(_,{tone:"indigo",title:"Total Borrowers",value:D(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:r.jsx(ma,{className:"w-6 h-6"}),to:R(T.borrowers)}),r.jsx(_,{tone:"sky",title:"Total Loans",value:D(e==null?void 0:e.totalLoans).toLocaleString(),icon:r.jsx(Be,{className:"w-6 h-6"}),to:R(T.loans)}),r.jsx(_,{tone:"blue",title:"Total Disbursed",value:M(e==null?void 0:e.totalDisbursed),icon:r.jsx(Be,{className:"w-6 h-6"}),to:R(T.loans,{tab:"disbursed"})}),r.jsx(_,{tone:"emerald",title:"Total Paid",value:M(e==null?void 0:e.totalPaid),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.repayments,{tab:"paid"})}),r.jsx(_,{tone:"emerald",title:"Total Repaid",value:M(e==null?void 0:e.totalRepaid),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.repayments,{tab:"paid"})}),r.jsx(_,{tone:"indigo",title:"Expected Repayments",value:M(e==null?void 0:e.totalExpectedRepayments),icon:r.jsx(sa,{className:"w-6 h-6"}),to:R(T.expectedRepayments,{tab:"expected"})}),r.jsx(_,{tone:"cyan",title:"Total Deposits",value:M(e==null?void 0:e.totalDeposits),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.deposits)}),r.jsx(_,{tone:"amber",title:"Total Withdrawals",value:M(e==null?void 0:e.totalWithdrawals),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.withdrawals)}),r.jsx(_,{tone:"blue",title:"Net Savings",value:M(e==null?void 0:e.netSavings),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.savings)}),r.jsx(_,{tone:"rose",title:"Defaulted Loan",value:M(e==null?void 0:e.defaultedLoan),icon:r.jsx(qe,{className:"w-6 h-6"}),to:R(T.defaultedLoans,{tab:"defaulted"})}),r.jsx(_,{tone:"rose",title:"Defaulted Interest",value:M(e==null?void 0:e.defaultedInterest),icon:r.jsx(qe,{className:"w-6 h-6"}),to:R(T.defaultedInterest,{tab:"defaulted-interest"})}),r.jsx(_,{tone:"violet",title:"Outstanding Loan",value:M(e==null?void 0:e.outstandingLoan),icon:r.jsx(Be,{className:"w-6 h-6"}),to:R(T.outstandingLoan,{tab:"outstanding"})}),r.jsx(_,{tone:"violet",title:"Outstanding Interest",value:M(e==null?void 0:e.outstandingInterest),icon:r.jsx(X,{className:"w-6 h-6"}),to:R(T.outstandingInterest,{tab:"outstanding-interest"})}),r.jsx(_,{tone:"slate",title:"Written Off",value:M(e==null?void 0:e.writtenOff),icon:r.jsx(ca,{className:"w-6 h-6"}),to:R(T.writtenOff,{tab:"written-off"})}),r.jsx(_,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${D(e==null?void 0:e.parPercent)}%`,icon:r.jsx(Ge,{className:"w-6 h-6"}),to:R(T.par,{tab:"par"})})]}),O&&r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Ge,{className:"w-5 h-5 text-indigo-600"}),r.jsx("h3",{className:"text-lg font-semibold",children:`Monthly Trends${O.month||O.year?` — ${O.month||""} ${O.year||""}`:""}`})]}),r.jsx("div",{className:"mb-4",children:r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:[{name:"Loans",value:D(O.monthlyLoans)},{name:"Deposits",value:D(O.monthlyDeposits)},{name:"Repayments",value:D(O.monthlyRepayments)}],children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"name",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Oe,{wrapperStyle:{color:y.legend}}),r.jsx(Z,{dataKey:"value",fill:y.bar1})]})})}),(()=>{const i=[D(O.monthlyLoans),D(O.monthlyDeposits),D(O.monthlyRepayments)],d=Math.max(...i);return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"text-indigo-600",children:r.jsx(ke,{label:"Loans (count)",value:D(O.monthlyLoans),max:d})}),r.jsx("div",{className:"text-emerald-600",children:r.jsx(ke,{label:"Deposits (TZS)",value:D(O.monthlyDeposits),max:d})}),r.jsx("div",{className:"text-blue-600",children:r.jsx(ke,{label:"Repayments (TZS)",value:D(O.monthlyRepayments),max:d})})]})})()]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:P.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Top Borrowers"})}),ae.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:P.th,children:"Name"}),r.jsx("th",{className:P.th,children:"Outstanding"})]})}),r.jsx("tbody",{children:ae.map(i=>r.jsxs("tr",{children:[r.jsx("td",{className:P.td,children:i.name}),r.jsx("td",{className:P.td,children:M(i.outstanding)})]},i.id))})]})]}),r.jsxs("div",{className:P.tableWrap,children:[r.jsx("div",{className:"p-4 border-b",style:{borderColor:"var(--border)"},children:r.jsx("h3",{className:"text-lg font-semibold",children:"Upcoming Repayments"})}),re.length===0?r.jsx("div",{className:"p-4 text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsxs("table",{className:"min-w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:P.th,children:"Borrower"}),r.jsx("th",{className:P.th,children:"Due Date"}),r.jsx("th",{className:P.th,children:"Amount"})]})}),r.jsx("tbody",{children:re.map(i=>r.jsxs("tr",{children:[r.jsx("td",{className:P.td,children:i.borrower}),r.jsx("td",{className:P.td,children:i.dueDate}),r.jsx("td",{className:P.td,children:M(i.amount)})]},i.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Branch Performance"}),ne.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:ne,children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"branch",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Oe,{wrapperStyle:{color:y.legend}}),r.jsx(Z,{dataKey:"disbursed",fill:y.bar1}),r.jsx(Z,{dataKey:"repayments",fill:y.bar2})]})})]}),r.jsxs("div",{className:`${P.card} p-4`,children:[r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Officer Performance"}),ce.length===0?r.jsx("p",{className:"text-sm",style:{color:"var(--muted)"},children:"No data available."}):r.jsx(Ne,{width:"100%",height:260,children:r.jsxs(Ee,{data:ce,children:[r.jsx(Se,{stroke:y.grid,strokeDasharray:"3 3"}),r.jsx(Pe,{dataKey:"officer",tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ie,{tick:{fill:y.axis},axisLine:{stroke:y.axis},tickLine:{stroke:y.axis}}),r.jsx(Ce,{contentStyle:{backgroundColor:y.tooltipBg,borderColor:y.grid,color:y.tooltipText},wrapperStyle:{outline:"none"}}),r.jsx(Oe,{wrapperStyle:{color:y.legend}}),r.jsx(Z,{dataKey:"loans",fill:y.bar1}),r.jsx(Z,{dataKey:"collections",fill:y.bar2})]})})]})]})]})})]})})},_=({title:t,value:e,icon:a,tone:n="indigo",to:o=null,delta:l=null,deltaLabel:s="",spark:m=null})=>{const v={indigo:"text-indigo-600",sky:"text-sky-600",blue:"text-blue-600",emerald:"text-emerald-600",cyan:"text-cyan-600",amber:"text-amber-600",violet:"text-violet-600",rose:"text-rose-600",slate:"text-slate-500"}[n]||"text-slate-500",u=()=>{if(!Array.isArray(m)||m.length<2)return null;const p=96,g=28,x=2,N=Math.min(...m),j=Math.max(...m),I=Math.max(j-N,1e-6),b=(p-x*2)/(m.length-1),w="M "+m.map((f,S)=>{const k=(x+S*b).toFixed(1),C=(g-x-(f-N)/I*(g-x*2)).toFixed(1);return`${k} ${C}`}).join(" L ");return r.jsx("svg",{width:p,height:g,className:"mt-2 opacity-70",children:r.jsx("path",{d:w,fill:"none",stroke:"currentColor",strokeWidth:"2"})})},h=l==null?"":l>=0?"text-emerald-700 bg-emerald-50 ring-1 ring-emerald-200":"text-rose-700 bg-rose-50 ring-1 ring-rose-200";return r.jsxs("div",{className:"group relative",children:[o&&r.jsx(he,{to:o,className:"absolute inset-0 z-10 rounded-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","aria-label":`View ${t} details`,title:`View ${t} details`}),r.jsxs("div",{className:"relative rounded-2xl p-5 min-h-[10.5rem] shadow transition-all group-hover:shadow-md group-hover:-translate-y-0.5 border-2",style:{background:"var(--card)",borderColor:"var(--border-strong)",color:"var(--fg)"},children:[r.jsxs("div",{className:"relative flex items-start justify-between gap-3",children:[r.jsx("div",{className:`p-3 rounded-full ring-2 ${v}`,style:{background:"var(--card)",boxShadow:"0 1px 0 rgba(0,0,0,.04)"},children:a}),l!=null&&r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium ${h}`,children:[l>=0?"↑":"↓"," ",Math.abs(l).toLocaleString(),"%",s&&r.jsxs("span",{className:"opacity-70",children:[" ",s]})]})]}),r.jsxs("div",{className:"relative mt-3 min-w-0",children:[r.jsx("h3",{className:`text-sm font-semibold truncate ${v}`,children:t}),r.jsx("p",{className:"text-[28px] md:text-[32px] leading-tight font-semibold font-mono tabular-nums break-words",children:e??"—"})]}),r.jsx("div",{className:`relative ${v}`,children:r.jsx(u,{})})]})]})};export{Ir as default};
