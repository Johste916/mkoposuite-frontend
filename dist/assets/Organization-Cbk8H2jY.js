import{r as d,j as e,b as c}from"./index-Y30r8o2M.js";function g(){const[t,r]=d.useState(null),[x,m]=d.useState(null),[o,n]=d.useState(""),i=async()=>{var a,l;n("");try{const s=await c.get("/tenants/me");r(s.data);const u=await c.get("/tenants/me/entitlements");m(u.data)}catch(s){n(((l=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:l.error)||s.message)}};d.useEffect(()=>{i()},[]);const b=async()=>{var a,l;try{await c.patch("/tenants/me",{planCode:t.planCode,trialEndsAt:t.trialEndsAt,autoDisableOverdue:t.autoDisableOverdue,graceDays:t.graceDays,billingEmail:t.billingEmail}),await i()}catch(s){n(((l=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:l.error)||s.message)}};return o?e.jsxs("div",{className:"p-4 text-sm text-rose-600 dark:text-rose-400",children:["Error: ",o]}):!t||!x?e.jsx("div",{className:"p-4 text-sm text-slate-500 dark:text-slate-400",children:"Loadingâ€¦"}):e.jsxs("div",{className:"ms-card p-4 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("label",{children:[e.jsx("div",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Plan"}),e.jsxs("select",{value:t.planCode,onChange:a=>r({...t,planCode:a.target.value}),className:"border rounded px-2 py-2 w-full bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"premium",children:"Premium"})]})]}),e.jsxs("label",{children:[e.jsx("div",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Trial ends"}),e.jsx("input",{type:"date",value:t.trialEndsAt||"",onChange:a=>r({...t,trialEndsAt:a.target.value}),className:"border rounded px-2 py-2 w-full bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!t.autoDisableOverdue,onChange:a=>r({...t,autoDisableOverdue:a.target.checked}),className:"h-4 w-4"}),e.jsx("span",{children:"Auto suspend overdue"})]}),e.jsxs("label",{children:[e.jsx("div",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Grace days"}),e.jsx("input",{type:"number",value:t.graceDays??7,onChange:a=>r({...t,graceDays:Number(a.target.value)}),className:"border rounded px-2 py-2 w-full bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]}),e.jsxs("label",{className:"md:col-span-2",children:[e.jsx("div",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Billing email"}),e.jsx("input",{type:"email",value:t.billingEmail||"",onChange:a=>r({...t,billingEmail:a.target.value}),className:"border rounded px-2 py-2 w-full bg-white dark:bg-slate-900 dark:border-slate-700 dark:text-slate-200"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:b,className:"h-9 px-3 rounded bg-blue-600 text-white hover:bg-blue-700",children:"Save"}),e.jsx("button",{onClick:i,className:"h-9 px-3 rounded ms-btn",children:"Refresh"})]}),e.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-800 pt-3",children:[e.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Entitlements"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm",children:Object.entries(x.modules||{}).map(([a,l])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-44 capitalize text-slate-700 dark:text-slate-200",children:a.replace(/_/g," ")}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${l?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300"}`,children:l?"enabled":"disabled"})]},a))})]})]})}export{g as default};
