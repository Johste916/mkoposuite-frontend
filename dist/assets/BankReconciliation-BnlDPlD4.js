import{r as a,g as c,j as s}from"./index-BR01ehMu.js";const u="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7";function h(){const[r,o]=a.useState([]),[n,l]=a.useState(""),[i,t]=a.useState([]);a.useEffect(()=>{c.get("/banks").then(e=>o(e.data||[]))},[]),a.useEffect(()=>{if(!n)return t([]);c.get(`/banks/${n}/transactions`,{params:{reconciled:"0"}}).then(e=>t(e.data||[]))},[n]);const d=async e=>{e.reconciled?await c.post(`/banks/transactions/${e.id}/unreconcile`):await c.post(`/banks/transactions/${e.id}/reconcile`,{bankRef:e.bankRef||"",note:e.note||""});const m=await c.get(`/banks/${n}/transactions`,{params:{reconciled:"0"}});t(m.data||[])};return s.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Bank Reconciliation"}),s.jsxs("section",{className:u,children:[s.jsx("div",{className:"mb-3",children:s.jsxs("select",{className:"border rounded px-3 py-2",value:n,onChange:e=>l(e.target.value),children:[s.jsx("option",{value:"",children:"— choose bank —"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})}),s.jsxs("ul",{className:"divide-y",children:[i.map(e=>s.jsxs("li",{className:"py-3 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium",children:[new Date(e.occurredAt).toLocaleString()," — ",e.type," (",e.direction,")"]}),s.jsxs("div",{className:"text-gray-500",children:[Number(e.amount).toLocaleString()," ",e.currency||"TZS"," · Ref: ",e.reference||"—"]})]}),s.jsx("button",{onClick:()=>d(e),className:"px-3 py-1 rounded border",children:e.reconciled?"Unreconcile":"Reconcile"})]},e.id)),i.length===0&&s.jsx("li",{className:"py-6 text-center text-gray-500",children:"Nothing to reconcile"})]})]})]})}export{h as default};
