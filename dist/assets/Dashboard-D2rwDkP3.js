import{r as l,g as Z,j as t,L as ye}from"./index-CSL_HVM5.js";import{D as Gt}from"./download-Dq7_PUzt.js";import{C as Ie}from"./circle-plus-C3wZ5nw1.js";import{c as G}from"./createLucideIcon-CK4FChGA.js";import{i as Qe,S as Ut,a as Ne,r as Ht,u as pt,R as Xt,b as Zt,c as Yt,d as Jt,g as Qt,e as ft,f as ea,h as ta,j as aa,k as ke,l as ra,G as sa,C as na,m as gt,n as oa,L as je,o as ia,p as la,t as da,q as et,s as bt,v as vt,w as yt,x as kt,y as ca,z as jt,A as ua,J as ma,B as te,D as xa,E as ha,F as pa,H as fa,I as tt,K as Y,M as ga,N as se,O as ne,P as ie,Q as ba,T as wt,U as Nt,V as At,W as va,X as ya,Y as at,Z as ka,_ as ja,$ as rt,a0 as wa,a1 as $e,a2 as st,a3 as Na,a4 as Aa,a5 as Oe,a6 as Ee,a7 as De,a8 as Be,a9 as Le,aa as Me}from"./CartesianChart-Bff_ePZb.js";import{U as Sa}from"./user-plus-CHv3GHxE.js";import{C as Pa}from"./calendar-BXbUzkNY.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],nt=G("chart-no-axes-column",Ca);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Oa=G("chevron-down",Ia);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ot=G("clipboard-list",Ea);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Te=G("credit-card",Da);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ae=G("dollar-sign",Ba);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Ma=G("message-square",La);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],_a=G("thumbs-down",Ta);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],it=G("triangle-alert",Ra);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Fa=G("users",$a);var Ka="Invariant failed";function za(r,e){throw new Error(Ka)}var Wa=["x","y"];function Fe(){return Fe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},Fe.apply(null,arguments)}function lt(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function me(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?lt(Object(s),!0).forEach(function(n){Va(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):lt(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function Va(r,e,s){return(e=qa(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function qa(r){var e=Ga(r,"string");return typeof e=="symbol"?e:e+""}function Ga(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ua(r,e){if(r==null)return{};var s,n,c=Ha(r,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(n=0;n<d.length;n++)s=d[n],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}function Ha(r,e){if(r==null)return{};var s={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;s[n]=r[n]}return s}function Xa(r,e){var{x:s,y:n}=r,c=Ua(r,Wa),d="".concat(s),m=parseInt(d,10),p="".concat(n),v=parseInt(p,10),h="".concat(e.height||c.height),f=parseInt(h,10),g="".concat(e.width||c.width),y=parseInt(g,10);return me(me(me(me(me({},e),c),m?{x:m}:{}),v?{y:v}:{}),{},{height:f,width:y,name:e.name,radius:e.radius})}function St(r){return l.createElement(Ut,Fe({shapeType:"rectangle",propTransformer:Xa,activeClassName:"recharts-active-bar"},r))}var Za=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,c)=>{if(Qe(e))return e;var d=Qe(n)||Ne(n);return d?e(n,c):(d||za(),s)}},Ya=["onMouseEnter","onMouseLeave","onClick"],Ja=["value","background","tooltipPosition"],Qa=["id"],er=["onMouseEnter","onClick","onMouseLeave"];function oe(){return oe=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(r[n]=s[n])}return r},oe.apply(null,arguments)}function dt(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function L(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?dt(Object(s),!0).forEach(function(n){tr(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):dt(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function tr(r,e,s){return(e=ar(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function ar(r){var e=rr(r,"string");return typeof e=="symbol"?e:e+""}function rr(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function we(r,e){if(r==null)return{};var s,n,c=sr(r,e);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(r);for(n=0;n<d.length;n++)s=d[n],e.indexOf(s)===-1&&{}.propertyIsEnumerable.call(r,s)&&(c[s]=r[s])}return c}function sr(r,e){if(r==null)return{};var s={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;s[n]=r[n]}return s}var nr=r=>{var{dataKey:e,name:s,fill:n,legendType:c,hide:d}=r;return[{inactive:d,dataKey:e,type:c,color:n,value:ft(s,e),payload:r}]};function or(r){var{dataKey:e,stroke:s,strokeWidth:n,fill:c,name:d,hide:m,unit:p}=r;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:c,dataKey:e,nameKey:void 0,name:ft(d,e),hide:m,type:r.tooltipType,color:r.fill,unit:p}}}function ir(r){var e=ke(bt),{data:s,dataKey:n,background:c,allOtherBarProps:d}=r,{onMouseEnter:m,onMouseLeave:p,onClick:v}=d,h=we(d,Ya),f=vt(m,n),g=yt(p),y=kt(v,n);if(!c||s==null)return null;var b=ca(c,!1);return l.createElement(l.Fragment,null,s.map((S,w)=>{var{value:C,background:j,tooltipPosition:A}=S,x=we(S,Ja);if(!j)return null;var P=f(S,w),N=g(S,w),I=y(S,w),O=L(L(L(L(L({option:c,isActive:String(w)===e},x),{},{fill:"#eee"},j),b),jt(h,S,w)),{},{onMouseEnter:P,onMouseLeave:N,onClick:I,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return l.createElement(St,oe({key:"background-bar-".concat(w)},O))}))}function Pt(r){var{data:e,props:s,showLabels:n}=r,c=xa(s),{id:d}=c,m=we(c,Qa),{shape:p,dataKey:v,activeBar:h}=s,f=ke(bt),g=ke(ha),{onMouseEnter:y,onClick:b,onMouseLeave:S}=s,w=we(s,er),C=vt(y,v),j=yt(S),A=kt(b,v);return e?l.createElement(l.Fragment,null,e.map((x,P)=>{var N=h&&String(P)===f&&(g==null||v===g),I=N?h:p,O=L(L(L({},m),x),{},{isActive:N,option:I,index:P,dataKey:v});return l.createElement(je,oe({className:"recharts-bar-rectangle"},jt(w,x,P),{onMouseEnter:C(x,P),onMouseLeave:j(x,P),onClick:A(x,P),key:"rectangle-".concat(x==null?void 0:x.x,"-").concat(x==null?void 0:x.y,"-").concat(x==null?void 0:x.value,"-").concat(P)}),l.createElement(St,O))}),n&&pa.renderCallByParent(s,e)):null}function lr(r){var{props:e,previousRectanglesRef:s}=r,{data:n,layout:c,isAnimationActive:d,animationBegin:m,animationDuration:p,animationEasing:v,onAnimationEnd:h,onAnimationStart:f}=e,g=s.current,y=ua(e,"recharts-bar-"),[b,S]=l.useState(!1),w=l.useCallback(()=>{typeof h=="function"&&h(),S(!1)},[h]),C=l.useCallback(()=>{typeof f=="function"&&f(),S(!0)},[f]);return l.createElement(ma,{begin:m,duration:p,isActive:d,easing:v,onAnimationEnd:w,onAnimationStart:C,key:y},j=>{var A=j===1?n:n==null?void 0:n.map((x,P)=>{var N=g&&g[P];if(N)return L(L({},x),{},{x:te(N.x,x.x,j),y:te(N.y,x.y,j),width:te(N.width,x.width,j),height:te(N.height,x.height,j)});if(c==="horizontal"){var I=te(0,x.height,j);return L(L({},x),{},{y:x.y+x.height-I,height:I})}var O=te(0,x.width,j);return L(L({},x),{},{width:O})});return j>0&&(s.current=A??null),A==null?null:l.createElement(je,null,l.createElement(Pt,{props:e,data:A,showLabels:!b}))})}function dr(r){var{data:e,isAnimationActive:s}=r,n=l.useRef(null);return s&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(lr,{previousRectanglesRef:n,props:r}):l.createElement(Pt,{props:r,data:e,showLabels:!0})}var Ct=0,cr=(r,e)=>{var s=Array.isArray(r.value)?r.value[1]:r.value;return{x:r.x,y:r.y,value:s,errorVal:gt(r,e)}};class ur extends l.PureComponent{render(){var{hide:e,data:s,dataKey:n,className:c,xAxisId:d,yAxisId:m,needClip:p,background:v,id:h}=this.props;if(e)return null;var f=oa("recharts-bar",c),g=h;return l.createElement(je,{className:f,id:h},p&&l.createElement("defs",null,l.createElement(ia,{clipPathId:g,xAxisId:d,yAxisId:m})),l.createElement(je,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(g,")"):void 0},l.createElement(ir,{data:s,dataKey:n,background:v,allOtherBarProps:this.props}),l.createElement(dr,this.props)),this.props.children)}}var mr={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!sa.isSsr,legendType:"rect",minPointSize:Ct,xAxisId:0,yAxisId:0};function xr(r){var{xAxisId:e,yAxisId:s,hide:n,legendType:c,minPointSize:d,activeBar:m,animationBegin:p,animationDuration:v,animationEasing:h,isAnimationActive:f}=r,{needClip:g}=ea(e,s),y=ta(),b=pt(),S=aa(r.children,na),w=ke(A=>Fr(A,e,s,b,r.id,S));if(y!=="vertical"&&y!=="horizontal")return null;var C,j=w==null?void 0:w[0];return j==null||j.height==null||j.width==null?C=0:C=y==="vertical"?j.height/2:j.width/2,l.createElement(ra,{xAxisId:e,yAxisId:s,data:w,dataPointFormatter:cr,errorBarOffset:C},l.createElement(ur,oe({},r,{layout:y,needClip:g,data:w,xAxisId:e,yAxisId:s,hide:n,legendType:c,minPointSize:d,activeBar:m,animationBegin:p,animationDuration:v,animationEasing:h,isAnimationActive:f})))}function hr(r){var{layout:e,barSettings:{dataKey:s,minPointSize:n},pos:c,bandSize:d,xAxis:m,yAxis:p,xAxisTicks:v,yAxisTicks:h,stackedData:f,displayedData:g,offset:y,cells:b}=r,S=e==="horizontal"?p:m,w=f?S.scale.domain():null,C=la({numericAxis:S});return g.map((j,A)=>{var x,P,N,I,O,Q;f?x=da(f[A],w):(x=gt(j,s),Array.isArray(x)||(x=[C,x]));var V=Za(n,Ct)(x[1],A);if(e==="horizontal"){var le,[U,ee]=[p.scale(x[0]),p.scale(x[1])];P=et({axis:m,ticks:v,bandSize:d,offset:c.offset,entry:j,index:A}),N=(le=ee??U)!==null&&le!==void 0?le:void 0,I=c.size;var K=U-ee;if(O=fa(K)?0:K,Q={x:P,y:y.top,width:I,height:y.height},Math.abs(V)>0&&Math.abs(O)<Math.abs(V)){var J=tt(O||V)*(Math.abs(V)-Math.abs(O));N-=J,O+=J}}else{var[H,de]=[m.scale(x[0]),m.scale(x[1])];if(P=H,N=et({axis:p,ticks:h,bandSize:d,offset:c.offset,entry:j,index:A}),I=de-H,O=c.size,Q={x:y.left,y:N,width:y.width,height:O},Math.abs(V)>0&&Math.abs(I)<Math.abs(V)){var Ae=tt(I||V)*(Math.abs(V)-Math.abs(I));I+=Ae}}if(P==null||N==null||I==null||O==null)return null;var ce=L(L({},j),{},{x:P,y:N,width:I,height:O,value:f?x:x[1],payload:j,background:Q,tooltipPosition:{x:P+I/2,y:N+O/2}},b&&b[A]&&b[A].props);return ce}).filter(Boolean)}function re(r){var e=Ht(r,mr),s=pt();return l.createElement(Xt,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Zt,{legendPayload:nr(e)}),l.createElement(Yt,{fn:or,args:e}),l.createElement(Jt,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Qt(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:s}),l.createElement(xr,oe({},e,{id:n}))))}re.displayName="Bar";function ct(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(c){return Object.getOwnPropertyDescriptor(r,c).enumerable})),s.push.apply(s,n)}return s}function ve(r){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ct(Object(s),!0).forEach(function(n){pr(r,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):ct(Object(s)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(s,n))})}return r}function pr(r,e,s){return(e=fr(e))in r?Object.defineProperty(r,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[e]=s,r}function fr(r){var e=gr(r,"string");return typeof e=="symbol"?e:e+""}function gr(r,e){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var n=s.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var br=(r,e)=>e,vr=(r,e,s)=>s,yr=(r,e,s,n)=>n,kr=(r,e,s,n,c)=>c,he=Y([Nt,kr],(r,e)=>r.filter(s=>s.type==="bar").find(s=>s.id===e)),jr=Y([he],r=>r==null?void 0:r.maxBarSize),wr=(r,e,s,n,c,d)=>d,ut=(r,e,s)=>{var n=s??r;if(!Ne(n))return $e(n,e,0)},Nr=Y([ie,Nt,br,vr,yr],(r,e,s,n,c)=>e.filter(d=>r==="horizontal"?d.xAxisId===s:d.yAxisId===n).filter(d=>d.isPanorama===c).filter(d=>d.hide===!1).filter(d=>d.type==="bar")),Ar=(r,e,s,n)=>{var c=ie(r);return c==="horizontal"?at(r,"yAxis",s,n):at(r,"xAxis",e,n)},Sr=(r,e,s)=>{var n=ie(r);return n==="horizontal"?rt(r,"xAxis",e):rt(r,"yAxis",s)},Pr=(r,e,s)=>{var n={},c=r.filter(wa),d=r.filter(h=>h.stackId==null),m=c.reduce((h,f)=>(h[f.stackId]||(h[f.stackId]=[]),h[f.stackId].push(f),h),n),p=Object.entries(m).map(h=>{var[f,g]=h,y=g.map(S=>S.dataKey),b=ut(e,s,g[0].barSize);return{stackId:f,dataKeys:y,barSize:b}}),v=d.map(h=>{var f=[h.dataKey].filter(y=>y!=null),g=ut(e,s,h.barSize);return{stackId:void 0,dataKeys:f,barSize:g}});return[...p,...v]},Cr=Y([Nr,ja,Sr],Pr),Ir=(r,e,s,n,c)=>{var d,m,p=he(r,e,s,n,c);if(p!=null){var v=ie(r),h=At(r),{maxBarSize:f}=p,g=Ne(f)?h:f,y,b;return v==="horizontal"?(y=se(r,"xAxis",e,n),b=ne(r,"xAxis",e,n)):(y=se(r,"yAxis",s,n),b=ne(r,"yAxis",s,n)),(d=(m=wt(y,b,!0))!==null&&m!==void 0?m:g)!==null&&d!==void 0?d:0}},It=(r,e,s,n)=>{var c=ie(r),d,m;return c==="horizontal"?(d=se(r,"xAxis",e,n),m=ne(r,"xAxis",e,n)):(d=se(r,"yAxis",s,n),m=ne(r,"yAxis",s,n)),wt(d,m)};function Or(r,e,s,n,c){var d=n.length;if(!(d<1)){var m=$e(r,s,0,!0),p,v=[];if(st(n[0].barSize)){var h=!1,f=s/d,g=n.reduce((j,A)=>j+(A.barSize||0),0);g+=(d-1)*m,g>=s&&(g-=(d-1)*m,m=0),g>=s&&f>0&&(h=!0,f*=.9,g=d*f);var y=(s-g)/2>>0,b={offset:y-m,size:0};p=n.reduce((j,A)=>{var x,P={stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:b.offset+b.size+m,size:h?f:(x=A.barSize)!==null&&x!==void 0?x:0}},N=[...j,P];return b=N[N.length-1].position,N},v)}else{var S=$e(e,s,0,!0);s-2*S-(d-1)*m<=0&&(m=0);var w=(s-2*S-(d-1)*m)/d;w>1&&(w>>=0);var C=st(c)?Math.min(w,c):w;p=n.reduce((j,A,x)=>[...j,{stackId:A.stackId,dataKeys:A.dataKeys,position:{offset:S+(w+m)*x+(w-C)/2,size:C}}],v)}return p}}var Er=(r,e,s,n,c,d,m)=>{var p=Ne(m)?e:m,v=Or(s,n,c!==d?c:d,r,p);return c!==d&&v!=null&&(v=v.map(h=>ve(ve({},h),{},{position:ve(ve({},h.position),{},{offset:h.position.offset-c/2})}))),v},Dr=Y([Cr,At,va,ya,Ir,It,jr],Er),Br=(r,e,s,n)=>se(r,"xAxis",e,n),Lr=(r,e,s,n)=>se(r,"yAxis",s,n),Mr=(r,e,s,n)=>ne(r,"xAxis",e,n),Tr=(r,e,s,n)=>ne(r,"yAxis",s,n),_r=Y([Dr,he],(r,e)=>{if(!(r==null||e==null)){var s=r.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(s!=null)return s.position}}),Rr=(r,e)=>{var s=ka(e);if(!(!r||s==null||e==null)){var{stackId:n}=e;if(n!=null){var c=r[n];if(c){var{stackedData:d}=c;if(d)return d.find(m=>m.key===s)}}}},$r=Y([Ar,he],Rr),Fr=Y([ga,Br,Lr,Mr,Tr,_r,ie,ba,It,$r,he,wr],(r,e,s,n,c,d,m,p,v,h,f,g)=>{var{chartData:y,dataStartIndex:b,dataEndIndex:S}=p;if(!(f==null||d==null||m!=="horizontal"&&m!=="vertical"||e==null||s==null||n==null||c==null||v==null)){var{data:w}=f,C;if(w!=null&&w.length>0?C=w:C=y==null?void 0:y.slice(b,S+1),C!=null)return hr({layout:m,barSettings:f,pos:d,bandSize:v,xAxis:e,yAxis:s,xAxisTicks:n,yAxisTicks:c,stackedData:h,displayedData:C,offset:r,cells:g})}}),Kr=["axis","item"],_e=l.forwardRef((r,e)=>l.createElement(Na,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kr,tooltipPayloadSearcher:Aa,categoricalChartProps:r,ref:e}));const _={borrowers:"/borrowers",loans:"/loans",repayments:"/repayments",expectedRepayments:"/repayments",deposits:"/deposits",withdrawals:"/withdrawals",savings:"/savings",defaultedLoans:"/loans",defaultedInterest:"/loans",outstandingLoan:"/loans",outstandingInterest:"/loans",writtenOff:"/loans",par:"/loans"},mt="ms_dash_filters_v1",xt="ms_dash_auto_refresh_v1",zr=()=>{const[r,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const s=document.documentElement,n=new MutationObserver(()=>{e(s.classList.contains("dark"))});return n.observe(s,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),r},Wr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),Ke="h-10 w-full rounded-lg border text-sm outline-none transition bg-white text-slate-900 border-slate-300 focus:ring-2 focus:ring-indigo-500/50 dark:bg-slate-800 dark:text-slate-100 dark:border-slate-700",xe=({className:r="",children:e,...s})=>t.jsxs("div",{className:`relative ${r}`,children:[t.jsx("select",{...s,className:`${Ke} pr-9 appearance-none`,children:e}),t.jsx(Oa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 dark:text-slate-300","aria-hidden":"true"})]}),Re=({className:r="",...e})=>t.jsxs("div",{className:`relative ${r}`,children:[t.jsx("input",{type:"date",...e,className:`${Ke} pr-9`}),t.jsx(Pa,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-600 dark:text-slate-300","aria-hidden":"true"})]}),ht=({className:r="",...e})=>t.jsx("input",{...e,className:`${Ke} ${r}`}),Yr=()=>{const r=zr(),[e,s]=l.useState(null),[n,c]=l.useState([]),[d,m]=l.useState([]),[p,v]=l.useState(""),[h,f]=l.useState(""),[g,y]=l.useState(""),[b,S]=l.useState(0),[w,C]=l.useState(null),[j,A]=l.useState(null),[x,P]=l.useState(Date.now()),[N,I]=l.useState([]),[O,Q]=l.useState(!1),[V,le]=l.useState([]),[U,ee]=l.useState(0),[K,J]=l.useState(1),H=10,[de,Ae]=l.useState(""),[ce,Ot]=l.useState(""),[ze,We]=l.useState({}),[pe,fe]=l.useState({}),[Ve,ge]=l.useState({}),[$,Et]=l.useState(null),[qe,Dt]=l.useState([]),[Ge,Bt]=l.useState([]),[Ue,Lt]=l.useState([]),[He,Mt]=l.useState([]),[Tt,_t]=l.useState(!0),[Rt,Xe]=l.useState([]),z=(o,i="info")=>{const u=Math.random().toString(36).slice(2);Xe(D=>[...D,{id:u,msg:o,type:i}]),setTimeout(()=>Xe(D=>D.filter(E=>E.id!==u)),3500)},M=o=>{const i=Number(o);return Number.isFinite(i)?i:0},F=o=>{const i=M(o);return Number.isNaN(i)?"TZS —":`TZS ${Wr.format(i)}`},T=(o,i={})=>{try{const u=new URLSearchParams;p&&u.set("branchId",p),h&&u.set("officerId",h),g&&u.set("timeRange",g),Object.entries(i).forEach(([E,q])=>{q!=null&&String(q)!==""&&u.set(E,q)});const D=u.toString();return D?`${o}?${D}`:o}catch{return o}},$t=o=>{var i;return((i=n.find(u=>String(u.id)===String(o)))==null?void 0:i.name)||(o?`Branch #${o}`:"All branches")};l.useEffect(()=>{try{const o=localStorage.getItem(mt);if(o){const i=JSON.parse(o);v(i.branchId||""),f(i.officerId||""),y(i.timeRange||"")}}catch{}try{const o=localStorage.getItem(xt);o&&S(Number(o)||0)}catch{}},[]),l.useEffect(()=>{const o={branchId:p,officerId:h,timeRange:g};localStorage.setItem(mt,JSON.stringify(o))},[p,h,g]),l.useEffect(()=>{localStorage.setItem(xt,String(b||0))},[b]);const Ze=l.useCallback(async o=>{try{const[i,u]=await Promise.all([Z.get("/branches",{signal:o}),Z.get("/users",{params:{role:"loan_officer"},signal:o})]);c(Array.isArray(i.data)?i.data:[]),m(Array.isArray(u.data)?u.data:[])}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),z("Failed to load filters","error"))}},[]),Se=l.useCallback(async o=>{try{const i=await Z.get("/dashboard/summary",{params:{branchId:p,officerId:h,timeRange:g},signal:o});s(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),z("Failed to load summary","error"))}},[p,h,g]),ue=l.useCallback(async o=>{Q(!0);try{const i=await Z.get("/dashboard/communications",{signal:o}).catch(()=>null);i!=null&&i.data&&Array.isArray(i.data)?I(i.data):I(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{Q(!1)}},[e]),X=l.useCallback(async(o={},i)=>{var u,D;try{const E=await Z.get("/dashboard/activity",{params:{page:o.page??K,pageSize:H,dateFrom:de||void 0,dateTo:ce||void 0},signal:i});le(((u=E.data)==null?void 0:u.items)||[]),ee(((D=E.data)==null?void 0:D.total)||0)}catch(E){(E==null?void 0:E.name)!=="CanceledError"&&(console.error("Activity fetch error:",(E==null?void 0:E.message)||E),z("Failed to load activity","error"))}},[K,de,ce]),Pe=l.useCallback(async o=>{try{const i=await Z.get("/dashboard/monthly-trends",{signal:o});Et(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),z("Failed to load trends","error"))}},[]);l.useEffect(()=>{const o=new AbortController;return(async()=>{try{await Ze(o.signal)}catch{}})(),()=>o.abort()},[Ze]);const be=l.useCallback(async o=>{await Promise.all([Se(o),X({},o),Pe(o)]),C(new Date),b>0&&A(Date.now()+b*6e4)},[Se,X,Pe,b]);l.useEffect(()=>{const o=new AbortController;return(async()=>{try{await be(o.signal)}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),z("Failed to load dashboard data","error"))}finally{_t(!1)}})(),()=>o.abort()},[be]),l.useEffect(()=>{if(!e)return;const o=new AbortController;return ue(o.signal).catch(i=>{(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),z("Failed to load communications","error"))}),()=>o.abort()},[e,ue]),l.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&Dt(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&Bt(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&Lt(e.branchPerformance),Array.isArray(e.officerPerformance)&&Mt(e.officerPerformance))},[e]),l.useEffect(()=>{if(!b||b<=0){A(null);return}const i=setInterval(()=>{const u=new AbortController;Promise.all([be(u.signal),ue(u.signal)]).catch(()=>{}).finally(()=>u.abort())},b*6e4);return A(Date.now()+b*6e4),()=>clearInterval(i)},[b,be,ue]),l.useEffect(()=>{const o=setInterval(()=>P(Date.now()),1e3);return()=>clearInterval(o)},[]);const Ft=async o=>{const i=`c-${o}`;ge(u=>({...u,[i]:!0}));try{const u=(ze[o]||"").trim();if(!u)return;await Z.post(`/dashboard/activity/${o}/comment`,{comment:u}),We(D=>({...D,[o]:""})),await X(),z("Reply posted","success")}catch(u){console.error("Add comment error:",(u==null?void 0:u.message)||u),z("Failed to post reply","error")}finally{ge(u=>({...u,[i]:!1}))}},Kt=async o=>{const i=`a-${o}`;ge(u=>({...u,[i]:!0}));try{const u=pe[o]||{};if(!u.assigneeId)return;await Z.post(`/dashboard/activity/${o}/assign`,{assigneeId:u.assigneeId,dueDate:u.dueDate||null,note:u.note||""}),fe(D=>({...D,[a.id]:{assigneeId:"",dueDate:"",note:""}})),await X(),z("Task assigned","success")}catch(u){console.error("Assign task error:",(u==null?void 0:u.message)||u),z("Failed to assign task","error")}finally{ge(u=>({...u,[i]:!1}))}},Ce=({label:o,value:i,max:u})=>{const D=M(i),E=M(u),q=E>0?Math.round(D/E*100):0;return t.jsxs("div",{className:"space-y-1",children:[t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 dark:text-slate-300",children:[t.jsx("span",{children:o}),t.jsx("span",{className:"tabular-nums",children:D.toLocaleString()})]}),t.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded",children:t.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${q}%`,backgroundColor:"currentColor"}})})]})},zt=({className:o=""})=>t.jsx("div",{className:`animate-pulse bg-gray-100 dark:bg-slate-800/50 rounded ${o}`}),Wt=()=>{const o=N.flatMap(i=>(i.attachments||[]).map(u=>u.fileUrl)).filter(Boolean);o.length!==0&&(o.forEach((i,u)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),u*150)}),z(`Opening ${o.length} attachment${o.length>1?"s":""}…`,"info"))},k=r?{grid:"#334155",axis:"#cbd5e1",legend:"#e2e8f0",tooltipBg:"#0b1220",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#334155",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"},Ye=j?Math.max(0,Math.floor((j-x)/1e3)):0,Vt=String(Math.floor(Ye/60)).padStart(2,"0"),qt=String(Ye%60).padStart(2,"0");return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"rounded-2xl bg-white/90 dark:bg-slate-900/85 backdrop-blur supports-[backdrop-filter]:backdrop-blur-sm border border-slate-200 dark:border-slate-800 p-4 md:p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-900 dark:text-white tracking-tight",children:"Dashboard"}),t.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."}),t.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300/90 mt-1",children:w?`Last updated ${w.toLocaleString()}`:"Loading…"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[t.jsxs(xe,{"aria-label":"Filter by branch",value:p,onChange:o=>v(o.target.value),className:"min-w-[11rem]",children:[t.jsx("option",{value:"",children:"All Branches"}),n.map(o=>t.jsx("option",{value:o.id,children:o.name},o.id))]}),t.jsxs(xe,{"aria-label":"Filter by loan officer",value:h,onChange:o=>f(o.target.value),className:"min-w-[12rem]",children:[t.jsx("option",{value:"",children:"All Loan Officers"}),d.map(o=>t.jsx("option",{value:o.id,children:o.name||o.email},o.id))]}),t.jsxs(xe,{"aria-label":"Filter by time range",value:g,onChange:o=>y(o.target.value),className:"min-w-[10rem]",children:[t.jsx("option",{value:"",children:"All Time"}),t.jsx("option",{value:"today",children:"Today"}),t.jsx("option",{value:"week",children:"This Week"}),t.jsx("option",{value:"month",children:"This Month"}),t.jsx("option",{value:"quarter",children:"This Quarter"}),t.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),t.jsx("option",{value:"annual",children:"Annual"})]}),t.jsxs(xe,{"aria-label":"Auto refresh interval",value:b,onChange:o=>S(Number(o.target.value)),className:"min-w-[12rem]",children:[t.jsx("option",{value:0,children:"No Auto-Refresh"}),t.jsx("option",{value:1,children:"Every 1 min"}),t.jsx("option",{value:5,children:"Every 5 mins"}),t.jsx("option",{value:15,children:"Every 15 mins"})]}),t.jsx("button",{className:`ms-btn h-10 px-3.5 sm:px-4 inline-flex items-center justify-center whitespace-nowrap shrink-0
                         bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-700
                         hover:bg-slate-50 dark:hover:bg-slate-800/80 rounded-lg`,onClick:()=>{const o=new AbortController;Promise.all([Se(o.signal),X({page:1},o.signal),Pe(o.signal),ue(o.signal)]).then(()=>{J(1),C(new Date),b>0&&A(Date.now()+b*6e4),z("Dashboard refreshed","success")}).catch(()=>z("Refresh failed","error")).finally(()=>o.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]}),b>0&&j&&t.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 rounded-full border border-slate-200 dark:border-slate-700 px-2.5 py-1 text-xs text-slate-700 dark:text-slate-200",children:["Auto-refresh in ",Vt,":",qt]})]}),t.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:Rt.map(o=>t.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${o.type==="error"?"bg-red-600":o.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:o.msg},o.id))}),((N==null?void 0:N.length)??0)>0&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 dark:bg-slate-800/60 dark:border-slate-700",children:[t.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-slate-200",children:"General Communications"}),N.some(o=>Array.isArray(o.attachments)&&o.attachments.length>0)&&t.jsxs("button",{onClick:Wt,className:"text-xs flex items-center gap-1 border rounded px-2 py-1 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",disabled:O,children:[t.jsx(Gt,{className:"w-3 h-3"})," Download all"]})]}),t.jsxs("div",{className:"relative h-10",children:[t.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),t.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-800 dark:text-slate-100 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:N.map((o,i)=>t.jsxs("span",{className:"inline-flex items-center gap-2",children:[o.type&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:o.type}),o.priority&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:o.priority}),o.audienceRole&&t.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:["role: ",o.audienceRole]}),typeof o.audienceBranchId<"u"&&o.audienceBranchId!==null&&t.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:$t(o.audienceBranchId)}),t.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),t.jsx("span",{className:"truncate",children:o.text})]},o.id||o.text||i))})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3",children:[t.jsxs(ye,{to:"/loans/add",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ie,{className:"w-4 h-4"})," Add Loan"]}),t.jsxs(ye,{to:"/borrowers/add",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ie,{className:"w-4 h-4"})," Add Borrower"]}),t.jsxs(ye,{to:"/repayments/new",className:`ms-btn px-3 py-2 flex items-center gap-2 shadow-sm rounded-lg
                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ie,{className:"w-4 h-4"})," Record Repayment"]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[t.jsx("main",{className:"space-y-6",children:Tt?t.jsx("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:Array.from({length:8}).map((o,i)=>t.jsx(zt,{className:"h-32"},i))}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid gap-6 [grid-template-columns:repeat(auto-fit,minmax(230px,1fr))]",children:[t.jsx(R,{tone:"indigo",title:"Total Borrowers",value:M(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:t.jsx(Fa,{className:"w-6 h-6"}),to:T(_.borrowers)}),t.jsx(R,{tone:"sky",title:"Total Loans",value:M(e==null?void 0:e.totalLoans).toLocaleString(),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.loans)}),t.jsx(R,{tone:"blue",title:"Total Disbursed",value:F(e==null?void 0:e.totalDisbursed),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.loans,{tab:"disbursed"})}),t.jsx(R,{tone:"emerald",title:"Total Paid",value:F(e==null?void 0:e.totalPaid),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.repayments,{tab:"paid"})}),t.jsx(R,{tone:"emerald",title:"Total Repaid",value:F(e==null?void 0:e.totalRepaid),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.repayments,{tab:"paid"})}),t.jsx(R,{tone:"indigo",title:"Expected Repayments",value:F(e==null?void 0:e.totalExpectedRepayments),icon:t.jsx(ot,{className:"w-6 h-6"}),to:T(_.expectedRepayments,{tab:"expected"})}),t.jsx(R,{tone:"cyan",title:"Total Deposits",value:F(e==null?void 0:e.totalDeposits),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.deposits)}),t.jsx(R,{tone:"amber",title:"Total Withdrawals",value:F(e==null?void 0:e.totalWithdrawals),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.withdrawals)}),t.jsx(R,{tone:"blue",title:"Net Savings",value:F(e==null?void 0:e.netSavings),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.savings)}),t.jsx(R,{tone:"rose",title:"Defaulted Loan",value:F(e==null?void 0:e.defaultedLoan),icon:t.jsx(it,{className:"w-6 h-6"}),to:T(_.defaultedLoans,{tab:"defaulted"})}),t.jsx(R,{tone:"rose",title:"Defaulted Interest",value:F(e==null?void 0:e.defaultedInterest),icon:t.jsx(it,{className:"w-6 h-6"}),to:T(_.defaultedInterest,{tab:"defaulted-interest"})}),t.jsx(R,{tone:"violet",title:"Outstanding Loan",value:F(e==null?void 0:e.outstandingLoan),icon:t.jsx(Te,{className:"w-6 h-6"}),to:T(_.outstandingLoan,{tab:"outstanding"})}),t.jsx(R,{tone:"violet",title:"Outstanding Interest",value:F(e==null?void 0:e.outstandingInterest),icon:t.jsx(ae,{className:"w-6 h-6"}),to:T(_.outstandingInterest,{tab:"outstanding-interest"})}),t.jsx(R,{tone:"slate",title:"Written Off",value:F(e==null?void 0:e.writtenOff),icon:t.jsx(_a,{className:"w-6 h-6"}),to:T(_.writtenOff,{tab:"written-off"})}),t.jsx(R,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${M(e==null?void 0:e.parPercent)}%`,icon:t.jsx(nt,{className:"w-6 h-6"}),to:T(_.par,{tab:"par"})})]}),$&&t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(nt,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-slate-100",children:`Monthly Trends${$.month||$.year?` — ${$.month||""} ${$.year||""}`:""}`})]}),t.jsx("div",{className:"mb-4",children:t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:[{name:"Loans",value:M($.monthlyLoans)},{name:"Deposits",value:M($.monthlyDeposits)},{name:"Repayments",value:M($.monthlyRepayments)}],children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"name",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"value",fill:k.bar1})]})})}),(()=>{const o=[M($.monthlyLoans),M($.monthlyDeposits),M($.monthlyRepayments)],i=Math.max(...o);return t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"text-indigo-600 dark:text-indigo-400",children:t.jsx(Ce,{label:"Loans (count)",value:M($.monthlyLoans),max:i})}),t.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:t.jsx(Ce,{label:"Deposits (TZS)",value:M($.monthlyDeposits),max:i})}),t.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:t.jsx(Ce,{label:"Repayments (TZS)",value:M($.monthlyRepayments),max:i})})]})})()]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Top Borrowers"}),qe.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-700 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Name"}),t.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),t.jsx("tbody",{className:"text-slate-900 dark:text-slate-100",children:qe.map(o=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:o.name}),t.jsx("td",{className:"py-1 pr-4",children:F(o.outstanding)})]},o.id))})]})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Upcoming Repayments"}),Ge.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsxs("table",{className:"min-w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-left text-gray-700 dark:text-slate-300",children:[t.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),t.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),t.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),t.jsx("tbody",{className:"text-slate-900 dark:text-slate-100",children:Ge.map(o=>t.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[t.jsx("td",{className:"py-1 pr-4",children:o.borrower}),t.jsx("td",{className:"py-1 pr-4",children:o.dueDate}),t.jsx("td",{className:"py-1 pr-4",children:F(o.amount)})]},o.id))})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Branch Performance"}),Ue.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:Ue,children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"branch",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"disbursed",fill:k.bar1}),t.jsx(re,{dataKey:"repayments",fill:k.bar2})]})})]}),t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Officer Performance"}),He.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No data available."}):t.jsx(Oe,{width:"100%",height:260,children:t.jsxs(_e,{data:He,children:[t.jsx(Ee,{stroke:k.grid,strokeDasharray:"3 3"}),t.jsx(De,{dataKey:"officer",tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Be,{tick:{fill:k.axis},axisLine:{stroke:k.axis},tickLine:{stroke:k.axis}}),t.jsx(Le,{contentStyle:{backgroundColor:k.tooltipBg,borderColor:k.grid,color:k.tooltipText},wrapperStyle:{outline:"none"}}),t.jsx(Me,{wrapperStyle:{color:k.legend}}),t.jsx(re,{dataKey:"loans",fill:k.bar1}),t.jsx(re,{dataKey:"collections",fill:k.bar2})]})})]})]})]})}),t.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx(ot,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),t.jsx("h2",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Recent Activity"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[t.jsx(Re,{value:de,onChange:o=>Ae(o.target.value),className:"h-9"}),t.jsx(Re,{value:ce,onChange:o=>Ot(o.target.value),className:"h-9"}),t.jsx("button",{className:`ms-btn col-span-2 h-9 text-sm rounded-lg
                           bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                           border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,onClick:()=>{J(1),X({page:1})},children:"Search by date"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent dark:from-slate-900"}),t.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:V.length===0?t.jsx("p",{className:"text-gray-700 dark:text-slate-300 text-sm",children:"No activity."}):V.map(o=>{var i,u,D,E,q;return t.jsxs("div",{className:"border rounded p-3 border-slate-200 dark:border-slate-700",children:[t.jsxs("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:[o.type," • ",o.entityType," #",o.entityId]}),t.jsx("p",{className:"text-xs text-slate-800 dark:text-slate-200 break-words",children:o.message}),t.jsxs("p",{className:"text-[11px] text-slate-600 dark:text-slate-400 mt-1",children:["by ",((i=o.createdBy)==null?void 0:i.name)||((u=o.createdBy)==null?void 0:u.email)," • ",new Date(o.createdAt).toLocaleString()]}),Array.isArray(o.comments)&&o.comments.length>0&&t.jsx("div",{className:"mt-2 space-y-1",children:o.comments.map(B=>{var W,Je;return t.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-2",children:[t.jsx("p",{className:"text-xs text-gray-900 dark:text-slate-100 break-words",children:B.comment}),t.jsxs("p",{className:"text-[11px] text-gray-600 dark:text-slate-400 mt-0.5",children:["— ",((W=B.createdBy)==null?void 0:W.name)||((Je=B.createdBy)==null?void 0:Je.email)," • ",new Date(B.createdAt).toLocaleString()]})]},B.id)})}),t.jsxs("div",{className:"mt-2 flex gap-2",children:[t.jsx(ht,{value:ze[o.id]||"",onChange:B=>We(W=>({...W,[o.id]:B.target.value})),placeholder:"Reply…",className:"flex-1 h-9 text-xs"}),t.jsxs("button",{onClick:()=>Ft(o.id),disabled:Ve[`c-${o.id}`],className:`ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center gap-1 rounded-lg
                                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Ma,{className:"w-3 h-3"})," Reply"]})]}),t.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[t.jsxs(xe,{value:((D=pe[o.id])==null?void 0:D.assigneeId)||"",onChange:B=>fe(W=>({...W,[o.id]:{...W[o.id]||{},assigneeId:B.target.value}})),className:"col-span-2 h-9 text-xs",children:[t.jsx("option",{value:"",children:"Assign to…"}),d.map(B=>t.jsx("option",{value:B.id,children:B.name||B.email},B.id))]}),t.jsx(Re,{value:((E=pe[o.id])==null?void 0:E.dueDate)||"",onChange:B=>fe(W=>({...W,[o.id]:{...W[o.id]||{},dueDate:B.target.value}})),className:"h-9 text-xs"}),t.jsxs("button",{onClick:()=>Kt(o.id),disabled:Ve[`a-${o.id}`],className:`ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center justify-center gap-1 rounded-lg
                                     bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                                     border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:[t.jsx(Sa,{className:"w-3 h-3"})," Assign"]}),t.jsx(ht,{value:((q=pe[o.id])==null?void 0:q.note)||"",onChange:B=>fe(W=>({...W,[o.id]:{...W[o.id]||{},note:B.target.value}})),placeholder:"Note…",className:"col-span-4 h-9 text-xs"})]})]},o.id)})})]}),U>H&&t.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-slate-800 dark:text-slate-200",children:[t.jsxs("span",{children:[Math.min(K*H,U)," of ",U]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>{const o=Math.max(K-1,1);J(o),X({page:o})},disabled:K===1,className:`ms-btn px-2 py-1 disabled:opacity-50 rounded-lg
                               bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                               border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:"Prev"}),t.jsx("button",{onClick:()=>{const o=K*H<U?K+1:K;o!==K&&(J(o),X({page:o}))},disabled:K*H>=U,className:`ms-btn px-2 py-1 disabled:opacity-50 rounded-lg
                               bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100
                               border border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/80`,children:"Next"})]})]})]})})]})]})},R=({title:r,value:e,icon:s,tone:n="indigo",to:c=null,delta:d=null,deltaLabel:m="",spark:p=null})=>{const v={indigo:{border:"from-indigo-300/70 to-indigo-500/40",icon:"bg-indigo-500/10 dark:bg-indigo-400/10 text-indigo-600 dark:text-indigo-300",glow:"from-indigo-50/90 to-transparent dark:from-indigo-900/35 dark:to-transparent"},sky:{border:"from-sky-300/70 to-sky-500/40",icon:"bg-sky-500/10 dark:bg-sky-400/10 text-sky-600 dark:text-sky-300",glow:"from-sky-50/90 to-transparent dark:from-sky-900/35 dark:to-transparent"},blue:{border:"from-blue-300/70 to-blue-500/40",icon:"bg-blue-500/10 dark:bg-blue-400/10 text-blue-600 dark:text-blue-300",glow:"from-blue-50/90 to-transparent dark:from-blue-900/35 dark:to-transparent"},emerald:{border:"from-emerald-300/70 to-emerald-500/40",icon:"bg-emerald-500/10 dark:bg-emerald-400/10 text-emerald-600 dark:text-emerald-300",glow:"from-emerald-50/90 to-transparent dark:from-emerald-900/35 dark:to-transparent"},cyan:{border:"from-cyan-300/70 to-cyan-500/40",icon:"bg-cyan-500/10 dark:bg-cyan-400/10 text-cyan-600 dark:text-cyan-300",glow:"from-cyan-50/90 to-transparent dark:from-cyan-900/35 dark:to-transparent"},amber:{border:"from-amber-300/70 to-amber-500/40",icon:"bg-amber-500/10 dark:bg-amber-400/10 text-amber-600 dark:text-amber-300",glow:"from-amber-50/90 to-transparent dark:from-amber-900/35 dark:to-transparent"},violet:{border:"from-violet-300/70 to-violet-500/40",icon:"bg-violet-500/10 dark:bg-violet-400/10 text-violet-600 dark:text-violet-300",glow:"from-violet-50/90 to-transparent dark:from-violet-900/35 dark:to-transparent"},rose:{border:"from-rose-300/70 to-rose-500/40",icon:"bg-rose-500/10 dark:bg-rose-400/10 text-rose-600 dark:text-rose-300",glow:"from-rose-50/90 to-transparent dark:from-rose-900/35 dark:to-transparent"},slate:{border:"from-slate-300/70 to-slate-500/40",icon:"bg-slate-500/10 dark:bg-slate-400/10 text-slate-600 dark:text-slate-300",glow:"from-slate-50/90 to-transparent dark:from-slate-900/35 dark:to-transparent"}}[n]||{border:"from-slate-300/70 to-slate-500/40",icon:"bg-slate-500/10 dark:bg-slate-400/10 text-slate-600 dark:text-slate-300",glow:"from-slate-50/90 to-transparent dark:from-slate-900/35 dark:to-transparent"},h=()=>{if(!Array.isArray(p)||p.length<2)return null;const g=96,y=28,b=2,S=Math.min(...p),w=Math.max(...p),C=Math.max(w-S,1e-6),j=(g-b*2)/(p.length-1),x="M "+p.map((P,N)=>{const I=b+N*j,O=y-b-(P-S)/C*(y-b*2);return[I,O]}).map(([P,N])=>`${P.toFixed(1)} ${N.toFixed(1)}`).join(" L ");return t.jsx("svg",{width:g,height:y,className:"mt-2 opacity-70",children:t.jsx("path",{d:x,fill:"none",stroke:"currentColor",strokeWidth:"2"})})},f=d==null?"":d>=0?"text-emerald-600 dark:text-emerald-300 bg-emerald-50/80 dark:bg-emerald-900/30":"text-rose-600 dark:text-rose-300 bg-rose-50/80 dark:bg-rose-900/30";return t.jsxs("div",{className:"group relative rounded-2xl transition-transform hover:-translate-y-0.5",children:[c&&t.jsx(ye,{to:c,className:"absolute inset-0 z-10 rounded-2xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-slate-900","aria-label":`View ${r} details`,title:`View ${r} details`}),t.jsx("div",{className:`p-[1px] rounded-2xl bg-gradient-to-br ${v.border} ${c?"cursor-pointer":""}`,children:t.jsxs("div",{className:`relative rounded-2xl bg-white/95 dark:bg-slate-900/90 backdrop-blur supports-[backdrop-filter]:backdrop-blur-sm
                        border border-white/60 dark:border-slate-800 shadow-sm p-5 min-h-[11rem]`,children:[t.jsx("div",{className:`pointer-events-none absolute inset-0 rounded-2xl opacity-80 bg-gradient-to-br ${v.glow}`}),t.jsxs("div",{className:"relative flex items-start justify-between gap-3",children:[t.jsx("div",{className:`p-3 rounded-full ${v.icon}`,children:s}),d!=null&&t.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-[11px] font-medium ${f}`,children:[d>=0?"↑":"↓"," ",Math.abs(d).toLocaleString(),"%",m&&t.jsxs("span",{className:"opacity-70",children:[" ",m]})]})]}),t.jsxs("div",{className:"relative mt-3 min-w-0",children:[t.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 truncate",children:r}),t.jsx("p",{className:`text-[28px] md:text-[32px] leading-tight font-semibold text-slate-900 dark:text-white
                          font-mono tabular-nums break-words`,children:e??"—"})]}),t.jsx("div",{className:"relative text-slate-400 dark:text-slate-500",children:t.jsx(h,{})})]})})]})};export{Yr as default};
