import{r as i,j as e,g as o}from"./index-DFbhZsgs.js";function f(){const[l,h]=i.useState([]),[d,c]=i.useState(""),[y,x]=i.useState(!1),[p,m]=i.useState(!1),n=async()=>{var s,a;try{x(!0);const t=await o.get("/permissions");h(Array.isArray(t.data)?t.data:[])}catch(t){console.error("Failed to load permissions",t),alert(((a=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:a.error)||"Failed to load permissions")}finally{x(!1)}},u=async()=>{var a,t;const s=d.trim();if(s){m(!0);try{await o.post("/permissions",{name:s}),c(""),n()}catch(r){console.error("Failed to add permission",r),alert(((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.error)||"Error adding permission")}finally{m(!1)}}},j=async s=>{var a,t;if(window.confirm("Delete this permission?"))try{await o.delete(`/permissions/${s}`),n()}catch(r){console.error("Failed to delete permission",r),alert(((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.error)||"Error deleting permission")}};return i.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Permissions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"border px-3 py-2 rounded w-64",placeholder:"New permission (e.g., loan.approve)",value:d,onChange:s=>c(s.target.value)}),e.jsx("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded disabled:opacity-60",disabled:p,children:p?"Saving…":"Add"})]})]}),e.jsx("div",{className:"bg-white border rounded overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-3 py-2 text-left",children:"ID"}),e.jsx("th",{className:"border px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"border px-3 py-2 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:y?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-6 text-gray-500",children:"Loading…"})}):l.length?l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-3 py-2",children:s.id}),e.jsx("td",{className:"border px-3 py-2",children:s.name}),e.jsx("td",{className:"border px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>j(s.id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Delete"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-6 text-gray-500",children:"No permissions found"})})})]})})]})}export{f as default};
