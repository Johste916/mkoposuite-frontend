import{r as l,b as W,j as a,L as je}from"./index-tUrsHHEQ.js";import{c as U}from"./createLucideIcon-69G3Xbd-.js";import{D as Fe}from"./download-CguFuUkH.js";import{C as Ne}from"./circle-plus-vD2475MA.js";import{U as Sa}from"./users-iY8d0KsK.js";import{i as We,S as Oa,a as ve,r as Ca,u as na,R as Ia,b as Ea,c as Ba,d as Da,g as _a,e as ia,f as Ma,h as Ta,j as Ra,k as xe,l as La,G as $a,C as Ka,m as oa,n as za,L as pe,o as Fa,p as Wa,t as Ua,q as Ue,s as la,v as ca,w as da,x as ua,y as Ga,z as ma,A as Va,J as qa,B as Z,D as Xa,E as Ha,F as Ya,H as Za,I as Ge,K as G,M as Ja,N as ee,O as ae,P as re,Q as Qa,T as ha,U as xa,V as pa,W as et,X as at,Y as Ve,Z as tt,_ as rt,$ as qe,a0 as st,a1 as Ee,a2 as Xe,a3 as nt,a4 as it,a5 as we,a6 as Ae,a7 as ke,a8 as Pe,a9 as Se,aa as Oe}from"./CartesianChart-_a3t9q0d.js";import{U as ot}from"./user-plus-CfxHxXrt.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],He=U("chart-no-axes-column",lt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ye=U("clipboard-list",ct);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ce=U("credit-card",dt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],J=U("dollar-sign",ut);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ze=U("info",mt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],xt=U("message-square",ht);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],gt=U("thumbs-down",pt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Je=U("triangle-alert",vt);var ft="Invariant failed";function yt(e,t){throw new Error(ft)}var bt=["x","y"];function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(null,arguments)}function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qe(Object(r),!0).forEach(function(n){jt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jt(e,t,r){return(t=Nt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nt(e){var t=wt(e,"string");return typeof t=="symbol"?t:t+""}function wt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function At(e,t){if(e==null)return{};var r,n,o=kt(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function kt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pt(e,t){var{x:r,y:n}=e,o=At(e,bt),c="".concat(r),d=parseInt(c,10),v="".concat(n),g=parseInt(v,10),x="".concat(t.height||o.height),m=parseInt(x,10),f="".concat(t.width||o.width),p=parseInt(f,10);return le(le(le(le(le({},t),o),d?{x:d}:{}),g?{y:g}:{}),{},{height:m,width:p,name:t.name,radius:t.radius})}function ga(e){return l.createElement(Oa,Be({shapeType:"rectangle",propTransformer:Pt,activeClassName:"recharts-active-bar"},e))}var St=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(We(t))return t;var c=We(n)||ve(n);return c?t(n,o):(c||yt(),r)}},Ot=["onMouseEnter","onMouseLeave","onClick"],Ct=["value","background","tooltipPosition"],It=["id"],Et=["onMouseEnter","onClick","onMouseLeave"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}function ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ea(Object(r),!0).forEach(function(n){Bt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ea(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bt(e,t,r){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e){var t=_t(e,"string");return typeof t=="symbol"?t:t+""}function _t(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ge(e,t){if(e==null)return{};var r,n,o=Mt(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Mt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tt=e=>{var{dataKey:t,name:r,fill:n,legendType:o,hide:c}=e;return[{inactive:c,dataKey:t,type:o,color:n,value:ia(r,t),payload:e}]};function Rt(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:o,name:c,hide:d,unit:v}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:o,dataKey:t,nameKey:void 0,name:ia(c,t),hide:d,type:e.tooltipType,color:e.fill,unit:v}}}function Lt(e){var t=xe(la),{data:r,dataKey:n,background:o,allOtherBarProps:c}=e,{onMouseEnter:d,onMouseLeave:v,onClick:g}=c,x=ge(c,Ot),m=ca(d,n),f=da(v),p=ua(g,n);if(!o||r==null)return null;var A=Ga(o,!1);return l.createElement(l.Fragment,null,r.map((j,b)=>{var{value:O,background:y,tooltipPosition:N}=j,u=ge(j,Ct);if(!y)return null;var k=m(j,b),P=f(j,b),w=p(j,b),S=B(B(B(B(B({option:o,isActive:String(b)===t},u),{},{fill:"#eee"},y),A),ma(x,j,b)),{},{onMouseEnter:k,onMouseLeave:P,onClick:w,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return l.createElement(ga,te({key:"background-bar-".concat(b)},S))}))}function va(e){var{data:t,props:r,showLabels:n}=e,o=Xa(r),{id:c}=o,d=ge(o,It),{shape:v,dataKey:g,activeBar:x}=r,m=xe(la),f=xe(Ha),{onMouseEnter:p,onClick:A,onMouseLeave:j}=r,b=ge(r,Et),O=ca(p,g),y=da(j),N=ua(A,g);return t?l.createElement(l.Fragment,null,t.map((u,k)=>{var P=x&&String(k)===m&&(f==null||g===f),w=P?x:v,S=B(B(B({},d),u),{},{isActive:P,option:w,index:k,dataKey:g});return l.createElement(pe,te({className:"recharts-bar-rectangle"},ma(b,u,k),{onMouseEnter:O(u,k),onMouseLeave:y(u,k),onClick:N(u,k),key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(k)}),l.createElement(ga,S))}),n&&Ya.renderCallByParent(r,t)):null}function $t(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:o,isAnimationActive:c,animationBegin:d,animationDuration:v,animationEasing:g,onAnimationEnd:x,onAnimationStart:m}=t,f=r.current,p=Va(t,"recharts-bar-"),[A,j]=l.useState(!1),b=l.useCallback(()=>{typeof x=="function"&&x(),j(!1)},[x]),O=l.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return l.createElement(qa,{begin:d,duration:v,isActive:c,easing:g,onAnimationEnd:b,onAnimationStart:O,key:p},y=>{var N=y===1?n:n==null?void 0:n.map((u,k)=>{var P=f&&f[k];if(P)return B(B({},u),{},{x:Z(P.x,u.x,y),y:Z(P.y,u.y,y),width:Z(P.width,u.width,y),height:Z(P.height,u.height,y)});if(o==="horizontal"){var w=Z(0,u.height,y);return B(B({},u),{},{y:u.y+u.height-w,height:w})}var S=Z(0,u.width,y);return B(B({},u),{},{width:S})});return y>0&&(r.current=N??null),N==null?null:l.createElement(pe,null,l.createElement(va,{props:t,data:N,showLabels:!A}))})}function Kt(e){var{data:t,isAnimationActive:r}=e,n=l.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?l.createElement($t,{previousRectanglesRef:n,props:e}):l.createElement(va,{props:e,data:t,showLabels:!0})}var fa=0,zt=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:oa(e,t)}};class Ft extends l.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:o,xAxisId:c,yAxisId:d,needClip:v,background:g,id:x}=this.props;if(t)return null;var m=za("recharts-bar",o),f=x;return l.createElement(pe,{className:m,id:x},v&&l.createElement("defs",null,l.createElement(Fa,{clipPathId:f,xAxisId:c,yAxisId:d})),l.createElement(pe,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(f,")"):void 0},l.createElement(Lt,{data:r,dataKey:n,background:g,allOtherBarProps:this.props}),l.createElement(Kt,this.props)),this.props.children)}}var Wt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!$a.isSsr,legendType:"rect",minPointSize:fa,xAxisId:0,yAxisId:0};function Ut(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:v,animationDuration:g,animationEasing:x,isAnimationActive:m}=e,{needClip:f}=Ma(t,r),p=Ta(),A=na(),j=Ra(e.children,Ka),b=xe(N=>vr(N,t,r,A,e.id,j));if(p!=="vertical"&&p!=="horizontal")return null;var O,y=b==null?void 0:b[0];return y==null||y.height==null||y.width==null?O=0:O=p==="vertical"?y.height/2:y.width/2,l.createElement(La,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:zt,errorBarOffset:O},l.createElement(Ft,te({},e,{layout:p,needClip:f,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:v,animationDuration:g,animationEasing:x,isAnimationActive:m})))}function Gt(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:o,bandSize:c,xAxis:d,yAxis:v,xAxisTicks:g,yAxisTicks:x,stackedData:m,displayedData:f,offset:p,cells:A}=e,j=t==="horizontal"?v:d,b=m?j.scale.domain():null,O=Wa({numericAxis:j});return f.map((y,N)=>{var u,k,P,w,S,z;m?u=Ua(m[N],b):(u=oa(y,r),Array.isArray(u)||(u=[O,u]));var $=St(n,fa)(u[1],N);if(t==="horizontal"){var se,[q,X]=[v.scale(u[0]),v.scale(u[1])];k=Ue({axis:d,ticks:g,bandSize:c,offset:o.offset,entry:y,index:N}),P=(se=X??q)!==null&&se!==void 0?se:void 0,w=o.size;var ne=q-X;if(S=Za(ne)?0:ne,z={x:k,y:p.top,width:w,height:p.height},Math.abs($)>0&&Math.abs(S)<Math.abs($)){var ie=Ge(S||$)*(Math.abs($)-Math.abs(S));P-=ie,S+=ie}}else{var[V,H]=[d.scale(u[0]),d.scale(u[1])];if(k=V,P=Ue({axis:v,ticks:x,bandSize:c,offset:o.offset,entry:y,index:N}),w=H-V,S=o.size,z={x:p.left,y:P,width:p.width,height:S},Math.abs($)>0&&Math.abs(w)<Math.abs($)){var de=Ge(w||$)*(Math.abs($)-Math.abs(w));w+=de}}if(k==null||P==null||w==null||S==null)return null;var Y=B(B({},y),{},{x:k,y:P,width:w,height:S,value:m?u:u[1],payload:y,background:z,tooltipPosition:{x:k+w/2,y:P+S/2}},A&&A[N]&&A[N].props);return Y}).filter(Boolean)}function Q(e){var t=Ca(e,Wt),r=na();return l.createElement(Ia,{id:t.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Ea,{legendPayload:Tt(t)}),l.createElement(Ba,{fn:Rt,args:t}),l.createElement(Da,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:_a(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),l.createElement(Ut,te({},t,{id:n}))))}Q.displayName="Bar";function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aa(Object(r),!0).forEach(function(n){Vt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vt(e,t,r){return(t=qt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=Xt(e,"string");return typeof t=="symbol"?t:t+""}function Xt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ht=(e,t)=>t,Yt=(e,t,r)=>r,Zt=(e,t,r,n)=>n,Jt=(e,t,r,n,o)=>o,ce=G([xa,Jt],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Qt=G([ce],e=>e==null?void 0:e.maxBarSize),er=(e,t,r,n,o,c)=>c,ta=(e,t,r)=>{var n=r??e;if(!ve(n))return Ee(n,t,0)},ar=G([re,xa,Ht,Yt,Zt],(e,t,r,n,o)=>t.filter(c=>e==="horizontal"?c.xAxisId===r:c.yAxisId===n).filter(c=>c.isPanorama===o).filter(c=>c.hide===!1).filter(c=>c.type==="bar")),tr=(e,t,r,n)=>{var o=re(e);return o==="horizontal"?Ve(e,"yAxis",r,n):Ve(e,"xAxis",t,n)},rr=(e,t,r)=>{var n=re(e);return n==="horizontal"?qe(e,"xAxis",t):qe(e,"yAxis",r)},sr=(e,t,r)=>{var n={},o=e.filter(st),c=e.filter(x=>x.stackId==null),d=o.reduce((x,m)=>(x[m.stackId]||(x[m.stackId]=[]),x[m.stackId].push(m),x),n),v=Object.entries(d).map(x=>{var[m,f]=x,p=f.map(j=>j.dataKey),A=ta(t,r,f[0].barSize);return{stackId:m,dataKeys:p,barSize:A}}),g=c.map(x=>{var m=[x.dataKey].filter(p=>p!=null),f=ta(t,r,x.barSize);return{stackId:void 0,dataKeys:m,barSize:f}});return[...v,...g]},nr=G([ar,rt,rr],sr),ir=(e,t,r,n,o)=>{var c,d,v=ce(e,t,r,n,o);if(v!=null){var g=re(e),x=pa(e),{maxBarSize:m}=v,f=ve(m)?x:m,p,A;return g==="horizontal"?(p=ee(e,"xAxis",t,n),A=ae(e,"xAxis",t,n)):(p=ee(e,"yAxis",r,n),A=ae(e,"yAxis",r,n)),(c=(d=ha(p,A,!0))!==null&&d!==void 0?d:f)!==null&&c!==void 0?c:0}},ya=(e,t,r,n)=>{var o=re(e),c,d;return o==="horizontal"?(c=ee(e,"xAxis",t,n),d=ae(e,"xAxis",t,n)):(c=ee(e,"yAxis",r,n),d=ae(e,"yAxis",r,n)),ha(c,d)};function or(e,t,r,n,o){var c=n.length;if(!(c<1)){var d=Ee(e,r,0,!0),v,g=[];if(Xe(n[0].barSize)){var x=!1,m=r/c,f=n.reduce((y,N)=>y+(N.barSize||0),0);f+=(c-1)*d,f>=r&&(f-=(c-1)*d,d=0),f>=r&&m>0&&(x=!0,m*=.9,f=c*m);var p=(r-f)/2>>0,A={offset:p-d,size:0};v=n.reduce((y,N)=>{var u,k={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:A.offset+A.size+d,size:x?m:(u=N.barSize)!==null&&u!==void 0?u:0}},P=[...y,k];return A=P[P.length-1].position,P},g)}else{var j=Ee(t,r,0,!0);r-2*j-(c-1)*d<=0&&(d=0);var b=(r-2*j-(c-1)*d)/c;b>1&&(b>>=0);var O=Xe(o)?Math.min(b,o):b;v=n.reduce((y,N,u)=>[...y,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j+(b+d)*u+(b-O)/2,size:O}}],g)}return v}}var lr=(e,t,r,n,o,c,d)=>{var v=ve(d)?t:d,g=or(r,n,o!==c?o:c,e,v);return o!==c&&g!=null&&(g=g.map(x=>he(he({},x),{},{position:he(he({},x.position),{},{offset:x.position.offset-o/2})}))),g},cr=G([nr,pa,et,at,ir,ya,Qt],lr),dr=(e,t,r,n)=>ee(e,"xAxis",t,n),ur=(e,t,r,n)=>ee(e,"yAxis",r,n),mr=(e,t,r,n)=>ae(e,"xAxis",t,n),hr=(e,t,r,n)=>ae(e,"yAxis",r,n),xr=G([cr,ce],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),pr=(e,t)=>{var r=tt(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var o=e[n];if(o){var{stackedData:c}=o;if(c)return c.find(d=>d.key===r)}}}},gr=G([tr,ce],pr),vr=G([Ja,dr,ur,mr,hr,xr,re,Qa,ya,gr,ce,er],(e,t,r,n,o,c,d,v,g,x,m,f)=>{var{chartData:p,dataStartIndex:A,dataEndIndex:j}=v;if(!(m==null||c==null||d!=="horizontal"&&d!=="vertical"||t==null||r==null||n==null||o==null||g==null)){var{data:b}=m,O;if(b!=null&&b.length>0?O=b:O=p==null?void 0:p.slice(A,j+1),O!=null)return Gt({layout:d,barSettings:m,pos:c,bandSize:g,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:o,stackedData:x,displayedData:O,offset:e,cells:f})}}),fr=["axis","item"],Ie=l.forwardRef((e,t)=>l.createElement(nt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fr,tooltipPayloadSearcher:it,categoricalChartProps:e,ref:t}));const ra="ms_dash_filters_v1",sa="ms_dash_auto_refresh_v1",Ir=()=>{const[e,t]=l.useState(null),[r,n]=l.useState([]),[o,c]=l.useState([]),[d,v]=l.useState(""),[g,x]=l.useState(""),[m,f]=l.useState(""),[p,A]=l.useState(0),[j,b]=l.useState([]),[O,y]=l.useState(!1),[N,u]=l.useState([]),[k,P]=l.useState(0),[w,S]=l.useState(1),z=10,[$,se]=l.useState(""),[q,X]=l.useState(""),[ne,ie]=l.useState({}),[V,H]=l.useState({}),[de,Y]=l.useState({}),[M,ba]=l.useState(null),[De,yr]=l.useState([]),[_e,br]=l.useState([]),[Me,jr]=l.useState([]),[Te,Nr]=l.useState([]),[Re,ja]=l.useState(!0),[Na,Le]=l.useState([]),R=(s,i="info")=>{const h=Math.random().toString(36).slice(2);Le(E=>[...E,{id:h,msg:s,type:i}]),setTimeout(()=>Le(E=>E.filter(C=>C.id!==h)),3500)},D=s=>{const i=Number(s);return Number.isFinite(i)?i:0},T=s=>{const i=D(s);return isNaN(i)?"TZS —":`TZS ${i.toLocaleString()}`},wa=s=>{var i;return((i=r.find(h=>String(h.id)===String(s)))==null?void 0:i.name)||(s?`Branch #${s}`:"All branches")};l.useEffect(()=>{try{const s=localStorage.getItem(ra);if(s){const i=JSON.parse(s);v(i.branchId||""),x(i.officerId||""),f(i.timeRange||"")}}catch{}try{const s=localStorage.getItem(sa);s&&A(Number(s)||0)}catch{}},[]),l.useEffect(()=>{const s={branchId:d,officerId:g,timeRange:m};localStorage.setItem(ra,JSON.stringify(s))},[d,g,m]),l.useEffect(()=>{localStorage.setItem(sa,String(p||0))},[p]);const $e=l.useCallback(async s=>{try{const[i,h]=await Promise.all([W.get("/branches",{signal:s}),W.get("/users",{params:{role:"loan_officer"},signal:s})]);n(Array.isArray(i.data)?i.data:[]),c(Array.isArray(h.data)?h.data:[])}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),R("Failed to load filters","error"))}},[]),fe=l.useCallback(async s=>{try{const i=await W.get("/dashboard/summary",{params:{branchId:d,officerId:g,timeRange:m},signal:s});t(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),R("Failed to load summary","error"))}},[d,g,m]),oe=l.useCallback(async s=>{y(!0);try{const i=await W.get("/dashboard/communications",{signal:s}).catch(()=>null);i!=null&&i.data&&Array.isArray(i.data)?b(i.data):b(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{y(!1)}},[e]),F=l.useCallback(async(s={},i)=>{var h,E;try{const C=await W.get("/dashboard/activity",{params:{page:s.page??w,pageSize:z,dateFrom:$||void 0,dateTo:q||void 0},signal:i});u(((h=C.data)==null?void 0:h.items)||[]),P(((E=C.data)==null?void 0:E.total)||0)}catch(C){(C==null?void 0:C.name)!=="CanceledError"&&(console.error("Activity fetch error:",(C==null?void 0:C.message)||C),R("Failed to load activity","error"))}},[w,$,q]),ye=l.useCallback(async s=>{try{const i=await W.get("/dashboard/monthly-trends",{signal:s});ba(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),R("Failed to load trends","error"))}},[]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await $e(s.signal)}catch{}})(),()=>s.abort()},[$e]);const ue=l.useCallback(async s=>{await Promise.all([fe(s),F({},s),ye(s)])},[fe,F,ye]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await ue(s.signal)}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),R("Failed to load dashboard data","error"))}finally{ja(!1)}})(),()=>s.abort()},[ue]),l.useEffect(()=>{if(!e)return;const s=new AbortController;return oe(s.signal).catch(i=>{(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),R("Failed to load communications","error"))}),()=>s.abort()},[e,oe]),l.useEffect(()=>{if(!p||p<=0)return;const s=setInterval(()=>{const i=new AbortController;Promise.all([ue(i.signal),oe(i.signal)]).catch(()=>{}).finally(()=>i.abort())},p*6e4);return()=>clearInterval(s)},[p,ue,oe]);const Aa=async s=>{const i=`c-${s}`;Y(h=>({...h,[i]:!0}));try{const h=(ne[s]||"").trim();if(!h)return;await W.post(`/dashboard/activity/${s}/comment`,{comment:h}),ie(E=>({...E,[s]:""})),await F(),R("Reply posted","success")}catch(h){console.error("Add comment error:",(h==null?void 0:h.message)||h),R("Failed to post reply","error")}finally{Y(h=>({...h,[i]:!1}))}},ka=async s=>{const i=`a-${s}`;Y(h=>({...h,[i]:!0}));try{const h=V[s]||{};if(!h.assigneeId)return;await W.post(`/dashboard/activity/${s}/assign`,{assigneeId:h.assigneeId,dueDate:h.dueDate||null,note:h.note||""}),H(E=>({...E,[s]:{assigneeId:"",dueDate:"",note:""}})),await F(),R("Task assigned","success")}catch(h){console.error("Assign task error:",(h==null?void 0:h.message)||h),R("Failed to assign task","error")}finally{Y(h=>({...h,[i]:!1}))}},be=({label:s,value:i,max:h})=>{const E=D(i),C=D(h),me=C>0?Math.round(E/C*100):0;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:s}),a.jsx("span",{children:E.toLocaleString()})]}),a.jsx("div",{className:"h-2 w-full bg-gray-100 rounded",children:a.jsx("div",{className:"h-2 rounded",style:{width:`${me}%`,backgroundColor:"currentColor"}})})]})},Ke=({className:s})=>a.jsx("div",{className:`animate-pulse bg-gray-100 rounded ${s}`}),Pa=()=>{const s=j.flatMap(i=>(i.attachments||[]).map(h=>h.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((i,h)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),h*150)}),R(`Opening ${s.length} attachment${s.length>1?"s":""}…`,"info"))},K=e==null?void 0:e.dashboardMessage;return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 p-4 md:p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-800 tracking-tight",children:"Dashboard"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("select",{value:d,onChange:s=>v(s.target.value),className:"border rounded-lg px-3 py-2 bg-white",children:[a.jsx("option",{value:"",children:"All Branches"}),r.map(s=>a.jsx("option",{value:s.id,children:s.name},s.id))]}),a.jsxs("select",{value:g,onChange:s=>x(s.target.value),className:"border rounded-lg px-3 py-2 bg-white",children:[a.jsx("option",{value:"",children:"All Loan Officers"}),o.map(s=>a.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),a.jsxs("select",{value:m,onChange:s=>f(s.target.value),className:"border rounded-lg px-3 py-2 bg-white",children:[a.jsx("option",{value:"",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"quarter",children:"This Quarter"}),a.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),a.jsx("option",{value:"annual",children:"Annual"})]}),a.jsxs("select",{value:p,onChange:s=>A(Number(s.target.value)),className:"border rounded-lg px-3 py-2 bg-white",children:[a.jsx("option",{value:0,children:"No Auto-Refresh"}),a.jsx("option",{value:1,children:"Every 1 min"}),a.jsx("option",{value:5,children:"Every 5 mins"}),a.jsx("option",{value:15,children:"Every 15 mins"})]}),a.jsx("button",{className:"px-3 py-2 border rounded-lg bg-white hover:bg-gray-50",onClick:()=>{const s=new AbortController;Promise.all([fe(s.signal),F({page:1},s.signal),ye(s.signal),oe(s.signal)]).then(()=>{S(1),R("Dashboard refreshed","success")}).catch(()=>R("Refresh failed","error")).finally(()=>s.abort())},children:"Refresh"})]})]})}),a.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:Na.map(s=>a.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),(e==null?void 0:e.importantNotice)&&a.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 text-amber-900 p-4",children:a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx(Ze,{className:"w-5 h-5 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Important Notice"}),a.jsx("p",{className:"text-sm",children:e.importantNotice})]})]})}),e!=null&&e.companyMessage?a.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 text-blue-700 p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ze,{className:"w-5 h-5"}),a.jsx("p",{className:"text-sm font-medium",children:e.companyMessage})]})}):Re?a.jsx(Ke,{className:"h-12"}):null,K&&a.jsx("div",{className:"bg-white border rounded-xl shadow-sm p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{children:[K.title&&a.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:K.title}),K.text&&a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:K.text}),Array.isArray(K.attachments)&&K.attachments.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-[11px] text-gray-500 mb-1",children:"Attachments"}),a.jsx("div",{className:"flex flex-wrap gap-3",children:K.attachments.map(s=>a.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",title:s.fileName,children:s.fileName||"Attachment"},`${s.id}-${s.fileUrl}`))})]})]}),Array.isArray(K.attachments)&&K.attachments.length>0&&a.jsxs("button",{onClick:()=>{K.attachments.forEach((s,i)=>{s.fileUrl&&setTimeout(()=>window.open(s.fileUrl,"_blank","noopener,noreferrer"),i*150)})},className:"text-xs flex items-center gap-1 border rounded px-2 py-1 h-8",title:"Open all attachments",children:[a.jsx(Fe,{className:"w-3 h-3"})," Open all"]})]})}),((j==null?void 0:j.length)??0)>0&&a.jsxs("div",{className:"bg-white border rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50",children:[a.jsx("div",{className:"text-xs font-medium text-gray-600",children:"General Communications"}),j.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&a.jsxs("button",{onClick:Pa,className:"text-xs flex items-center gap-1 border rounded px-2 py-1",title:"Open all attachments",children:[a.jsx(Fe,{className:"w-3 h-3"})," Download all"]})]}),a.jsxs("div",{className:"relative h-10",children:[a.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),a.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-700 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:j.map(s=>a.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:s.type}),s.priority&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:s.priority}),s.audienceRole&&a.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:["role: ",s.audienceRole]}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:wa(s.audienceBranchId)}),a.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),s.text]},s.id||s.text))})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(je,{to:"/loans/add",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 shadow-sm",children:[a.jsx(Ne,{className:"w-4 h-4"})," Add Loan"]}),a.jsxs(je,{to:"/borrowers/add",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 shadow-sm",children:[a.jsx(Ne,{className:"w-4 h-4"})," Add Borrower"]}),a.jsxs(je,{to:"/repayments/new",className:"flex items-center gap-2 px-3 py-2 border rounded-lg bg-white hover:bg-gray-50 shadow-sm",children:[a.jsx(Ne,{className:"w-4 h-4"})," Record Repayment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[a.jsx("main",{className:"space-y-6",children:Re?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,i)=>a.jsx(Ke,{className:"h-24"},i))}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[a.jsx(_,{tone:"indigo",title:"Total Borrowers",value:D(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:a.jsx(Sa,{className:"w-5 h-5"})}),a.jsx(_,{tone:"sky",title:"Total Loans",value:D(e==null?void 0:e.totalLoans).toLocaleString(),icon:a.jsx(Ce,{className:"w-5 h-5"})}),a.jsx(_,{tone:"blue",title:"Total Disbursed",value:T(e==null?void 0:e.totalDisbursed),icon:a.jsx(Ce,{className:"w-5 h-5"})}),a.jsx(_,{tone:"emerald",title:"Total Paid",value:T(e==null?void 0:e.totalPaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"emerald",title:"Total Repaid",value:T(e==null?void 0:e.totalRepaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"indigo",title:"Expected Repayments",value:T(e==null?void 0:e.totalExpectedRepayments),icon:a.jsx(Ye,{className:"w-5 h-5"})}),a.jsx(_,{tone:"cyan",title:"Total Deposits",value:T(e==null?void 0:e.totalDeposits),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"amber",title:"Total Withdrawals",value:T(e==null?void 0:e.totalWithdrawals),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"blue",title:"Net Savings",value:T(e==null?void 0:e.netSavings),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"rose",title:"Defaulted Loan",value:T(e==null?void 0:e.defaultedLoan),icon:a.jsx(Je,{className:"w-5 h-5"})}),a.jsx(_,{tone:"rose",title:"Defaulted Interest",value:T(e==null?void 0:e.defaultedInterest),icon:a.jsx(Je,{className:"w-5 h-5"})}),a.jsx(_,{tone:"violet",title:"Outstanding Loan",value:T(e==null?void 0:e.outstandingLoan),icon:a.jsx(Ce,{className:"w-5 h-5"})}),a.jsx(_,{tone:"violet",title:"Outstanding Interest",value:T(e==null?void 0:e.outstandingInterest),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(_,{tone:"slate",title:"Written Off",value:T(e==null?void 0:e.writtenOff),icon:a.jsx(gt,{className:"w-5 h-5"})}),a.jsx(_,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${D(e==null?void 0:e.parPercent)}%`,icon:a.jsx(He,{className:"w-5 h-5"})})]}),M&&a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(He,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("h3",{className:"font-semibold text-gray-800",children:["Monthly Trends",M.month||M.year?` — ${M.month||""} ${M.year||""}`:""]})]}),a.jsx("div",{className:"mb-4",children:a.jsx(we,{width:"100%",height:260,children:a.jsxs(Ie,{data:[{name:"Loans",value:D(M.monthlyLoans)},{name:"Deposits",value:D(M.monthlyDeposits)},{name:"Repayments",value:D(M.monthlyRepayments)}],children:[a.jsx(Ae,{strokeDasharray:"3 3"}),a.jsx(ke,{dataKey:"name"}),a.jsx(Pe,{}),a.jsx(Se,{}),a.jsx(Oe,{}),a.jsx(Q,{dataKey:"value"})]})})}),(()=>{const s=[D(M.monthlyLoans),D(M.monthlyDeposits),D(M.monthlyRepayments)],i=Math.max(...s);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"text-indigo-600",children:a.jsx(be,{label:"Loans (count)",value:D(M.monthlyLoans),max:i})}),a.jsx("div",{className:"text-emerald-600",children:a.jsx(be,{label:"Deposits (TZS)",value:D(M.monthlyDeposits),max:i})}),a.jsx("div",{className:"text-blue-600",children:a.jsx(be,{label:"Repayments (TZS)",value:D(M.monthlyRepayments),max:i})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Top Borrowers"}),De.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600",children:[a.jsx("th",{className:"py-1 pr-4",children:"Name"}),a.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),a.jsx("tbody",{children:De.map(s=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"py-1 pr-4",children:s.name}),a.jsx("td",{className:"py-1 pr-4",children:T(s.outstanding)})]},s.id))})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Upcoming Repayments"}),_e.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600",children:[a.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),a.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),a.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),a.jsx("tbody",{children:_e.map(s=>a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{className:"py-1 pr-4",children:s.borrower}),a.jsx("td",{className:"py-1 pr-4",children:s.dueDate}),a.jsx("td",{className:"py-1 pr-4",children:T(s.amount)})]},s.id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Branch Performance"}),Me.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No data available."}):a.jsx(we,{width:"100%",height:260,children:a.jsxs(Ie,{data:Me,children:[a.jsx(Ae,{strokeDasharray:"3 3"}),a.jsx(ke,{dataKey:"branch"}),a.jsx(Pe,{}),a.jsx(Se,{}),a.jsx(Oe,{}),a.jsx(Q,{dataKey:"disbursed"}),a.jsx(Q,{dataKey:"repayments"})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Officer Performance"}),Te.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No data available."}):a.jsx(we,{width:"100%",height:260,children:a.jsxs(Ie,{data:Te,children:[a.jsx(Ae,{strokeDasharray:"3 3"}),a.jsx(ke,{dataKey:"officer"}),a.jsx(Pe,{}),a.jsx(Se,{}),a.jsx(Oe,{}),a.jsx(Q,{dataKey:"loans"}),a.jsx(Q,{dataKey:"collections"})]})})]})]})]})}),a.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ye,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h2",{className:"font-semibold text-gray-800",children:"Recent Activity"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[a.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm",value:$,onChange:s=>se(s.target.value)}),a.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm",value:q,onChange:s=>X(s.target.value)}),a.jsx("button",{className:"col-span-2 border rounded px-2 py-1 text-sm",onClick:()=>{S(1),F({page:1})},children:"Search by date"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent"}),a.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent"}),a.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:N.length===0?a.jsx("p",{className:"text-gray-500 text-sm",children:"No activity."}):N.map(s=>{var i,h,E,C,me;return a.jsxs("div",{className:"border rounded p-3",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[s.type," • ",s.entityType," #",s.entityId]}),a.jsx("p",{className:"text-xs text-gray-600",children:s.message}),a.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["by ",((i=s.createdBy)==null?void 0:i.name)||((h=s.createdBy)==null?void 0:h.email)," • ",new Date(s.createdAt).toLocaleString()]}),Array.isArray(s.comments)&&s.comments.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:s.comments.map(I=>{var L,ze;return a.jsxs("div",{className:"bg-gray-50 border rounded p-2",children:[a.jsx("p",{className:"text-xs text-gray-800",children:I.comment}),a.jsxs("p",{className:"text-[11px] text-gray-400 mt-0.5",children:["— ",((L=I.createdBy)==null?void 0:L.name)||((ze=I.createdBy)==null?void 0:ze.email)," • ",new Date(I.createdAt).toLocaleString()]})]},I.id)})}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("input",{value:ne[s.id]||"",onChange:I=>ie(L=>({...L,[s.id]:I.target.value})),placeholder:"Reply…",className:"flex-1 border rounded px-2 py-1 text-xs"}),a.jsxs("button",{onClick:()=>Aa(s.id),disabled:de[`c-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 disabled:opacity-50 flex items-center gap-1",children:[a.jsx(xt,{className:"w-3 h-3"})," Reply"]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[a.jsxs("select",{value:((E=V[s.id])==null?void 0:E.assigneeId)||"",onChange:I=>H(L=>({...L,[s.id]:{...L[s.id]||{},assigneeId:I.target.value}})),className:"col-span-2 border rounded px-2 py-1 text-xs",children:[a.jsx("option",{value:"",children:"Assign to…"}),o.map(I=>a.jsx("option",{value:I.id,children:I.name||I.email},I.id))]}),a.jsx("input",{type:"date",value:((C=V[s.id])==null?void 0:C.dueDate)||"",onChange:I=>H(L=>({...L,[s.id]:{...L[s.id]||{},dueDate:I.target.value}})),className:"border rounded px-2 py-1 text-xs"}),a.jsxs("button",{onClick:()=>ka(s.id),disabled:de[`a-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 disabled:opacity-50 flex items-center gap-1 justify-center",children:[a.jsx(ot,{className:"w-3 h-3"})," Assign"]}),a.jsx("input",{value:((me=V[s.id])==null?void 0:me.note)||"",onChange:I=>H(L=>({...L,[s.id]:{...L[s.id]||{},note:I.target.value}})),placeholder:"Note…",className:"col-span-4 border rounded px-2 py-1 text-xs"})]})]},s.id)})})]}),k>z&&a.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs",children:[a.jsxs("span",{children:[Math.min(w*z,k)," of ",k]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{const s=Math.max(w-1,1);S(s),F({page:s})},disabled:w===1,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Prev"}),a.jsx("button",{onClick:()=>{const s=w*z<k?w+1:w;s!==w&&(S(s),F({page:s}))},disabled:w*z>=k,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})})]})]})},_=({title:e,value:t,icon:r,tone:n="indigo"})=>{const o={indigo:{ring:"ring-indigo-100",icon:"text-indigo-600 bg-indigo-50"},sky:{ring:"ring-sky-100",icon:"text-sky-600 bg-sky-50"},blue:{ring:"ring-blue-100",icon:"text-blue-600 bg-blue-50"},emerald:{ring:"ring-emerald-100",icon:"text-emerald-600 bg-emerald-50"},cyan:{ring:"ring-cyan-100",icon:"text-cyan-600 bg-cyan-50"},amber:{ring:"ring-amber-100",icon:"text-amber-600 bg-amber-50"},violet:{ring:"ring-violet-100",icon:"text-violet-600 bg-violet-50"},rose:{ring:"ring-rose-100",icon:"text-rose-600 bg-rose-50"},slate:{ring:"ring-slate-100",icon:"text-slate-600 bg-slate-50"}}[n]||{ring:"ring-slate-100",icon:"text-slate-600 bg-slate-50"};return a.jsx("div",{className:`bg-white rounded-2xl shadow-sm border p-4 ring-1 ${o.ring}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-full ${o.icon}`,children:r}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xs font-medium text-gray-500",children:e}),a.jsx("p",{className:"text-xl font-semibold text-gray-900",children:t??"—"})]})]})})};export{Ir as default};
