import{f as i}from"./index-C2httD8F.js";const l="https://mkoposuite-backend-42w2.onrender.com/api".replace(/\/+$/,""),c=i.create({baseURL:l,withCredentials:!1,headers:{"Content-Type":"application/json"}}),d=["token","authToken","accessToken","access_token","jwt"];c.interceptors.request.use(e=>{for(const t of d){const o=localStorage.getItem(t);if(o){e.headers.Authorization=`Bearer ${String(o).replace(/^Bearer\s+/i,"")}`;break}}let a=localStorage.getItem("x-tenant-id")||localStorage.getItem("tenantId");if(!a)try{const t=JSON.parse(localStorage.getItem("tenant")||"null");t&&t.id&&(a=t.id)}catch{}a&&(e.headers["x-tenant-id"]=a);const s=localStorage.getItem("activeBranchId");s&&(e.headers["x-branch-id"]=s);try{const t=Intl.DateTimeFormat().resolvedOptions().timeZone;t&&(e.headers["x-timezone"]=t)}catch{}try{e.headers["x-tz-offset"]=String(new Date().getTimezoneOffset()*-1)}catch{}return e});c.interceptors.response.use(e=>e,e=>{var s,t,o,n;const a=((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.error)||((n=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:n.message)||(e==null?void 0:e.message)||"Request failed";return console.error("API error:",a,(e==null?void 0:e.response)||e),Promise.reject(e)});export{c};
