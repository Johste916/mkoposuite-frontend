import{u as A,r,j as e,L as C,g as d}from"./index-G5wp67oJ.js";import{C as L}from"./circle-plus-BWW4X6z9.js";import{c as o}from"./createLucideIcon-DtohkNYs.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_=o("eye",M);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],S=o("pencil",E);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$=o("trash-2",B),D="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7",T="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-500 transition-all";function P(){const m=A(),[n,h]=r.useState([]),[g,p]=r.useState({}),[k,x]=r.useState(!0),[c,f]=r.useState(""),l=async()=>{var s,t,y;x(!0);try{const[a,i]=await Promise.all([d.get("/banks",{params:{search:c}}),d.get("/banks/__internal/overview")]),v=Array.isArray(a.data)?a.data:Array.isArray((s=a.data)==null?void 0:s.items)?a.data.items:Array.isArray((t=a.data)==null?void 0:t.rows)?a.data.rows:[];h(v);const N={},w=((y=i==null?void 0:i.data)==null?void 0:y.items)||[];for(const j of w)N[j.bankId]=j;p(N)}catch(a){console.error(a),h([]),p({})}finally{x(!1)}};r.useEffect(()=>{l()},[]),r.useEffect(()=>{const s=setTimeout(l,300);return()=>clearTimeout(s)},[c]);const b=async s=>{if(window.confirm("Delete this bank?"))try{await d.delete(`/banks/${s}`),await l()}catch(t){console.error(t),alert("Failed to delete bank")}},u=r.useMemo(()=>Array.isArray(n)?n:[],[n]);return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Banks"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tenant-scoped bank & balance overview (disbursements, repayments, transfers)."})]}),e.jsxs(C,{to:"/banks/add",className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50",children:[e.jsx(L,{className:"h-4 w-4"})," Add Bank"]})]}),e.jsxs("section",{className:D,children:[e.jsx("div",{className:"mb-3",children:e.jsx("input",{className:T,placeholder:"Search by name, code, account…",value:c,onChange:s=>f(s.target.value)})}),k?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading…"}):u.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No banks found. Click “Add Bank” to create one."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 pr-4",children:"Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Code"}),e.jsx("th",{className:"py-2 pr-4",children:"Branch"}),e.jsx("th",{className:"py-2 pr-4",children:"Account Name"}),e.jsx("th",{className:"py-2 pr-4",children:"Account #"}),e.jsx("th",{className:"py-2 pr-4",children:"Currency"}),e.jsx("th",{className:"py-2 pr-4",children:"Current"}),e.jsx("th",{className:"py-2 pr-4"})]})}),e.jsx("tbody",{children:u.map(s=>{const t=g[s.id]||{};return e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 pr-4",children:s.name}),e.jsx("td",{className:"py-2 pr-4",children:s.code||"—"}),e.jsx("td",{className:"py-2 pr-4",children:s.branch||"—"}),e.jsx("td",{className:"py-2 pr-4",children:s.accountName||"—"}),e.jsx("td",{className:"py-2 pr-4",children:s.accountNumber||"—"}),e.jsx("td",{className:"py-2 pr-4",children:s.currency||"—"}),e.jsx("td",{className:"py-2 pr-4 font-medium",children:t.current!=null?Number(t.current).toLocaleString():"—"}),e.jsx("td",{className:"py-2 pr-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>m(`/banks/${s.id}`),className:"px-2 py-1 rounded border hover:bg-gray-50 inline-flex items-center gap-1",title:"View",children:[e.jsx(_,{className:"h-4 w-4"})," View"]}),e.jsxs("button",{onClick:()=>m(`/banks/${s.id}/edit`),className:"px-2 py-1 rounded border hover:bg-gray-50 inline-flex items-center gap-1",title:"Edit",children:[e.jsx(S,{className:"h-4 w-4"})," Edit"]}),e.jsxs("button",{onClick:()=>b(s.id),className:"px-2 py-1 rounded border hover:bg-gray-50 inline-flex items-center gap-1",title:"Delete",children:[e.jsx($,{className:"h-4 w-4"})," Delete"]})]})})]},s.id)})})]})})]})]})}export{P as default};
