import{r as a,j as s,L as d}from"./index-D7WBPAut.js";import{u as k}from"./usePaginatedFetch-DI8M2Ov9.js";import{L as V}from"./ListShell-D5mlCTFE.js";function F(){const[l,m]=a.useState(""),[o,x]=a.useState(""),[n,p]=a.useState(""),[i,g]=a.useState(""),[r,h]=a.useState(""),b=a.useMemo(()=>{const t=new URLSearchParams;l&&t.set("q",l),o&&t.set("status",o),n&&t.set("category",n),i&&t.set("dateFrom",i),r&&t.set("dateTo",r);const e=t.toString();return e?`/api/collateral?${e}`:"/api/collateral"},[l,o,n,i,r]),{rows:u,total:y,page:f,setPage:S,limit:N,setLimit:j,loading:E,error:v,refresh:C}=k({url:b}),A=a.useMemo(()=>(Array.isArray(u)?u:[]).filter(Boolean).map((e,c)=>({id:(e==null?void 0:e.id)??null,itemName:(e==null?void 0:e.itemName)??"-",category:(e==null?void 0:e.category)??"-",model:(e==null?void 0:e.model)??"-",serialNumber:(e==null?void 0:e.serialNumber)??"-",estValue:(e==null?void 0:e.estValue)??null,status:(e==null?void 0:e.status)??"-",location:(e==null?void 0:e.location)??"-",createdAt:(e==null?void 0:e.createdAt)??null})),[u]),L=[{key:"itemName",title:"Item"},{key:"category",title:"Category"},{key:"model",title:"Model"},{key:"serialNumber",title:"Serial #"},{key:"estValue",title:"Est. Value",render:({row:t})=>{const e=t==null?void 0:t.estValue;if(e==null||e==="")return"-";const c=Number(e);return Number.isFinite(c)?c.toLocaleString():String(e)}},{key:"status",title:"Status",render:({row:t})=>{const e=String((t==null?void 0:t.status)||"-").toUpperCase(),c=e==="ACTIVE"?"bg-green-100 text-green-700":e==="RELEASED"?"bg-blue-100 text-blue-700":e==="DISPOSED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700";return s.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${c}`,children:e})}},{key:"location",title:"Location"}],D=a.useMemo(()=>{const t=new URLSearchParams;return l&&t.set("q",l),o&&t.set("status",o),n&&t.set("category",n),i&&t.set("dateFrom",i),r&&t.set("dateTo",r),t.set("export","csv"),`/api/collateral?${t.toString()}`},[l,o,n,i,r]);return s.jsx(V,{title:"Collateral",q:l,setQ:m,columns:L,rows:A,loading:E,error:v,page:f,setPage:S,limit:N,setLimit:j,total:y,toolbar:s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full",children:[s.jsx(d,{to:"/collateral/new",className:"mr-3 border rounded px-3 py-1 text-sm bg-blue-600 text-white hover:bg-blue-700",children:"+ Add Collateral"}),s.jsx("label",{className:"text-sm",children:"Status"}),s.jsxs("select",{className:"border rounded px-2 py-1",value:o,onChange:t=>x(t.target.value),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"ACTIVE",children:"ACTIVE"}),s.jsx("option",{value:"RELEASED",children:"RELEASED"}),s.jsx("option",{value:"DISPOSED",children:"DISPOSED"})]}),s.jsx("label",{className:"text-sm ml-3",children:"Category"}),s.jsx("input",{className:"border rounded px-2 py-1",value:n,onChange:t=>p(t.target.value),placeholder:"Electronics / Vehicleâ€¦"}),s.jsx("label",{className:"text-sm ml-3",children:"From"}),s.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:i,onChange:t=>g(t.target.value)}),s.jsx("label",{className:"text-sm",children:"To"}),s.jsx("input",{type:"date",className:"border rounded px-2 py-1",value:r,onChange:t=>h(t.target.value)}),s.jsx("button",{onClick:C,className:"ml-2 border rounded px-3 py-1 text-sm hover:bg-gray-50",children:"Refresh"}),s.jsx("a",{href:D,className:"ml-auto inline-flex items-center border rounded px-3 py-1 text-sm hover:bg-gray-50",children:"Export CSV"})]}),renderRowActions:({row:t})=>t!=null&&t.id?s.jsx("div",{className:"flex gap-3",children:s.jsx(d,{to:`/collateral/${t.id}/edit`,className:"text-blue-600 hover:underline text-sm",children:"Edit"})}):s.jsx("span",{className:"text-xs text-gray-400",children:"No ID"})})}export{F as default};
