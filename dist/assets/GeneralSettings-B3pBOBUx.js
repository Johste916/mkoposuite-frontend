import{j as e,g as A}from"./index-LbmMX0zK.js";import{u as E}from"./useSettingsResource-oqSGcL-3.js";import{S as I}from"./settings-Qx-NgHYD.js";import"./index-CZPZUv93.js";const D=(s,t,l)=>`data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='${s}' height='${t}'>
      <rect width='100%' height='100%' fill='#e5e7eb'/>
      <text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle'
            fill='#6b7280' font-size='12' font-family='sans-serif'>${l}</text>
    </svg>`)}`,k=D(80,80,"Logo"),F=D(80,80,"Img");function W(){var m,v,N,C,S;const{data:s,setData:t,loading:l,saving:o,error:d,success:i,save:c}=E(I.getGeneral,I.saveGeneral,{company:{name:"MkopoSuite",email:"info@example.com",phone:"+255700000000",website:"https://example.com",address1:"",address2:"",city:"",country:"Tanzania",logoUrl:"",profileImageUrl:""},branding:{primaryColor:"#1d4ed8",secondaryColor:"#0ea5e9"},locale:{currency:"TZS",timezone:"Africa/Dar_es_Salaam",language:"en",currencyInWords:"Shillings",dateFormat:"dd/mm/yyyy"},numberFormats:{thousandSeparator:",",decimalSeparator:".",currencyPosition:"prefix"},dashboard:{landingWidgets:["kpis","recent-activity","collections"],showTicker:!0,importantNotice:"",companyMessage:"",curatedMessage:{title:"",text:"",attachments:[]}}}),p=async(a,r)=>{var w;if(!a)return;const x=new FormData;x.append("file",a);const u=((w=(await A.post("/uploads/image",x,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:w.url)||"";t(L=>{var P;const M=structuredClone(L),f=r.split(".");let h=M;for(let j=0;j<f.length-1;j++)h=h[P=f[j]]||(h[P]={});return h[f.at(-1)]=u,M})};return l?e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"General Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Branding, company info, locale and dashboard messages."})]}),d&&e.jsx("div",{className:"bg-rose-50 text-rose-700 border border-rose-200 rounded-lg p-3 text-sm",children:d}),i&&e.jsx("div",{className:"bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg p-3 text-sm",children:i}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Company"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((m=s.company)==null?void 0:m.logoUrl)||k,onError:a=>{a.currentTarget.src=k},alt:"Logo",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var r;return p((r=a.target.files)==null?void 0:r[0],"company.logoUrl")},className:"text-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Profile Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((v=s.company)==null?void 0:v.profileImageUrl)||F,onError:a=>{a.currentTarget.src=F},alt:"Profile",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var r;return p((r=a.target.files)==null?void 0:r[0],"company.profileImageUrl")},className:"text-sm"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[["Company Name","company.name","text","MkopoSuite"],["Email","company.email","email","info@example.com"],["Phone","company.phone","tel","+255700000000"],["Website","company.website","url","https://example.com"],["Address line 1","company.address1","text",""],["Address line 2","company.address2","text",""],["City","company.city","text",""],["Country","company.country","text","Tanzania"]].map(([a,r,x,y])=>e.jsx(b,{label:a,type:x,placeholder:y,value:g(s,r)||"",onChange:u=>n(t,r,u)},r))})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Branding"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(T,{label:"Primary Color",value:((N=s.branding)==null?void 0:N.primaryColor)||"#1d4ed8",onChange:a=>n(t,"branding.primaryColor",a)}),e.jsx(T,{label:"Secondary Color",value:((C=s.branding)==null?void 0:C.secondaryColor)||"#0ea5e9",onChange:a=>n(t,"branding.secondaryColor",a)})]})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Locale & Formats"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[[["Currency","locale.currency","text","TZS"],["Currency in Words","locale.currencyInWords","text","Shillings"],["Timezone","locale.timezone","text","Africa/Dar_es_Salaam"],["Language","locale.language","text","en"],["Date Format","locale.dateFormat","text","dd/mm/yyyy"],["Thousand Separator","numberFormats.thousandSeparator","text",","],["Decimal Separator","numberFormats.decimalSeparator","text","."]].map(([a,r,x,y])=>e.jsx(b,{label:a,type:x,placeholder:y,value:g(s,r)??"",onChange:u=>n(t,r,u)},r)),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Currency Position"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:((S=s.numberFormats)==null?void 0:S.currencyPosition)||"prefix",onChange:a=>n(t,"numberFormats.currencyPosition",a.target.value),children:[e.jsx("option",{value:"prefix",children:"Prefix (TZS 1,000)"}),e.jsx("option",{value:"suffix",children:"Suffix (1,000 TZS)"})]})]})]})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Dashboard Messages"}),e.jsx(b,{label:"Important Notice (top amber line)",value:g(s,"dashboard.importantNotice")||"",onChange:a=>n(t,"dashboard.importantNotice",a),placeholder:"REMINDER: Submit weekly PAR review by Friday 4:00 PM."}),e.jsx(b,{label:"Company Message (blue line)",value:g(s,"dashboard.companyMessage")||"",onChange:a=>n(t,"dashboard.companyMessage",a),placeholder:"Welcome to MkopoSuite LMS — Q3 focus: Risk reduction & collections discipline."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(b,{label:"Curated Card Title (optional)",value:g(s,"dashboard.curatedMessage.title")||"",onChange:a=>n(t,"dashboard.curatedMessage.title",a),placeholder:"Quarterly Collections Drive"}),e.jsx("textarea",{className:"rounded border px-3 py-2 text-sm min-h-[96px]",placeholder:"Short text shown in a white card below the blue line.",value:g(s,"dashboard.curatedMessage.text")||"",onChange:a=>n(t,"dashboard.curatedMessage.text",a.target.value)})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white text-sm",disabled:o,onClick:()=>c(),children:o?"Saving…":"Save Changes"})})]})}function g(s,t){return t.split(".").reduce((l,o)=>l?l[o]:void 0,s)}function n(s,t,l){s(o=>{var p;const d=structuredClone(o),i=t.split(".");let c=d;for(let m=0;m<i.length-1;m++)c=c[p=i[m]]||(c[p]={});return c[i.at(-1)]=l,d})}function b({label:s,type:t="text",value:l,onChange:o,placeholder:d}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsx("input",{type:t,className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:l,onChange:i=>o(i.target.value),placeholder:d})]})}function T({label:s,value:t,onChange:l}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("input",{type:"color",className:"w-10 h-10 rounded border",value:t,onChange:o=>l(o.target.value)}),e.jsx("input",{type:"text",className:"flex-1 rounded border px-3 py-2 text-sm",value:t,onChange:o=>l(o.target.value),placeholder:"#1d4ed8"})]})]})}export{W as default};
