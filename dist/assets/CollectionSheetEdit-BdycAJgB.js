import{d as p,u as g,r as a,j as s}from"./index-CnjkEqLt.js";import{C as S}from"./CollectionSheetForm-ClkJHi2m.js";function E(){const{id:o}=p(),l=g(),[n,r]=a.useState(null),[c,d]=a.useState(!0),[u,i]=a.useState(!1);a.useEffect(()=>{(async()=>{try{const t=await fetch(`/api/collections/${o}`);if(!t.ok)throw new Error("Failed to load");const e=await t.json(),h=e.date?new Date(e.date).toISOString().slice(0,10):"";r({...e,date:h})}catch(t){alert(t.message||"Error")}finally{d(!1)}})()},[o]);const f=t=>r(e=>({...e,...t})),m=async t=>{t.preventDefault(),i(!0);try{if(!(await fetch(`/api/collections/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Failed to update");l("/collections")}catch(e){alert(e.message||"Error")}finally{i(!1)}};return c||!n?s.jsx("div",{className:"p-4",children:"Loadingâ€¦"}):s.jsxs("div",{className:"p-4",children:[s.jsx("h1",{className:"text-lg font-semibold mb-4",children:"Edit Collection Sheet"}),s.jsx(S,{value:n,onChange:f,onSubmit:m,submitting:u})]})}export{E as default};
