import{u as Ce,r as i,h as I,j as e,L as B}from"./index-DYDSVKWX.js";import{C as Ae}from"./circle-plus-3JqafleV.js";import{U as ke,B as Te}from"./upload-CMTMTIhu.js";import{S as Ie,F as Le}from"./search-CKpxkpnW.js";import{P as De,I as Be}from"./phone-D9GM51ze.js";import{C as Oe,a as Pe}from"./chevron-right-Qr2rOlfB.js";import{X as Me}from"./x-CJrs0eho.js";import{F as Ue}from"./file-up-ClfEj-lh.js";import"./createLucideIcon-ByphaTye.js";const T=10,Ee="+255";async function O(r=[],a={}){let o;for(const c of r)try{const h=await I.get(c,a);return h==null?void 0:h.data}catch(h){o=h}throw o||new Error("No endpoint succeeded")}function K(r){return Array.isArray(r)?r:Array.isArray(r==null?void 0:r.items)?r.items:Array.isArray(r==null?void 0:r.rows)?r.rows:Array.isArray(r==null?void 0:r.data)?r.data:[]}function W(r,a=Ee){if(!r)return"â€”";let o=String(r).trim();return o=o.replace(/[\s-]/g,""),o.startsWith("+")?o:a&&o.startsWith(a.replace("+",""))?`+${o}`:a&&o.startsWith("0")?`${a}${o.slice(1)}`:o.startsWith("+")?o:`+${o}`}const t={container:"p-6 min-h-screen bg-[var(--bg)] text-[var(--fg)]",card:"rounded-2xl border-2 border-[var(--border-strong)] bg-[var(--card)] shadow",btn:"inline-flex items-center gap-2 px-3 py-2 rounded-md border-2 border-[var(--border-strong)] bg-[var(--card)] text-[var(--fg)] hover:bg-[var(--kpi-bg)] transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",primary:"inline-flex items-center gap-2 px-3 py-2 rounded-md font-semibold bg-indigo-600 text-white hover:bg-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",input:"w-full h-10 rounded-md px-3 py-2 border-2 bg-[var(--input-bg)] text-[var(--input-fg)] border-[var(--input-border)] placeholder:text-[var(--input-placeholder)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",table:"min-w-full text-[15px] border-separate border-spacing-0",th:"px-3 py-2 text-left text-[13px] uppercase tracking-wide font-semibold bg-[var(--table-head-bg)] text-[var(--fg)] border border-[var(--border)] first:border-l-0 last:border-r-0",td:"px-3 py-2 border border-[var(--border)] first:border-l-0 last:border-r-0",link:"font-semibold underline decoration-2 underline-offset-2 rounded-sm text-[var(--ring)] hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",muted:"text-[var(--muted)]"},z=t.link,es=()=>{const r=Ce(),[a,o]=i.useState([]),[c,h]=i.useState(0),[x,p]=i.useState(""),[f,oe]=i.useState(""),[P,ce]=i.useState(""),[M,de]=i.useState(""),[U,me]=i.useState(""),[v,ue]=i.useState("createdAt"),[N,V]=i.useState("desc"),[b,y]=i.useState(1),[E,Q]=i.useState([]),[F,Y]=i.useState([]),he=i.useMemo(()=>new Map(E.map(s=>[String(s.id),s.name])),[E]),xe=i.useMemo(()=>new Map(F.map(s=>[String(s.id),s.name||s.email])),[F]),[q,G]=i.useState(!0),[Z,We]=i.useState(null),[R,pe]=i.useState(!1),[S,fe]=i.useState("overview"),[ge,H]=i.useState(!1),[L,D]=i.useState({overview:null,loans:[],savings:null,documents:[]}),X=i.useRef(null),[J,ee]=i.useState(!1),[ve,se]=i.useState([]),k=(s,n="info")=>{const m=Math.random().toString(36).slice(2);se(d=>[...d,{id:m,msg:s,type:n}]),setTimeout(()=>se(d=>d.filter(u=>u.id!==m)),3500)};i.useEffect(()=>{const s=setTimeout(()=>oe(x.trim()),300);return()=>clearTimeout(s)},[x]),i.useEffect(()=>{const s=new AbortController;return(async()=>{try{const[n,m]=await Promise.all([O(["/branches","/org/branches","/api/branches"],{signal:s.signal}).catch(()=>[]),O(["/users?role=loan_officer","/staff?role=loan_officer","/api/users?role=loan_officer","/users?role=officer","/officers","/users/loan-officers"],{signal:s.signal}).catch(()=>[])]),d=K(n),u=K(m);Q(d.map(l=>l?{id:l.id??l._id??l.branchId??String(l.code??""),name:l.name??l.branchName??`Branch ${l.id??l.code??""}`}:null).filter(Boolean)),Y(u.map(l=>l?{id:l.id??l._id??l.userId??l.email??String(Math.random()),name:l.name??l.fullName??l.email??"User",email:l.email}:null).filter(Boolean))}catch{Q([]),Y([])}})(),()=>s.abort()},[]);const _=i.useCallback(async s=>{var n,m,d,u;G(!0);try{const l=await I.get("/borrowers",{signal:s,params:{q:f||void 0,branchId:P||void 0,officerId:M||void 0,status:U||void 0,page:b,pageSize:T,sort:v,dir:N}});let g=[],j=0;Array.isArray(l.data)?(g=l.data,j=l.data.length):(g=((n=l.data)==null?void 0:n.items)||((m=l.data)==null?void 0:m.rows)||((d=l.data)==null?void 0:d.data)||[],j=Number(((u=l.data)==null?void 0:u.total)??g.length??0)),o(g),h(j)}catch{k("Failed to load borrowers","error"),o([]),h(0)}finally{G(!1)}},[f,P,M,U,b,v,N]);i.useEffect(()=>{const s=new AbortController;return _(s.signal),()=>s.abort()},[_]);const te=i.useCallback(async(s,n,m)=>{H(!0);try{if(s==="overview"){const d=await I.get(`/borrowers/${n}`,{signal:m});D(u=>({...u,overview:d.data||null}))}else if(s==="loans"){const d=await I.get(`/borrowers/${n}/loans`,{signal:m});D(u=>{var l;return{...u,loans:Array.isArray(d.data)?d.data:((l=d.data)==null?void 0:l.items)||[]}})}else if(s==="savings"){const d=await O([`/borrowers/${n}/savings`,`/savings/borrower/${n}`],{signal:m});D(u=>({...u,savings:d||{balance:0,totals:{},transactions:[]}}))}else if(s==="documents"){const d=await O([`/borrowers/${n}/kyc`,`/borrowers/${n}/documents`],{signal:m}).catch(()=>({items:[]}));D(u=>({...u,documents:K(d)}))}}catch{k("Failed to load borrower details","error")}finally{H(!1)}},[]);i.useEffect(()=>{if(!R||!Z)return;const s=new AbortController;return te(S,Z,s.signal),()=>s.abort()},[R,S,Z,te]);const $=s=>{v===s?V(n=>n==="asc"?"desc":"asc"):(ue(s),V("asc"))},re=s=>`TZS ${Number(s||0).toLocaleString()}`,je=i.useMemo(()=>c===0?0:(b-1)*T+1,[b,c]),Ne=i.useMemo(()=>Math.min(b*T,c),[b,c]),ae=s=>(s==null?void 0:s.name)||`${(s==null?void 0:s.firstName)||""} ${(s==null?void 0:s.lastName)||""}`.trim()||"â€”",ne=s=>{var n,m,d;return(s==null?void 0:s.branchName)||((n=s==null?void 0:s.Branch)==null?void 0:n.name)||((m=s==null?void 0:s.branch)==null?void 0:m.name)||he.get(String((s==null?void 0:s.branchId)??((d=s==null?void 0:s.branch)==null?void 0:d.id)??""))||"â€”"},be=s=>{var n,m,d,u;return(s==null?void 0:s.officerName)||((n=s==null?void 0:s.officer)==null?void 0:n.name)||((m=s==null?void 0:s.loanOfficer)==null?void 0:m.name)||xe.get(String((s==null?void 0:s.officerId)??(s==null?void 0:s.loanOfficerId)??((d=s==null?void 0:s.officer)==null?void 0:d.id)??((u=s==null?void 0:s.loanOfficer)==null?void 0:u.id)??""))||"â€”"},we=s=>{var u,l;const n=(s||"").trim();if(!n)return"U";const m=n.split(/\s+/).filter(Boolean);return((((u=m[0])==null?void 0:u[0])||"")+(((l=m[1])==null?void 0:l[0])||"")).toUpperCase()||n[0].toUpperCase()},le=s=>{const n="inline-flex items-center gap-1 text-[11px] px-2 py-0.5 rounded-full border-2";switch(String(s||"").toLowerCase()){case"active":return`${n} bg-blue-100  border-blue-200  text-blue-900`;case"pending_kyc":return`${n} bg-amber-100 border-amber-200 text-amber-900`;case"inactive":return`${n} bg-gray-100 border-gray-200 text-gray-900`;case"blacklisted":return`${n} bg-red-100  border-red-200  text-red-900`;case"disabled":return`${n} bg-slate-100 border-slate-200 text-slate-900`;default:return`${n} bg-gray-100 border-gray-200 text-gray-900`}},ye=()=>{var s;return(s=X.current)==null?void 0:s.click()},Se=async s=>{var m,d,u,l;const n=(m=s.target.files)==null?void 0:m[0];if(s.target.value="",!!n){if(!/\.csv$/i.test(n.name)){k("Please choose a .csv file","error");return}try{ee(!0);const g=new FormData;g.append("file",n);const j=await I.post("/borrowers/import",g,{headers:{"Content-Type":"multipart/form-data"}}),ie=((d=j==null?void 0:j.data)==null?void 0:d.count)??0;k(`Imported ${ie} borrower${ie===1?"":"s"}.`,"info");const $e=new AbortController;_($e.signal)}catch(g){const j=((l=(u=g==null?void 0:g.response)==null?void 0:u.data)==null?void 0:l.error)||"Import failed";k(j,"error")}finally{ee(!1)}}};return e.jsxs("div",{className:t.container,children:[e.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:ve.map(s=>e.jsx("div",{className:"px-3 py-2 rounded-md shadow text-sm border-2",style:{background:"var(--card)",color:"var(--fg)",borderColor:"var(--border-strong)"},children:s.msg},s.id))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold",children:"ðŸ‘¥ Borrowers"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>r("/borrowers/add"),className:t.primary,children:[e.jsx(Ae,{className:"w-4 h-4"})," Add Borrower"]}),e.jsxs("button",{onClick:ye,className:t.btn,disabled:J,title:"Import .csv with columns: name, phone, nationalId (optional)",children:[e.jsx(ke,{className:"w-4 h-4"})," ",J?"Importingâ€¦":"Import CSV"]}),e.jsx("input",{ref:X,type:"file",accept:".csv,text/csv",className:"hidden",onChange:Se})]})]}),e.jsx("div",{className:`${t.card} p-3 md:p-4 mb-4`,children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ie,{className:`w-4 h-4 ${t.muted} absolute left-3 top-1/2 -translate-y-1/2`}),e.jsx("input",{value:x,onChange:s=>{p(s.target.value),y(1)},placeholder:"Search by name, phone, national IDâ€¦",className:`${t.input} pl-9`})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("div",{className:"min-w-[200px]",children:e.jsxs("select",{value:P,onChange:s=>{ce(s.target.value),y(1)},className:t.input,children:[e.jsx("option",{value:"",children:"All Branches"}),E.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"min-w-[200px]",children:e.jsxs("select",{value:M,onChange:s=>{de(s.target.value),y(1)},className:t.input,children:[e.jsx("option",{value:"",children:"All Officers"}),F.map(s=>e.jsx("option",{value:s.id,children:s.name||s.email},s.id))]})}),e.jsx("div",{className:"min-w-[180px]",children:e.jsxs("select",{value:U,onChange:s=>{me(s.target.value),y(1)},className:t.input,children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending_kyc",children:"Pending KYC"}),e.jsx("option",{value:"blacklisted",children:"Blacklisted"})]})}),e.jsxs("div",{className:`hidden md:flex items-center text-sm px-2 ${t.muted}`,children:[e.jsx(Le,{className:"w-4 h-4 mr-1"})," Filters"]})]})]})}),e.jsxs("div",{className:`${t.card}`,children:[e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:`${t.table} hidden md:table`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx(C,{label:"Name",sortKey:"name",sort:v,dir:N,onSort:$}),e.jsx(C,{label:"Phone",sortKey:"phone",sort:v,dir:N,onSort:$}),e.jsx(C,{label:"Branch",sortKey:"branchName",sort:v,dir:N,onSort:$}),e.jsx(C,{label:"Officer",sortKey:"officerName",sort:v,dir:N,onSort:$}),e.jsx(C,{label:"Outstanding",sortKey:"outstanding",sort:v,dir:N,onSort:$}),e.jsx(C,{label:"Status",sortKey:"status",sort:v,dir:N,onSort:$}),e.jsx("th",{className:"px-3 py-2 text-right pr-4 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:q?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:`px-4 py-10 text-center ${t.muted}`,children:"Loadingâ€¦"})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:`px-4 py-10 text-center ${t.muted}`,children:"No borrowers."})}):a.map(s=>{const n=s.outstanding??s.outstandingAmount??s.outstandingTotal??null;return e.jsxs("tr",{className:"border-t border-[var(--border)] hover:bg-[var(--kpi-bg)]",children:[e.jsx("td",{className:t.td,children:ae(s)}),e.jsx("td",{className:t.td,children:W(s.phone)}),e.jsx("td",{className:t.td,children:ne(s)}),e.jsx("td",{className:t.td,children:be(s)}),e.jsx("td",{className:t.td,children:n==null?"â€”":re(n)}),e.jsx("td",{className:t.td,children:e.jsx("span",{className:le(s.status),children:s.status||"â€”"})}),e.jsx("td",{className:`${t.td} text-right`,children:e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(B,{to:`/borrowers/${encodeURIComponent(s.id)}`,className:z,children:"View"}),e.jsx(B,{to:`/loans/applications?borrowerId=${encodeURIComponent(s.id)}`,className:z,children:"New Loan"})]})})]},s.id)})})]}),e.jsx("div",{className:"md:hidden grid grid-cols-1 gap-3 p-3",children:q?e.jsx("div",{className:`p-6 text-center ${t.muted}`,children:"Loadingâ€¦"}):a.length===0?e.jsx("div",{className:`p-6 text-center ${t.muted}`,children:"No borrowers."}):a.map(s=>{const n=ae(s),m=s.outstanding??s.outstandingAmount??s.outstandingTotal??null;return e.jsxs("div",{className:"rounded-xl border-2 border-[var(--border-strong)] bg-[var(--card)] p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full text-white flex items-center justify-center text-sm font-semibold shadow-sm",style:{background:"linear-gradient(135deg, var(--sb-start), var(--sb-end))"},children:we(n)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold",children:n}),e.jsxs("div",{className:`text-xs ${t.muted}`,children:["ID: ",s.id]})]})]}),e.jsx("span",{className:le(s.status),children:s.status||"â€”"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:`w-4 h-4 ${t.muted}`}),e.jsx("span",{children:W(s.phone)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:`w-4 h-4 ${t.muted}`}),e.jsx("span",{className:"truncate",children:ne(s)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:`text-xs ${t.muted}`,children:"Outstanding"}),e.jsx("div",{className:"text-sm font-medium",children:m==null?"â€”":re(m)})]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-end gap-2",children:[e.jsx(B,{to:`/borrowers/${encodeURIComponent(s.id)}`,className:t.btn,children:"View"}),e.jsx(B,{to:`/loans/applications?borrowerId=${encodeURIComponent(s.id)}`,className:t.primary,children:"New Loan"})]})]},s.id)})})]}),e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-b-xl border-t",style:{background:"var(--table-foot-bg)",borderColor:"var(--border-strong)"},children:[e.jsxs("div",{className:t.muted,children:[je,"â€“",Ne," of ",c]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(s=>Math.max(1,s-1)),disabled:b===1,className:`${t.btn} p-2 disabled:opacity-50`,"aria-label":"Previous page",children:e.jsx(Oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(s=>s*T<c?s+1:s),disabled:b*T>=c,className:`${t.btn} p-2 disabled:opacity-50`,"aria-label":"Next page",children:e.jsx(Pe,{className:"w-4 h-4"})})]})]})]}),R&&e.jsxs(Fe,{onClose:()=>pe(!1),title:"Borrower Details",children:[e.jsx("div",{className:"flex gap-2 border-b mb-3 border-[var(--border)]",children:["overview","loans","savings","documents"].map(s=>e.jsx("button",{onClick:()=>fe(s),className:`px-3 py-2 text-sm border-b-2 -mb-px ${S===s?"border-indigo-600 text-indigo-600 font-semibold":"border-transparent text-[var(--muted)]"} focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]`,children:s[0].toUpperCase()+s.slice(1)},s))}),e.jsx("div",{children:ge?e.jsx("div",{className:`${t.muted} text-sm`,children:"Loadingâ€¦"}):S==="overview"?e.jsx(Ze,{data:L.overview}):S==="loans"?e.jsx(Re,{items:L.loans}):S==="savings"?e.jsx(_e,{items:L.savings}):e.jsx(Ke,{items:L.documents})})]})]})},C=({label:r,sortKey:a,sort:o,dir:c,onSort:h})=>{const x=o===a;return e.jsx("th",{className:`${t.th} cursor-pointer select-none`,onClick:()=>h(a),title:"Sort",children:e.jsxs("span",{className:`inline-flex items-center gap-1 ${x?"text-indigo-700 font-semibold":""}`,children:[r,x?c==="asc"?"â–²":"â–¼":""]})})},Fe=({title:r,onClose:a,children:o})=>e.jsxs("div",{className:"fixed inset-0 z-[60]",children:[e.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:a}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-[620px] shadow-2xl p-4 overflow-y-auto rounded-l-2xl border-l-2",style:{background:"var(--card)",color:"var(--fg)",borderColor:"var(--border-strong)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:r}),e.jsx("button",{onClick:a,className:"p-1 rounded hover:bg-[var(--kpi-bg)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]","aria-label":"Close drawer",children:e.jsx(Me,{className:"w-5 h-5"})})]}),o]})]}),Ze=({data:r})=>{var h,x,p,f;if(!r)return e.jsx("p",{className:`${t.muted} text-sm`,children:"No overview data."});const a=r.name||`${r.firstName||""} ${r.lastName||""}`.trim()||"â€”",o=r.branchName||((h=r.Branch)==null?void 0:h.name)||((x=r.branch)==null?void 0:x.name)||"â€”",c=r.officerName||((p=r.officer)==null?void 0:p.name)||((f=r.loanOfficer)==null?void 0:f.name)||"â€”";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(A,{label:"Full Name",value:a}),e.jsx(A,{label:"Phone",value:W(r.phone)}),e.jsx(A,{label:"Branch",value:o}),e.jsx(A,{label:"Loan Officer",value:c}),e.jsx(A,{label:"Status",value:r.status||"â€”"}),e.jsx(A,{label:"National ID",value:r.nationalId||"â€”"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:[e.jsx(w,{label:"Net Savings",value:`TZS ${Number((r==null?void 0:r.netSavings)||0).toLocaleString()}`}),e.jsx(w,{label:"Overdue Amount",value:`TZS ${Number((r==null?void 0:r.overdueAmount)||0).toLocaleString()}`}),e.jsx(w,{label:"PAR %",value:`${Number((r==null?void 0:r.parPercent)||0).toFixed(2)}%`})]})]})},Re=({items:r})=>{const a=Array.isArray(r)?r:[];if(a.length===0)return e.jsx("p",{className:`${t.muted} text-sm`,children:"No loans."});const o=c=>`TZS ${Number(c||0).toLocaleString()}`;return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:t.th,children:"Loan #"}),e.jsx("th",{className:t.th,children:"Product"}),e.jsx("th",{className:t.th,children:"Amount"}),e.jsx("th",{className:t.th,children:"Outstanding"}),e.jsx("th",{className:t.th,children:"Status"})]})}),e.jsx("tbody",{children:a.map(c=>{const h=c.outstanding??c.outstandingAmount??c.outstandingTotal??null;return e.jsxs("tr",{className:"border-t border-[var(--border)]",children:[e.jsx("td",{className:t.td,children:c.id}),e.jsx("td",{className:t.td,children:c.productName||c.product||c.loanType||"â€”"}),e.jsx("td",{className:t.td,children:o(c.amount)}),e.jsx("td",{className:t.td,children:h==null?"â€”":o(h)}),e.jsx("td",{className:t.td,children:c.status||"â€”"})]},c.id)})})]})})},_e=({items:r})=>{var c,h,x;const a=r&&!Array.isArray(r)?r:null;if(a){const p=Array.isArray(a.transactions)?a.transactions:[];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3",children:[e.jsx(w,{label:"Balance",value:`TZS ${Number(a.balance||0).toLocaleString()}`}),e.jsx(w,{label:"Deposits",value:`TZS ${Number(((c=a.totals)==null?void 0:c.deposits)||0).toLocaleString()}`}),e.jsx(w,{label:"Withdrawals",value:`TZS ${Number(((h=a.totals)==null?void 0:h.withdrawals)||0).toLocaleString()}`}),e.jsx(w,{label:"Interest",value:`TZS ${Number(((x=a.totals)==null?void 0:x.interest)||0).toLocaleString()}`})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:t.th,children:"Date"}),e.jsx("th",{className:t.th,children:"Type"}),e.jsx("th",{className:t.th,children:"Amount"}),e.jsx("th",{className:t.th,children:"Notes"})]})}),e.jsx("tbody",{children:p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:`px-4 py-6 ${t.muted}`,children:"No transactions."})}):p.map(f=>e.jsxs("tr",{className:"border-t border-[var(--border)]",children:[e.jsx("td",{className:t.td,children:f.date?new Date(f.date).toLocaleDateString():"â€”"}),e.jsx("td",{className:t.td,style:{textTransform:"capitalize"},children:f.type||"â€”"}),e.jsx("td",{className:t.td,children:`TZS ${Number(f.amount||0).toLocaleString()}`}),e.jsx("td",{className:t.td,children:f.notes||"â€”"})]},f.id))})]})})]})}const o=Array.isArray(r)?r:[];return o.length===0?e.jsx("p",{className:`${t.muted} text-sm`,children:"No savings accounts."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:t.th,children:"Account #"}),e.jsx("th",{className:t.th,children:"Balance"}),e.jsx("th",{className:t.th,children:"Status"})]})}),e.jsx("tbody",{children:o.map(p=>e.jsxs("tr",{className:"border-t border-[var(--border)]",children:[e.jsx("td",{className:t.td,children:p.id}),e.jsx("td",{className:t.td,children:`TZS ${Number(p.balance||0).toLocaleString()}`}),e.jsx("td",{className:t.td,children:p.status||"â€”"})]},p.id))})]})})},Ke=({items:r})=>e.jsxs("div",{children:[e.jsx("div",{className:"mb-3",children:e.jsxs("button",{onClick:()=>alert("KYC upload coming soon"),className:t.btn,children:[e.jsx(Ue,{className:"w-4 h-4"})," Upload Document"]})}),!Array.isArray(r)||r.length===0?e.jsx("p",{className:`${t.muted} text-sm`,children:"No documents."}):e.jsx("ul",{className:"space-y-2",children:r.map(a=>e.jsxs("li",{className:"flex items-center justify-between border-2 border-[var(--border-strong)] rounded-md px-3 py-2 bg-[var(--card)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:`w-4 h-4 ${t.muted}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:a.fileName||a.name||"Document"}),e.jsxs("p",{className:`text-xs ${t.muted}`,children:[a.type||"KYC",a.createdAt?` â€¢ ${new Date(a.createdAt).toLocaleString()}`:""]})]})]}),a.url&&e.jsx("a",{className:z,href:a.url,target:"_blank",rel:"noreferrer",children:"Open"})]},a.id))})]}),A=({label:r,value:a})=>e.jsxs("div",{className:"border-2 border-[var(--border-strong)] rounded-lg p-3 bg-[var(--card)]",children:[e.jsx("p",{className:`text-xs ${t.muted}`,children:r}),e.jsx("p",{className:"text-base font-semibold mt-1",children:a})]}),w=({label:r,value:a})=>e.jsxs("div",{className:"rounded-2xl p-4 border-2 border-[var(--border-strong)] bg-[var(--card)] shadow-sm",children:[e.jsx("p",{className:`text-xs ${t.muted}`,children:r}),e.jsx("p",{className:"text-xl font-semibold mt-1",children:a})]});export{es as default,W as formatPhoneDisplay};
