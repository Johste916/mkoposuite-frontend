import{r as a,j as s}from"./index-Ba7wW-0c.js";import{o as y,p as j,q as u}from"./banking-zfMq6Wp_.js";const x="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7";function f(){const[l,h]=a.useState([]),[i,d]=a.useState(!1),[o,c]=a.useState(null),n=async()=>{d(!0),c(null);try{const e=await y(),r=Array.isArray(e)?e:Array.isArray(e==null?void 0:e.items)?e.items:[];h(r)}catch(e){c((e==null?void 0:e.normalizedMessage)||String(e))}finally{d(!1)}};a.useEffect(()=>{n()},[]);const p=async(e,r)=>{try{r==="approve"?await j(e):await u(e,{reason:"Rejected in UI"}),await n()}catch(t){c((t==null?void 0:t.normalizedMessage)||String(t))}};return s.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[s.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Banking Approvals"}),s.jsx("button",{className:"px-3 py-2 rounded border hover:bg-gray-50",onClick:n,disabled:i,children:i?"Refreshing…":"Refresh"})]}),o&&s.jsx("div",{className:"text-sm text-red-600 mb-3",children:o}),s.jsx("section",{className:x,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"text-left text-gray-600",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-2 pr-4",children:"Date"}),s.jsx("th",{className:"py-2 pr-4",children:"Kind"}),s.jsx("th",{className:"py-2 pr-4",children:"Type"}),s.jsx("th",{className:"py-2 pr-4 text-right",children:"Amount"}),s.jsx("th",{className:"py-2 pr-4",children:"Ref"}),s.jsx("th",{className:"py-2 pr-4",children:"Requested By"}),s.jsx("th",{className:"py-2 pr-4",children:"Actions"})]})}),s.jsxs("tbody",{children:[l.map(e=>{const r=e.kind||e.group||e.accountType||e.source||"bank",t=e.occurredAt||e.createdAt||e.submittedAt,m=e.amount??e.txAmount??e.value;return s.jsxs("tr",{className:"border-t",children:[s.jsx("td",{className:"py-2 pr-4",children:t?new Date(t).toLocaleString():"—"}),s.jsx("td",{className:"py-2 pr-4 capitalize",children:String(r)}),s.jsx("td",{className:"py-2 pr-4",children:e.type||e.txType||"—"}),s.jsxs("td",{className:"py-2 pr-4 text-right",children:[m!=null?Number(m).toLocaleString():"—"," ",e.currency||e.ccy||""]}),s.jsx("td",{className:"py-2 pr-4",children:e.reference||e.ref||"—"}),s.jsx("td",{className:"py-2 pr-4",children:e.requestedBy||e.actor||"—"}),s.jsx("td",{className:"py-2 pr-4",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{className:"px-2 py-1 bg-green-600 text-white rounded",onClick:()=>p(e.id,"approve"),children:"Approve"}),s.jsx("button",{className:"px-2 py-1 bg-red-600 text-white rounded",onClick:()=>p(e.id,"reject"),children:"Reject"})]})})]},e.id)}),!l.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"py-6 text-center text-gray-500",children:"No pending items"})})]})]})})})]})}export{f as default};
