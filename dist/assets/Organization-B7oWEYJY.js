import{r as n,j as e,b as c}from"./index-DMb-qiOH.js";function b(){const[s,r]=n.useState(null),[o,m]=n.useState(null),[x,i]=n.useState(""),d=async()=>{var a,l;i("");try{const t=await c.get("/tenants/me");r(t.data);const u=await c.get("/tenants/me/entitlements");m(u.data)}catch(t){i(((l=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:l.error)||t.message)}};n.useEffect(()=>{d()},[]);const p=async()=>{var a,l;try{await c.patch("/tenants/me",{planCode:s.planCode,trialEndsAt:s.trialEndsAt,autoDisableOverdue:s.autoDisableOverdue,graceDays:s.graceDays,billingEmail:s.billingEmail}),await d()}catch(t){i(((l=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:l.error)||t.message)}};return x?e.jsxs("div",{className:"p-4 text-sm text-red-600",children:["Error: ",x]}):!s||!o?e.jsx("div",{className:"p-4 text-sm text-gray-500",children:"Loadingâ€¦"}):e.jsxs("div",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Organization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs opacity-70",children:"Plan"}),e.jsxs("select",{value:s.planCode,onChange:a=>r({...s,planCode:a.target.value}),className:"border rounded px-2 py-1 w-full dark:bg-slate-800",children:[e.jsx("option",{value:"basic",children:"Basic"}),e.jsx("option",{value:"pro",children:"Pro"}),e.jsx("option",{value:"premium",children:"Premium"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs opacity-70",children:"Trial ends"}),e.jsx("input",{type:"date",value:s.trialEndsAt||"",onChange:a=>r({...s,trialEndsAt:a.target.value}),className:"border rounded px-2 py-1 w-full dark:bg-slate-800"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs opacity-70",children:"Auto suspend overdue"}),e.jsx("input",{type:"checkbox",checked:!!s.autoDisableOverdue,onChange:a=>r({...s,autoDisableOverdue:a.target.checked})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs opacity-70",children:"Grace days"}),e.jsx("input",{type:"number",value:s.graceDays??7,onChange:a=>r({...s,graceDays:Number(a.target.value)}),className:"border rounded px-2 py-1 w-full dark:bg-slate-800"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs opacity-70",children:"Billing email"}),e.jsx("input",{type:"email",value:s.billingEmail||"",onChange:a=>r({...s,billingEmail:a.target.value}),className:"border rounded px-2 py-1 w-full dark:bg-slate-800"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:"h-9 px-3 rounded bg-blue-600 text-white",children:"Save"}),e.jsx("button",{onClick:d,className:"h-9 px-3 rounded border",children:"Refresh"})]}),e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Entitlements"}),e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-2 text-sm",children:Object.entries(o.modules||{}).map(([a,l])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-44 capitalize",children:a.replace(/_/g," ")}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${l?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:l?"enabled":"disabled"})]},a))})]})]})}export{b as default};
