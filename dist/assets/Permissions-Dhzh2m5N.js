import{r as i,j as e,b as o}from"./index-tUrsHHEQ.js";function u(){const[d,m]=i.useState([]),[l,c]=i.useState(""),[p,x]=i.useState(!1),n=async()=>{try{x(!0);const s=await o.get("/permissions");m(Array.isArray(s.data)?s.data:[])}catch(s){console.error("Failed to load permissions",s)}finally{x(!1)}},h=async()=>{var t,a;const s=l.trim();if(s)try{await o.post("/permissions",{name:s}),c(""),n()}catch(r){console.error("Failed to add permission",r),alert(((a=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:a.error)||"Error adding permission")}},y=async s=>{var t,a;if(window.confirm("Delete this permission?"))try{await o.delete(`/permissions/${s}`),n()}catch(r){console.error("Failed to delete permission",r),alert(((a=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:a.error)||"Error deleting permission")}};return i.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Permissions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:"border px-3 py-2 rounded w-64",placeholder:"New permission (e.g., loan.approve)",value:l,onChange:s=>c(s.target.value)}),e.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Add"})]})]}),e.jsx("div",{className:"bg-white border rounded",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border px-3 py-2 text-left",children:"ID"}),e.jsx("th",{className:"border px-3 py-2 text-left",children:"Name"}),e.jsx("th",{className:"border px-3 py-2 text-right",children:"Actions"})]})}),e.jsx("tbody",{children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-6 text-gray-500",children:"Loadingâ€¦"})}):d.length?d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border px-3 py-2",children:s.id}),e.jsx("td",{className:"border px-3 py-2",children:s.name}),e.jsx("td",{className:"border px-3 py-2 text-right",children:e.jsx("button",{onClick:()=>y(s.id),className:"bg-red-500 text-white px-3 py-1 rounded",children:"Delete"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-6 text-gray-500",children:"No permissions found"})})})]})})]})}export{u as default};
