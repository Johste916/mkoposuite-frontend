import{r as l,b as U,j as a,L as Ne}from"./index-BuFaVkfx.js";import{c as z}from"./createLucideIcon-D_qREJCM.js";import{C as we}from"./circle-plus-ARBfyPQ7.js";import{i as Ve,S as Da,a as be,r as _a,u as la,R as Ma,b as Ta,c as La,d as Ra,g as $a,e as oa,f as Fa,h as Ka,j as za,k as ge,l as Wa,G as Va,C as Ga,m as ca,n as Ua,L as fe,o as qa,p as Ha,t as Xa,q as Ge,s as da,v as ma,w as ua,x as xa,y as Za,z as ha,A as Ya,J as Ja,B as Y,D as Qa,E as et,F as at,H as tt,I as Ue,K as q,M as rt,N as ee,O as ae,P as re,Q as st,T as pa,U as ga,V as fa,W as nt,X as it,Y as qe,Z as lt,_ as ot,$ as He,a0 as ct,a1 as De,a2 as Xe,a3 as dt,a4 as mt,a5 as Ae,a6 as Pe,a7 as Se,a8 as Ce,a9 as Oe,aa as Ie}from"./CartesianChart-ChXpl2LB.js";import{U as ut}from"./user-plus-DFyPGieo.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],Ze=z("chart-no-axes-column",xt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ye=z("clipboard-list",ht);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Be=z("credit-card",pt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],J=z("dollar-sign",gt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Je=z("download",ft);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Qe=z("info",vt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],yt=z("message-square",bt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],jt=z("thumbs-down",kt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ea=z("triangle-alert",Nt);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],At=z("users",wt);var Pt="Invariant failed";function St(t,e){throw new Error(Pt)}var Ct=["x","y"];function _e(){return _e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_e.apply(null,arguments)}function aa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aa(Object(r),!0).forEach(function(n){Ot(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ot(t,e,r){return(e=It(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(t){var e=Bt(t,"string");return typeof e=="symbol"?e:e+""}function Bt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Et(t,e){if(t==null)return{};var r,n,o=Dt(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Dt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}function _t(t,e){var{x:r,y:n}=t,o=Et(t,Ct),c="".concat(r),d=parseInt(c,10),p="".concat(n),b=parseInt(p,10),u="".concat(e.height||o.height),h=parseInt(u,10),g="".concat(e.width||o.width),y=parseInt(g,10);return le(le(le(le(le({},e),o),d?{x:d}:{}),b?{y:b}:{}),{},{height:h,width:y,name:e.name,radius:e.radius})}function va(t){return l.createElement(Da,_e({shapeType:"rectangle",propTransformer:_t,activeClassName:"recharts-active-bar"},t))}var Mt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,o)=>{if(Ve(e))return e;var c=Ve(n)||be(n);return c?e(n,o):(c||St(),r)}},Tt=["onMouseEnter","onMouseLeave","onClick"],Lt=["value","background","tooltipPosition"],Rt=["id"],$t=["onMouseEnter","onClick","onMouseLeave"];function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(null,arguments)}function ta(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ta(Object(r),!0).forEach(function(n){Ft(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ta(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ft(t,e,r){return(e=Kt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kt(t){var e=zt(t,"string");return typeof e=="symbol"?e:e+""}function zt(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ve(t,e){if(t==null)return{};var r,n,o=Wt(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Wt(t,e){if(t==null)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.indexOf(n)!==-1)continue;r[n]=t[n]}return r}var Vt=t=>{var{dataKey:e,name:r,fill:n,legendType:o,hide:c}=t;return[{inactive:c,dataKey:e,type:o,color:n,value:oa(r,e),payload:t}]};function Gt(t){var{dataKey:e,stroke:r,strokeWidth:n,fill:o,name:c,hide:d,unit:p}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:o,dataKey:e,nameKey:void 0,name:oa(c,e),hide:d,type:t.tooltipType,color:t.fill,unit:p}}}function Ut(t){var e=ge(da),{data:r,dataKey:n,background:o,allOtherBarProps:c}=t,{onMouseEnter:d,onMouseLeave:p,onClick:b}=c,u=ve(c,Tt),h=ma(d,n),g=ua(p),y=xa(b,n);if(!o||r==null)return null;var j=Za(o,!1);return l.createElement(l.Fragment,null,r.map((A,v)=>{var{value:C,background:k,tooltipPosition:N}=A,m=ve(A,Lt);if(!k)return null;var S=h(A,v),w=g(A,v),O=y(A,v),P=D(D(D(D(D({option:o,isActive:String(v)===e},m),{},{fill:"#eee"},k),j),ha(u,A,v)),{},{onMouseEnter:S,onMouseLeave:w,onClick:O,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return l.createElement(va,te({key:"background-bar-".concat(v)},P))}))}function ba(t){var{data:e,props:r,showLabels:n}=t,o=Qa(r),{id:c}=o,d=ve(o,Rt),{shape:p,dataKey:b,activeBar:u}=r,h=ge(da),g=ge(et),{onMouseEnter:y,onClick:j,onMouseLeave:A}=r,v=ve(r,$t),C=ma(y,b),k=ua(A),N=xa(j,b);return e?l.createElement(l.Fragment,null,e.map((m,S)=>{var w=u&&String(S)===h&&(g==null||b===g),O=w?u:p,P=D(D(D({},d),m),{},{isActive:w,option:O,index:S,dataKey:b});return l.createElement(fe,te({className:"recharts-bar-rectangle"},ha(v,m,S),{onMouseEnter:C(m,S),onMouseLeave:k(m,S),onClick:N(m,S),key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(S)}),l.createElement(va,P))}),n&&at.renderCallByParent(r,e)):null}function qt(t){var{props:e,previousRectanglesRef:r}=t,{data:n,layout:o,isAnimationActive:c,animationBegin:d,animationDuration:p,animationEasing:b,onAnimationEnd:u,onAnimationStart:h}=e,g=r.current,y=Ya(e,"recharts-bar-"),[j,A]=l.useState(!1),v=l.useCallback(()=>{typeof u=="function"&&u(),A(!1)},[u]),C=l.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return l.createElement(Ja,{begin:d,duration:p,isActive:c,easing:b,onAnimationEnd:v,onAnimationStart:C,key:y},k=>{var N=k===1?n:n==null?void 0:n.map((m,S)=>{var w=g&&g[S];if(w)return D(D({},m),{},{x:Y(w.x,m.x,k),y:Y(w.y,m.y,k),width:Y(w.width,m.width,k),height:Y(w.height,m.height,k)});if(o==="horizontal"){var O=Y(0,m.height,k);return D(D({},m),{},{y:m.y+m.height-O,height:O})}var P=Y(0,m.width,k);return D(D({},m),{},{width:P})});return k>0&&(r.current=N??null),N==null?null:l.createElement(fe,null,l.createElement(ba,{props:e,data:N,showLabels:!j}))})}function Ht(t){var{data:e,isAnimationActive:r}=t,n=l.useRef(null);return r&&e&&e.length&&(n.current==null||n.current!==e)?l.createElement(qt,{previousRectanglesRef:n,props:t}):l.createElement(ba,{props:t,data:e,showLabels:!0})}var ya=0,Xt=(t,e)=>{var r=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:r,errorVal:ca(t,e)}};class Zt extends l.PureComponent{render(){var{hide:e,data:r,dataKey:n,className:o,xAxisId:c,yAxisId:d,needClip:p,background:b,id:u}=this.props;if(e)return null;var h=Ua("recharts-bar",o),g=u;return l.createElement(fe,{className:h,id:u},p&&l.createElement("defs",null,l.createElement(qa,{clipPathId:g,xAxisId:c,yAxisId:d})),l.createElement(fe,{className:"recharts-bar-rectangles",clipPath:p?"url(#clipPath-".concat(g,")"):void 0},l.createElement(Ut,{data:r,dataKey:n,background:b,allOtherBarProps:this.props}),l.createElement(Ht,this.props)),this.props.children)}}var Yt={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Va.isSsr,legendType:"rect",minPointSize:ya,xAxisId:0,yAxisId:0};function Jt(t){var{xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:p,animationDuration:b,animationEasing:u,isAnimationActive:h}=t,{needClip:g}=Fa(e,r),y=Ka(),j=la(),A=za(t.children,Ga),v=ge(N=>Ar(N,e,r,j,t.id,A));if(y!=="vertical"&&y!=="horizontal")return null;var C,k=v==null?void 0:v[0];return k==null||k.height==null||k.width==null?C=0:C=y==="vertical"?k.height/2:k.width/2,l.createElement(Wa,{xAxisId:e,yAxisId:r,data:v,dataPointFormatter:Xt,errorBarOffset:C},l.createElement(Zt,te({},t,{layout:y,needClip:g,data:v,xAxisId:e,yAxisId:r,hide:n,legendType:o,minPointSize:c,activeBar:d,animationBegin:p,animationDuration:b,animationEasing:u,isAnimationActive:h})))}function Qt(t){var{layout:e,barSettings:{dataKey:r,minPointSize:n},pos:o,bandSize:c,xAxis:d,yAxis:p,xAxisTicks:b,yAxisTicks:u,stackedData:h,displayedData:g,offset:y,cells:j}=t,A=e==="horizontal"?p:d,v=h?A.scale.domain():null,C=Ha({numericAxis:A});return g.map((k,N)=>{var m,S,w,O,P,W;h?m=Xa(h[N],v):(m=ca(k,r),Array.isArray(m)||(m=[C,m]));var T=Mt(n,ya)(m[1],N);if(e==="horizontal"){var H,[ce,V]=[p.scale(m[0]),p.scale(m[1])];S=Ge({axis:d,ticks:b,bandSize:c,offset:o.offset,entry:k,index:N}),w=(H=V??ce)!==null&&H!==void 0?H:void 0,O=o.size;var de=ce-V;if(P=tt(de)?0:de,W={x:S,y:y.top,width:O,height:y.height},Math.abs(T)>0&&Math.abs(P)<Math.abs(T)){var se=Ue(P||T)*(Math.abs(T)-Math.abs(P));w-=se,P+=se}}else{var[ne,X]=[d.scale(m[0]),d.scale(m[1])];if(S=ne,w=Ge({axis:p,ticks:u,bandSize:c,offset:o.offset,entry:k,index:N}),O=X-ne,P=o.size,W={x:y.left,y:w,width:y.width,height:P},Math.abs(T)>0&&Math.abs(O)<Math.abs(T)){var Z=Ue(O||T)*(Math.abs(T)-Math.abs(O));O+=Z}}if(S==null||w==null||O==null||P==null)return null;var me=D(D({},k),{},{x:S,y:w,width:O,height:P,value:h?m:m[1],payload:k,background:W,tooltipPosition:{x:S+O/2,y:w+P/2}},j&&j[N]&&j[N].props);return me}).filter(Boolean)}function Q(t){var e=_a(t,Yt),r=la();return l.createElement(Ma,{id:e.id,type:"bar"},n=>l.createElement(l.Fragment,null,l.createElement(Ta,{legendPayload:Vt(e)}),l.createElement(La,{fn:Gt,args:e}),l.createElement(Ra,{type:"bar",id:n,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:$a(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:r}),l.createElement(Jt,te({},e,{id:n}))))}Q.displayName="Bar";function ra(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ra(Object(r),!0).forEach(function(n){er(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function er(t,e,r){return(e=ar(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ar(t){var e=tr(t,"string");return typeof e=="symbol"?e:e+""}function tr(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rr=(t,e)=>e,sr=(t,e,r)=>r,nr=(t,e,r,n)=>n,ir=(t,e,r,n,o)=>o,oe=q([ga,ir],(t,e)=>t.filter(r=>r.type==="bar").find(r=>r.id===e)),lr=q([oe],t=>t==null?void 0:t.maxBarSize),or=(t,e,r,n,o,c)=>c,sa=(t,e,r)=>{var n=r??t;if(!be(n))return De(n,e,0)},cr=q([re,ga,rr,sr,nr],(t,e,r,n,o)=>e.filter(c=>t==="horizontal"?c.xAxisId===r:c.yAxisId===n).filter(c=>c.isPanorama===o).filter(c=>c.hide===!1).filter(c=>c.type==="bar")),dr=(t,e,r,n)=>{var o=re(t);return o==="horizontal"?qe(t,"yAxis",r,n):qe(t,"xAxis",e,n)},mr=(t,e,r)=>{var n=re(t);return n==="horizontal"?He(t,"xAxis",e):He(t,"yAxis",r)},ur=(t,e,r)=>{var n={},o=t.filter(ct),c=t.filter(u=>u.stackId==null),d=o.reduce((u,h)=>(u[h.stackId]||(u[h.stackId]=[]),u[h.stackId].push(h),u),n),p=Object.entries(d).map(u=>{var[h,g]=u,y=g.map(A=>A.dataKey),j=sa(e,r,g[0].barSize);return{stackId:h,dataKeys:y,barSize:j}}),b=c.map(u=>{var h=[u.dataKey].filter(y=>y!=null),g=sa(e,r,u.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...p,...b]},xr=q([cr,ot,mr],ur),hr=(t,e,r,n,o)=>{var c,d,p=oe(t,e,r,n,o);if(p!=null){var b=re(t),u=fa(t),{maxBarSize:h}=p,g=be(h)?u:h,y,j;return b==="horizontal"?(y=ee(t,"xAxis",e,n),j=ae(t,"xAxis",e,n)):(y=ee(t,"yAxis",r,n),j=ae(t,"yAxis",r,n)),(c=(d=pa(y,j,!0))!==null&&d!==void 0?d:g)!==null&&c!==void 0?c:0}},ka=(t,e,r,n)=>{var o=re(t),c,d;return o==="horizontal"?(c=ee(t,"xAxis",e,n),d=ae(t,"xAxis",e,n)):(c=ee(t,"yAxis",r,n),d=ae(t,"yAxis",r,n)),pa(c,d)};function pr(t,e,r,n,o){var c=n.length;if(!(c<1)){var d=De(t,r,0,!0),p,b=[];if(Xe(n[0].barSize)){var u=!1,h=r/c,g=n.reduce((k,N)=>k+(N.barSize||0),0);g+=(c-1)*d,g>=r&&(g-=(c-1)*d,d=0),g>=r&&h>0&&(u=!0,h*=.9,g=c*h);var y=(r-g)/2>>0,j={offset:y-d,size:0};p=n.reduce((k,N)=>{var m,S={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:j.offset+j.size+d,size:u?h:(m=N.barSize)!==null&&m!==void 0?m:0}},w=[...k,S];return j=w[w.length-1].position,w},b)}else{var A=De(e,r,0,!0);r-2*A-(c-1)*d<=0&&(d=0);var v=(r-2*A-(c-1)*d)/c;v>1&&(v>>=0);var C=Xe(o)?Math.min(v,o):v;p=n.reduce((k,N,m)=>[...k,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:A+(v+d)*m+(v-C)/2,size:C}}],b)}return p}}var gr=(t,e,r,n,o,c,d)=>{var p=be(d)?e:d,b=pr(r,n,o!==c?o:c,t,p);return o!==c&&b!=null&&(b=b.map(u=>pe(pe({},u),{},{position:pe(pe({},u.position),{},{offset:u.position.offset-o/2})}))),b},fr=q([xr,fa,nt,it,hr,ka,lr],gr),vr=(t,e,r,n)=>ee(t,"xAxis",e,n),br=(t,e,r,n)=>ee(t,"yAxis",r,n),yr=(t,e,r,n)=>ae(t,"xAxis",e,n),kr=(t,e,r,n)=>ae(t,"yAxis",r,n),jr=q([fr,oe],(t,e)=>{if(!(t==null||e==null)){var r=t.find(n=>n.stackId===e.stackId&&e.dataKey!=null&&n.dataKeys.includes(e.dataKey));if(r!=null)return r.position}}),Nr=(t,e)=>{var r=lt(e);if(!(!t||r==null||e==null)){var{stackId:n}=e;if(n!=null){var o=t[n];if(o){var{stackedData:c}=o;if(c)return c.find(d=>d.key===r)}}}},wr=q([dr,oe],Nr),Ar=q([rt,vr,br,yr,kr,jr,re,st,ka,wr,oe,or],(t,e,r,n,o,c,d,p,b,u,h,g)=>{var{chartData:y,dataStartIndex:j,dataEndIndex:A}=p;if(!(h==null||c==null||d!=="horizontal"&&d!=="vertical"||e==null||r==null||n==null||o==null||b==null)){var{data:v}=h,C;if(v!=null&&v.length>0?C=v:C=y==null?void 0:y.slice(j,A+1),C!=null)return Qt({layout:d,barSettings:h,pos:c,bandSize:b,xAxis:e,yAxis:r,xAxisTicks:n,yAxisTicks:o,stackedData:u,displayedData:C,offset:t,cells:g})}}),Pr=["axis","item"],Ee=l.forwardRef((t,e)=>l.createElement(dt,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Pr,tooltipPayloadSearcher:mt,categoricalChartProps:t,ref:e}));const na="ms_dash_filters_v1",ia="ms_dash_auto_refresh_v1",Sr=()=>{const[t,e]=l.useState(()=>typeof document<"u"&&document.documentElement.classList.contains("dark"));return l.useEffect(()=>{if(typeof document>"u")return;const r=document.documentElement,n=new MutationObserver(()=>{e(r.classList.contains("dark"))});return n.observe(r,{attributes:!0,attributeFilter:["class"]}),()=>n.disconnect()},[]),t},Cr=new Intl.NumberFormat(void 0,{maximumFractionDigits:0}),_r=()=>{const t=Sr(),[e,r]=l.useState(null),[n,o]=l.useState([]),[c,d]=l.useState([]),[p,b]=l.useState(""),[u,h]=l.useState(""),[g,y]=l.useState(""),[j,A]=l.useState(0),[v,C]=l.useState([]),[k,N]=l.useState(!1),[m,S]=l.useState([]),[w,O]=l.useState(0),[P,W]=l.useState(1),T=10,[H,ce]=l.useState(""),[V,de]=l.useState(""),[se,ne]=l.useState({}),[X,Z]=l.useState({}),[me,ue]=l.useState({}),[L,ja]=l.useState(null),[Me,Na]=l.useState([]),[Te,wa]=l.useState([]),[Le,Aa]=l.useState([]),[Re,Pa]=l.useState([]),[$e,Sa]=l.useState(!0),[Ca,Fe]=l.useState([]),$=(s,i="info")=>{const x=Math.random().toString(36).slice(2);Fe(E=>[...E,{id:x,msg:s,type:i}]),setTimeout(()=>Fe(E=>E.filter(I=>I.id!==x)),3500)},_=s=>{const i=Number(s);return Number.isFinite(i)?i:0},R=s=>{const i=_(s);return Number.isNaN(i)?"TZS —":`TZS ${Cr.format(i)}`},Oa=s=>{var i;return((i=n.find(x=>String(x.id)===String(s)))==null?void 0:i.name)||(s?`Branch #${s}`:"All branches")};l.useEffect(()=>{try{const s=localStorage.getItem(na);if(s){const i=JSON.parse(s);b(i.branchId||""),h(i.officerId||""),y(i.timeRange||"")}}catch{}try{const s=localStorage.getItem(ia);s&&A(Number(s)||0)}catch{}},[]),l.useEffect(()=>{const s={branchId:p,officerId:u,timeRange:g};localStorage.setItem(na,JSON.stringify(s))},[p,u,g]),l.useEffect(()=>{localStorage.setItem(ia,String(j||0))},[j]);const Ke=l.useCallback(async s=>{try{const[i,x]=await Promise.all([U.get("/branches",{signal:s}),U.get("/users",{params:{role:"loan_officer"},signal:s})]);o(Array.isArray(i.data)?i.data:[]),d(Array.isArray(x.data)?x.data:[])}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Filter fetch error:",(i==null?void 0:i.message)||i),$("Failed to load filters","error"))}},[]),ye=l.useCallback(async s=>{try{const i=await U.get("/dashboard/summary",{params:{branchId:p,officerId:u,timeRange:g},signal:s});r(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard summary error:",(i==null?void 0:i.message)||i),$("Failed to load summary","error"))}},[p,u,g]),ie=l.useCallback(async s=>{N(!0);try{const i=await U.get("/dashboard/communications",{signal:s}).catch(()=>null);i!=null&&i.data&&Array.isArray(i.data)?C(i.data):C(Array.isArray(e==null?void 0:e.generalCommunications)?e.generalCommunications:[])}finally{N(!1)}},[e]),G=l.useCallback(async(s={},i)=>{var x,E;try{const I=await U.get("/dashboard/activity",{params:{page:s.page??P,pageSize:T,dateFrom:H||void 0,dateTo:V||void 0},signal:i});S(((x=I.data)==null?void 0:x.items)||[]),O(((E=I.data)==null?void 0:E.total)||0)}catch(I){(I==null?void 0:I.name)!=="CanceledError"&&(console.error("Activity fetch error:",(I==null?void 0:I.message)||I),$("Failed to load activity","error"))}},[P,H,V]),ke=l.useCallback(async s=>{try{const i=await U.get("/dashboard/monthly-trends",{signal:s});ja(i.data||{})}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Monthly trends error:",(i==null?void 0:i.message)||i),$("Failed to load trends","error"))}},[]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await Ke(s.signal)}catch{}})(),()=>s.abort()},[Ke]);const xe=l.useCallback(async s=>{await Promise.all([ye(s),G({},s),ke(s)])},[ye,G,ke]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await xe(s.signal)}catch(i){(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(i==null?void 0:i.message)||i),$("Failed to load dashboard data","error"))}finally{Sa(!1)}})(),()=>s.abort()},[xe]),l.useEffect(()=>{if(!e)return;const s=new AbortController;return ie(s.signal).catch(i=>{(i==null?void 0:i.name)!=="CanceledError"&&(console.error("Comms fetch error:",(i==null?void 0:i.message)||i),$("Failed to load communications","error"))}),()=>s.abort()},[e,ie]),l.useEffect(()=>{e&&(Array.isArray(e.topBorrowers)&&Na(e.topBorrowers),Array.isArray(e.upcomingRepayments)&&wa(e.upcomingRepayments),Array.isArray(e.branchPerformance)&&Aa(e.branchPerformance),Array.isArray(e.officerPerformance)&&Pa(e.officerPerformance))},[e]),l.useEffect(()=>{if(!j||j<=0)return;const s=setInterval(()=>{const i=new AbortController;Promise.all([xe(i.signal),ie(i.signal)]).catch(()=>{}).finally(()=>i.abort())},j*6e4);return()=>clearInterval(s)},[j,xe,ie]);const Ia=async s=>{const i=`c-${s}`;ue(x=>({...x,[i]:!0}));try{const x=(se[s]||"").trim();if(!x)return;await U.post(`/dashboard/activity/${s}/comment`,{comment:x}),ne(E=>({...E,[s]:""})),await G(),$("Reply posted","success")}catch(x){console.error("Add comment error:",(x==null?void 0:x.message)||x),$("Failed to post reply","error")}finally{ue(x=>({...x,[i]:!1}))}},Ba=async s=>{const i=`a-${s}`;ue(x=>({...x,[i]:!0}));try{const x=X[s]||{};if(!x.assigneeId)return;await U.post(`/dashboard/activity/${s}/assign`,{assigneeId:x.assigneeId,dueDate:x.dueDate||null,note:x.note||""}),Z(E=>({...E,[s]:{assigneeId:"",dueDate:"",note:""}})),await G(),$("Task assigned","success")}catch(x){console.error("Assign task error:",(x==null?void 0:x.message)||x),$("Failed to assign task","error")}finally{ue(x=>({...x,[i]:!1}))}},je=({label:s,value:i,max:x})=>{const E=_(i),I=_(x),he=I>0?Math.round(E/I*100):0;return a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-slate-400",children:[a.jsx("span",{children:s}),a.jsx("span",{children:E.toLocaleString()})]}),a.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-slate-800 rounded",children:a.jsx("div",{className:"h-2 rounded transition-[width] duration-500",style:{width:`${he}%`,backgroundColor:"currentColor"}})})]})},ze=({className:s=""})=>a.jsx("div",{className:`animate-pulse bg-gray-100 dark:bg-slate-800/50 rounded ${s}`}),Ea=()=>{const s=v.flatMap(i=>(i.attachments||[]).map(x=>x.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((i,x)=>{setTimeout(()=>window.open(i,"_blank","noopener,noreferrer"),x*150)}),$(`Opening ${s.length} attachment${s.length>1?"s":""}…`,"info"))},K=e==null?void 0:e.dashboardMessage,f=t?{grid:"#334155",axis:"#94a3b8",legend:"#e2e8f0",tooltipBg:"#0f172a",tooltipText:"#e2e8f0",bar1:"#60a5fa",bar2:"#34d399"}:{grid:"#e2e8f0",axis:"#475569",legend:"#334155",tooltipBg:"#ffffff",tooltipText:"#0f172a",bar1:"#2563eb",bar2:"#10b981"};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-2xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-900 dark:to-slate-800 border border-blue-100 dark:border-slate-700 p-4 md:p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-extrabold text-slate-800 dark:text-slate-100 tracking-tight",children:"Dashboard"}),a.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Quick snapshot of borrowers, loans, repayments and savings."})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("select",{"aria-label":"Filter by branch",value:p,onChange:s=>b(s.target.value),className:"ms-select",children:[a.jsx("option",{value:"",children:"All Branches"}),n.map(s=>a.jsx("option",{value:s.id,children:s.name},s.id))]}),a.jsxs("select",{"aria-label":"Filter by loan officer",value:u,onChange:s=>h(s.target.value),className:"ms-select min-w-[12rem]",children:[a.jsx("option",{value:"",children:"All Loan Officers"}),c.map(s=>a.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),a.jsxs("select",{"aria-label":"Filter by time range",value:g,onChange:s=>y(s.target.value),className:"ms-select ms-select--sm",children:[a.jsx("option",{value:"",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"}),a.jsx("option",{value:"month",children:"This Month"}),a.jsx("option",{value:"quarter",children:"This Quarter"}),a.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),a.jsx("option",{value:"annual",children:"Annual"})]}),a.jsxs("select",{"aria-label":"Auto refresh interval",value:j,onChange:s=>A(Number(s.target.value)),className:"ms-select",children:[a.jsx("option",{value:0,children:"No Auto-Refresh"}),a.jsx("option",{value:1,children:"Every 1 min"}),a.jsx("option",{value:5,children:"Every 5 mins"}),a.jsx("option",{value:15,children:"Every 15 mins"})]}),a.jsx("button",{className:"ms-btn h-10 px-3.5 sm:px-4 inline-flex items-center justify-center whitespace-nowrap shrink-0",onClick:()=>{const s=new AbortController;Promise.all([ye(s.signal),G({page:1},s.signal),ke(s.signal),ie(s.signal)]).then(()=>{W(1),$("Dashboard refreshed","success")}).catch(()=>$("Refresh failed","error")).finally(()=>s.abort())},"aria-label":"Refresh dashboard",children:"Refresh"})]})]})}),a.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:Ca.map(s=>a.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),(e==null?void 0:e.importantNotice)&&a.jsx("div",{className:"rounded-xl border border-amber-200 dark:border-amber-900/40 bg-amber-50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-200 p-4",children:a.jsxs("div",{className:"flex gap-2 items-start",children:[a.jsx(Qe,{className:"w-5 h-5 mt-0.5"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-semibold truncate",children:"Important Notice"}),a.jsx("p",{className:"text-sm break-words",children:e.importantNotice})]})]})}),e!=null&&e.companyMessage?a.jsx("div",{className:"rounded-xl border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-950/30 dark:border-blue-800 text-blue-700 dark:text-blue-200 p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Qe,{className:"w-5 h-5 shrink-0"}),a.jsx("p",{className:"text-sm font-medium break-words",children:e.companyMessage})]})}):$e?a.jsx(ze,{className:"h-12"}):null,K&&a.jsx("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl shadow-sm p-4",children:a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"min-w-0",children:[K.title&&a.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-slate-100 truncate",children:K.title}),K.text&&a.jsx("p",{className:"text-sm text-gray-700 dark:text-slate-300 mt-1 break-words",children:K.text}),Array.isArray(K.attachments)&&K.attachments.length>0&&a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-[11px] text-gray-500 dark:text-slate-400 mb-1",children:"Attachments"}),a.jsx("div",{className:"flex flex-wrap gap-3",children:K.attachments.map(s=>a.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 dark:text-blue-300 underline",title:s.fileName,children:s.fileName||"Attachment"},`${s.id||s.fileUrl}`))})]})]}),Array.isArray(K.attachments)&&K.attachments.length>0&&a.jsxs("button",{onClick:()=>{K.attachments.forEach((s,i)=>{s.fileUrl&&setTimeout(()=>window.open(s.fileUrl,"_blank","noopener,noreferrer"),i*150)})},className:"text-xs flex items-center gap-1 border rounded px-2 py-1 h-8 dark:border-slate-700 dark:hover:bg-slate-800 shrink-0",title:"Open all attachments",children:[a.jsx(Je,{className:"w-3 h-3"})," Open all"]})]})}),((v==null?void 0:v.length)??0)>0&&a.jsxs("div",{className:"bg-white dark:bg-slate-900 border dark:border-slate-800 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50 dark:bg-slate-800/40 dark:border-slate-700",children:[a.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-slate-300",children:"General Communications"}),v.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&a.jsxs("button",{onClick:Ea,className:"text-xs flex items-center gap-1 border rounded px-2 py-1 dark:border-slate-700 dark:hover:bg-slate-800",title:"Open all attachments",disabled:k,children:[a.jsx(Je,{className:"w-3 h-3"})," Download all"]})]}),a.jsxs("div",{className:"relative h-10",children:[a.jsx("style",{children:"@keyframes ms-marquee{0%{transform:translateX(100%)}100%{transform:translateX(-100%)}}"}),a.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-700 dark:text-slate-200 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:v.map((s,i)=>a.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.type}),s.priority&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:s.priority}),s.audienceRole&&a.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:["role: ",s.audienceRole]}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&a.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-200",children:Oa(s.audienceBranchId)}),a.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),a.jsx("span",{className:"truncate",children:s.text})]},s.id||s.text||i))})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs(Ne,{to:"/loans/add",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Add Loan"]}),a.jsxs(Ne,{to:"/borrowers/add",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Add Borrower"]}),a.jsxs(Ne,{to:"/repayments/new",className:"ms-btn px-3 py-2 flex items-center gap-2 shadow-sm",children:[a.jsx(we,{className:"w-4 h-4"})," Record Repayment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6",children:[a.jsx("main",{className:"space-y-6",children:$e?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,i)=>a.jsx(ze,{className:"h-24"},i))}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[a.jsx(M,{tone:"indigo",title:"Total Borrowers",value:_(e==null?void 0:e.totalBorrowers).toLocaleString(),icon:a.jsx(At,{className:"w-5 h-5"})}),a.jsx(M,{tone:"sky",title:"Total Loans",value:_(e==null?void 0:e.totalLoans).toLocaleString(),icon:a.jsx(Be,{className:"w-5 h-5"})}),a.jsx(M,{tone:"blue",title:"Total Disbursed",value:R(e==null?void 0:e.totalDisbursed),icon:a.jsx(Be,{className:"w-5 h-5"})}),a.jsx(M,{tone:"emerald",title:"Total Paid",value:R(e==null?void 0:e.totalPaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"emerald",title:"Total Repaid",value:R(e==null?void 0:e.totalRepaid),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"indigo",title:"Expected Repayments",value:R(e==null?void 0:e.totalExpectedRepayments),icon:a.jsx(Ye,{className:"w-5 h-5"})}),a.jsx(M,{tone:"cyan",title:"Total Deposits",value:R(e==null?void 0:e.totalDeposits),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"amber",title:"Total Withdrawals",value:R(e==null?void 0:e.totalWithdrawals),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"blue",title:"Net Savings",value:R(e==null?void 0:e.netSavings),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"rose",title:"Defaulted Loan",value:R(e==null?void 0:e.defaultedLoan),icon:a.jsx(ea,{className:"w-5 h-5"})}),a.jsx(M,{tone:"rose",title:"Defaulted Interest",value:R(e==null?void 0:e.defaultedInterest),icon:a.jsx(ea,{className:"w-5 h-5"})}),a.jsx(M,{tone:"violet",title:"Outstanding Loan",value:R(e==null?void 0:e.outstandingLoan),icon:a.jsx(Be,{className:"w-5 h-5"})}),a.jsx(M,{tone:"violet",title:"Outstanding Interest",value:R(e==null?void 0:e.outstandingInterest),icon:a.jsx(J,{className:"w-5 h-5"})}),a.jsx(M,{tone:"slate",title:"Written Off",value:R(e==null?void 0:e.writtenOff),icon:a.jsx(jt,{className:"w-5 h-5"})}),a.jsx(M,{tone:"indigo",title:"PAR (Portfolio at Risk)",value:`${_(e==null?void 0:e.parPercent)}%`,icon:a.jsx(Ze,{className:"w-5 h-5"})})]}),L&&a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ze,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),a.jsx("h3",{className:"font-semibold text-gray-800 dark:text-slate-100",children:`Monthly Trends${L.month||L.year?` — ${L.month||""} ${L.year||""}`:""}`})]}),a.jsx("div",{className:"mb-4",children:a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Ee,{data:[{name:"Loans",value:_(L.monthlyLoans)},{name:"Deposits",value:_(L.monthlyDeposits)},{name:"Repayments",value:_(L.monthlyRepayments)}],children:[a.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"name",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:f.legend}}),a.jsx(Q,{dataKey:"value",fill:f.bar1})]})})}),(()=>{const s=[_(L.monthlyLoans),_(L.monthlyDeposits),_(L.monthlyRepayments)],i=Math.max(...s);return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"text-indigo-600 dark:text-indigo-400",children:a.jsx(je,{label:"Loans (count)",value:_(L.monthlyLoans),max:i})}),a.jsx("div",{className:"text-emerald-600 dark:text-emerald-400",children:a.jsx(je,{label:"Deposits (TZS)",value:_(L.monthlyDeposits),max:i})}),a.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:a.jsx(je,{label:"Repayments (TZS)",value:_(L.monthlyRepayments),max:i})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Top Borrowers"}),Me.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[a.jsx("th",{className:"py-1 pr-4",children:"Name"}),a.jsx("th",{className:"py-1 pr-4",children:"Outstanding"})]})}),a.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Me.map(s=>a.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[a.jsx("td",{className:"py-1 pr-4",children:s.name}),a.jsx("td",{className:"py-1 pr-4",children:R(s.outstanding)})]},s.id))})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 overflow-x-auto",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Upcoming Repayments"}),Te.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left text-gray-600 dark:text-slate-300",children:[a.jsx("th",{className:"py-1 pr-4",children:"Borrower"}),a.jsx("th",{className:"py-1 pr-4",children:"Due Date"}),a.jsx("th",{className:"py-1 pr-4",children:"Amount"})]})}),a.jsx("tbody",{className:"text-slate-800 dark:text-slate-200",children:Te.map(s=>a.jsxs("tr",{className:"border-t border-slate-200 dark:border-slate-700",children:[a.jsx("td",{className:"py-1 pr-4",children:s.borrower}),a.jsx("td",{className:"py-1 pr-4",children:s.dueDate}),a.jsx("td",{className:"py-1 pr-4",children:R(s.amount)})]},s.id))})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Branch Performance"}),Le.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Ee,{data:Le,children:[a.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"branch",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:f.legend}}),a.jsx(Q,{dataKey:"disbursed",fill:f.bar1}),a.jsx(Q,{dataKey:"repayments",fill:f.bar2})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:"Officer Performance"}),Re.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No data available."}):a.jsx(Ae,{width:"100%",height:260,children:a.jsxs(Ee,{data:Re,children:[a.jsx(Pe,{stroke:f.grid,strokeDasharray:"3 3"}),a.jsx(Se,{dataKey:"officer",tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Ce,{tick:{fill:f.axis},axisLine:{stroke:f.axis},tickLine:{stroke:f.axis}}),a.jsx(Oe,{contentStyle:{backgroundColor:f.tooltipBg,borderColor:f.grid,color:f.tooltipText},wrapperStyle:{outline:"none"}}),a.jsx(Ie,{wrapperStyle:{color:f.legend}}),a.jsx(Q,{dataKey:"loans",fill:f.bar1}),a.jsx(Q,{dataKey:"collections",fill:f.bar2})]})})]})]})]})}),a.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:a.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ye,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-300"}),a.jsx("h2",{className:"font-semibold text-gray-800 dark:text-slate-100",children:"Recent Activity"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[a.jsx("input",{type:"date",className:"ms-input h-9",value:H,onChange:s=>ce(s.target.value)}),a.jsx("input",{type:"date",className:"ms-input h-9",value:V,onChange:s=>de(s.target.value)}),a.jsx("button",{className:"ms-btn col-span-2 h-9 text-sm",onClick:()=>{W(1),G({page:1})},children:"Search by date"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent dark:from-slate-900"}),a.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent dark:from-slate-900"}),a.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:m.length===0?a.jsx("p",{className:"text-gray-500 dark:text-slate-400 text-sm",children:"No activity."}):m.map(s=>{var i,x,E,I,he;return a.jsxs("div",{className:"border rounded p-3 border-slate-200 dark:border-slate-700",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-800 dark:text-slate-100",children:[s.type," • ",s.entityType," #",s.entityId]}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-slate-300 break-words",children:s.message}),a.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-1",children:["by ",((i=s.createdBy)==null?void 0:i.name)||((x=s.createdBy)==null?void 0:x.email)," • ",new Date(s.createdAt).toLocaleString()]}),Array.isArray(s.comments)&&s.comments.length>0&&a.jsx("div",{className:"mt-2 space-y-1",children:s.comments.map(B=>{var F,We;return a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-2",children:[a.jsx("p",{className:"text-xs text-gray-800 dark:text-slate-200 break-words",children:B.comment}),a.jsxs("p",{className:"text-[11px] text-gray-400 dark:text-slate-400 mt-0.5",children:["— ",((F=B.createdBy)==null?void 0:F.name)||((We=B.createdBy)==null?void 0:We.email)," • ",new Date(B.createdAt).toLocaleString()]})]},B.id)})}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("input",{value:se[s.id]||"",onChange:B=>ne(F=>({...F,[s.id]:B.target.value})),placeholder:"Reply…",className:"ms-input flex-1 h-9 text-xs"}),a.jsxs("button",{onClick:()=>Ia(s.id),disabled:me[`c-${s.id}`],className:"ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center gap-1",children:[a.jsx(yt,{className:"w-3 h-3"})," Reply"]})]}),a.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[a.jsxs("select",{value:((E=X[s.id])==null?void 0:E.assigneeId)||"",onChange:B=>Z(F=>({...F,[s.id]:{...F[s.id]||{},assigneeId:B.target.value}})),className:"ms-select col-span-2 h-9 text-xs",children:[a.jsx("option",{value:"",children:"Assign to…"}),c.map(B=>a.jsx("option",{value:B.id,children:B.name||B.email},B.id))]}),a.jsx("input",{type:"date",value:((I=X[s.id])==null?void 0:I.dueDate)||"",onChange:B=>Z(F=>({...F,[s.id]:{...F[s.id]||{},dueDate:B.target.value}})),className:"ms-input h-9 text-xs"}),a.jsxs("button",{onClick:()=>Ba(s.id),disabled:me[`a-${s.id}`],className:"ms-btn h-9 px-2 text-xs disabled:opacity-50 flex items-center justify-center gap-1",children:[a.jsx(ut,{className:"w-3 h-3"})," Assign"]}),a.jsx("input",{value:((he=X[s.id])==null?void 0:he.note)||"",onChange:B=>Z(F=>({...F,[s.id]:{...F[s.id]||{},note:B.target.value}})),placeholder:"Note…",className:"ms-input col-span-4 h-9 text-xs"})]})]},s.id)})})]}),w>T&&a.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs text-slate-700 dark:text-slate-300",children:[a.jsxs("span",{children:[Math.min(P*T,w)," of ",w]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{const s=Math.max(P-1,1);W(s),G({page:s})},disabled:P===1,className:"ms-btn px-2 py-1 disabled:opacity-50",children:"Prev"}),a.jsx("button",{onClick:()=>{const s=P*T<w?P+1:P;s!==P&&(W(s),G({page:s}))},disabled:P*T>=w,className:"ms-btn px-2 py-1 disabled:opacity-50",children:"Next"})]})]})]})})]})]})},M=({title:t,value:e,icon:r,tone:n="indigo"})=>{const o={indigo:{ring:"ring-indigo-100 dark:ring-indigo-900/40",icon:"text-indigo-600 bg-indigo-50 dark:text-indigo-300 dark:bg-indigo-950/40"},sky:{ring:"ring-sky-100 dark:ring-sky-900/40",icon:"text-sky-600 bg-sky-50 dark:text-sky-300 dark:bg-sky-950/40"},blue:{ring:"ring-blue-100 dark:ring-blue-900/40",icon:"text-blue-600 bg-blue-50 dark:text-blue-300 dark:bg-blue-950/40"},emerald:{ring:"ring-emerald-100 dark:ring-emerald-900/40",icon:"text-emerald-600 bg-emerald-50 dark:text-emerald-300 dark:bg-emerald-950/40"},cyan:{ring:"ring-cyan-100 dark:ring-cyan-900/40",icon:"text-cyan-600 bg-cyan-50 dark:text-cyan-300 dark:bg-cyan-950/40"},amber:{ring:"ring-amber-100 dark:ring-amber-900/40",icon:"text-amber-600 bg-amber-50 dark:text-amber-300 dark:bg-amber-950/40"},violet:{ring:"ring-violet-100 dark:ring-violet-900/40",icon:"text-violet-600 bg-violet-50 dark:text-violet-300 dark:bg-violet-950/40"},rose:{ring:"ring-rose-100 dark:ring-rose-900/40",icon:"text-rose-600 bg-rose-50 dark:text-rose-300 dark:bg-rose-950/40"},slate:{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"}}[n]||{ring:"ring-slate-100 dark:ring-slate-800",icon:"text-slate-600 bg-slate-50 dark:text-slate-300 dark:bg-slate-950/40"};return a.jsx("div",{className:`group bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 p-4 ring-1 ${o.ring} min-h-[8rem]
                  transition-transform will-change-transform hover:-translate-y-0.5`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-full ${o.icon}`,children:r}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"text-xs font-medium text-gray-500 dark:text-slate-400 truncate",children:t}),a.jsx("p",{className:"text-xl font-semibold text-gray-900 dark:text-white break-words",children:e??"—"})]})]})})};export{_r as default};
