import{r as a,j as e}from"./index-DOOrcP1L.js";import{s as g,v as p}from"./banking-DMEBWd7E.js";function h(){const[n,l]=a.useState("{}"),[o,r]=a.useState(!1),[i,c]=a.useState(!1),[d,t]=a.useState(null);a.useEffect(()=>{r(!0),g().then(s=>l(JSON.stringify(s||{bank:{},cash:{}},null,2))).catch(s=>t((s==null?void 0:s.normalizedMessage)||String(s))).finally(()=>r(!1))},[]);const x=async()=>{t(null);try{c(!0);const s=JSON.parse(n);await p(s),t("Saved!")}catch(s){t("Invalid JSON or save error: "+((s==null?void 0:s.normalizedMessage)||(s==null?void 0:s.message)||String(s)))}finally{c(!1)}};return e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Rules & GL Mapping"}),e.jsx("div",{className:"text-xs text-gray-500",children:"/api/banks/rules/gl-mapping"})]}),o?e.jsx("div",{children:"Loading…"}):e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:"text-sm",children:d}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Map tx types to GL accounts. Example:"," ",e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:'{ "bank": { "deposit": "1000" }, "cash": { "withdrawal": "2000" } }'})]}),e.jsx("textarea",{className:"w-full h-80 border rounded p-2 font-mono text-sm",value:n,onChange:s=>l(s.target.value)}),e.jsx("button",{className:"bg-black text-white px-3 py-1 rounded",onClick:x,disabled:i,children:i?"Saving…":"Save"})]})]})}export{h as default};
