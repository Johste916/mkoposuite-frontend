import{u as Y,r as c,b as x,j as e,L as y}from"./index-CATecf6t.js";import{W as E}from"./wallet-DvrbACSh.js";import{C as f}from"./circle-plus-DUQiyOC9.js";import{B as J,U as X}from"./upload-BQjlcYGj.js";import{C as O,S as Z}from"./save-D3qooaBq.js";import{c as F}from"./createLucideIcon-9H90vOiP.js";import{F as Q}from"./file-up-D8N7K-UJ.js";import{X as w}from"./x-CdkkcUXx.js";import{U as ee}from"./user-CWFNAQQK.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],se=F("landmark",ae);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ne=F("shield-check",te),T=()=>new Date().toISOString().slice(0,10),l="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500/40 focus:border-indigo-500 transition-all",u="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-4 md:p-6",C=i=>Array.isArray(i)?i:Array.isArray(i==null?void 0:i.items)?i.items:Array.isArray(i==null?void 0:i.rows)?i.rows:Array.isArray(i==null?void 0:i.results)?i.results:[],le=[{value:"flat",label:"Flat rate"},{value:"reducing_equal_installments",label:"Reduced balance — equal installments"},{value:"reducing_equal_principal",label:"Reduced balance — equal principal"},{value:"interest_only",label:"Interest only"},{value:"compound_accrued",label:"Compound interest (accrued)"},{value:"compound_equal_installments",label:"Compound interest — equal installments"}],re=["None","Household Items","Vehicle (Logbook)","Land Title","Business Stock","Electronics","Salary Assignment","Other"],D=[{value:"weekly",label:"Weekly",perMonth:4},{value:"biweekly",label:"Bi-weekly",perMonth:2},{value:"monthly",label:"Monthly",perMonth:1},{value:"custom",label:"Custom"}],oe=[{value:"cash",label:"Cash"},{value:"bank",label:"Bank"},{value:"mobile_money",label:"Mobile Money"},{value:"other",label:"Other"}],ie=["new loan","open","top-up","defaulted"];function ve(){const i=Y(),[v,M]=c.useState([]),[b,S]=c.useState([]),[P,k]=c.useState([]),[I,A]=c.useState(!1),[q,R]=c.useState(!1),[s,o]=c.useState({productId:"",borrowerId:"",loanNumber:"",principal:"",releaseDate:T(),durationMonths:"",collateralType:"",collateralAmount:"",interestMethod:"flat",interestRate:"",interestAmount:"",fees:[],repaymentCycle:"monthly",numberOfRepayments:"",statusLabel:"new loan",disbursementMethod:"cash",disbursementBankId:"",disbursementReference:"",guarantors:[],spouseName:"",spouseOccupation:"",spouseIdNumber:"",spouseConsentNote:"",spousePhone:"",attachmentsMeta:[]}),L=c.useRef({});c.useEffect(()=>{(async()=>{try{const[a,n]=await Promise.all([x.get("/loan-products"),x.get("/borrowers",{params:{page:1,pageSize:500}}).catch(()=>({data:{items:[]}}))]);M(C(a.data)),S(C(n.data))}catch(a){console.warn("Failed to load products/borrowers",a),M([]),S([])}try{const a=await x.get("/banks");k(C(a.data))}catch{k([])}})()},[]);const h=c.useMemo(()=>Array.isArray(v)?v:[],[v]),B=c.useMemo(()=>Array.isArray(b)?b:[],[b]);c.useEffect(()=>{s.borrowerId&&(R(!0),(async()=>{var a,n,t;try{let r=0;try{const d=await x.get(`/borrowers/${s.borrowerId}/loans`);r=Array.isArray(d.data)?d.data.length:((n=(a=d.data)==null?void 0:a.items)==null?void 0:n.length)||0}catch{r=((t=(await x.get("/loans",{params:{borrowerId:s.borrowerId,page:1,pageSize:1}})).data)==null?void 0:t.total)||0}const m=(r+1).toString().padStart(3,"0");o(d=>({...d,loanNumber:m}))}catch{o(r=>({...r,loanNumber:""}))}finally{R(!1)}})())},[s.borrowerId]),c.useEffect(()=>{if(s.repaymentCycle==="custom")return;const a=D.find(r=>r.value===s.repaymentCycle),n=Number(s.durationMonths||0);if(!a||n<=0)return;const t=n*(a.perMonth||1);o(r=>({...r,numberOfRepayments:String(t)}))},[s.repaymentCycle,s.durationMonths]);const G=()=>o(a=>({...a,fees:[...a.fees,{name:"",amount:"",paid:!1}]})),N=(a,n)=>o(t=>({...t,fees:t.fees.map((r,m)=>m===a?{...r,...n}:r)})),U=a=>o(n=>({...n,fees:n.fees.filter((t,r)=>r!==a)})),$=()=>o(a=>({...a,guarantors:[...a.guarantors,{type:"existing",borrowerId:"",name:"",occupation:"",residence:"",contacts:"",verification:""}]})),p=(a,n)=>o(t=>({...t,guarantors:t.guarantors.map((r,m)=>m===a?{...r,...n}:r)})),z=a=>o(n=>({...n,guarantors:n.guarantors.filter((t,r)=>r!==a)})),V=a=>{const n=Math.random().toString(36).slice(2);o(t=>({...t,attachmentsMeta:[...t.attachmentsMeta,{type:a||"other",note:"",fileKey:n}]}))},H=(a,n)=>{L.current[a]=n||void 0},_=(a,n)=>o(t=>({...t,attachmentsMeta:t.attachmentsMeta.map((r,m)=>m===a?{...r,...n}:r)})),K=a=>o(n=>({...n,attachmentsMeta:n.attachmentsMeta.filter((t,r)=>r!==a)})),W=async a=>{var n;if(a.preventDefault(),!s.borrowerId)return alert("Select a borrower");if(!s.productId)return alert("Select a loan product");if(!s.principal||Number(s.principal)<=0)return alert("Enter a principal amount");if(!s.durationMonths)return alert("Enter loan duration (months)");A(!0);try{const t={productId:s.productId,borrowerId:s.borrowerId,loanNumber:s.loanNumber||null,amount:s.principal,currency:"TZS",releaseDate:s.releaseDate||T(),durationMonths:s.durationMonths,collateralType:s.collateralType||null,collateralAmount:s.collateralAmount||null,interestMethod:s.interestMethod,interestRate:s.interestRate||null,interestAmount:s.interestAmount||null,fees:s.fees,repaymentCycle:s.repaymentCycle,numberOfRepayments:s.numberOfRepayments,disbursementMethod:s.disbursementMethod,disbursementBankId:s.disbursementBankId||null,disbursementReference:s.disbursementReference||null,guarantors:s.guarantors,spouse:{name:s.spouseName||"",occupation:s.spouseOccupation||"",idNumber:s.spouseIdNumber||"",consentNote:s.spouseConsentNote||"",phone:s.spousePhone||""},status:"pending",statusLabel:s.statusLabel},r=new FormData;r.append("payload",JSON.stringify(t));for(const d of s.attachmentsMeta){const j=L.current[d.fileKey];j&&(r.append("files",j,j.name),r.append("filesMeta",JSON.stringify({type:d.type,note:d.note,name:j.name})))}const m=await x.post("/loans",r,{headers:{"Content-Type":"multipart/form-data"}});alert("Loan application submitted"),i(`/loans/${((n=m.data)==null?void 0:n.id)||""}`)}catch(t){console.error(t),alert("Failed to submit loan application")}finally{A(!1)}},g=c.useMemo(()=>h.find(a=>String(a.id)===String(s.productId)),[h,s.productId]);return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight",children:"Add Loan"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select borrower, configure product & terms, then attach guarantors and documents."})]}),e.jsx(y,{to:"/loans",className:"text-indigo-600 hover:underline text-sm",children:"Back to Loans"})]}),e.jsxs("form",{onSubmit:W,className:"grid grid-cols-1 xl:grid-cols-3 gap-6 relative",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-6",children:[e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Borrower & Product"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Borrower"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:`${l} flex-1`,value:s.borrowerId,onChange:a=>o({...s,borrowerId:a.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select borrower…"}),B.map(a=>e.jsxs("option",{value:a.id,children:[a.name," ",a.phone?`— ${a.phone}`:""]},a.id))]}),e.jsxs(y,{target:"_blank",to:"/borrowers/add",className:"px-3 py-2 rounded-lg border hover:bg-gray-50 inline-flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4"})," Add"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loan Product"}),e.jsxs("select",{className:l,value:s.productId,onChange:a=>{const n=a.target.value,t=h.find(r=>String(r.id)===String(n));o({...s,productId:n,interestMethod:(t==null?void 0:t.interestMethod)||s.interestMethod,interestRate:(t==null?void 0:t.interestRate)??s.interestRate})},required:!0,children:[e.jsx("option",{value:"",children:"Select product…"}),h.map(a=>e.jsxs("option",{value:a.id,children:[a.name,a.code?` (${a.code})`:""]},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loan # (auto)"}),e.jsx("input",{className:l,value:q?"…":s.loanNumber||"—",readOnly:!0})]})]})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Loan Terms"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Principal Amount"}),e.jsx("input",{type:"number",className:l,value:s.principal,onChange:a=>o({...s,principal:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-gray-600 flex items-center gap-1",children:[e.jsx(O,{className:"h-3.5 w-3.5"})," Loan Release Date"]}),e.jsx("input",{type:"date",className:l,value:s.releaseDate,onChange:a=>o({...s,releaseDate:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Collateral Type"}),e.jsxs("select",{className:l,value:s.collateralType,onChange:a=>o({...s,collateralType:a.target.value}),children:[e.jsx("option",{value:"",children:"Select…"}),re.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Collateral Amount"}),e.jsx("input",{type:"number",className:l,value:s.collateralAmount,onChange:a=>o({...s,collateralAmount:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loan Duration (months)"}),e.jsx("input",{type:"number",className:l,value:s.durationMonths,onChange:a=>o({...s,durationMonths:a.target.value}),required:!0})]})]})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Interest"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Interest Method"}),e.jsx("select",{className:l,value:s.interestMethod,onChange:a=>o({...s,interestMethod:a.target.value}),children:le.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Interest Rate (%)"}),e.jsx("input",{type:"number",step:"0.01",className:l,value:s.interestRate,onChange:a=>o({...s,interestRate:a.target.value}),placeholder:g!=null&&g.interestRate?String(g.interestRate):"e.g. 3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Interest Amount (optional)"}),e.jsx("input",{type:"number",className:l,value:s.interestAmount,onChange:a=>o({...s,interestAmount:a.target.value})})]})]})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Loan Fees"})]}),e.jsxs("button",{type:"button",onClick:G,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50",children:[e.jsx(f,{className:"h-4 w-4"})," Add Fee"]})]}),s.fees.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No fees added."}):e.jsx("div",{className:"space-y-3",children:s.fees.map((a,n)=>e.jsxs("div",{className:"grid md:grid-cols-[2fr_1fr_1fr_auto] gap-3 items-center",children:[e.jsx("input",{className:l,placeholder:"Fee name (e.g. Processing)",value:a.name,onChange:t=>N(n,{name:t.target.value})}),e.jsx("input",{type:"number",className:l,placeholder:"Amount",value:a.amount,onChange:t=>N(n,{amount:t.target.value})}),e.jsxs("select",{className:l,value:a.paid?"paid":"not_paid",onChange:t=>N(n,{paid:t.target.value==="paid"}),children:[e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"not_paid",children:"Not paid"})]}),e.jsx("button",{type:"button",onClick:()=>U(n),className:"p-2 rounded hover:bg-gray-50",children:e.jsx(w,{className:"h-4 w-4"})})]},n))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Unpaid fees will be included in the repayment schedule."})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(O,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Repayments"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Repayment Cycle"}),e.jsx("select",{className:l,value:s.repaymentCycle,onChange:a=>o({...s,repaymentCycle:a.target.value}),children:D.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"# of Repayments"}),e.jsx("input",{type:"number",className:l,value:s.numberOfRepayments,onChange:a=>o({...s,numberOfRepayments:a.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Loan Status (label)"}),e.jsx("select",{className:l,value:s.statusLabel,onChange:a=>o({...s,statusLabel:a.target.value}),children:ie.map(a=>e.jsx("option",{value:a,children:a},a))}),e.jsx("p",{className:"text-[11px] text-gray-500 mt-1",children:"DB status stays “pending” on create."})]})]})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ee,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Spouse (optional)"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("input",{className:l,placeholder:"Name",value:s.spouseName,onChange:a=>o({...s,spouseName:a.target.value})}),e.jsx("input",{className:l,placeholder:"Occupation",value:s.spouseOccupation,onChange:a=>o({...s,spouseOccupation:a.target.value})}),e.jsx("input",{className:l,placeholder:"ID Number",value:s.spouseIdNumber,onChange:a=>o({...s,spouseIdNumber:a.target.value})}),e.jsx("input",{className:l,placeholder:"Phone",value:s.spousePhone,onChange:a=>o({...s,spousePhone:a.target.value})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("textarea",{className:`${l} min-h-[84px]`,placeholder:"Consent / declaration note",value:s.spouseConsentNote,onChange:a=>o({...s,spouseConsentNote:a.target.value})})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(E,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Disbursement"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Method"}),e.jsx("select",{className:l,value:s.disbursementMethod,onChange:a=>o({...s,disbursementMethod:a.target.value}),children:oe.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),s.disbursementMethod==="bank"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Bank"}),e.jsxs("select",{className:l,value:s.disbursementBankId,onChange:a=>o({...s,disbursementBankId:a.target.value}),children:[e.jsx("option",{value:"",children:"Select bank…"}),P.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Reference (optional)"}),e.jsx("input",{className:l,value:s.disbursementReference,onChange:a=>o({...s,disbursementReference:a.target.value}),placeholder:"Txn ref / slip #"})]})]})]})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Guarantors"})]}),e.jsxs("button",{type:"button",onClick:$,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border hover:bg-gray-50",children:[e.jsx(f,{className:"h-4 w-4"})," Add Guarantor"]})]}),s.guarantors.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No guarantors added."}):e.jsx("div",{className:"space-y-4",children:s.guarantors.map((a,n)=>e.jsxs("div",{className:"border rounded-xl p-3 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Guarantor #",n+1]}),e.jsx("button",{type:"button",onClick:()=>z(n),className:"p-1 rounded hover:bg-gray-50",children:e.jsx(w,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Source"}),e.jsxs("select",{className:l,value:a.type,onChange:t=>p(n,{type:t.target.value}),children:[e.jsx("option",{value:"existing",children:"Select from borrowers"}),e.jsx("option",{value:"manual",children:"Enter manually"})]})]}),a.type==="existing"?e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Borrower"}),e.jsxs("select",{className:l,value:a.borrowerId||"",onChange:t=>p(n,{borrowerId:t.target.value}),children:[e.jsx("option",{value:"",children:"Select borrower…"}),B.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.phone?`— ${t.phone}`:""]},t.id))]})]}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsx("input",{className:l,placeholder:"Full name",value:a.name,onChange:t=>p(n,{name:t.target.value})}),e.jsx("input",{className:l,placeholder:"Occupation",value:a.occupation,onChange:t=>p(n,{occupation:t.target.value})}),e.jsx("input",{className:l,placeholder:"Residence",value:a.residence,onChange:t=>p(n,{residence:t.target.value})}),e.jsx("input",{className:l,placeholder:"Contacts",value:a.contacts,onChange:t=>p(n,{contacts:t.target.value})}),e.jsx("input",{className:l,placeholder:"Verification (ID #, etc.)",value:a.verification,onChange:t=>p(n,{verification:t.target.value})})]})]})]},n))})]}),e.jsxs("section",{className:u,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-lg",children:"Attachments"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["Borrower: Loan form","Borrower: Village introduction","Borrower: Fee receipt","Borrower: ID","Borrower: Business licence","Borrower: TIN","Borrower: Employment contract","Borrower: Salary slips","Borrower: Employer letter","Guarantor: ID","Guarantor: Village introduction","Other"].map(a=>e.jsxs("button",{type:"button",onClick:()=>V(a),className:"text-xs px-2 py-1 rounded border hover:bg-gray-50",children:["+ ",a.replace(/Borrower: |Guarantor: /g,"")]},a))})]}),s.attachmentsMeta.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No files attached."}):e.jsx("div",{className:"space-y-3",children:s.attachmentsMeta.map((a,n)=>e.jsxs("div",{className:"grid md:grid-cols-[2fr_1fr_auto] gap-3 items-center",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("input",{className:l,value:a.type,onChange:t=>_(n,{type:t.target.value})}),e.jsx("input",{className:l,placeholder:"Note (optional)",value:a.note,onChange:t=>_(n,{note:t.target.value})})]}),e.jsx("input",{type:"file",className:l,onChange:t=>{var r;return H(a.fileKey,(r=t.target.files)==null?void 0:r[0])}}),e.jsx("button",{type:"button",onClick:()=>K(n),className:"p-2 rounded hover:bg-gray-50",children:e.jsx(w,{className:"h-4 w-4"})})]},a.fileKey))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Accepted images/PDFs as supported by your backend."})]})]}),e.jsx("div",{className:"col-span-full",children:e.jsx("div",{className:"sticky bottom-0 inset-x-0 z-20 bg-white/90 backdrop-blur supports-[backdrop-filter]:bg-white/70 border-t",children:e.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4 py-3 flex justify-end gap-3",children:[e.jsx(y,{to:"/loans",className:"px-4 py-2 rounded-xl border hover:bg-gray-50",children:"Cancel"}),e.jsxs("button",{disabled:I,type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-60 disabled:cursor-not-allowed shadow-sm",children:[e.jsx(Z,{className:"h-4 w-4"}),I?"Submitting…":"Submit"]})]})})})]})]})}export{ve as default};
