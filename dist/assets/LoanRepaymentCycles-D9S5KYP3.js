import{j as e}from"./index-CZBhDo5F.js";import{u as g}from"./useSettingsResource-DiQGRokh.js";import{S as x}from"./settings-DYPooZZv.js";import"./index-D_E4gK91.js";const v=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now().toString(36)}-${Math.random().toString(36).slice(2,10)}`,u=(a,n=0)=>{if(a===""||a===null||typeof a>"u")return n;const r=Number(a);return Number.isFinite(r)?r:n};function C(){const{data:a,setData:n,loading:r,saving:i,error:o,success:m,save:p}=g(x.getLoanCycles,x.saveLoanCycles,{cycles:[]}),y=()=>n(s=>({...s,cycles:[...s.cycles||[],{id:v(),name:"Monthly",frequency:"monthly",interval:1,graceDays:0,active:!0}]})),l=(s,t)=>n(c=>({...c,cycles:(c.cycles||[]).map(d=>d.id===s?{...d,...t}:d)})),h=s=>n(t=>({...t,cycles:(t.cycles||[]).filter(c=>c.id!==s)}));return r?e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Loan Repayment Cycles"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Define cycles available when creating loans."})]}),o&&e.jsx("div",{className:"text-sm text-rose-600",children:o}),m&&e.jsx("div",{className:"text-sm text-emerald-600",children:m}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-3",children:[e.jsx("button",{className:"px-3 py-1.5 rounded bg-slate-100",onClick:y,children:"Add Cycle"}),(a.cycles||[]).length===0?e.jsx("div",{className:"text-sm text-slate-500",children:"No cycles yet."}):e.jsx("div",{className:"space-y-3",children:a.cycles.map(s=>e.jsxs("div",{className:"p-3 border rounded-lg grid grid-cols-1 md:grid-cols-6 gap-2",children:[e.jsx("input",{className:"rounded border px-3 py-2 text-sm",placeholder:"Name",value:s.name||"",onChange:t=>l(s.id,{name:t.target.value})}),e.jsxs("select",{className:"rounded border px-3 py-2 text-sm",value:s.frequency||"monthly",onChange:t=>l(s.id,{frequency:t.target.value}),children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"custom",children:"Custom"})]}),e.jsx("input",{type:"number",className:"rounded border px-3 py-2 text-sm",placeholder:"Interval",value:s.interval??1,onChange:t=>l(s.id,{interval:u(t.target.value,1)})}),e.jsx("input",{type:"number",className:"rounded border px-3 py-2 text-sm",placeholder:"Grace days",value:s.graceDays??0,onChange:t=>l(s.id,{graceDays:u(t.target.value,0)})}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:!!s.active,onChange:t=>l(s.id,{active:t.target.checked})}),"Active"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-rose-50 text-rose-700",onClick:()=>h(s.id),children:"Delete"})})]},s.id))})]}),e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white text-sm",disabled:i,onClick:()=>p(),children:i?"Saving…":"Save"})]})}export{C as default};
