import{a as c}from"./index-BuFaVkfx.js";const l="https://mkoposuite-backend-42w2.onrender.com/api".replace(/\/+$/,"")||`${window.location.origin}/api`,i=c.create({baseURL:l,withCredentials:!1}),d=["token","authToken","accessToken","jwt"],p=["tenantId","x-tenant-id","tenantID"];i.interceptors.request.use(e=>{var a,n;let s=null;for(const o of d)if(s=localStorage.getItem(o)||sessionStorage.getItem(o),s)break;s&&(e.headers.Authorization=`Bearer ${s.replace(/^Bearer /i,"")}`);let t=null;for(const o of p)if(t=localStorage.getItem(o)||sessionStorage.getItem(o),t)break;return t||(t=null),t&&(e.headers["x-tenant-id"]=t),(n=e.headers)["x-request-id"]||(n["x-request-id"]=((a=crypto==null?void 0:crypto.randomUUID)==null?void 0:a.call(crypto))||String(Date.now())),e});i.interceptors.response.use(e=>e,e=>{var t,a,n,o;const s=((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.error)||((o=(n=e==null?void 0:e.response)==null?void 0:n.data)==null?void 0:o.message)||(e==null?void 0:e.message)||"Request failed";return console.error("API error:",s,(e==null?void 0:e.response)||e),Promise.reject(e)});export{i as a};
