import{u as L,r,j as e,F,a as R,b as C,c as D,L as N,d as I,e as A}from"./index-CPepfGRk.js";const P="https://mkoposuite-backend-42w2.onrender.com/api".replace(/\/+$/,""),_=`${P}/login`,n="#0b7a3a",m="#096a33",B="#f2a42b";function M(){const o=r.useMemo(()=>[void 0,"/logo.svg","/logo.png","/Johsta Icon 1.png"].filter(Boolean),[]),[a,i]=r.useState(0);return{src:o[a]||"",onError:()=>{a<o.length-1&&i(a+1)}}}const G=()=>{const o=L(),{src:a,onError:i}=M(),[d,x]=r.useState(""),[u,y]=r.useState(""),[c,E]=r.useState(!1),[g,b]=r.useState(""),[h,p]=r.useState(!1);async function S(t){var v,f,j,w;t.preventDefault(),b(""),p(!0);try{const{data:s}=await A.post(_,{email:d,password:u}),{token:l,user:k}=s||{};if(!l)throw new Error("No token received from server");localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(k||{})),o("/")}catch(s){const l=((f=(v=s==null?void 0:s.response)==null?void 0:v.data)==null?void 0:f.error)||((w=(j=s==null?void 0:s.response)==null?void 0:j.data)==null?void 0:w.message)||"Invalid email or password";b(l)}finally{p(!1)}}return e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-emerald-50 via-white to-amber-50",children:[e.jsx("div",{className:"pointer-events-none absolute -top-32 -left-32 h-64 w-64 rounded-full bg-emerald-200/30 blur-3xl"}),e.jsx("div",{className:"pointer-events-none absolute -bottom-32 -right-32 h-64 w-64 rounded-full bg-amber-200/30 blur-3xl"}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"rounded-2xl bg-white/95 backdrop-blur shadow-xl ring-1 ring-black/5",children:[e.jsxs("div",{className:"px-8 pt-8 pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[a?e.jsx("img",{src:a,onError:i,alt:"MkopoSuite",className:"h-12 w-12 object-contain",draggable:!1}):null,e.jsx("h1",{className:"mt-3 text-2xl font-semibold text-slate-800",children:"Welcome to MkopoSuite"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Please login to continue"})]}),g?e.jsx("div",{className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:g}):null,e.jsxs("form",{onSubmit:S,className:"mt-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(F,{})}),e.jsx("input",{type:"email",value:d,onChange:t=>x(t.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-3 py-2 text-sm shadow-sm outline-none transition focus:border-[var(--brand-green)] focus:ring-2 focus:ring-[var(--brand-green)]/15",required:!0,placeholder:"admin@example.com",autoComplete:"email",style:{"--brand-green":n}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(R,{})}),e.jsx("input",{type:c?"text":"password",value:u,onChange:t=>y(t.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-10 py-2 text-sm shadow-sm outline-none transition focus:border-[var(--brand-green)] focus:ring-2 focus:ring-[var(--brand-green)]/15",required:!0,placeholder:"Enter your password",autoComplete:"current-password",style:{"--brand-green":n}}),e.jsx("button",{type:"button",onClick:()=>E(t=>!t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600","aria-label":c?"Hide password":"Show password",children:c?e.jsx(C,{}):e.jsx(D,{})})]})]}),e.jsx("div",{className:"flex items-center justify-end text-sm",children:e.jsx(N,{to:"/forgot-password",className:"text-[var(--brand-green)] hover:text-[var(--brand-green-hover)]",style:{"--brand-green":n,"--brand-green-hover":m},children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:h,className:"inline-flex w-full items-center justify-center rounded-xl bg-[var(--brand-green)] px-4 py-2.5 text-sm font-medium text-white shadow hover:bg-[var(--brand-green-hover)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--brand-green)]/30 disabled:opacity-60",style:{"--brand-green":n,"--brand-green-hover":m},children:h?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"mr-2 animate-spin"}),"Logging in…"]}):"Login"})]}),e.jsxs("div",{className:"mt-5 text-center text-sm text-slate-500",children:["Don’t have an account?"," ",e.jsx(N,{to:"/signup",className:"font-medium text-[var(--brand-green)] hover:text-[var(--brand-green-hover)]",style:{"--brand-green":n,"--brand-green-hover":m},children:"Create one"})]}),e.jsxs("div",{className:"mt-4 text-center text-[11px] text-slate-400",children:["© ",new Date().getFullYear()," MkopoSuite. All rights reserved."]})]}),e.jsx("div",{className:"h-1.5 w-full rounded-b-2xl",style:{backgroundColor:B}})]})})})]})};export{G as default};
