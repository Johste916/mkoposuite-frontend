import{r as t,j as e}from"./index-DFzTBWzb.js";import{h as w,B as D}from"./banking-BspTDiih.js";const T="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7",a="w-full border rounded px-3 py-2";function z(){const[b,y]=t.useState([]),[l,f]=t.useState(""),[i,S]=t.useState("in"),[d,A]=t.useState("other"),[c,o]=t.useState(""),[u,x]=t.useState(""),[m,h]=t.useState(""),[g,p]=t.useState(""),[j,v]=t.useState(!1),[N,r]=t.useState(null);t.useEffect(()=>{w().then(y).catch(s=>r((s==null?void 0:s.normalizedMessage)||String(s)))},[]);const C=async s=>{if(s.preventDefault(),!l||!c)return alert("Account & amount required");try{v(!0),r(null),await D(l,{direction:i,type:d,amount:Number(c),occurredAt:u||void 0,reference:m,description:g}),o(""),x(""),h(""),p(""),alert("Saved")}catch(n){r((n==null?void 0:n.normalizedMessage)||String(n))}finally{v(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Cash Transaction"}),e.jsxs("form",{onSubmit:C,className:T,children:[N&&e.jsx("div",{className:"text-sm text-red-600 mb-2",children:N}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Cash Account"}),e.jsxs("select",{className:a,value:l,onChange:s=>f(s.target.value),children:[e.jsx("option",{value:"",children:"—"}),b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Direction"}),e.jsxs("select",{className:a,value:i,onChange:s=>S(s.target.value),children:[e.jsx("option",{value:"in",children:"In"}),e.jsx("option",{value:"out",children:"Out"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Type"}),e.jsx("input",{className:a,value:d,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Amount"}),e.jsx("input",{className:a,type:"number",step:"0.01",value:c,onChange:s=>o(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Occurred At"}),e.jsx("input",{className:a,type:"datetime-local",value:u,onChange:s=>x(s.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Reference"}),e.jsx("input",{className:a,value:m,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs text-gray-600",children:"Description"}),e.jsx("input",{className:a,value:g,onChange:s=>p(s.target.value)})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{className:"px-4 py-2 rounded bg-indigo-600 text-white disabled:opacity-60",disabled:j,children:j?"Saving…":"Save"})})]})]})}export{z as default};
