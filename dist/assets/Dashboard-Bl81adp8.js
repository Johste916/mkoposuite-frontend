import{r as l,b as j,j as e}from"./index-ixQsyyaY.js";import{c as g}from"./createLucideIcon-t4NhfH-o.js";import{D as te}from"./download-1bKC4XSE.js";/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],ae=g("chart-no-axes-column",Ne);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ne=g("clipboard-list",ve);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],F=g("credit-card",we);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],N=g("dollar-sign",ke);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],le=g("info",Ae);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Se=g("message-square",Ce);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],Me=g("thumbs-down",Te);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ie=g("triangle-alert",De);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$e=g("user-plus",_e);/**
 * @license lucide-react v0.535.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ie=g("users",Re),re="ms_dash_filters_v1",Pe=()=>{const[a,$]=l.useState(null),[S,oe]=l.useState([]),[q,ce]=l.useState([]),[v,U]=l.useState(""),[w,z]=l.useState(""),[k,H]=l.useState(""),[y,W]=l.useState([]),[Le,Z]=l.useState(!1),[V,de]=l.useState([]),[A,xe]=l.useState(0),[h,R]=l.useState(1),C=10,[I,he]=l.useState(""),[L,me]=l.useState(""),[J,X]=l.useState({}),[T,M]=l.useState({}),[G,D]=l.useState({}),[u,pe]=l.useState(null),[K,ge]=l.useState(!0),[ue,Q]=l.useState([]),m=(s,t="info")=>{const n=Math.random().toString(36).slice(2);Q(r=>[...r,{id:n,msg:s,type:t}]),setTimeout(()=>Q(r=>r.filter(p=>p.id!==n)),3500)},b=s=>{const t=Number(s);return Number.isFinite(t)?t:0},d=s=>`TZS ${b(s).toLocaleString()}`;l.useEffect(()=>{try{const s=localStorage.getItem(re);if(s){const t=JSON.parse(s);U(t.branchId||""),z(t.officerId||""),H(t.timeRange||"")}}catch{}},[]),l.useEffect(()=>{const s={branchId:v,officerId:w,timeRange:k};localStorage.setItem(re,JSON.stringify(s))},[v,w,k]);const Y=l.useCallback(async s=>{const[t,n]=await Promise.all([j.get("/branches",{signal:s}),j.get("/users",{params:{role:"loan_officer"},signal:s})]);oe(t.data||[]),ce(n.data||[])},[]),B=l.useCallback(async s=>{const t=await j.get("/dashboard/summary",{params:{branchId:v,officerId:w,timeRange:k},signal:s});$(t.data||{})},[v,w,k]),E=l.useCallback(async s=>{Z(!0);try{const t=await j.get("/dashboard/communications",{signal:s}).catch(()=>null);t!=null&&t.data&&Array.isArray(t.data)?W(t.data):W(Array.isArray(a==null?void 0:a.generalCommunications)?a.generalCommunications:[])}finally{Z(!1)}},[a]),f=l.useCallback(async(s={},t)=>{var r,p;const n=await j.get("/dashboard/activity",{params:{page:s.page??h,pageSize:C,dateFrom:I||void 0,dateTo:L||void 0},signal:t});de(((r=n.data)==null?void 0:r.items)||[]),xe(((p=n.data)==null?void 0:p.total)||0)},[h,I,L]),O=l.useCallback(async s=>{const t=await j.get("/dashboard/monthly-trends",{signal:s});pe(t.data||{})},[]);l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await Y(s.signal)}catch(t){(t==null?void 0:t.name)!=="CanceledError"&&(console.error("Filter fetch error:",(t==null?void 0:t.message)||t),m("Failed to load filters","error"))}})(),()=>s.abort()},[Y]),l.useEffect(()=>{const s=new AbortController;return(async()=>{try{await Promise.all([B(s.signal),f({},s.signal),O(s.signal)])}catch(t){(t==null?void 0:t.name)!=="CanceledError"&&(console.error("Dashboard fetch error:",(t==null?void 0:t.message)||t),m("Failed to load dashboard data","error"))}finally{ge(!1)}})(),()=>s.abort()},[B,f,O]),l.useEffect(()=>{if(!a)return;const s=new AbortController;return E(s.signal).catch(t=>{(t==null?void 0:t.name)!=="CanceledError"&&(console.error("Comms fetch error:",(t==null?void 0:t.message)||t),m("Failed to load communications","error"))}),()=>s.abort()},[a,E]);const ye=async s=>{const t=`c-${s}`;D(n=>({...n,[t]:!0}));try{const n=(J[s]||"").trim();if(!n)return;await j.post(`/dashboard/activity/${s}/comment`,{comment:n}),X(r=>({...r,[s]:""})),await f(),m("Reply posted","success")}catch(n){console.error("Add comment error:",(n==null?void 0:n.message)||n),m("Failed to post reply","error")}finally{D(n=>({...n,[t]:!1}))}},fe=async s=>{const t=`a-${s}`;D(n=>({...n,[t]:!0}));try{const n=T[s]||{};if(!n.assigneeId)return;await j.post(`/dashboard/activity/${s}/assign`,{assigneeId:n.assigneeId,dueDate:n.dueDate||null,note:n.note||""}),M(r=>({...r,[s]:{assigneeId:"",dueDate:"",note:""}})),await f(),m("Task assigned","success")}catch(n){console.error("Assign task error:",(n==null?void 0:n.message)||n),m("Failed to assign task","error")}finally{D(n=>({...n,[t]:!1}))}},P=({label:s,value:t,max:n})=>{const r=b(t),p=b(n),_=p>0?Math.round(r/p*100):0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:s}),e.jsx("span",{children:r.toLocaleString()})]}),e.jsx("div",{className:"h-2 w-full bg-gray-100 rounded",children:e.jsx("div",{className:"h-2 rounded",style:{width:`${_}%`,backgroundColor:"currentColor"}})})]})},ee=({className:s})=>e.jsx("div",{className:`animate-pulse bg-gray-100 rounded ${s}`}),je=()=>{const s=y.flatMap(t=>(t.attachments||[]).map(n=>n.fileUrl)).filter(Boolean);s.length!==0&&(s.forEach((t,n)=>{setTimeout(()=>window.open(t,"_blank","noopener,noreferrer"),n*150)}),m(`Opening ${s.length} attachment${s.length>1?"s":""}â€¦`,"info"))},be=s=>{var t;return((t=S.find(n=>String(n.id)===String(s)))==null?void 0:t.name)||(s?`Branch #${s}`:"All branches")},x=a==null?void 0:a.dashboardMessage;return e.jsxs("div",{className:"p-6",children:[e.jsx("style",{children:`
        @keyframes ms-marquee { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }
      `}),e.jsx("div",{className:"fixed right-4 top-4 z-50 space-y-2",children:ue.map(s=>e.jsx("div",{className:`px-3 py-2 rounded shadow text-sm text-white ${s.type==="error"?"bg-red-600":s.type==="success"?"bg-emerald-600":"bg-slate-800"}`,children:s.msg},s.id))}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"ðŸ“Š Dashboard"}),(a==null?void 0:a.importantNotice)&&e.jsx("div",{className:"mb-3 p-4 rounded-md bg-yellow-50 border border-yellow-200 text-yellow-800",children:e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx(le,{className:"w-5 h-5 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Important Notice"}),e.jsx("p",{className:"text-sm",children:a.importantNotice})]})]})}),a!=null&&a.companyMessage?e.jsx("div",{className:"mb-2 p-4 border-l-4 border-blue-500 bg-blue-50 text-blue-700",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("p",{className:"text-sm font-medium",children:a.companyMessage})]})}):K?e.jsx(ee,{className:"h-12 mb-2"}):null,x&&e.jsx("div",{className:"mb-4 bg-white border rounded-md shadow-sm p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[x.title&&e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:x.title}),x.text&&e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:x.text}),Array.isArray(x.attachments)&&x.attachments.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-[11px] text-gray-500 mb-1",children:"Attachments"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:x.attachments.map(s=>e.jsx("a",{href:s.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",title:s.fileName,children:s.fileName||"Attachment"},`${s.id}-${s.fileUrl}`))})]})]}),Array.isArray(x.attachments)&&x.attachments.length>0&&e.jsxs("button",{onClick:()=>{x.attachments.forEach((s,t)=>{s.fileUrl&&setTimeout(()=>window.open(s.fileUrl,"_blank","noopener,noreferrer"),t*150)})},className:"text-xs flex items-center gap-1 border rounded px-2 py-1 h-8",title:"Open all attachments",children:[e.jsx(te,{className:"w-3 h-3"})," Open all"]})]})}),((y==null?void 0:y.length)??0)>0&&e.jsxs("div",{className:"mb-6 bg-white border rounded-md overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b bg-gray-50",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600",children:"General Communications"}),y.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&e.jsxs("button",{onClick:je,className:"text-xs flex items-center gap-1 border rounded px-2 py-1",title:"Open all attachments",children:[e.jsx(te,{className:"w-3 h-3"})," Download all"]})]}),e.jsx("div",{className:"relative h-10",children:e.jsx("div",{className:"absolute whitespace-nowrap will-change-transform text-sm text-gray-700 flex items-center gap-8 px-3",style:{animation:"ms-marquee 18s linear infinite"},children:y.map(s=>e.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.type&&e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:s.type}),s.priority&&e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:s.priority}),s.audienceRole&&e.jsxs("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:["role: ",s.audienceRole]}),typeof s.audienceBranchId<"u"&&s.audienceBranchId!==null&&e.jsx("span",{className:"text-[11px] px-1.5 py-0.5 border rounded bg-gray-50",children:be(s.audienceBranchId)}),e.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-blue-500"}),s.text]},s.id||s.text))})}),y.some(s=>Array.isArray(s.attachments)&&s.attachments.length>0)&&e.jsxs("div",{className:"px-3 py-2 bg-gray-50 border-t",children:[e.jsx("p",{className:"text-[11px] text-gray-500 mb-1",children:"Attachments"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:y.flatMap(s=>(s.attachments||[]).map(t=>e.jsx("a",{href:t.fileUrl,target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 underline",title:t.fileName,children:t.fileName},`${s.id}-${t.id}-${t.fileUrl}`)))})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs("select",{value:v,onChange:s=>U(s.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Branches"}),S.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:w,onChange:s=>z(s.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Loan Officers"}),q.map(s=>e.jsx("option",{value:s.id,children:s.name||s.email},s.id))]}),e.jsxs("select",{value:k,onChange:s=>H(s.target.value),className:"border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"All Time"}),e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"week",children:"This Week"}),e.jsx("option",{value:"month",children:"This Month"}),e.jsx("option",{value:"quarter",children:"This Quarter"}),e.jsx("option",{value:"semiAnnual",children:"Semi-Annual"}),e.jsx("option",{value:"annual",children:"Annual"})]}),e.jsx("button",{className:"ml-auto px-3 py-2 border rounded",onClick:()=>{const s=new AbortController;Promise.all([B(s.signal),f({},s.signal),O(s.signal),E(s.signal)]).then(()=>m("Dashboard refreshed","success")).catch(()=>m("Refresh failed","error")).finally(()=>s.abort())},children:"Refresh"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6",children:[e.jsx("main",{className:"space-y-6",children:K?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((s,t)=>e.jsx(ee,{className:"h-24"},t))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx(o,{title:"Total Borrowers",value:b(a==null?void 0:a.totalBorrowers),icon:e.jsx(Ie,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Loans",value:b(a==null?void 0:a.totalLoans),icon:e.jsx(F,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Disbursed",value:d(a==null?void 0:a.totalDisbursed),icon:e.jsx(F,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Paid",value:d(a==null?void 0:a.totalPaid),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Repaid",value:d(a==null?void 0:a.totalRepaid),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Expected Repayments",value:d(a==null?void 0:a.totalExpectedRepayments),icon:e.jsx(ne,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Deposits",value:d(a==null?void 0:a.totalDeposits),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Total Withdrawals",value:d(a==null?void 0:a.totalWithdrawals),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Net Savings",value:d(a==null?void 0:a.netSavings),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Defaulted Loan",value:d(a==null?void 0:a.defaultedLoan),icon:e.jsx(ie,{className:"w-6 h-6"})}),e.jsx(o,{title:"Defaulted Interest",value:d(a==null?void 0:a.defaultedInterest),icon:e.jsx(ie,{className:"w-6 h-6"})}),e.jsx(o,{title:"Outstanding Loan",value:d(a==null?void 0:a.outstandingLoan),icon:e.jsx(F,{className:"w-6 h-6"})}),e.jsx(o,{title:"Outstanding Interest",value:d(a==null?void 0:a.outstandingInterest),icon:e.jsx(N,{className:"w-6 h-6"})}),e.jsx(o,{title:"Written Off",value:d(a==null?void 0:a.writtenOff),icon:e.jsx(Me,{className:"w-6 h-6"})}),e.jsx(o,{title:"PAR (Portfolio at Risk)",value:`${b(a==null?void 0:a.parPercent)}%`,icon:e.jsx(ae,{className:"w-6 h-6"})})]}),u&&e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsxs("h3",{className:"font-semibold text-gray-800",children:["Monthly Trends â€” ",u.month," ",u.year]})]}),(()=>{const s=[u.monthlyLoans||0,u.monthlyDeposits||0,u.monthlyRepayments||0],t=Math.max(...s);return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"text-indigo-600",children:e.jsx(P,{label:"Loans (count)",value:u.monthlyLoans||0,max:t})}),e.jsx("div",{className:"text-emerald-600",children:e.jsx(P,{label:"Deposits (TZS)",value:u.monthlyDeposits||0,max:t})}),e.jsx("div",{className:"text-blue-600",children:e.jsx(P,{label:"Repayments (TZS)",value:u.monthlyRepayments||0,max:t})})]})})()]})]})}),e.jsx("aside",{className:"lg:sticky lg:top-4 self-start",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ne,{className:"w-5 h-5 text-indigo-600"}),e.jsx("h2",{className:"font-semibold text-gray-800",children:"Recent Activity"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[e.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm",value:I,onChange:s=>he(s.target.value)}),e.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm",value:L,onChange:s=>me(s.target.value)}),e.jsx("button",{className:"col-span-2 border rounded px-2 py-1 text-sm",onClick:()=>{R(1),f({page:1})},children:"Search by date"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 h-6 pointer-events-none bg-gradient-to-b from-white to-transparent"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-6 pointer-events-none bg-gradient-to-t from-white to-transparent"}),e.jsx("div",{className:"max-h-[520px] overflow-y-auto pr-1 space-y-3",children:V.length===0?e.jsx("p",{className:"text-gray-500 text-sm",children:"No activity."}):V.map(s=>{var t,n,r,p,_;return e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[s.type," â€¢ ",s.entityType," #",s.entityId]}),e.jsx("p",{className:"text-xs text-gray-600",children:s.message}),e.jsxs("p",{className:"text-[11px] text-gray-400 mt-1",children:["by ",((t=s.createdBy)==null?void 0:t.name)||((n=s.createdBy)==null?void 0:n.email)," â€¢ ",new Date(s.createdAt).toLocaleString()]}),Array.isArray(s.comments)&&s.comments.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:s.comments.map(i=>{var c,se;return e.jsxs("div",{className:"bg-gray-50 border rounded p-2",children:[e.jsx("p",{className:"text-xs text-gray-800",children:i.comment}),e.jsxs("p",{className:"text-[11px] text-gray-400 mt-0.5",children:["â€” ",((c=i.createdBy)==null?void 0:c.name)||((se=i.createdBy)==null?void 0:se.email)," â€¢ ",new Date(i.createdAt).toLocaleString()]})]},i.id)})}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("input",{value:J[s.id]||"",onChange:i=>X(c=>({...c,[s.id]:i.target.value})),placeholder:"Replyâ€¦",className:"flex-1 border rounded px-2 py-1 text-xs"}),e.jsxs("button",{onClick:()=>ye(s.id),disabled:G[`c-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 disabled:opacity-50 flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"})," Reply"]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-4 gap-2",children:[e.jsxs("select",{value:((r=T[s.id])==null?void 0:r.assigneeId)||"",onChange:i=>M(c=>({...c,[s.id]:{...c[s.id]||{},assigneeId:i.target.value}})),className:"col-span-2 border rounded px-2 py-1 text-xs",children:[e.jsx("option",{value:"",children:"Assign toâ€¦"}),q.map(i=>e.jsx("option",{value:i.id,children:i.name||i.email},i.id))]}),e.jsx("input",{type:"date",value:((p=T[s.id])==null?void 0:p.dueDate)||"",onChange:i=>M(c=>({...c,[s.id]:{...c[s.id]||{},dueDate:i.target.value}})),className:"border rounded px-2 py-1 text-xs"}),e.jsxs("button",{onClick:()=>fe(s.id),disabled:G[`a-${s.id}`],className:"px-2 py-1 text-xs border rounded bg-white hover:bg-gray-50 disabled:opacity-50 flex items-center gap-1 justify-center",children:[e.jsx($e,{className:"w-3 h-3"})," Assign"]}),e.jsx("input",{value:((_=T[s.id])==null?void 0:_.note)||"",onChange:i=>M(c=>({...c,[s.id]:{...c[s.id]||{},note:i.target.value}})),placeholder:"Noteâ€¦",className:"col-span-4 border rounded px-2 py-1 text-xs"})]})]},s.id)})})]}),A>C&&e.jsxs("div",{className:"flex justify-between items-center mt-3 text-xs",children:[e.jsxs("span",{children:[Math.min(h*C,A)," of ",A]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const s=Math.max(h-1,1);R(s),f({page:s})},disabled:h===1,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Prev"}),e.jsx("button",{onClick:()=>{const s=h*C<A?h+1:h;s!==h&&(R(s),f({page:s}))},disabled:h*C>=A,className:"px-2 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})})]})]})},o=({title:a,value:$,icon:S})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-full",children:S}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-gray-500",children:a}),e.jsx("p",{className:"text-xl font-semibold text-gray-800",children:$??"â€”"})]})]});export{Pe as default};
