import{r as a,u as S,j as e,F as k,a as _,b as E,c as L,L as h,d as F,e as C}from"./index-D4YMmJ8P.js";const A="https://mkoposuite-backend-42w2.onrender.com/api",n=A.replace(/\/+$/,""),O=/\/api$/i.test(n)?`${n}/login`:`${n}/api/login`,P="/brand/mkoposuite-logo.png",I=()=>{const[o,b]=a.useState(""),[i,v]=a.useState(""),[l,j]=a.useState(!1),[d,c]=a.useState(""),[m,x]=a.useState(!1),w=S();async function N(t){var u,p,f,g;t.preventDefault(),c(""),x(!0);try{const{data:s}=await C.post(O,{email:o,password:i}),{token:r,user:y}=s||{};if(!r)throw new Error("No token received from server");localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(y||{})),w("/")}catch(s){const r=((p=(u=s==null?void 0:s.response)==null?void 0:u.data)==null?void 0:p.error)||((g=(f=s==null?void 0:s.response)==null?void 0:f.data)==null?void 0:g.message)||"Invalid email or password";c(r)}finally{x(!1)}}return e.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-[radial-gradient(1200px_600px_at_50%_-10%,#ffffff_0%,#f3faf6_50%,#f8fbff_100%)]",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(50%_40%_at_50%_0%,rgba(255,255,255,.9),rgba(255,255,255,0)_70%)]"}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"rounded-2xl bg-white/95 backdrop-blur-sm shadow-xl ring-1 ring-black/5",children:e.jsxs("div",{className:"px-8 pt-8 pb-6",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[e.jsx("span",{className:"text-[28px] sm:text-[32px] font-extrabold tracking-tight text-slate-800",children:"Welcome to"}),e.jsx("div",{className:"origin-left scale-[1.35] sm:scale-[1.6]",children:e.jsx("img",{src:P,alt:"Mkopo Suite",className:"h-16 sm:h-20 md:h-24 w-auto object-contain drop-shadow-sm select-none",draggable:!1,loading:"eager",fetchpriority:"high"})})]}),e.jsx("p",{className:"mt-2 text-xs sm:text-sm text-slate-500",children:"Please login to continue"})]}),d?e.jsx("div",{role:"alert",className:"mt-4 rounded-lg border border-rose-200 bg-rose-50 px-3 py-2 text-sm text-rose-700",children:d}):null,e.jsxs("form",{onSubmit:N,className:"mt-5 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(k,{})}),e.jsx("input",{type:"email",value:o,onChange:t=>b(t.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-3 py-2 text-sm shadow-sm outline-none transition focus:border-emerald-500/70 focus:ring-2 focus:ring-emerald-100",required:!0,placeholder:"admin@example.com",autoComplete:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-slate-700",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:e.jsx(_,{})}),e.jsx("input",{type:l?"text":"password",value:i,onChange:t=>v(t.target.value),className:"w-full rounded-lg border border-slate-300 bg-white pl-10 pr-10 py-2 text-sm shadow-sm outline-none transition focus:border-emerald-500/70 focus:ring-2 focus:ring-emerald-100",required:!0,placeholder:"Enter your password",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>j(t=>!t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600","aria-label":l?"Hide password":"Show password",children:l?e.jsx(E,{}):e.jsx(L,{})})]})]}),e.jsx("div",{className:"flex items-center justify-end text-sm",children:e.jsx(h,{to:"/forgot-password",className:"text-emerald-700 hover:text-emerald-800",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:m,className:"inline-flex w-full items-center justify-center rounded-xl bg-emerald-700 px-4 py-2.5 text-sm font-medium text-white shadow hover:bg-emerald-800 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-300 disabled:opacity-60",children:m?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 animate-spin"}),"Logging in…"]}):"Login"})]}),e.jsxs("div",{className:"mt-5 text-center text-sm text-slate-500",children:["Don’t have an account?"," ",e.jsx(h,{to:"/signup",className:"font-medium text-emerald-700 hover:text-emerald-800",children:"Create one"})]}),e.jsxs("div",{className:"mt-4 text-center text-[11px] text-slate-400",children:["© ",new Date().getFullYear()," MkopoSuite. All rights reserved."]})]})}),e.jsx("div",{className:"mx-auto mt-2 h-2 w-56 rounded-full bg-gradient-to-r from-amber-300/60 via-amber-400/60 to-amber-300/60 blur-md"})]})})]})};export{I as default};
