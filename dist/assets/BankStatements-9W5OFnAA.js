import{r as s,j as e}from"./index-D7WBPAut.js";import{l as b,n as f}from"./banking-CduP71RF.js";const S="bg-white rounded-2xl shadow-sm ring-1 ring-black/5 p-5 md:p-7",l="border rounded px-3 py-2";function w(){var h;const[x,u]=s.useState([]),[n,g]=s.useState(""),[c,j]=s.useState(""),[i,N]=s.useState(""),[a,d]=s.useState(null),[o,r]=s.useState(null),[m,p]=s.useState(!1);s.useEffect(()=>{b().then(u).catch(t=>r((t==null?void 0:t.normalizedMessage)||String(t)))},[]);const y=async()=>{if(n)try{p(!0),r(null);const t=await f(n,{from:c,to:i,includeOpening:!0});d(t)}catch(t){r((t==null?void 0:t.normalizedMessage)||String(t)),d(null)}finally{p(!1)}};return e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Bank Statement"}),e.jsxs("section",{className:S,children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-2 mb-3",children:[e.jsxs("select",{className:l,value:n,onChange:t=>g(t.target.value),children:[e.jsx("option",{value:"",children:"— bank —"}),x.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("input",{type:"date",className:l,value:c,onChange:t=>j(t.target.value)}),e.jsx("input",{type:"date",className:l,value:i,onChange:t=>N(t.target.value)}),e.jsx("button",{className:"px-3 py-2 rounded bg-indigo-600 text-white disabled:opacity-60",onClick:y,disabled:m||!n,children:m?"Generating…":"Generate"})]}),o&&e.jsx("div",{className:"text-sm text-red-600 mb-2",children:o}),a&&e.jsxs("div",{children:[a.opening!=null&&e.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["Opening: ",Number(a.opening).toLocaleString()]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"py-2 pr-4",children:"Date"}),e.jsx("th",{className:"py-2 pr-4",children:"Type"}),e.jsx("th",{className:"py-2 pr-4",children:"Dir"}),e.jsx("th",{className:"py-2 pr-4 text-right",children:"Amount"}),e.jsx("th",{className:"py-2 pr-4",children:"Ref"})]})}),e.jsxs("tbody",{children:[(h=a.items)==null?void 0:h.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 pr-4",children:t.occurredAt?new Date(t.occurredAt).toLocaleString():"—"}),e.jsx("td",{className:"py-2 pr-4",children:t.type}),e.jsx("td",{className:"py-2 pr-4",children:t.direction}),e.jsxs("td",{className:"py-2 pr-4 text-right",children:[Number(t.amount).toLocaleString()," ",t.currency||"TZS"]}),e.jsx("td",{className:"py-2 pr-4",children:t.reference||"—"})]},t.id)),(!a.items||!a.items.length)&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-6 text-center text-gray-500",children:"No rows"})})]})]})})]})]})]})}export{w as default};
