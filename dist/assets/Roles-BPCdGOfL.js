import{r as n,j as e,g as c}from"./index-BVbJtkKt.js";const s={page:"w-full px-4 md:px-6 lg:px-10 py-6 text-slate-900",h1:"text-3xl font-extrabold tracking-tight",card:"rounded-2xl border-2 border-slate-300 bg-white shadow",th:"bg-slate-100 text-left text-[12px] uppercase tracking-wide text-slate-700 font-semibold px-3 py-2 border-2 border-slate-200",td:"px-3 py-2 border-2 border-slate-200 text-sm",field:"h-11 w-full rounded-lg border-2 border-slate-300 bg-white text-sm px-3 outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-600",btn:"inline-flex items-center rounded-lg border-2 border-slate-300 px-3 py-2 hover:bg-slate-50 font-semibold",btnPrimary:"inline-flex items-center rounded-lg bg-indigo-600 text-white px-3 py-2 font-semibold hover:bg-indigo-700",btnDanger:"inline-flex items-center rounded-lg bg-rose-600 text-white px-3 py-2 font-semibold hover:bg-rose-700"},v=()=>{const[m,u]=n.useState([]),[b,o]=n.useState(""),[f,d]=n.useState(!1),[i,x]=n.useState(null),[p,g]=n.useState(!1),h=async()=>{var t,a;try{g(!0);const l=await c.get("/roles");u(Array.isArray(l.data)?l.data:[])}catch(l){console.error("Error fetching roles:",l),alert(((a=(t=l==null?void 0:l.response)==null?void 0:t.data)==null?void 0:a.error)||"Failed to load roles")}finally{g(!1)}};n.useEffect(()=>{h()},[]);const j=async()=>{var a,l;const t=b.trim();if(!t)return alert("Please enter a role name");try{i?await c.put(`/roles/${i}`,{name:t}):await c.post("/roles",{name:t}),o(""),x(null),d(!1),h()}catch(r){console.error("Save role error:",r),alert(((l=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:l.error)||"Error saving role")}},N=t=>{o(t.name),x(t.id),d(!0)},w=async t=>{var a,l;if(window.confirm("Delete this role?"))try{await c.delete(`/roles/${t}`),h()}catch(r){console.error("Delete role error:",r),alert(((l=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:l.error)||"Error deleting role")}};return e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:s.h1,children:"Roles"}),e.jsx("button",{onClick:()=>{d(!0),o(""),x(null)},className:s.btnPrimary,children:"+ Add Role"})]}),e.jsx("div",{className:`${s.card} overflow-x-auto`,children:e.jsxs("table",{className:"min-w-full border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:s.th,children:"Role Name"}),e.jsx("th",{className:`${s.th} text-right`,children:"Actions"})]})}),e.jsx("tbody",{children:p?e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:`${s.td} text-center py-8 text-slate-600`,children:"Loadingâ€¦"})}):m.length?m.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:s.td,children:t.name}),e.jsx("td",{className:`${s.td} text-right`,children:e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsx("button",{onClick:()=>N(t),className:s.btn,children:"Edit"}),e.jsx("button",{onClick:()=>w(t.id),className:s.btnDanger,children:"Delete"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:`${s.td} text-center py-8 text-slate-600`,children:"No roles found"})})})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex justify-center items-center z-50",children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl border-2 border-slate-300 bg-white p-5 shadow",children:[e.jsx("h3",{className:"text-lg font-bold tracking-tight mb-3",children:i?"Edit Role":"New Role"}),e.jsx("input",{value:b,onChange:t=>o(t.target.value),className:`${s.field} mb-3`,placeholder:"Role name (e.g., Admin, Accountant)"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>d(!1),className:s.btn,children:"Cancel"}),e.jsx("button",{onClick:j,className:s.btnPrimary,children:i?"Update":"Save"})]})]})})]})};export{v as default};
