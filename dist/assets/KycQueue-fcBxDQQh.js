import{r as l,j as a,g as h}from"./index-CecoMAn-.js";const N=()=>{const[n,o]=l.useState([]),[m,c]=l.useState(!0),[i,p]=l.useState(""),x=async e=>{var t,r;try{c(!0);const d=e?{signal:e}:{},s=await h.get("/borrowers/kyc/queue",d),y=Array.isArray(s.data)?s.data:((t=s.data)==null?void 0:t.items)||((r=s.data)==null?void 0:r.data)||[];o(y),p("")}catch{p("Failed to load KYC queue"),o([])}finally{c(!1)}};l.useEffect(()=>{const e=new AbortController;return x(e.signal),()=>e.abort()},[]);const u=async(e,t)=>{if(t!=null&&t.length)try{const r=new FormData;Array.from(t).forEach(d=>r.append("file",d)),await h.post(`/borrowers/${encodeURIComponent(e)}/kyc`,r,{headers:{"Content-Type":"multipart/form-data"}}),await x(),alert("KYC uploaded")}catch{alert("Failed to upload KYC")}},j=e=>(e==null?void 0:e.name)||`${(e==null?void 0:e.firstName)||""} ${(e==null?void 0:e.lastName)||""}`.trim()||(e==null?void 0:e.id)||"—";return a.jsxs("div",{className:"p-4 md:p-6 space-y-4 bg-[var(--bg)] text-[var(--fg)]",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"KYC Queue"}),a.jsx("div",{className:"card overflow-hidden",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-[var(--table-head-bg,transparent)]",children:a.jsxs("tr",{className:"text-left text-[var(--fg)]/80",children:[a.jsx("th",{className:"px-3 py-2",children:"Borrower"}),a.jsx("th",{className:"px-3 py-2",children:"Phone"}),a.jsx("th",{className:"px-3 py-2",children:"Status"}),a.jsx("th",{className:"px-3 py-2",children:"Upload"})]})}),a.jsx("tbody",{children:m?a.jsx("tr",{children:a.jsx("td",{className:"p-4 muted",colSpan:4,children:"Loading…"})}):i?a.jsx("tr",{children:a.jsx("td",{className:"p-4 text-rose-600 dark:text-rose-400",colSpan:4,children:i})}):n.length===0?a.jsx("tr",{children:a.jsx("td",{className:"p-4 muted",colSpan:4,children:"Queue is empty."})}):n.map(e=>a.jsxs("tr",{className:"border-t border-[var(--border)] odd:bg-[var(--table-row-odd,transparent)] even:bg-[var(--table-row-even,transparent)]",children:[a.jsx("td",{className:"px-3 py-2",children:j(e)}),a.jsx("td",{className:"px-3 py-2",children:e.phone||"—"}),a.jsx("td",{className:"px-3 py-2 capitalize",children:e.kycStatus||e.status||"pending"}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg border border-[var(--border)] bg-[var(--card)] hover:bg-[var(--hover,rgba(0,0,0,0.03))] cursor-pointer",children:[a.jsx("span",{className:"text-sm",children:"Choose files…"}),a.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:t=>u(e.id,t.target.files)})]})})]},e.id))})]})})]})};export{N as default};
