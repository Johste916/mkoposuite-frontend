import{r as t,j as e,b as r}from"./index-Du_APKB5.js";const b=()=>{const[m,u]=t.useState([]),[h,d]=t.useState(!1),[a,l]=t.useState({name:"",email:"",id:null}),n=async()=>{try{const s=await r.get("/users");u(s.data)}catch(s){console.error("Error fetching users:",s)}},c=(s={name:"",email:"",id:null})=>{l(s),d(!0)},o=()=>{l({name:"",email:"",id:null}),d(!1)},x=async()=>{if(!a.name||!a.email)return alert("Please fill in all fields.");try{a.id?(await r.put(`/users/${a.id}`,{name:a.name,email:a.email}),alert("User updated")):(await r.post("/users",{name:a.name,email:a.email}),alert("User created")),o(),n()}catch(s){console.error("Submit error:",s),alert("Error saving user")}},p=async s=>{if(window.confirm("Delete this user?"))try{await r.delete(`/users/${s}`),alert("User deleted"),n()}catch(i){console.error("Delete error:",i),alert("Error deleting user")}};return t.useEffect(()=>{n()},[]),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Users"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",onClick:()=>c(),children:"+ New User"})]}),e.jsxs("table",{className:"w-full table-auto border bg-white shadow-sm rounded",children:[e.jsx("thead",{className:"bg-gray-100 text-left",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Name"}),e.jsx("th",{className:"p-2",children:"Email"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:m.map((s,i)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:i+1}),e.jsx("td",{className:"p-2",children:s.name}),e.jsx("td",{className:"p-2",children:s.email}),e.jsxs("td",{className:"p-2 space-x-2",children:[e.jsx("button",{className:"text-blue-500 underline",onClick:()=>c(s),children:"Edit"}),e.jsx("button",{className:"text-red-500 underline",onClick:()=>p(s.id),children:"Delete"})]})]},s.id))})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded shadow-lg w-full max-w-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:a.id?"Edit User":"Add New User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Full name",value:a.name,onChange:s=>l({...a,name:s.target.value}),className:"w-full px-3 py-2 border rounded"}),e.jsx("input",{type:"email",placeholder:"Email",value:a.email,onChange:s=>l({...a,email:s.target.value}),className:"w-full px-3 py-2 border rounded"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded",onClick:o,children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",onClick:x,children:a.id?"Update":"Create"})]})]})]})})]})};export{b as default};
