import{k as Se,l as Ie,r as g,h as B,j as r,L as Oe}from"./index-DYDSVKWX.js";import{B as Ce}from"./BorrowerAutoComplete-DlgnNQLe.js";const ee={},I=e=>e?{headers:{"x-tenant-id":e}}:{},Ae=e=>e||(typeof B.getTenantId=="function"?B.getTenantId():null),Te="00000000-0000-0000-0000-000000000000",_e=e=>!!e&&e!==Te&&e!=="null"&&e!=="undefined",P={officers:new Map,branches:new Map},Ee=1200,Re=3,re=e=>e!=null&&e.endsWith("/")?e:`${e||""}/`,Be=e=>/\/api(?:\/v\d+)?\/$/i.test(e);function ke(){var o,d,s;const e=((d=(o=B)==null?void 0:o.defaults)==null?void 0:d.baseURL)||((s=B)==null?void 0:s.baseURL)||"",a=new Set;if(e){const f=re(String(e).trim());a.add(f);const t=re(f.replace(/\/api(?:\/v\d+)?\/$/i,"/"));a.add(t)}return Array.from(a)}function he(e){if(!e)return null;let a=e.startsWith("/")?e.slice(1):e;return a=a.replace(/^api\/v\d+\//i,"").replace(/^api\//i,"").replace(/^v\d+\//i,""),a}function De(e){const a=he(e);if(!a)return[];const o=new Set,d=ke();for(const s of d){const f=re(s);o.add(`${f}${a}`),Be(f)||(o.add(`${f}api/${a}`),o.add(`${f}api/v1/${a}`),o.add(`${f}v1/${a}`))}return o.add(`/${a}`),o.add(`/api/${a}`),o.add(`/api/v1/${a}`),o.add(`/v1/${a}`),Array.from(o)}function _(e,a=[],o,d){const s=[];for(const f of a){const t=he(f);if(t)for(const i of De(t))s.push(()=>{const x={timeout:Ee,...d};return e==="get"||e==="delete"?B[e](i,x):B[e](i,o,x)})}return Pe(s)}function Pe(e){const a=new Set;return e.filter(o=>{const d=o.toString();return a.has(d)?!1:(a.add(d),!0)})}async function Fe(e){return Promise.any(e.map(async a=>{const o=await a();return(o==null?void 0:o.data)??o}))}async function L(e,{roundSize:a=Re}={}){let o=null;for(let d=0;d<e.length;d+=a){const s=e.slice(d,d+a);try{return await Fe(s)}catch(f){o=f}}throw o||new Error("No endpoint succeeded")}const C=(e=[],a={})=>L(_("get",e,void 0,a)),ne=(e=[],a={},o={})=>L(_("post",e,a,o)),me=(e=[],a={},o={})=>L(_("put",e,a,o)),pe=(e=[],a={},o={})=>L([..._("patch",e,a,o),..._("put",e,a,o),..._("post",e,a,o)]),Le=(e=[],a={})=>L(_("delete",e,void 0,a)),Me=(ee==null?void 0:ee.VITE_API_OFFICERS_PATH)||null,fe=(e,a,o="No options")=>e==="loading"?"Loading…":e==="error"?"Failed to load — Retry":e==="empty"?o:a;function Ue(e){return{id:e.id??e._id??e.borrowerId??e.memberId,name:e.name||`${e.firstName||""} ${e.lastName||""}`.trim()||e.fullName||e.id,phone:e.phone??e.msisdn??e.mobile,role:e.role||e.memberRole,outstanding:e.outstanding??0}}function te(e){var o,d,s,f,t;if(!e||typeof e!="object")return null;const a=Array.isArray(e.members)?e.members:e.groupMembers||e.items||[];return{id:e.id??e._id??e.groupId??e.code,name:e.name??e.groupName??e.title??"—",branchId:e.branchId??e.branch_id??((o=e.branch)==null?void 0:o.id)??null,branchName:e.branchName??((d=e.branch)==null?void 0:d.name)??"—",loanOfficerId:e.loanOfficerId??e.loan_officer_id??e.officerId??e.officer_id??e.officer_user_id??((s=e.officer)==null?void 0:s.id)??null,officerName:e.officerName??e.loanOfficerName??e.officer_full_name??e.officer_fullname??((f=e.officer)==null?void 0:f.name)??"—",meetingDay:e.meetingDay??e.meeting_day??((t=e.meeting)==null?void 0:t.day)??"",status:e.status??"active",outstandingTotal:e.outstandingTotal??0,members:a.map(Ue)}}const Ge=e=>Array.isArray(e)?e:(e==null?void 0:e.items)||(e==null?void 0:e.rows)||(e==null?void 0:e.data)||(e==null?void 0:e.results)||(e==null?void 0:e.groups)||[];function Ke(e){return!e||typeof e!="object"?null:{id:e.id??e._id??e.groupId??e.code??e.slug??e.uuid??null,name:e.name??e.groupName??e.title??e.code??"—"}}function A(e){const a=(e||"").replace(/^\/+/,"");return Array.from(new Set([`/${a}`,`/api/${a}`,`/api/v1/${a}`,`/v1/${a}`]))}async function We(e,a,o){const d=encodeURIComponent(e),s={...I(a),signal:o},f=[...A(`groups?memberId=${d}`),...A(`borrowers/${d}/groups`),...A(`group-memberships?borrowerId=${d}`)];try{const t=await C(f,s),x=(Ge(t)||[]).map(y=>Ke(y.group||y)).filter(Boolean),v=new Set;return x.filter(y=>{const O=String(y.id||y.name);return v.has(O)?!1:(v.add(O),!0)})}catch{return[]}}async function ze(e,a,{targetGroupId:o=null,signal:d}={}){const f=(await We(e,a,d)).find(t=>!o||String(t.id)!==String(o));if(f){const t=f.name?`${f.name} (${f.id||"—"})`:f.id||"another group",i=new Error(`Borrower #${e} already belongs to ${t}.`);throw i.code="BORROWER_ALREADY_ASSIGNED",i}}const Y=new Map;async function Qe(e,a){const o=e||"__no_tenant__";if(Y.has(o))return Y.get(o);const d=["groups","loan-groups","borrowers/groups","borrower-groups"];for(const s of d)try{return await C(A(`${s}?limit=1`),I(e,a)),Y.set(o,s),s}catch{}return Y.set(o,"groups"),"groups"}async function Ze(e,a,o){if(!e)return null;const d={...I(a),signal:o},s=await C([`officers/${e}`,`loan-officers/${e}`,`users/${e}`,`staff/${e}`,`employees/${e}`],d).catch(()=>null),f=i=>(i==null?void 0:i.name)||(i==null?void 0:i.fullName)||[i==null?void 0:i.firstName,i==null?void 0:i.lastName].filter(Boolean).join(" ").trim()||(i==null?void 0:i.email)||(i==null?void 0:i.username)||null;if(s)return f(s);const t=await C([`users?id=${e}`,`users?userId=${e}`,`staff?id=${e}`,`officers?id=${e}`,`employees?id=${e}`],d).catch(()=>null);if(t){const i=Array.isArray(t)?t:(t==null?void 0:t.data)||(t==null?void 0:t.items)||(t==null?void 0:t.rows)||[],x=(i==null?void 0:i.find(v=>[v.id,v.userId,v.uuid,v.code,v.employeeId].map(String).includes(String(e))))||(i==null?void 0:i[0]);return f(x)}return null}async function Ye(e,a,o,d){const s=encodeURIComponent(e),f={...I(a),signal:o};if(d)try{const x=await C(A(`${d}/${s}`),f);if(x)return te((x==null?void 0:x.data)??x)}catch{}const t=await C([`groups/${s}`,`loan-groups/${s}`,`borrowers/groups/${s}`],f).catch(()=>null);if(t)return te((t==null?void 0:t.data)??t);const i=await C([`groups?id=${s}`,`groups?groupId=${s}`,`groups?code=${s}`,`groups?name=${s}`,`loan-groups?id=${s}`,`loan-groups?code=${s}`],f).catch(()=>null);if(i){const x=Array.isArray(i)?i:i.items||i.rows||i.data||[];if(x!=null&&x.length){const v=x.find(y=>[y.id,y._id,y.groupId,y.code,y.slug,y.uuid,y.name,y.groupName].filter(Boolean).map(String).includes(String(e)))||x[0];if(v)return te(v)}}return null}async function qe(e,a,o,d){var y,O,$;const s=I(o),t=(d?[d]:["groups","loan-groups","group-memberships"]).flatMap(b=>b==="group-memberships"?[b]:[`${b}/${e}/members`,`${b}/${e}/borrowers`,`${b}/${e}/add-member`]),i=[{borrowerId:a},{borrower_id:a},{borrower:a},{member:{borrowerId:a}},{member:{borrower_id:a}},{groupId:Number(e),borrowerId:a},{group_id:Number(e),borrower_id:a}];for(const b of i){try{await ne(t,b,s);return}catch{}try{await me(t,b,s);return}catch{}}const v=(d?[d]:["groups","loan-groups","group-members"]).flatMap(b=>b==="group-members"?[`${b}/${e}/${a}`]:[`${b}/${e}/members/${a}`,`${b}/${e}/borrowers/${a}`]);try{await ne(v,{},s);return}catch{}try{await me(v,{},s);return}catch{}try{await pe(v,{},s);return}catch(b){const M=(y=b==null?void 0:b.response)==null?void 0:y.status,U=(($=(O=b==null?void 0:b.response)==null?void 0:O.data)==null?void 0:$.error)||(M===404?"No membership endpoint exists on the server. Please add one of: POST /groups/:id/members, POST /group-members { groupId, borrowerId }, or PUT /groups/:id/members/:borrowerId.":"Failed to add member.");throw new Error(U)}}const u={container:"w-full px-4 md:px-6 lg:px-8 py-6 bg-[var(--bg)] text-[var(--fg)]",h1:"text-3xl font-extrabold tracking-tight",h1Muted:"font-medium text-[var(--muted)]",card:"rounded-2xl border-2 border-[var(--border-strong)] bg-[var(--card)] shadow",btn:"inline-flex items-center rounded-lg border-2 border-[var(--border-strong)] px-3 py-2 hover:bg-[var(--kpi-bg)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",primary:"inline-flex items-center rounded-lg bg-indigo-600 text-white px-4 py-2 font-semibold hover:bg-indigo-700 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--ring)]",input:"h-10 rounded-lg border-2 px-3 outline-none focus:ring-2 focus:ring-[var(--ring)] bg-[var(--input-bg)] text-[var(--input-fg)] border-[var(--input-border)]",tableWrap:"rounded-2xl border-2 border-[var(--border-strong)] bg-[var(--card)] shadow overflow-x-auto",th:"bg-[var(--kpi-bg)] text-left text-[13px] uppercase tracking-wide text-[var(--muted)] font-semibold px-3 py-2 border-2 border-[var(--border)]",td:"px-3 py-2 border-2 border-[var(--border)] text-sm",chip:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-[11px] font-bold bg-[var(--chip-soft)] text-[var(--fg)] ring-1 ring-[var(--border)]",label:"text-[12px] font-semibold uppercase tracking-wider text-[var(--muted)] mb-1",muted:"text-[var(--muted)]"},He=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Je=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}];function et(){const{groupId:e}=Se(),[a]=Ie(),o=a.get("tenantId")||void 0,d=g.useMemo(()=>Ae(o),[o]),s=_e(d)?d:null,f=s?`?tenantId=${encodeURIComponent(s)}`:"",[t,i]=g.useState(null),[x,v]=g.useState(!0),[y,O]=g.useState(""),[$,b]=g.useState(!1),[M,U]=g.useState(!1),[N,T]=g.useState({name:"",branchId:"",loanOfficerId:"",meetingDay:"",status:"active"}),[G,ae]=g.useState(null),[q,se]=g.useState(!1),[H,K]=g.useState([]),[J,W]=g.useState([]),[oe,E]=g.useState("loading"),[ie,k]=g.useState("loading"),[ce,be]=g.useState(0),[le,xe]=g.useState(0),[z,de]=g.useState({outstandingTotal:0,perBorrower:{}}),D=g.useRef("groups"),R=async n=>{try{v(!0),O("");const c=await Qe(s,n);D.current=c;let l=await Ye(e,s,n,c);if(!l)O("Group not found."),i(null);else{if(l.loanOfficerId&&(!l.officerName||l.officerName==="—")){const h=await Ze(l.loanOfficerId,s,n).catch(()=>null);h&&(l={...l,officerName:h})}i(l),T({name:l.name||"",branchId:l.branchId||"",loanOfficerId:l.loanOfficerId||"",meetingDay:l.meetingDay||"",status:l.status||"active"})}try{const h=await C(A(`${D.current}/${e}/summary`),I(s)),p=(h==null?void 0:h.perBorrower)||{};de({outstandingTotal:(h==null?void 0:h.outstandingTotal)||0,perBorrower:p})}catch{de({outstandingTotal:0,perBorrower:{}})}}catch(c){(c==null?void 0:c.name)!=="CanceledError"&&(c==null?void 0:c.code)!=="ERR_CANCELED"&&(O((c==null?void 0:c.message)||"Failed to load group."),i(null))}finally{v(!1)}};g.useEffect(()=>{const n=new AbortController;if(!s){v(!1),O("No tenant selected."),i(null);return}return R(n.signal),()=>n.abort()},[e,s]),g.useEffect(()=>{if(!$)return;const n=s;if(!n){E("error");return}const c=P.branches.get(n);if(c&&ce===0){K(c),E(c.length?"ok":"empty");return}const l=[n?`tenants/${n}/branches`:null,"branches","loan-branches"].filter(Boolean);let h=!1;return E("loading"),(async()=>{try{const p=await C(l,I(n)),j=(Array.isArray(p)&&p||(p==null?void 0:p.items)||(p==null?void 0:p.data)||(p==null?void 0:p.rows)||[]||[]).map(w=>({id:w.id??w.code??w.uuid??w.branchId??w.slug,name:w.name??w.branchName??w.title??(w.code?String(w.code):"—")}));h||(K(j),E(j.length?"ok":"empty"),j.length&&P.branches.set(n,j))}catch{h||(K([]),E("error"))}})(),()=>{h=!0}},[$,s,ce]),g.useEffect(()=>{if(!$)return;const n=s,c=n||"__no_tenant__",l=P.officers.get(c);if(l&&l.length&&le===0){W(l),k("ok");return}l&&!l.length&&P.officers.delete(c);const h=[n?`tenants/${n}/officers`:null,Me,"loan-officers","users?role=loan_officer","users?role=officer","admin/staff?role=loan_officer","admin/staff"].filter(Boolean);let p=!1;return k("loading"),(async()=>{try{const S=await C(h,I(n)),Z=((m=>Array.isArray(m)&&m||(m==null?void 0:m.items)||(m==null?void 0:m.data)||(m==null?void 0:m.rows)||(m==null?void 0:m.results)||(m==null?void 0:m.officers)||(m==null?void 0:m.users)||[])(S)||[]).map(m=>({id:m.loanOfficerId??m.id??m.userId??m.uuid??m.code??m.employeeId,name:m.name||m.fullName||[m.firstName,m.lastName].filter(Boolean).join(" ")||m.email||String(m.id??m.userId??"")}));p||(W(Z),k(Z.length?"ok":"empty"),Z.length&&P.officers.set(c,Z))}catch{p||(W([]),k("error"))}})(),()=>{p=!0}},[$,s,le]),g.useEffect(()=>{$&&t!=null&&t.branchId&&!H.length&&(K([{id:t.branchId,name:t.branchName||String(t.branchId)}]),E("ok"))},[$,t,H.length]),g.useEffect(()=>{$&&t!=null&&t.loanOfficerId&&!J.length&&(W([{id:t.loanOfficerId,name:t.officerName||String(t.loanOfficerId)}]),k("ok"))},[$,t,J.length]);const ge=async()=>{var n,c;U(!0);try{const l=N.branchId===""||N.branchId==null?null:Number(N.branchId),h={name:N.name||null,branchId:l,loanOfficerId:N.loanOfficerId||null,loan_officer_id:N.loanOfficerId||null,meetingDay:N.meetingDay?String(N.meetingDay).toLowerCase():null,status:N.status||"active"};await pe([`groups/${e}`,`loan-groups/${e}`],h,I(s)),await R(),b(!1)}catch(l){const h=((c=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:c.error)||(l==null?void 0:l.message)||"Failed to save changes.";alert(h)}finally{U(!1)}},V=g.useRef(null),ye=n=>{var c,l;return n?typeof n=="number"||/^\d+$/.test(String(n))?Number(n):Number(n.id??n.value??n.borrowerId??((c=n.item)==null?void 0:c.id)??((l=n.item)==null?void 0:l.value)??NaN):null},ue=async()=>{const n=ye(G);if(!n||Number.isNaN(n)){alert("Pick a borrower to add.");return}try{se(!0),await ze(n,s,{targetGroupId:e}),await qe(e,n,s,D.current),ae(null),await R()}catch(c){alert((c==null?void 0:c.message)||"Failed to add member.")}finally{se(!1)}},ve=async n=>{var c,l;try{const h=Number(n),p=D.current||"groups";await Le(A(`${p}/${e}/members/${h}`),I(s)),await R()}catch(h){alert(((l=(c=h==null?void 0:h.response)==null?void 0:c.data)==null?void 0:l.error)||"Failed to remove member.")}},Ne=async n=>{var l,h,p;const c=(l=n.target.files)==null?void 0:l[0];if(c)try{const S=new FormData;S.append("file",c);const j=D.current||"groups";await ne(A(`${j}/${e}/members/import`),S,{...I(s),headers:{...s?{"x-tenant-id":s}:{},"Content-Type":"multipart/form-data"}}),alert("Import complete"),await R()}catch(S){const j=((p=(h=S==null?void 0:S.response)==null?void 0:h.data)==null?void 0:p.error)||"Failed to import CSV.";alert(j)}finally{V.current&&(V.current.value="")}},je=()=>{const n=((t==null?void 0:t.members)||[]).map(j=>{var w;return{borrowerId:j.id,name:j.name,phone:j.phone||"",role:j.role||"",outstanding:((w=z.perBorrower)==null?void 0:w[String(j.id)])??0}}),c=["borrowerId","name","phone","role","outstanding"],l=[c.join(","),...n.map(j=>c.map(w=>`"${String(j[w]??"").replace(/"/g,'""')}"`).join(","))].join(`
`),h=new Blob([l],{type:"text/csv;charset=utf-8"}),p=URL.createObjectURL(h),S=document.createElement("a");S.href=p,S.download=`group-${e}-members.csv`,S.click(),URL.revokeObjectURL(p)},Q=Array.isArray(t==null?void 0:t.members)?t.members:[],we=fe(ie,"Select loan officer…","No officers"),$e=fe(oe,"Select branch…","No branches"),X=n=>`TZS ${Number(n||0).toLocaleString(void 0,{maximumFractionDigits:0})}`;return r.jsxs("div",{className:u.container,children:[r.jsxs("div",{className:"mb-4 flex flex-wrap items-end justify-between gap-3",children:[r.jsxs("h1",{className:u.h1,children:["Group #",e,t!=null&&t.name?r.jsxs("span",{className:`ml-2 ${u.h1Muted}`,children:["• ",t.name]}):null]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>R(),className:u.btn,children:"Refresh"}),$?r.jsxs(r.Fragment,{children:[r.jsx("button",{disabled:M,onClick:ge,className:u.primary,children:M?"Saving…":"Save Changes"}),r.jsx("button",{onClick:()=>{b(!1),T({name:(t==null?void 0:t.name)||"",branchId:(t==null?void 0:t.branchId)||"",loanOfficerId:(t==null?void 0:t.loanOfficerId)||"",meetingDay:(t==null?void 0:t.meetingDay)||"",status:(t==null?void 0:t.status)||"active"})},className:u.btn,children:"Cancel"})]}):r.jsx("button",{onClick:()=>b(!0),className:u.primary,children:"Edit"})]})]}),x&&r.jsx("div",{className:`${u.card} px-4 py-3`,children:"Loading…"}),y&&r.jsx("div",{className:"rounded-2xl border-2 px-4 py-3",style:{borderColor:"var(--danger-border)",background:"var(--danger-bg)",color:"var(--danger-fg)"},children:y}),!x&&!y&&r.jsxs("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-3",children:[r.jsxs("section",{className:`${u.card} p-4`,children:[r.jsx("h3",{className:"mb-3 text-lg font-semibold",children:$?"Edit Group":"Overview"}),$?r.jsxs("div",{className:"grid gap-3",children:[r.jsx(F,{label:"Name",children:r.jsx("input",{className:u.input,value:N.name,onChange:n=>T({...N,name:n.target.value})})}),r.jsx(F,{label:"Branch",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:u.input,value:N.branchId,onChange:n=>T({...N,branchId:n.target.value===""?"":String(Number(n.target.value))}),children:[r.jsx("option",{value:"",children:$e}),H.map(n=>r.jsxs("option",{value:n.id,children:[n.name," (",n.id,")"]},n.id))]}),oe==="error"&&r.jsx("button",{type:"button",className:u.btn,onClick:()=>be(n=>n+1),children:"Retry"})]})}),r.jsx(F,{label:"Loan Officer",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{className:u.input,value:N.loanOfficerId,onChange:n=>T({...N,loanOfficerId:n.target.value}),children:[r.jsx("option",{value:"",children:we}),J.map(n=>r.jsx("option",{value:n.id,children:n.name},n.id))]}),ie==="error"&&r.jsx("button",{type:"button",className:u.btn,onClick:()=>xe(n=>n+1),children:"Retry"})]})}),r.jsx(F,{label:"Meeting Day",children:r.jsx("select",{className:u.input,value:N.meetingDay,onChange:n=>T({...N,meetingDay:n.target.value}),children:He.map(n=>r.jsx("option",{value:n,children:n||"—"},n||"_"))})}),r.jsx(F,{label:"Status",children:r.jsx("select",{className:u.input,value:N.status,onChange:n=>T({...N,status:n.target.value}),children:Je.map(n=>r.jsx("option",{value:n.value,children:n.label},n.value))})})]}):r.jsxs("ul",{className:"space-y-1 text-[15px]",children:[r.jsxs("li",{children:[r.jsx("b",{children:"Name:"})," ",(t==null?void 0:t.name)??"—"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Branch:"})," ",(t==null?void 0:t.branchName)??"—"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Officer:"})," ",(t==null?void 0:t.officerName)||(t!=null&&t.loanOfficerId?`#${t.loanOfficerId}`:"—")]}),r.jsxs("li",{children:[r.jsx("b",{children:"Meeting Day:"})," ",(t==null?void 0:t.meetingDay)||"—"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Status:"})," ",(t==null?void 0:t.status)||"active"]}),r.jsxs("li",{children:[r.jsx("b",{children:"Group Outstanding:"})," ",X(z.outstandingTotal)]})]})]}),r.jsxs("section",{className:`${u.card} p-4 lg:col-span-2`,children:[r.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Members"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("label",{className:u.btn,children:["Import CSV",r.jsx("input",{ref:V,type:"file",accept:".csv,text/csv",className:"hidden",onChange:Ne})]}),r.jsx("button",{className:u.btn,onClick:je,children:"Export CSV"})]})]}),r.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"flex-1",children:r.jsx(Ce,{value:G,onChange:(n,c)=>{const l=(c==null?void 0:c.item)??c??n;ae(l)},placeholder:"Add borrower…",onKeyDown:n=>{n.key==="Enter"&&G&&!q&&(n.preventDefault(),ue())}})}),r.jsx("button",{onClick:ue,disabled:!G||q,className:u.primary,children:q?"Adding…":"Add"})]}),r.jsx("div",{className:u.tableWrap,children:r.jsxs("table",{className:"min-w-full table-auto",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:u.th,children:"Borrower"}),r.jsx("th",{className:u.th,children:"Phone"}),r.jsx("th",{className:u.th,children:"Role"}),r.jsx("th",{className:u.th,children:"Outstanding"}),r.jsx("th",{className:u.th,children:"Actions"})]})}),r.jsx("tbody",{children:(Array.isArray(Q)?Q:[]).length===0?r.jsx("tr",{children:r.jsx("td",{className:u.td,colSpan:5,children:r.jsx("span",{className:u.muted,children:"No members yet."})})}):Q.map(n=>{var l;const c=((l=z.perBorrower)==null?void 0:l[String(n.id)])??0;return r.jsxs("tr",{children:[r.jsx("td",{className:u.td,children:r.jsx(Oe,{to:`/borrowers/${encodeURIComponent(n.id)}${f}`,className:"font-semibold underline decoration-2 underline-offset-2 hover:opacity-90 text-[var(--fg)]",children:n.name})}),r.jsx("td",{className:u.td,children:n.phone||"—"}),r.jsx("td",{className:u.td,children:n.role?r.jsx("span",{className:u.chip,children:String(n.role).toUpperCase()}):"—"}),r.jsx("td",{className:u.td,children:X(c)}),r.jsx("td",{className:u.td,children:r.jsx("button",{className:u.btn,onClick:()=>ve(n.id),children:"Remove"})})]},n.id)})}),Q.length>0&&r.jsx("tfoot",{children:r.jsxs("tr",{children:[r.jsx("td",{className:u.td,colSpan:3,children:r.jsx("b",{children:"Total Outstanding"})}),r.jsx("td",{className:u.td,children:r.jsx("b",{children:X(z.outstandingTotal)})}),r.jsx("td",{className:u.td})]})})]})})]})]})]})}function F({label:e,children:a}){return r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:u.label,children:e}),r.jsx("div",{className:"min-w-0",children:a})]})}export{et as default};
