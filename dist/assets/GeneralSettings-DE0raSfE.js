import{j as e,b as D}from"./index-Iq-s2r8X.js";import{u as L}from"./useSettingsResource-CzIaiQDZ.js";import{S as F}from"./settings-C9R5Qv2G.js";import"./index-IMUbBr-j.js";function G(){var c,j,f,v,N;const{data:s,setData:r,loading:o,saving:l,error:i,success:n,save:d}=L(F.getGeneral,F.saveGeneral,{company:{name:"MkopoSuite",email:"info@example.com",phone:"+255700000000",website:"https://example.com",address1:"",address2:"",city:"",country:"Tanzania",logoUrl:"",profileImageUrl:""},branding:{primaryColor:"#1d4ed8",secondaryColor:"#0ea5e9"},locale:{currency:"TZS",timezone:"Africa/Dar_es_Salaam",language:"en",currencyInWords:"Shillings",dateFormat:"dd/mm/yyyy"},numberFormats:{thousandSeparator:",",decimalSeparator:".",currencyPosition:"prefix"},dashboard:{landingWidgets:["kpis","recent-activity","collections"],showTicker:!0}}),p=async(a,t)=>{var C;if(!a)return;const m=new FormData;m.append("file",a);const x=((C=(await D.post("/uploads/image",m,{headers:{"Content-Type":"multipart/form-data"}})).data)==null?void 0:C.url)||"";r(k=>{var w;const S=structuredClone(k),y=t.split(".");let g=S;for(let b=0;b<y.length-1;b++)g=g[w=y[b]]||(g[w]={});return g[y.at(-1)]=x,S})};return o?e.jsx("div",{className:"p-4 text-sm text-slate-500",children:"Loading…"}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("header",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"General Settings"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Branding, company info, locale and formats."})]}),i&&e.jsx("div",{className:"bg-rose-50 text-rose-700 border border-rose-200 rounded-lg p-3 text-sm",children:i}),n&&e.jsx("div",{className:"bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg p-3 text-sm",children:n}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Company"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((c=s.company)==null?void 0:c.logoUrl)||"https://via.placeholder.com/80x80?text=Logo",alt:"Logo",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var t;return p((t=a.target.files)==null?void 0:t[0],"company.logoUrl")},className:"text-sm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Profile Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((j=s.company)==null?void 0:j.profileImageUrl)||"https://via.placeholder.com/80x80?text=Img",alt:"Profile",className:"w-16 h-16 rounded bg-slate-100 object-cover"}),e.jsx("input",{type:"file",accept:"image/*",onChange:a=>{var t;return p((t=a.target.files)==null?void 0:t[0],"company.profileImageUrl")},className:"text-sm"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[["Company Name","company.name","text","MkopoSuite"],["Email","company.email","email","info@example.com"],["Phone","company.phone","tel","+255700000000"],["Website","company.website","url","https://example.com"],["Address line 1","company.address1","text",""],["Address line 2","company.address2","text",""],["City","company.city","text",""],["Country","company.country","text","Tanzania"]].map(([a,t,m,h])=>e.jsx(I,{label:a,type:m,placeholder:h,value:P(s,t)||"",onChange:x=>u(r,t,x)},t))})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Branding"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(T,{label:"Primary Color",path:"branding.primaryColor",value:((f=s.branding)==null?void 0:f.primaryColor)||"#1d4ed8",onChange:a=>u(r,"branding.primaryColor",a)}),e.jsx(T,{label:"Secondary Color",path:"branding.secondaryColor",value:((v=s.branding)==null?void 0:v.secondaryColor)||"#0ea5e9",onChange:a=>u(r,"branding.secondaryColor",a)})]})]}),e.jsxs("section",{className:"bg-white dark:bg-slate-900 border rounded-2xl p-4 space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Locale & Formats"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[[["Currency","locale.currency","text","TZS"],["Currency in Words","locale.currencyInWords","text","Shillings"],["Timezone","locale.timezone","text","Africa/Dar_es_Salaam"],["Language","locale.language","text","en"],["Date Format","locale.dateFormat","text","dd/mm/yyyy"],["Thousand Separator","numberFormats.thousandSeparator","text",","],["Decimal Separator","numberFormats.decimalSeparator","text","."]].map(([a,t,m,h])=>e.jsx(I,{label:a,type:m,placeholder:h,value:P(s,t)??"",onChange:x=>u(r,t,x)},t)),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Currency Position"}),e.jsxs("select",{className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:((N=s.numberFormats)==null?void 0:N.currencyPosition)||"prefix",onChange:a=>u(r,"numberFormats.currencyPosition",a.target.value),children:[e.jsx("option",{value:"prefix",children:"Prefix (TZS 1,000)"}),e.jsx("option",{value:"suffix",children:"Suffix (1,000 TZS)"})]})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{className:"px-3 py-1.5 rounded bg-blue-600 text-white text-sm",disabled:l,onClick:()=>d(),children:l?"Saving…":"Save Changes"})})]})}function P(s,r){return r.split(".").reduce((o,l)=>o?o[l]:void 0,s)}function u(s,r,o){s(l=>{var p;const i=structuredClone(l),n=r.split(".");let d=i;for(let c=0;c<n.length-1;c++)d=d[p=n[c]]||(d[p]={});return d[n.at(-1)]=o,i})}function I({label:s,type:r="text",value:o,onChange:l,placeholder:i}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsx("input",{type:r,className:"mt-1 w-full rounded border px-3 py-2 text-sm",value:o,onChange:n=>l(n.target.value),placeholder:i})]})}function T({label:s,value:r,onChange:o}){return e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:s}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsx("input",{type:"color",className:"w-10 h-10 rounded border",value:r,onChange:l=>o(l.target.value)}),e.jsx("input",{type:"text",className:"flex-1 rounded border px-3 py-2 text-sm",value:r,onChange:l=>o(l.target.value),placeholder:"#1d4ed8"})]})]})}export{G as default};
